diff --git a/data/index.html b/data/index.html
deleted file mode 100644
index 1f9005b..0000000
--- a/data/index.html
+++ /dev/null
@@ -1,34 +0,0 @@
-<!DOCTYPE html>
-<html lang="en">
-
-<head>
-	<meta charset="UTF-8">
-	<meta name="viewport" content="width=device-width, initial-scale=1.0">
-	<meta http-equiv="X-UA-Compatible" content="ie=edge">
-	<title>Data Examples</title>
-	<link rel="stylesheet" type="text/css" href="../resources/main.css">
-	<link rel="icon" href="../resources/favicon.ico">
-</head>
-
-<body>
-		<header>
-				<a class="header-title" href="index.html">
-						<img class="header-title-logo" src="resources/ECON_116px.png">
-						<span class="header-title-text">Ericsson C3 Web examples</span>
-				</a>
-		</header>
-	<main>
-		<section>
-			<div class="about">
-				<ul>
-					<li><a href="fileDropShare.html" />File Drop Share</li><br/>					
-					<li><a href="sharedCursor.html" />Shared Cursor</li><br/>
-					<li><a href="shareInput.html" />Share Input</li><br/>
-					<li><a href="supportChat.html" />Support Chat</li><br/>
-				</ul>
-			</div>
-		</section>
-	</main>
-</body>
-
-</html>
\ No newline at end of file
diff --git a/experimental/index.html b/experimental/index.html
deleted file mode 100644
index c960ad8..0000000
--- a/experimental/index.html
+++ /dev/null
@@ -1,34 +0,0 @@
-<!DOCTYPE html>
-<html lang="en">
-
-<head>
-	<meta charset="UTF-8">
-	<meta name="viewport" content="width=device-width, initial-scale=1.0">
-	<meta http-equiv="X-UA-Compatible" content="ie=edge">
-	<title>Experimental Examples</title>
-	<link rel="stylesheet" type="text/css" href="../resources/main.css">
-	<link rel="icon" href="../resources/favicon.ico">
-</head>
-
-<body>
-		<header>
-				<a class="header-title" href="index.html">
-						<img class="header-title-logo" src="resources/ECON_116px.png">
-						<span class="header-title-text">Ericsson C3 Web examples</span>
-				</a>
-		</header>
-	<main>
-		<section>
-			<div class="about">
-				<ul>
-					<li><a href="audioMixer.html" />Audio Mixer</li><br/>					
-					<li><a href="conferenceCall.html" />Conference Call</li><br/>
-					<li><a href="multiClientConferenceCall.html" />Multi Client Confrence Call</li><br/>
-					<li><a href="proxyStream.html" />Proxy Stream</li><br/>
-				</ul>
-			</div>
-		</section>
-	</main>
-</body>
-
-</html>
\ No newline at end of file
diff --git a/resources/icon.png b/resources/icon.png
deleted file mode 100644
index dfc354c..0000000
Binary files a/resources/icon.png and /dev/null differ
diff --git a/screen-sharing/chrome-extension-ex/background.js b/screen-sharing/chrome-extension-ex/background.js
deleted file mode 100644
index 6a2d8f9..0000000
--- a/screen-sharing/chrome-extension-ex/background.js
+++ /dev/null
@@ -1,4 +0,0 @@
-'use strict'
-
-cct.startScreenSharing();
-cct.startTabSharing();
diff --git a/screen-sharing/chrome-extension-ex/chrome-extension.js b/screen-sharing/chrome-extension-ex/chrome-extension.js
deleted file mode 100644
index d772a8c..0000000
--- a/screen-sharing/chrome-extension-ex/chrome-extension.js
+++ /dev/null
@@ -1 +0,0 @@
-!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@cct/libcct")):"function"==typeof define&&define.amd?define(["@cct/libcct"],t):"object"==typeof exports?exports.cct=t(require("@cct/libcct")):e.cct=t(e.cct)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=257)}([function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(){this._defaultLogLevel=this.WARNING,this._categoryLevels={},this._logHandlers={}}function i(e,t){return function(n,r){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];v.a.string("log."+e,"category",n);if("string"!=typeof n)throw new TypeError("Log."+e+": category has to be a string");if(!((n in this._categoryLevels?this._categoryLevels[n]:this._defaultLogLevel)<t)){if("string"==typeof r)v.a.string("log."+e,"message",r);else{var s=r;v.a.object("log."+e,"object",s);var c=o,u=m()(c),d=u[0],l=u.slice(1);v.a.string("log."+e,"object message",d),r=s+" "+d,o=l}var f=this._logHandlers[e];f&&f.call.apply(f,[this,t,n,r].concat(p()(o)))}}}function o(e){log=e}function a(e,t,n){for(var r,i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(r=y[e]).call.apply(r,[console,"["+t+"] "+n].concat(o))}function s(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];if(this.color){var a;(a=y[e]).call.apply(a,[console,"%c["+t+"]%c "+n].concat(["color: "+w[e],"color:"],i))}else{var s;(s=y[e]).call.apply(s,[console,"["+t+"] "+n].concat(i))}}Object.defineProperty(t,"__esModule",{value:!0}),t.Log=r,t.setLog=o;var c,u,d=n(88),l=n.n(d),f=n(31),p=n.n(f),h=n(89),m=n.n(h),v=n(12),g=n(13);r.prototype.setLogHandler=function(e,t){if(arguments.length<=1&&(t=e,e=this.ALL),"number"!=typeof e)throw new TypeError("Log.setLogHandler: levels must be a number");if("function"!=typeof t&&t)throw new TypeError("Log.setLogHandler: handler must be a function");this.levels.forEach(function(n,r){1<<r&e&&(this._logHandlers[n]=t)}.bind(this))},r.prototype.setLogLevel=function(e,t){if(arguments.length<=1){if("number"!=typeof(t=e))throw new TypeError("Log.setLogLevel: level must be a number");this._defaultLogLevel=t}else{if("string"!=typeof e)throw new TypeError("Log.setLogLevel: category must be a string");if("number"!=typeof t)throw new TypeError("Log.setLogLevel: level must be a number");this._categoryLevels[e]=t}},r.prototype.levels=["error","warning","info","debug","verbose"],r.prototype.levels.forEach(function(e,t){var n=1<<t;r.prototype[e.toUpperCase()]=n,r.prototype[e]=i(e,n)}),r.prototype.NONE=0,r.prototype.ALL=r.prototype.levels.reduce(function(e,t,n){return e|1<<n},0);var log=new r;t.default=log;var y=(c={},l()(c,log.ERROR,(console.error||console.log).bind(console)),l()(c,log.WARNING,(console.warn||console.log).bind(console)),l()(c,log.INFO,(console.info||console.log).bind(console)),l()(c,log.DEBUG,(console.debug||console.log).bind(console)),l()(c,log.VERBOSE,console.log.bind(console)),c),w=(u={},l()(u,log.ERROR,"#F74333"),l()(u,log.WARNING,"#F79743"),l()(u,log.INFO,"#3343F7"),l()(u,log.DEBUG,"#43C733"),l()(u,log.VERBOSE,"#F743F7"),u);log.color=!1,log.colors=w;var b;b=g.isChrome||g.isFirefox?s:a,log.setLogHandler(log.ALL,b),log.defaultHandler=b},function(e,t,n){"use strict";t.__esModule=!0;var r=n(47),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){var r=n(54)("wks"),i=n(38),o=n(5).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports={default:n(101),__esModule:!0}},function(e,t,n){var r=n(5),i=n(0),o=n(18),a=n(16),s=function(e,t,n){var c,u,d,l=e&s.F,f=e&s.G,p=e&s.S,h=e&s.P,m=e&s.B,v=e&s.W,g=f?i:i[t]||(i[t]={}),y=g.prototype,w=f?r:p?r[t]:(r[t]||{}).prototype;f&&(n=t);for(c in n)(u=!l&&w&&void 0!==w[c])&&c in g||(d=u?w[c]:n[c],g[c]=f&&"function"!=typeof w[c]?n[c]:m&&u?o(d,r):v&&w[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):h&&"function"==typeof d?o(Function.call,d):d,h&&((g.virtual||(g.virtual={}))[c]=d,e&s.R&&y&&!y[c]&&a(y,c,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(96),o=r(i),a=n(62),s=r(a),c=n(33),u=r(c);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(33),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){var r=n(14),i=n(70),o=n(56),a=Object.defineProperty;t.f=n(11)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return function(t,n,r,i){if(void 0!==r&&null!==r)try{this[e](t,n,r,i)}catch(e){throw e.message+=" if present",e}return r}}function i(e,t,n,r){this.context=e,this.name=t,this.value=n,this.empty=r}function o(e){return function(t,n){if(!this.empty&&t in this.value&&void 0!==this.value[t]&&null!==this.value[t])try{this[e](t,n)}catch(e){throw e.message+=" if present",e}return this}}var a=n(33),s=n.n(a),c={count:function(e,t,n){if(t>n)throw new TypeError(e+" requires at least"+t+" arguments")},error:function(e,t,n){throw"object"===(void 0===e?"undefined":s()(e))&&(e=e.constructor&&e.constructor.name||"Unknown",e+=" constructor"),new TypeError(e+": argument '"+t+"' must "+n)},optObject:r("object"),object:function(e,t,n){return"object"!==(void 0===n?"undefined":s()(n))?this.error(e,t,"be an object"):null===n?this.error(e,t,"be an object, not null"):Array.isArray(n)?this.error(e,t,"be an object, not an array"):n instanceof RegExp&&this.error(e,t,"be an object, not a RegExp instance"),n},optInstance:r("instance"),instance:function(e,t,n,r){if(!r)throw new Error("Failed instance argument check for "+t+" in "+e+", constructor is "+r+".");if(Array.isArray(r)){if(!r.some(function(e){return n instanceof e})){var i=r.map(function(e){return e.name}).join(", ");this.error(e,t,"be an instance of any of "+i)}}else n instanceof r||this.error(e,t,"be an instance of "+r.name);return n},optFunc:r("func"),func:function(e,t,n){return"function"!=typeof n&&this.error(e,t,"be a function"),n},optArray:r("array"),array:function(e,t,n){return Array.isArray(n)||this.error(e,t,"be an array"),n},optString:r("string"),string:function(e,t,n){return"string"!=typeof n?this.error(e,t,"be a string"):""===n&&this.error(e,t,"not be an empty string"),n},optStringOrEmpty:r("string"),stringOrEmpty:function(e,t,n){return"string"!=typeof n&&this.error(e,t,"be a string"),n},optValues:r("values"),values:function(e,t,n,r){return-1===r.indexOf(n)&&this.error(e,t,"be one of "+r.join(", ")),n},optNumber:r("number"),number:function(e,t,n){return isNaN(n)?this.error(e,t,"not be NaN"):isFinite(n)?"number"!=typeof n&&this.error(e,t,"be a number"):this.error(e,t,"not be Infinite"),n},optBoolean:r("boolean"),boolean:function(e,t,n){return"boolean"!=typeof n&&this.error(e,t,"be a boolean"),n},options:function(e,t,n){return this.object(e,t,n),new i(e,t,n)},optOptions:function(e,t,n){if(void 0!==n)try{return this.options(e,t,n)}catch(e){throw e.message+=" if present",e}return new i(0,0,0,!0)}};t.a=c,i.prototype={optObject:o("object"),object:function(e){return this.empty||c.object(this.context,this.name+"."+e,this.value[e]),this},optInstance:o("instance"),instance:function(e,t){return this.empty||c.instance(this.context,this.name+"."+e,this.value[e],t),this},optFunc:o("func"),func:function(e){return this.empty||c.func(this.context,this.name+"."+e,this.value[e]),this},optArray:o("array"),array:function(e){return this.empty||c.array(this.context,this.name+"."+e,this.value[e]),this},optString:o("string"),string:function(e){return this.empty||c.string(this.context,this.name+"."+e,this.value[e]),this},optStringOrEmpty:o("stringOrEmpty"),stringOrEmpty:function(e){return this.empty||c.stringOrEmpty(this.context,this.name+"."+e,this.value[e]),this},optValues:o("values"),values:function(e,t){return this.empty||c.values(this.context,this.name+"."+e,this.value[e],t),this},optNumber:o("number"),number:function(e){return this.empty||c.number(this.context,this.name+"."+e,this.value[e]),this},optBoolean:o("boolean"),boolean:function(e){return this.empty||c.boolean(this.context,this.name+"."+e,this.value[e]),this}}},function(e,t,n){"use strict";function r(e,t,n){for(var r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e))return e[r];return null}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=0|e.length,r=0;r<n;r+=1)e[r]=t;return e}function o(e,t,n){var r=[];for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)&&r.push(e[i]);return r}function a(e,t,n){for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function s(e,t,n){var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r}function c(e,t,n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.call(n,e[i],i,e));return r}function u(e){if(!e)return[];if(Array.isArray(e))throw new TypeError("tried to call utils.values() on array");return Ce()(e).map(function(t){return e[t]})}function d(e,t){var n=new be.a(e),r=new be.a(t),i=[],o=[];return n.forEach(function(e){r.has(e)||o.push(e)}),r.forEach(function(e){n.has(e)||i.push(e)}),[i,o]}function l(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e[n];return t}function f(e,t,n){ye()(e,t,{enumerable:!1,configurable:!0,writable:!1,value:n})}function p(e,t,n){ye()(e,t,{enumerable:!0,configurable:!1,writable:!1,value:n})}function h(e,t,n){ye()(e,t,{enumerable:!0,configurable:!1,get:n})}function m(e,t,n){1===arguments.length?(t=e,e=0,n=1):2===arguments.length&&(n=1);for(var r=[],i=e;i<t;i+=n)r.push(i);return r}function v(){var e={};return e.promise=new ve.a(function(t,n){e.resolve=t,e.reject=n}),e}function g(e,t){if(!e)return null;var n,r={};if(t)for(var i in t)n=t[i],r[n]=e[n];else for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function y(e,t,n){if(!e)return null;if(!t)return e;var r;if(n)for(var i in n)r=n[i],e[r]=t[r];else for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function w(e){return function(){var t=arguments;return new ve.a(function(n){setTimeout(function(){n.apply(null,t)},e)})}}function b(e){var t,n,r=null,i=U(Y,"crypto");if(i&&window.Uint8Array)r=new window.Uint8Array(e),i.getRandomValues(r);else for(t=(new Date).getTime(),r=[],n=0;n<e;n+=1)r[n]=Math.random()*t&255;return S(String.fromCharCode.apply(null,r)).replace(/\-_/g,"").slice(0,e)}function _(e){var t=window.crypto&&window.crypto.subtle;return t&&t.digest?t.digest("SHA-1",e):ve.a.resolve(null)}function C(e){return atob(e)}function S(e){return btoa(e)}function T(e){return C(e.replace(/[-_]/g,R))}function E(e){return S(e).replace(/[+\/=]/g,P)}function P(e){switch(e){case"+":return"-";case"/":return"_"}return""}function R(e){switch(e){case"-":return"+";case"_":return"/"}return""}function x(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=e.length,i=0;i<r;i+=1)n[i]=e.charCodeAt(i);return t}function k(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=e.length,i=0;i<r;i+=1)n[i]=e.charCodeAt(i);return t}function I(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096,n=e.length,r="",i=0;i<n;i+=t)r+=String.fromCharCode.apply(null,e.subarray(i,i+t));return r}function O(e){return I(new Uint8Array(e.buffer||e,e.byteOffset,e.byteLength))}function M(e){return I(new Uint16Array(e.buffer||e,e.byteOffset,e.byteLength>>1))}function D(e){var t=e.split(/:|;|,/g);if("data"!==t[0])throw new Error("invalid data uri: "+e.slice(0,100));if("base64"!==t[2])throw new Error("invalid data uri: "+e.slice(0,100));return{mimeType:t[1],binaryString:C(t[3])}}function A(e){var t=new FileReader;return new ve.a(function(n,r){t.onload=function(){n(t.result)},t.onerror=r,t.readAsArrayBuffer(e)})}function j(e,t,n){var r=new Blob([e],{type:n});return r.name=t,r.lastModifiedDate=new Date,r}function L(e){var t=new Uint8Array(e);return Array.prototype.map.call(t,function(e){return("00"+e.toString(16)).slice(-2)}).join("")}function N(e){if(e.length%2!=0)throw new TypeError("hexToBuffer: hex length must be even");for(var t=new Uint8Array(e.length/2),n=0;e.substr(n,2);n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t}function W(e){var t=0;for(var n in e)t+=e[n].byteLength;var r=new Uint8Array(t),i=0;for(var o in e){var a=new Uint8Array(e[o]);r.set(a,i),i+=a.byteLength}return r}function U(e,t){var n=t[0].toUpperCase()+t.slice(1),r=e[t]||e["moz"+n]||e["webkit"+n]||e["ms"+n];return r?"function"==typeof r?r.bind(e):r:null}function F(e,t){if(Y){var n=Y.__C3_SDK_INSTANCES__[e];n?-1===n.indexOf(t)&&n.push(t):Y.__C3_SDK_INSTANCES__[e]=[t],Y.__C3_SDK_INSTANCES__.listeners.forEach(function(n){n("added",e,t)})}}function B(e,t){if(Y){var n=Y.__C3_SDK_INSTANCES__[e],r=n.indexOf(t);-1!==r&&n.splice(r,1),Y.__C3_SDK_INSTANCES__.listeners.forEach(function(n){n("removed",e,t)})}}function G(e){for(var t=[G],n=arguments.length,r=1;r<n;r+=1)t[r]=arguments[r];var i=he()(e.prototype);return e.apply(i,t),i}function V(e,t){if(G!==t)throw new TypeError(e+": cannot be used as a constructor")}function z(e){return!("object"!==(void 0===e?"undefined":fe()(e))||null===e||Array.isArray(e)||e instanceof RegExp)}function H(e){}function q(e){return isNaN(e)?e:Number(e)%1==0?parseInt(e):parseFloat(e)}function J(e){for(var t=e.length,n=e.length-1;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function $(e,t){var n=[],r=0;return function(i){function o(){r=0;try{t(n)}catch(e){console.error("error in timed buffer callback: "+e)}n=[]}n.push(i),r||(r=setTimeout(o,e))}}function K(e,t){return function(n){if(t){var r=new Error("Error in "+t+": "+n.message);r.reason=n,e(r)}else e(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.find=r,t.fill=i,t.filter=o,t.forEach=a,t.map=s,t.mapValues=c,t.values=u,t.diff=d,t.toArray=l,t.hiddenProp=f,t.prop=p,t.getter=h,t.range=m,t.defer=v,t.shallowCopy=g,t.assign=y,t.wait=w,t.randomString=b,t.arrayBufferSha1IfSupported=_,t.base64ToUtf8=C,t.utf8ToBase64=S,t.urlSafeBase64ToUtf8=T,t.utf8ToUrlSafeBase64=E,t.binaryStringToArrayBuffer=x,t.unicodeStringToArrayBuffer=k,t.arrayBufferToBinaryString=O,t.arrayBufferToUnicodeString=M,t.parseDataUri=D,t.blobToArrayBuffer=A,t.bufferToFile=j,t.bufferToHex=L,t.hexToBuffer=N,t.concatenateArrayBuffers=W,t.noVendor=U,t.registerInstance=F,t.unregisterInstance=B,t.priv=G,t.assertPriv=V,n.d(t,"isFirefox",function(){return Se}),n.d(t,"isChrome",function(){return Ee}),n.d(t,"browser",function(){return Pe}),n.d(t,"isIE",function(){return Re}),t.isObject=z,t.notInNode=H,t.maybeConvertStringToNumber=q,t.getStringByteLength=J,n.d(t,"ReadOnlyMap",function(){return xe}),n.d(t,"ReadOnlySet",function(){return ke}),t.createTimedBuffer=$,t.errorForwarder=K;var Y,Z=n(32),X=n.n(Z),Q=n(6),ee=n.n(Q),te=n(1),ne=n.n(te),re=n(3),ie=n.n(re),oe=n(9),ae=n.n(oe),se=n(69),ce=n.n(se),ue=n(8),de=n.n(ue),le=n(33),fe=n.n(le),pe=n(62),he=n.n(pe),me=n(23),ve=n.n(me),ge=n(47),ye=n.n(ge),we=n(45),be=n.n(we),_e=n(64),Ce=n.n(_e);(Y=window)&&(Y.__C3_SDK_INSTANCES__={listeners:new be.a,addListener:function(e){this.listeners.add(e)},removeListener:function(e){this.listeners.delete(e)}});var Se=/firefox/i.test("undefined"!=typeof navigator&&navigator.userAgent),Te=/google inc/i.test("undefined"!=typeof navigator&&navigator.vendor),Ee=Te&&/chrome/i.test("undefined"!=typeof navigator&&navigator.userAgent),Pe=Ee?"chrome":Se?"firefox":"other",Re=!!Y.document&&!!Y.document.documentMode,xe=function(e){function t(){ne()(this,t);var e=ae()(this,(t.__proto__||ee()(t)).call(this));if(arguments.length)throw new TypeError("ReadOnlyMap does not support constructor arguments");return e}return de()(t,e),ie()(t,[{key:"set",value:function(){throw new TypeError("Map is read-only")}},{key:"delete",value:function(){throw new TypeError("Map is read-only")}},{key:"clear",value:function(){throw new TypeError("Map is read-only")}},{key:"_set",value:function(e,n){return ce()(t.prototype.__proto__||ee()(t.prototype),"set",this).call(this,e,n)}},{key:"_delete",value:function(e){return ce()(t.prototype.__proto__||ee()(t.prototype),"delete",this).call(this,e)}},{key:"_clear",value:function(){return ce()(t.prototype.__proto__||ee()(t.prototype),"clear",this).call(this)}}]),t}(X.a),ke=function(e){function t(){ne()(this,t);var e=ae()(this,(t.__proto__||ee()(t)).call(this));if(arguments.length)throw new TypeError("ReadOnlySet does not support constructor arguments");return e}return de()(t,e),ie()(t,[{key:"add",value:function(){throw new TypeError("Set is read-only")}},{key:"delete",value:function(){throw new TypeError("Set is read-only")}},{key:"clear",value:function(){throw new TypeError("Set is read-only")}},{key:"_add",value:function(e){return ce()(t.prototype.__proto__||ee()(t.prototype),"add",this).call(this,e)}},{key:"_delete",value:function(e){return ce()(t.prototype.__proto__||ee()(t.prototype),"delete",this).call(this,e)}},{key:"_clear",value:function(){return ce()(t.prototype.__proto__||ee()(t.prototype),"clear",this).call(this)}}]),t}(be.a)},function(e,t,n){var r=n(17);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(67),i=n(35);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(10),i=n(27);e.exports=n(11)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(63);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(t,n){t.exports=e},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(117)(!0);n(50)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){e.exports={default:n(136),__esModule:!0}},function(e,t){e.exports={}},function(e,t,n){var r=n(77),i=n(49);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(35);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(10).f,i=n(19),o=n(4)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(120);for(var r=n(5),i=n(16),o=n(24),a=n(4)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var u=s[c],d=r[u],l=d&&d.prototype;l&&!l[a]&&i(l,a,u),o[u]=o.Array}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(79),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){e.exports={default:n(134),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(94),o=r(i),a=n(87),s=r(a),c="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===c(o.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":c(e)}},function(e,t,n){"use strict";function r(e){return"Listener leak: added more than "+e+" listeners for a single event.  This limit can be changed by setting the LISTENER_LIMIT property on the emitter object."}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return 0===arguments.length?C()(this,I):function(e){function t(){return h()(this,t),y()(this,(t.__proto__||f()(t)).apply(this,arguments))}return b()(t,e),v()(t,[{key:"_listeners",value:function(){return this.__listeners||(this.__listeners=new d.a),this.__listeners}},{key:"on",value:function(e,t){x.a.count("EventEmitter.on",2,arguments.length),x.a.string("EventEmitter.on","eventType",e),x.a.func("EventEmitter.on","listener",t);var n=this._listeners().get(e),i=this.constructor._deprecatedEvents&&this.constructor._deprecatedEvents[e];i&&R.default.warning("deprecated",i("on")),n||(n=[],this._listeners().set(e,n));var o={remaining:-1,func:t};n.iterating?(n.pending||(n.pending=[]),n.pending.push(o)):n.push(o);var a=this.LISTENER_LIMIT;return a="number"==typeof a?a:k,n.length>a&&R.default.warning("emitter",r(a),this),this}},{key:"once",value:function(e,t){var n=this;x.a.count("EventEmitter.once",1,arguments.length),x.a.string("EventEmitter.once","eventType",e),x.a.optFunc("EventEmitter.once","listener",t);var i=this.constructor._deprecatedEvents&&this.constructor._deprecatedEvents[e];if(i&&R.default.warning("deprecated",i("once")),t){var o=(this._listeners().get(e)||[]).concat({remaining:1,func:t});this._listeners().set(e,o);var a=this._listeners().get(e).length,s=this.LISTENER_LIMIT;return s="number"==typeof s?s:k,a>s&&R.default.warning("emitter",r(s),this),this}return new c.a(function(t){var r=(n._listeners().get(e)||[]).concat({remaining:1,func:t});n._listeners().set(e,r)})}},{key:"off",value:function(e,t){x.a.count("EventEmitter.off",1,arguments.length),x.a.string("EventEmitter.off","eventType",e),x.a.func("EventEmitter.off","listener",t);var n=this.constructor._deprecatedEvents&&this.constructor._deprecatedEvents[e];n&&R.default.warning("deprecated",n("off"));var r,i;if(r=this._listeners().get(e))for(i=0;i<r.length;i+=1)if(r[i].func===t){if(r.iterating){if(0===r[i].remaining)continue;r[i].remaining=0}else r.splice(i,1);return this}return this}},{key:"_clearListeners",value:function(e){e?this._listeners().delete(e):this._listeners().clear()}},{key:"_getListeners",value:function(e){return x.a.count("EventEmitter.listeners",1,arguments.length),x.a.string("EventEmitter.listeners","eventType",e),(this._listeners().get(e)||[]).filter(function(e){return e.remaining}).map(function(e){return e.func})}},{key:"_emit",value:function(e){var t=e.eventType||e,n=e.defaultHandler,r=this._listeners().get(t);if(r||n){var i,o=[];for(i=1;i<arguments.length;i+=1)o[i-1]=arguments[i];if(!r)return void n.apply(this,o);var s=!1;for(r.iterating=!0,i=0;i<r.length;i+=1){var c=r[i];if(0!==c.remaining){c.remaining>0&&(c.remaining-=1);try{c.func.apply(this,o),s=!0}catch(e){R.default.error("emitter","Error in event listener, "+e+" "+(e.stack?e.stack+"\n":""))}}}for(r.iterating=!1,i=r.length-1;i>=0;i-=1)0===r[i].remaining&&r.splice(i,1);r.pending&&(r.push.apply(r,a()(r.pending)),delete r.pending),!s&&n&&n.apply(this,o)}}}]),t}(e)}var o=n(31),a=n.n(o),s=n(23),c=n.n(s),u=n(32),d=n.n(u),l=n(6),f=n.n(l),p=n(1),h=n.n(p),m=n(3),v=n.n(m),g=n(9),y=n.n(g),w=n(8),b=n.n(w),_=n(163),C=n.n(_),S=n(169),T=n.n(S),E=n(62),P=n.n(E),R=n(2),x=n(12),k=10,I=function(){var e=i(null),t=P()(null);return T()(e.prototype).forEach(function(n){"constructor"!==n&&(t[n]=e.prototype[n])}),t}();t.a=i},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(14),i=n(95),o=n(49),a=n(53)("IE_PROTO"),s=function(){},c=function(){var e,t=n(60)("iframe"),r=o.length;for(t.style.display="none",n(83).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(155),o=r(i),a=n(152),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=(0,s.default)(e);!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){var r=n(18),i=n(73),o=n(71),a=n(14),s=n(37),c=n(65),u={},d={},t=e.exports=function(e,t,n,l,f){var p,h,m,v,g=f?function(){return e}:c(e),y=r(n,l,t?2:1),w=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>w;w++)if((v=t?y(a(h=e[w])[0],h[1]):y(e[w]))===u||v===d)return v}else for(m=g.call(e);!(h=m.next()).done;)if((v=i(m,y,h.value,t))===u||v===d)return v};t.BREAK=u,t.RETURN=d},function(e,t){e.exports=!0},function(e,t){},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(30),i=n(4)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(103),__esModule:!0}},function(e,t,n){var r=n(7),i=n(0),o=n(21);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(99),__esModule:!0}},function(e,t,n){e.exports={default:n(148),__esModule:!0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r=n(41),i=n(7),o=n(78),a=n(16),s=n(19),c=n(24),u=n(114),d=n(28),l=n(76),f=n(4)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,m,v,g,y){u(n,t,m);var w,b,_,C=function(e){if(!p&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",T="values"==v,E=!1,P=e.prototype,R=P[f]||P["@@iterator"]||v&&P[v],x=R||C(v),k=v?T?C("entries"):x:void 0,I="Array"==t?P.entries||R:R;if(I&&(_=l(I.call(new e)))!==Object.prototype&&(d(_,S,!0),r||s(_,f)||a(_,f,h)),T&&R&&"values"!==R.name&&(E=!0,x=function(){return R.call(this)}),r&&!y||!p&&!E&&P[f]||a(P,f,x),c[t]=x,c[S]=h,v)if(w={values:T?x:C("values"),keys:g?x:C("keys"),entries:k},y)for(b in w)b in P||o(P,b,w[b]);else i(i.P+i.F*(p||E),t,w);return w}},function(e,t,n){var r=n(38)("meta"),i=n(17),o=n(19),a=n(10).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(21)(function(){return c(Object.preventExtensions({}))}),d=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},l=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[r].w},p=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&d(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:l,getWeak:f,onFreeze:p}},function(e,t,n){var r=n(43),i=n(27),o=n(15),a=n(56),s=n(19),c=n(70),u=Object.getOwnPropertyDescriptor;t.f=n(11)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(54)("keys"),i=n(38);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(5),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(17);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(5),i=n(0),o=n(41),a=n(58),s=n(10).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){t.f=n(4)},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(17),i=n(5).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(16);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){e.exports={default:n(98),__esModule:!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports={default:n(135),__esModule:!0}},function(e,t,n){var r=n(44),i=n(4)("iterator"),o=n(24);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";function r(e){return!!e&&(x?e instanceof x:e.id&&e.addTrack&&e.getTracks)}function webRtcReady(e){return new C.a(function(t){T.a?T.a.webRTCReady(function(){t(e)}):t(e)})}function i(e,t){if(P.isFirefox){var n=e._streamsPendingRemoval;n&&n.has(t)&&n.delete(t)}e.addStream(t)}function o(e,t){function n(){var r=e.signalingState;-1!==I.indexOf(r)&&(e.removeEventListener("signalingstate",n),t())}e.addEventListener("signalingstate",n)}function a(e,t){t.forEach(function(t){var r=n.i(P.find)(e.getSenders(),function(e){return e.track===t});r?e.removeTrack(r):E.default.debug("webrtc-utils","Failed to remove track '"+t+"' form peer connection, no sender found.")})}function s(e,t){var n=e.signalingState;if(P.isFirefox&&-1===I.indexOf(n)){E.default.info("webrtc-utils","delaying removeTrack since we're not in a stable state");var r=e._streamsPendingRemoval;return r||(r=new b.a,e._streamsPendingRemoval=r,o(e,function(){var t=e._streamsPendingRemoval;E.default.info("webrtc-utils","stable state reached, removing streams: "+t),t.forEach(function(t){return s(e,t)})})),void r.add(t)}if(e.removeStream)try{e.removeStream(t)}catch(n){if("NotSupportedError"!==n.name)throw n;a(e,t.getTracks())}else a(e,t.getTracks())}function c(e){this.nodes=e||[]}function u(){this._references=0,this._context=null}function d(e){if(e._blobId&&0===e._blobId.indexOf("MediaStream_")){var t=e.id,n=t.split("-");return 2===n.length?n[0]:6===n.length?n[0]:10===n.length?n.slice(0,5).join("-"):(E.default.warning("media-stream–id","unexpected cordova media stream id: "+e.id),e.id)}return e.id}function l(e,t){return e[d(t)]=t,e}function f(e,t){var r=[].concat(y()(e)).reduce(l,{}),i=[].concat(y()(t)).reduce(l,{}),o=v()(r),a=v()(i),s=n.i(P.diff)(o,a),c=h()(s,2),u=c[0],d=c[1];return[u.map(function(e){return i[e]}),d.map(function(e){return r[e]})]}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"isWebRtcPlugin",function(){return R}),n.d(t,"MediaStream",function(){return x}),n.d(t,"AudioContext",function(){return k}),t.isMediaStream=r,t.webRtcReady=webRtcReady,t.addPeerConnectionStream=i,t.removePeerConnectionStream=s,t.BinaryTree=c,n.d(t,"audioContextUtil",function(){return O}),t.getMediaStreamId=d,t.streamDiff=f;var p=n(39),h=n.n(p),m=n(64),v=n.n(m),g=n(31),y=n.n(g),w=n(45),b=n.n(w),_=n(23),C=n.n(_),S=n(205),T=n.n(S);n.d(t,"AdapterJS",function(){return T.a});var E=n(2),P=n(13),R="plugin"===window.webrtcDetectedType,x=n.i(P.noVendor)(window,"MediaStream"),k=n.i(P.noVendor)(window,"AudioContext"),I=["stable","closed"];c.prototype={constructor:c,tag:"binary-tree",toString:function(){return"binaryTree{nodes="+this.nodes+"}"},root:function(){return this.nodes[0]},parent:function(e){var t=this.nodes.indexOf(e),n=Math.floor((t-1)/2);return this.nodes[n]},left:function(e){var t=this.nodes.indexOf(e),n=2*t+1;return this.nodes[n]},right:function(e){var t=this.nodes.indexOf(e),n=2*t+2;return this.nodes[n]}},u.MAX_REFERENCES=32,u.prototype={constructor:u,tag:"audio-context-util",toString:function(){return"audio-context-util{references="+this._references+", context="+this._context+"}"},get:function(){return this._references+=1,this._references>u.MAX_REFERENCES&&E.default.warning(this.tag,"Too many audioContext references, possible leak."),this._context||(this._context=new k),this._context},release:function(){if(0===this._references)return void E.default.error(this.tag,"audioContext was dereferenced too many times.");1===this._references&&(this._context.close(),this._context=null),this._references-=1}};var O=new u},function(e,t,n){var r=n(30);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(6),o=r(i),a=n(93),s=r(a);t.default=function e(t,n,r){null===t&&(t=Function.prototype);var i=(0,s.default)(t,n);if(void 0===i){var a=(0,o.default)(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var c=i.get;if(void 0!==c)return c.call(r)}},function(e,t,n){e.exports=!n(11)&&!n(21)(function(){return 7!=Object.defineProperty(n(60)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(24),i=n(4)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(30);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(14);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(77),i=n(49).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(19),i=n(26),o=n(53)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(19),i=n(15),o=n(108)(!1),a=n(53)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){e.exports=n(16)},function(e,t,n){e.exports={default:n(97),__esModule:!0}},function(e,t,n){"use strict";var r=n(10).f,i=n(36),o=n(61),a=n(18),s=n(59),c=n(35),u=n(40),d=n(50),l=n(74),f=n(85),p=n(11),h=n(51).fastKey,m=p?"_s":"size",v=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,d){var l=e(function(e,r){s(e,l,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&u(r,n,e[d],e)});return o(l.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var t=this,n=v(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[m]--}return!!n},forEach:function(e){s(this,l,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!v(this,e)}}),p&&r(l.prototype,"size",{get:function(){return c(this[m])}}),l},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){d(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){var r=n(44),i=n(107);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";var r=n(5),i=n(7),o=n(51),a=n(21),s=n(16),c=n(61),u=n(40),d=n(59),l=n(17),f=n(28),p=n(10).f,h=n(109)(0),m=n(11);e.exports=function(e,t,n,v,g,y){var w=r[e],b=w,_=g?"set":"add",C=b&&b.prototype,S={};return m&&"function"==typeof b&&(y||C.forEach&&!a(function(){(new b).entries().next()}))?(b=t(function(t,n){d(t,b,e,"_c"),t._c=new w,void 0!=n&&u(n,g,t[_],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in C&&(!y||"clear"!=e)&&s(b.prototype,e,function(n,r){if(d(this,b,e),!t&&y&&!l(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),"size"in C&&p(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(t,e,g,_),c(b.prototype,n),o.NEED=!0),f(b,e),S[e]=b,i(i.G+i.W+i.F,S),y||v.setStrong(b,e,g),b}},function(e,t,n){e.exports=n(5).document&&document.documentElement},function(e,t,n){var r=n(4)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(0),o=n(10),a=n(11),s=n(4)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";n.d(t,"b",function(){return E}),n.d(t,"c",function(){return P});var r=n(69),i=n.n(r),o=n(6),a=n.n(o),s=n(9),c=n.n(s),u=n(8),d=n.n(u),l=n(45),f=n.n(l),p=n(1),h=n.n(p),m=n(3),v=n.n(m),g=n(2),y=n(12),w=n(13),b=n(131),_=n(149),C=n(92),S="media-node",MediaNode=function(){function MediaNode(){h()(this,MediaNode),this[C.a]=new f.a,this[C.b]=new f.a}return v()(MediaNode,[{key:"toString",value:function(){var e=this.constructor.name;return(e?e[0].toLowerCase()+e.slice(1):"_mediaNode")+"{io="+this[C.a].size+"/"+this[C.b].size+"}"}},{key:C.c,get:function(){return!0}}],[{key:"connect",value:function(e,t){y.a.object(e.constructor.name+".connect","output",e),t instanceof HTMLElement||y.a.object(e.constructor.name+".connect","input",t),e=_.a.resolve(e),e.connect(t)}},{key:"disconnect",value:function(e,t){y.a.object(e.constructor.name+".connect","output",e),t instanceof HTMLElement||y.a.optObject(e.constructor.name+".connect","input",t),e=_.a.resolve(e),e.disconnect(t)}},{key:"connectMixin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return function(e){function t(){return h()(this,t),c()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),v()(t,[{key:"connect",value:function(e){MediaNode.connect(this,e)}},{key:"disconnect",value:function(e){MediaNode.disconnect(this,e)}}]),t}(e)}}]),MediaNode}();t.a=MediaNode;var T=function(e){function t(e){var n=e.parent,r=e.portConstructor,i=e.onStream,o=e.onCreate,s=e.onDetach;h()(this,t);var u=c()(this,(t.__proto__||a()(t)).call(this));return y.a.object(u.constructor.name+" constructor","parent",n),y.a.func(u.constructor.name+" constructor","portConstructor",r),u._parent=n,u._portConstructor=r,u._onStream=i,u._onCreate=o,u._onDetach=s,u}return d()(t,e),v()(t,[{key:"get",value:function(e){var n=this;y.a.string(this.constructor.name+".get","key",e);var r=i()(t.prototype.__proto__||a()(t.prototype),"get",this).call(this,e);if(!r){try{var o={name:e,parent:this._parent};this._onStream&&(o.onStream=function(t,r){return n._onStream(e,t,r)}),r=new this._portConstructor(o)}catch(e){var s=new Error("Error thrown in "+this._portConstructor.name+" constructor, "+e);throw s.reason=e,s}if(i()(t.prototype.__proto__||a()(t.prototype),"_set",this).call(this,e,r),this._onCreate)try{this._onCreate(r)}catch(s){g.default.error(S,"Error thrown in "+this.constructor.name+".onCreate: "+s)}}return r}},{key:"delete",value:function(e){y.a.string(this.constructor.name+".delete","key",e);var n=i()(t.prototype.__proto__||a()(t.prototype),"get",this).call(this,e);if(n){if(i()(t.prototype.__proto__||a()(t.prototype),"_delete",this).call(this,e),n.detach(),this._onDetach)try{this._onDetach(n)}catch(e){g.default.error(S,"Error thrown in "+this.constructor.name+".onDetach: "+e)}return!0}return!1}},{key:"clear",value:function(){var e=this;i()(t.prototype.__proto__||a()(t.prototype),"forEach",this).call(this,function(t,n){e.delete(n)})}}]),t}(w.ReadOnlyMap),E=function(e){function t(e){var n=e.inputConstructor,r=void 0===n?b.a:n,i=e.parent,o=e.onStream,s=e.onCreate,u=e.onDetach;return h()(this,t),y.a.optFunc("InputMap constructor","onStream",o),o||(o=function(){return i.onStream.apply(i,arguments)}),c()(this,(t.__proto__||a()(t)).call(this,{portConstructor:r,parent:i,onStream:o,onCreate:s,onDetach:u}))}return d()(t,e),t}(T),P=function(e){function t(e){var n=e.outputConstructor,r=void 0===n?_.a:n,i=e.parent,o=e.onCreate,s=e.onDetach;return h()(this,t),c()(this,(t.__proto__||a()(t)).call(this,{portConstructor:r,parent:i,onCreate:o,onDetach:s}))}return d()(t,e),t}(T)},function(e,t,n){e.exports={default:n(104),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(47),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(79),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return Array.isArray(e)?e:(0,i.default)(e)}},function(e,t,n){var r,i,o,a=n(18),s=n(137),c=n(83),u=n(60),d=n(5),l=d.process,f=d.setImmediate,p=d.clearImmediate,h=d.MessageChannel,m=0,v={},g=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},y=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete v[e]},"process"==n(30)(l)?r=function(e){l.nextTick(a(g,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=y,r=a(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",y,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:f,clear:p}},function(e,t,n){var r=n(15),i=n(75).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){"use strict";function isMediaNode(e){return!(!e||!e[b])}function r(e){if(w.isWebRtcPlugin)throw new Error(e.constructor.name+" is not supported when using a WebRTC plugin")}function i(e){return navigator.getUserMedia?T.push(function(){return new a.a(function(t,n){return navigator.getUserMedia(e,function(e){e?t(e):n(new y.b("Received a null media stream"))},function(e){var t;if(-1!==E.indexOf(e.name))t=new y.c(e.message);else if(-1!==R.indexOf(e.name)){var r=e.message;r||(r=e.constraint?"media constraint '"+e.constraint+"' could not be satisfied":"media constraints could not be satisfied"),t=new S(r)}else t=-1!==P.indexOf(e.name)?new y.b(e.message):new y.d(e.message);t.reason=e,n(t)})})}):a.a.reject(new Error("no getUserMedia found"))}n.d(t,"c",function(){return b}),n.d(t,"a",function(){return _}),n.d(t,"b",function(){return C}),t.d=isMediaNode,t.e=r,t.f=i;var o=n(23),a=n.n(o),s=n(6),c=n.n(s),u=n(1),d=n.n(u),l=n(9),f=n.n(l),p=n(8),h=n.n(p),m=n(87),v=n.n(m),g=n(160),y=n(145),w=n(66),b=v()("media-node"),_=v()("inputs"),C=v()("outputs"),S=function(e){function t(){return d()(this,t),f()(this,(t.__proto__||c()(t)).apply(this,arguments))}return h()(t,e),t}(y.a);S.errorName="OverconstrainedError";var T=new g.a,E=["SecurityError","NotAllowedError","PermissionDeniedError","PermissionDismissedError"],P=["NotFoundError","DevicesNotFoundError"],R=["OverconstrainedError","ConstraintNotSatisfiedError"]},function(e,t,n){e.exports={default:n(100),__esModule:!0}},function(e,t,n){e.exports={default:n(105),__esModule:!0}},function(e,t,n){var r=n(10),i=n(14),o=n(25);e.exports=n(11)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){e.exports={default:n(102),__esModule:!0}},function(e,t,n){n(22),n(119),e.exports=n(0).Array.from},function(e,t,n){n(121);var r=n(0).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){n(122);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){n(123);var r=n(0).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){n(124),e.exports=n(0).Object.getPrototypeOf},function(e,t,n){n(125),e.exports=n(0).Object.setPrototypeOf},function(e,t,n){n(42),n(22),n(29),n(126),n(128),e.exports=n(0).Set},function(e,t,n){n(127),n(42),n(129),n(130),e.exports=n(0).Symbol},function(e,t,n){n(22),n(29),e.exports=n(58).f("iterator")},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(40);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(15),i=n(37),o=n(118);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),d=o(a,u);if(e&&n!=n){for(;u>d;)if((s=c[d++])!=s)return!0}else for(;u>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var r=n(18),i=n(67),o=n(26),a=n(37),s=n(111);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,d=4==e,l=6==e,f=5==e||l,p=t||s;return function(t,s,h){for(var m,v,g=o(t),y=i(g),w=r(s,h,3),b=a(y.length),_=0,C=n?p(t,b):c?p(t,0):void 0;b>_;_++)if((f||_ in y)&&(m=y[_],v=w(m,_,g),e))if(n)C[_]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:C.push(m)}else if(d)return!1;return l?-1:u||d?d:C}}},function(e,t,n){var r=n(17),i=n(72),o=n(4)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(110);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(10),i=n(27);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(25),i=n(68),o=n(43);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){"use strict";var r=n(36),i=n(27),o=n(28),a={};n(16)(a,n(4)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(25),i=n(15);e.exports=function(e,t){for(var n,o=i(e),a=r(o),s=a.length,c=0;s>c;)if(o[n=a[c++]]===t)return n}},function(e,t,n){var r=n(17),i=n(14),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(18)(Function.call,n(52).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){var r=n(55),i=n(35);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){var r=n(55),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(18),i=n(7),o=n(26),a=n(73),s=n(71),c=n(37),u=n(112),d=n(65);i(i.S+i.F*!n(84)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,l,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,y=d(f);if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==y||p==Array&&s(y))for(t=c(f.length),n=new p(t);t>g;g++)u(n,g,v?m(f[g],g):f[g]);else for(l=y.call(f),n=new p;!(i=l.next()).done;g++)u(n,g,v?a(l,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(106),i=n(74),o=n(24),a=n(15);e.exports=n(50)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(7);r(r.S,"Object",{create:n(36)})},function(e,t,n){var r=n(7);r(r.S+r.F*!n(11),"Object",{defineProperty:n(10).f})},function(e,t,n){var r=n(15),i=n(52).f;n(46)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(26),i=n(76);n(46)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(7);r(r.S,"Object",{setPrototypeOf:n(116).set})},function(e,t,n){"use strict";var r=n(80);e.exports=n(82)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(5),i=n(19),o=n(11),a=n(7),s=n(78),c=n(51).KEY,u=n(21),d=n(54),l=n(28),f=n(38),p=n(4),h=n(58),m=n(57),v=n(115),g=n(113),y=n(72),w=n(14),b=n(15),_=n(56),C=n(27),S=n(36),T=n(91),E=n(52),P=n(10),R=n(25),x=E.f,k=P.f,I=T.f,O=r.Symbol,M=r.JSON,D=M&&M.stringify,A=p("_hidden"),j=p("toPrimitive"),L={}.propertyIsEnumerable,N=d("symbol-registry"),W=d("symbols"),U=d("op-symbols"),F=Object.prototype,B="function"==typeof O,G=r.QObject,V=!G||!G.prototype||!G.prototype.findChild,z=o&&u(function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=x(F,t);r&&delete F[t],k(e,t,n),r&&e!==F&&k(F,t,r)}:k,H=function(e){var t=W[e]=S(O.prototype);return t._k=e,t},q=B&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},J=function(e,t,n){return e===F&&J(U,t,n),w(e),t=_(t,!0),w(n),i(W,t)?(n.enumerable?(i(e,A)&&e[A][t]&&(e[A][t]=!1),n=S(n,{enumerable:C(0,!1)})):(i(e,A)||k(e,A,C(1,{})),e[A][t]=!0),z(e,t,n)):k(e,t,n)},$=function(e,t){w(e);for(var n,r=g(t=b(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?S(e):$(S(e),t)},Y=function(e){var t=L.call(this,e=_(e,!0));return!(this===F&&i(W,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(W,e)||i(this,A)&&this[A][e])||t)},Z=function(e,t){if(e=b(e),t=_(t,!0),e!==F||!i(W,t)||i(U,t)){var n=x(e,t);return!n||!i(W,t)||i(e,A)&&e[A][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=I(b(e)),r=[],o=0;n.length>o;)i(W,t=n[o++])||t==A||t==c||r.push(t);return r},Q=function(e){for(var t,n=e===F,r=I(n?U:b(e)),o=[],a=0;r.length>a;)!i(W,t=r[a++])||n&&!i(F,t)||o.push(W[t]);return o};B||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(U,n),i(this,A)&&i(this[A],e)&&(this[A][e]=!1),z(this,e,C(1,n))};return o&&V&&z(F,e,{configurable:!0,set:t}),H(e)},s(O.prototype,"toString",function(){return this._k}),E.f=Z,P.f=J,n(75).f=T.f=X,n(43).f=Y,n(68).f=Q,o&&!n(41)&&s(F,"propertyIsEnumerable",Y,!0),h.f=function(e){return H(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ee=R(p.store),te=0;ee.length>te;)m(ee[te++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=O(e)},keyFor:function(e){if(q(e))return v(N,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!B,"Object",{create:K,defineProperty:J,defineProperties:$,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),M&&a(a.S+a.F*(!B||u(function(){var e=O();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!q(t))return t}),r[1]=t,D.apply(M,r)}}}),O.prototype[j]||n(16)(O.prototype,j,O.prototype.valueOf),l(O,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(e,t,n){var r=n(7);r(r.P+r.R,"Set",{toJSON:n(81)("Set")})},function(e,t,n){n(57)("asyncIterator")},function(e,t,n){n(57)("observable")},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(3),a=n.n(o),s=n(2),c=n(12),u=n(13),d=n(92),l="media-node-input",MediaNodeInput=function(){function MediaNodeInput(e){var t=e.name,r=e.parent,o=e.onStream;i()(this,MediaNodeInput),c.a.string("MediaNodeInput constructor","name",t),n.i(d.d)(r)||c.a.error("MediaNodeInput constructor","parent","be a MediaNode"),c.a.func("MediaNodeInput constructor","onStream",o),this._name=t,this._parent=r,this._onStream=o,this._output=null,this._stream=null,this._parent[d.a].add(this)}return a()(MediaNodeInput,[{key:"toString",value:function(){return"mediaNodeInput{name="+this.name+",parent="+this._parent+"}"}},{key:"detach",value:function(){this._target&&this._target.disconnect(this),this._parent[d.a].delete(this),this._parent=null}},{key:"_disconnect",value:function(e){this.target!==e&&s.default.error(l,"invalid input disconnect state, expected target "+e+" but was "+this.target),this._target=null,this._setStream(null)}},{key:"_setStream",value:function(e){if(this._stream!==e){var t=this._stream;this._stream=e;try{this._onStream(e,t)}catch(e){s.default.error(l,"Error thrown in onStream: "+e)}}}},{key:"name",get:function(){return this._name}},{key:"target",get:function(){return this._target}},{key:"stream",get:function(){return this._stream}}],[{key:"resolve",value:function(e){for(var t=[e];;){if(e instanceof MediaNodeInput)return e;if(!n.i(u.isObject)(e))throw new TypeError("failed to resolve input of "+(t[0]&&t[0].constructor.name)+", input must be a MediaNodeInput or have an input property");if(!("input"in e))throw new TypeError("failed to resolve input of "+t[0].constructor.name+", "+e.constructor.name+" does not have an input property");try{e=e.input}catch(n){throw new TypeError("failed to resolve input of "+t[0].constructor.name+", getting input property of "+e+" threw error: "+n.message)}if(-1!==t.indexOf(e))throw new TypeError("failed to resolve input of "+t[0].constructor.name+", encountered loop in input property chain");t.push(e)}}}]),MediaNodeInput}();t.a=MediaNodeInput},,,function(e,t,n){n(42),n(22),n(29),n(140),n(143),e.exports=n(0).Map},function(e,t,n){n(141),e.exports=n(0).Object.keys},function(e,t,n){n(42),n(22),n(29),n(142),e.exports=n(0).Promise},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(5),i=n(90).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(30)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(o){var d=!0,l=document.createTextNode("");new o(u).observe(l,{characterData:!0}),n=function(){l.data=d=!d}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(u)}}else n=function(){i.call(r,u)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(14),i=n(63),o=n(4)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){"use strict";var r=n(80);e.exports=n(82)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(26),i=n(25);n(46)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";var r,i,o,a=n(41),s=n(5),c=n(18),u=n(44),d=n(7),l=n(17),f=n(63),p=n(59),h=n(40),m=n(139),v=n(90).set,g=n(138)(),y=s.TypeError,w=s.process,b=s.Promise,w=s.process,_="process"==u(w),C=function(){},S=!!function(){try{var e=b.resolve(1),t=(e.constructor={})[n(4)("species")]=function(e){e(C,C)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(C)instanceof t}catch(e){}}(),T=function(e,t){return e===t||e===b&&t===o},E=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return T(b,e)?new R(e):new i(e)},R=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw y("Bad Promise constructor");t=e,n=r}),this.resolve=f(t),this.reject=f(n)},x=function(e){try{e()}catch(e){return{error:e}}},k=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(u&&u.enter(),n=a(r),u&&u.exit()),n===t.promise?c(y("Promise-chain cycle")):(o=E(n))?o.call(n,s,c):s(n)):c(r)}catch(e){c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){v.call(s,function(){var t,n,r,i=e._v;if(O(e)&&(t=x(function(){_?w.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=_||O(e)?2:1),e._a=void 0,t)throw t.error})},O=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!O(t.promise))return!1;return!0},M=function(e){v.call(s,function(){var t;_?w.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},A=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw y("Promise can't be resolved itself");(t=E(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,c(A,r,1),c(D,r,1))}catch(e){D.call(r,e)}}):(n._v=e,n._s=1,k(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};S||(b=function(e){p(this,b,"Promise","_h"),f(e),r.call(this);try{e(c(A,this,1),c(D,this,1))}catch(e){D.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(61)(b.prototype,{then:function(e,t){var n=P(m(this,b));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=_?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),R=function(){var e=new r;this.promise=e,this.resolve=c(A,e,1),this.reject=c(D,e,1)}),d(d.G+d.W+d.F*!S,{Promise:b}),n(28)(b,"Promise"),n(85)("Promise"),o=n(0).Promise,d(d.S+d.F*!S,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!S),"Promise",{resolve:function(e){if(e instanceof b&&T(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),d(d.S+d.F*!(S&&n(84)(function(e){b.all(e).catch(C)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=x(function(){var n=[],o=0,a=1;h(e,!1,function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=x(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t,n){var r=n(7);r(r.P+r.R,"Map",{toJSON:n(81)("Map")})},function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(1),a=n.n(o),s=n(3),c=n.n(s),u=n(9),d=n.n(u),l=n(8),f=n.n(l),p=n(86),h=n(149),MediaSource=function(e){function MediaSource(){a()(this,MediaSource);var e=d()(this,(MediaSource.__proto__||i()(MediaSource)).call(this));return e._output=new h.a({name:"default",parent:e}),e}return f()(MediaSource,e),c()(MediaSource,[{key:"setStream",value:function(e){this._output.setStream(e)}},{key:"stream",get:function(){return this._output.stream}},{key:"output",get:function(){return this._output}}]),MediaSource}(p.a.connectMixin(p.a));t.a=MediaSource},function(e,t,n){"use strict";function CctError(e){if(m.a.stringOrEmpty("CctError constructor","message",e),h()(this,{message:{configurable:!0,enumerable:!0,value:e}}),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else{var t=new Error(e).stack;if(!t)try{throw new Error}catch(e){t=e.stack}Object.defineProperty(this,"stack",{configurable:!0,enumerable:!1,value:t})}}t.a=CctError,n.d(t,"c",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return y});var r=n(6),i=n.n(r),o=n(1),a=n.n(o),s=n(9),c=n.n(s),u=n(8),d=n.n(u),l=n(62),f=n.n(l),p=n(184),h=n.n(p),m=n(12);CctError.errorName="CctError",CctError.prototype=f()(Error.prototype,{constructor:{value:CctError},name:{get:function(){return this.constructor.errorName}},toJSON:{value:function(){return{name:this.name,message:this.message}}},toString:{value:function(){return this.name+": "+this.message}}});var v=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||i()(t)).apply(this,arguments))}return d()(t,e),t}(CctError);v.errorName="NotAllowedError";var g=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||i()(t)).apply(this,arguments))}return d()(t,e),t}(CctError);g.errorName="NotFoundError";var y=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||i()(t)).apply(this,arguments))}return d()(t,e),t}(CctError);y.errorName="UnknownError"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=n.n(r),o=n(6),a=n.n(o),s=n(1),c=n.n(s),u=n(3),d=n.n(u),l=n(9),f=n.n(l),p=n(8),h=n.n(p),m=n(87),v=n.n(m),g=n(2),y=n(154),w="html-sink",b=v()("sink-replacement"),HtmlSink=function(e){function HtmlSink(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?null:t;c()(this,HtmlSink);for(var r=f()(this,(HtmlSink.__proto__||a()(HtmlSink)).call(this)),i=0;n&&n[b]&&i<5;)n=n[b],i+=1;return i>=5&&g.default.error(w,"HtmlSink got stuck in element replacement loop"),r._target=n,r._refreshSink=r._refreshSink.bind(r),r._refreshTick=null,r}return h()(HtmlSink,e),d()(HtmlSink,[{key:"_hasTarget",value:function(e){return this._target===e||this._target===e[b]}},{key:"onStream",value:function(e,t){var n=this;t&&(t.removeEventListener?(t.removeEventListener("addtrack",this._refreshSink),t.removeEventListener("removetrack",this._refreshSink)):(t.detachEvent("addtrack",this._refreshSink),t.detachEvent("removetrack",this._refreshSink))),e&&(e.addEventListener?(e.addEventListener("addtrack",this._refreshSink),e.addEventListener("removetrack",this._refreshSink)):(e.attachEvent("addtrack",this._refreshSink),e.attachEvent("removetrack",this._refreshSink))),this._refreshTick||(this._refreshTick=i.a.reject().catch(function(){n._refreshTick=null,n.stream!==t&&n._refreshSink()}))}},{key:"_cleanup",value:function(){this._target&&this._target instanceof HTMLMediaElement?this._target.srcObject?this._target.srcObject=null:this._target.src&&(this._target.src=""):this._target=window.attachMediaStream(this._target,null)}},{key:"_assign",value:function(){if(this.stream){try{var e=this._target;this._target=window.attachMediaStream(this._target,this.stream),e instanceof HTMLMediaElement&&(e[b]=this._target)}catch(e){g.default.info(w,"Error when assigning html sink stream: "+e)}try{var t=this._target.play();t&&t.catch&&t.catch(function(e){g.default.debug(w,"Failed to play stream, "+e)})}catch(e){g.default.info(w,"Error when playing html sink stream: "+e)}}}},{key:"_refreshSink",value:function(){this._target&&(this._cleanup(),this._assign())}},{key:"target",get:function(){return this._target},set:function(e){this._target&&this._cleanup(),this._target=e||null,e&&this._assign()}}]),HtmlSink}(y.a);t.default=HtmlSink},,function(e,t,n){var r=n(0),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(3),a=n.n(o),s=n(2),c=n(12),u=n(13),d=n(66),l=n(92),f=n(131),p="media-node-output",MediaNodeOutput=function(){function MediaNodeOutput(e){var t=e.name,r=e.parent;i()(this,MediaNodeOutput),c.a.string("MediaNodeInput constructor","name",t),n.i(l.d)(r)||c.a.error("MediaNodeInput constructor","parent","be a MediaNode"),this._name=t,this._parent=r,this._targets=new u.ReadOnlySet,this._stream=null,this._parent[l.b].add(this)}return a()(MediaNodeOutput,[{key:"toString",value:function(){return"mediaNodeOutput{name="+this.name+",parent="+this._parent+",targets="+this._targets.size+"}}"}},{key:"connect",value:function(e){if(!this._parent)return s.default.error(p,"tried to connect a detached ouput");if(e instanceof HTMLElement){var HtmlSink=n(146).default,t=new HtmlSink({target:e});return void this.connect(t)}return e=f.a.resolve(e),s.default.info(p,"connecting "+this+" to "+e),this._targets.has(e)?void s.default.verbose(p,"ignored connect with same target"):e._parent?(e._target&&(s.default.debug(p,"disconnecting target's existing target: "+e._target),e._target.disconnect(e)),s.default.debug(p,"connecting to new target: "+e),this._targets._add(e),e._target=this,void e._setStream(this._stream)):s.default.error(p,"tried to connect to a detached input")}},{key:"disconnect",value:function(e){var t=this;if(!this._parent)return void s.default.error(p,"tried to disconnect a detached ouput");if(0===this._targets.size)return void s.default.warning(p,"tried to disconnect "+this+", but it is not connected to anything");if(e instanceof HTMLElement)this._targets.forEach(function(r){var HtmlSink=n(146).default,i=r._parent instanceof HtmlSink,o=r._parent._hasTarget(e);i&&o&&t.disconnect(r)});else if(e){if(e=f.a.resolve(e),s.default.info(p,"disconnecting "+this+" from "+e),!this._targets._delete(e))throw new Error("failed to disconnect "+this+" from "+e+", not connected");e._target=null,e._setStream(null)}else s.default.info(p,"disconnecting "+this+" from all "+this._targets.size+" targets"),this._targets.forEach(function(e){s.default.info(p,"disconnecting "+t+" from "+e),e._target=null,e._setStream(null)}),this._targets._clear()}},{key:"setStream",value:function(e){if(!this._parent)return s.default.error(p,"tried to setStream of a detached ouput");null===e||n.i(d.isMediaStream)(e)?(this._stream=e,this._targets.forEach(function(t){return t._setStream(e)})):c.a.error("MediaNodeOutput.setStream","stream","be a MediaStream or null")}},{key:"detach",value:function(){this.disconnect(),this._parent[l.b].delete(this),this._parent=null}},{key:"name",get:function(){return this._name}},{key:"targets",get:function(){return this._targets}},{key:"stream",get:function(){return this._stream}}],[{key:"resolve",value:function(e){for(var t=[e];;){if(e instanceof MediaNodeOutput)return e;if(!n.i(u.isObject)(e))throw new TypeError("failed to resolve output of "+(t[0]&&t[0].constructor.name)+", output must be a MediaNodeOutput or have an output property");if(!("output"in e))throw new TypeError("failed to resolve output of "+t[0].constructor.name+", "+e.constructor.name+" does not have an output property");try{e=e.output}catch(n){throw new TypeError("failed to resolve output of "+t[0].constructor.name+", getting output property of "+e+" threw error: "+n.message)}if(-1!==t.indexOf(e))throw new TypeError("failed to resolve output of "+t[0].constructor.name+", encountered loop in output property chain");t.push(e)}}}]),MediaNodeOutput}();t.a=MediaNodeOutput},,,function(e,t,n){e.exports={default:n(156),__esModule:!0}},,function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(1),a=n.n(o),s=n(3),c=n.n(s),u=n(9),d=n.n(u),l=n(8),f=n.n(l),p=n(2),h=n(86),m=n(131),MediaSink=function(e){function MediaSink(){a()(this,MediaSink);var e=d()(this,(MediaSink.__proto__||i()(MediaSink)).call(this));return e._input=new m.a({name:"default",parent:e,onStream:function(t,n){return e.onStream(t,n)}}),e}return f()(MediaSink,e),c()(MediaSink,[{key:"onStream",value:function(e,t){p.default.warning("media-input",this.constructor.name+".onStream should be overridden")}},{key:"stream",get:function(){return this._input.stream}},{key:"input",get:function(){return this._input}}]),MediaSink}(h.a);t.a=MediaSink},function(e,t,n){e.exports={default:n(157),__esModule:!0}},function(e,t,n){n(29),n(22),e.exports=n(158)},function(e,t,n){n(29),n(22),e.exports=n(159)},function(e,t,n){var r=n(14),i=n(65);e.exports=n(0).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var r=n(44),i=n(4)("iterator"),o=n(24);e.exports=n(0).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){"use strict";n.d(t,"b",function(){return l});var r=n(23),i=n.n(r),o=n(1),a=n.n(o),s=n(3),c=n.n(s),u=n(2),d=n(13),AsyncQueue=function(){function AsyncQueue(){a()(this,AsyncQueue),this._queue=[],this._currentTask=null}return c()(AsyncQueue,[{key:"toString",value:function(){return"AsyncQueue{executing="+!!this._currentTask+"queued="+this._queue.length+"}"}},{key:"push",value:function(e){var t=n.i(d.defer)();return t.factory=e,this._queue.push(t),this._currentTask||this._poll(),t.promise}},{key:"clear",value:function(){this._currentTask&&(this._currentTask.cancelled=!0,this._currentTask=null),this._queue.length=0}},{key:"_poll",value:function(){if(!this._currentTask&&this._queue.length){var e=this,t=this._currentTask=this._queue.shift();if(t){var n=null;try{n=t.factory()}catch(e){u.default.error(this.tag,"AsyncQueue.process: factory threw error",e,e.stack)}n?n.then(function(e){if(t.cancelled)throw new Error("task was cancelled");t.resolve(e)}).catch(t.reject).then(function(){e._currentTask=null,e._poll()}).catch(function(t){u.default.error(e.tag,"error calling poll after task completion: ",t)}):(this._currentTask=null,this._poll())}}}}]),AsyncQueue}();t.a=AsyncQueue,AsyncQueue.tag="async-queue";var l=function(){function e(){a()(this,e),this._queue=[],this._deferredRead=null}return c()(e,[{key:"read",value:function(){if(this._queue){if(this._deferredRead)return this._deferredRead.promise;if(this._queue.length){var e=this._queue.pop();return i.a.resolve(e)}return this._deferredRead=n.i(d.defer)(),this._deferredRead.promise}return i.a.reject()}},{key:"write",value:function(e){if(!this._queue)throw new Error("AsyncPipe is closed");this._deferredRead?(this._deferredRead.resolve(e),this._deferredRead=null):this._queue.unshift(e)}},{key:"close",value:function(){if(!this._queue)throw new Error("AsyncPipe has already been closed");this._deferredRead&&(this._deferredRead.reject(),this._deferredRead=null),this._queue.length=0,this._queue=null}}]),e}()},,function(e,t,n){"use strict";function r(e,t,n){var r="Error in "+e+", "+t;try{var i=new Error(r+": "+n);return i.reason=n,i.stack=n.stack,i}catch(i){return new Error(r+" and failed to serialize root cause: "+i)}}var i=n(23),o=n.n(i),a=n(39),s=n.n(a),c=n(48),u=n.n(c),d=n(1),l=n.n(d),f=n(3),p=n.n(f),h=n(207),m=(n.n(h),n(2)),v=n(34),g=n(13),y=n(199),w=n(178),b=n(66),_=n(200),C="peer-connection",S="onFUNC is not available, use addEventListener instead",T=function(){function e(t){var n=this;l()(this,e),this._haveTurn=!1,this._haveStun=!1,t&&t.forEach(function(e){var t=e.urls||e.url;t||m.default.error("peer-connection","ice server has no url: "+u()(e)),0===t.indexOf("stun:")&&(n._haveStun=!0),0===t.indexOf("turn:")&&(n._haveStun=!0,n._haveTurn=!0)})}return p()(e,[{key:"observedCandidate",value:function(e){"host"!==e.type&&(this._gotStun=!0),"relay"===e.type&&(this._gotTurn=!0)}},{key:"end",value:function(e){if("new"!==e)return null;if(this._haveTurn&&!this._gotTurn){return m.default.warning("peer-connection","'iceServers' contained a turn server, but no relay candidates were received. Check the turn server configuration and availability."),"turn"}if(this._haveStun&&!this._gotStun){return m.default.warning("peer-connection","'iceServers' contained a stun server, but no stun candidates were received. Check the stun server configuration and availability."),"stun"}return null}}]),e}(),PeerConnectionProxy=function(){function PeerConnectionProxy(e,t,r){var i=this;l()(this,PeerConnectionProxy),m.default.debug(C,"creating peer connection with config:",e),this._pc=new RTCPeerConnection(e),this._iceCandidateFilter=r,this._eventTarget=new v.a,this._id=n.i(g.randomString)(30),this._interop=new h.Interop,this._iceErrorDetector=new T(e.iceServers),this._firstMid=null,this.addEventListener=this.addEventListener.bind(this),this.addStream=this.addStream.bind(this),this.close=this.close.bind(this),this.getLocalStreams=this.getLocalStreams.bind(this),this.getRemoteStreams=this.getRemoteStreams.bind(this),this.addIceCandidate=this.addIceCandidate.bind(this),this._createAnswer=this._createAnswer.bind(this),this._createOffer=this._createOffer.bind(this),this.getStats=this.getStats.bind(this),this._setLocalDescription=this._setLocalDescription.bind(this),this._setRemoteDescription=this._setRemoteDescription.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this.removeStream=this.removeStream.bind(this),this.waitForInitialIce=this.waitForInitialIce.bind(this),this._pc.oniceconnectionstatechange=function(e){i._eventTarget._emit("iceconnectionstatechange",{target:i})},this._pc.onnegotiationneeded=function(e){i._eventTarget._emit("negotiationneeded",{target:i})},this._pc.onsignalingstatechange=function(e){i._eventTarget._emit("signalingstatechange",{target:i})},this._pc.onaddstream=function(e){i._eventTarget._emit("addstream",{target:i,stream:e.stream})},this._pc.onremovestream=function(e){i._eventTarget._emit("removestream",{target:i,stream:e.stream})},this._pc.ondatachannel=function(e){var t=e.channel;m.default.warning("data-channel","received data channel, which shouldn't happen"),i._eventTarget._emit("datachannel",{target:i,channel:t})};var o=n.i(g.defer)();this._initialIceComplete=o.promise,this._pc.onicecandidate=function(e){var t=e.candidate;if(!t)return i._eventTarget._emit("icecandidate",{target:i,candidate:t}),i._iceErrorDetector&&("turn"===i._iceErrorDetector.end(i._pc.iceConnectionState)&&o.reject(new Error("No relay candidates received while turn server was configured")),i._iceErrorDetector=null),void o.resolve();var r=n.i(_.a)(t.candidate,"local");if(i._iceErrorDetector&&i._iceErrorDetector.observedCandidate(r),i._iceCandidateFilter)try{if(!i._iceCandidateFilter(r))return void m.default.debug(C,"ignored candidate due to being filtered out: "+t);setTimeout(function(){o.resolve()},200)}catch(e){return void m.default.error(C,"ignoring candidate, error was thrown in candidate filter: "+e)}if(g.isFirefox){var a=t.sdpMid.match(/^(audio|video)-[0-9]+$/)||[],c=s()(a,2),u=c[1];u&&(t.sdpMid=u)}i._eventTarget._emit("icecandidate",{target:i,candidate:t})},t&&n.i(y.a)(this,t)}return p()(PeerConnectionProxy,null,[{key:"create",value:function(e){e=e||{};var t=e.statsFormatter,n=e.rtcpMuxPolicy||"require",r=e.bundlePolicy||"max-bundle",i=e.iceServers,o=e.iceCandidateFilter;return"string"==typeof i?i=[i]:Array.isArray(i)||(i=[]),i=i.map(function(e){return"string"==typeof e?{urls:e}:e}),new PeerConnectionProxy({iceServers:i,rtcpMuxPolicy:n,bundlePolicy:r},t,o)}}]),p()(PeerConnectionProxy,[{key:"toString",value:function(){return"peerConnection{id="+this._id+"}"}},{key:"addEventListener",value:function(e,t){return this._eventTarget.on(e,t)}},{key:"removeEventListener",value:function(e,t){return this._eventTarget.off(e,t)}},{key:"addStream",value:function(e){return n.i(b.addPeerConnectionStream)(this._pc,e)}},{key:"removeStream",value:function(e){return n.i(b.removePeerConnectionStream)(this._pc,e)}},{key:"getLocalStreams",value:function(){var e=this;return this._pc.getLocalStreams().filter(function(t){return t!==e._dummyStream})}},{key:"getRemoteStreams",value:function(){return this._pc.getRemoteStreams()}},{key:"close",value:function(){return this._pc.close()}},{key:"waitForInitialIce",value:function(){return this._initialIceComplete}},{key:"performOffer",value:function(e){var t=this,n=e.constraints,r=void 0===n?null:n,i=e.bandwidth,o=void 0===i?null:i,a=e.waitForIce,s=void 0!==a&&a;if(g.isChrome&&0===this._pc.getLocalStreams().length){var c=new w.a({video:!0,audio:!0});this.addStream(c.stream),this._dummyStream=c.stream}return this._createOffer(r).then(function(e){return t._rewriteLocalInputDescription(e,{bandwidth:o})}).then(function(e){return t._setLocalDescription(e)}).then(function(e){return s?t._initialIceComplete.then(function(){return t._pc.localDescription}):e}).then(function(e){return t._rewriteLocalOutputDescription(e)})}},{key:"performAnswer",value:function(e){var t=this,n=e.offer,r=e.constraints,i=void 0===r?null:r,a=e.bandwidth,s=void 0===a?null:a;return o.a.resolve(n).then(function(e){return t._rewriteRemoteInputDescription(e)}).then(function(e){return t._setRemoteDescription(e)}).then(function(){return t._createAnswer(i)}).then(function(e){return t._rewriteLocalInputDescription(e,{bandwidth:s})}).then(function(e){return t._setLocalDescription(e)}).then(function(e){return t._rewriteLocalOutputDescription(e)})}},{key:"handleAnswer",value:function(e){var t=this,n=e.answer;return o.a.resolve(n).then(function(e){return t._rewriteRemoteInputDescription(e)}).then(function(e){return t._setRemoteDescription(e)})}},{key:"_rewriteLocalInputDescription",value:function(e,t){var r=t.bandwidth,i=e.sdp,o=e.type;return r&&(i=i.replace(/^b=AS:[0-9]+$/gm,"b=AS:"+r)),g.isChrome&&(i=n.i(_.b)(i)),this._iceCandidateFilter&&(i=n.i(_.c)(i,this._iceCandidateFilter,"local")),i=n.i(_.d)(i),new RTCSessionDescription({sdp:i,type:o})}},{key:"_rewriteLocalOutputDescription",value:function(e){var t,r=e.sdp,i=e.type;if(g.isFirefox&&!this._firstMid){var o=e.sdp.match(/^a=mid:(.+)$/m)||[],a=s()(o,2),c=a[1];c&&(this._firstMid=c)}if(this._iceCandidateFilter&&(r=n.i(_.c)(r,this._iceCandidateFilter,"local")),g.isFirefox){t=e.sdp;var u=n.i(_.e)(e.sdp),d=s()(u,2),l=d[0],f=d[1];if(r=l,f&&f.needsInteropTranslation){var p=n.i(_.f)(e.sdp);r=this._interop.toPlanB({type:e.type,sdp:r}).sdp,r=n.i(_.g)(r,p),r=n.i(_.h)(r)}r=n.i(_.i)(r,f),m.default.verbose(C,"converted local "+e.type+" SDP from unified plan "+t+"\n\nto\n\n"+r)}return{sdp:r,type:i,unifiedPlanSdp:t}}},{key:"_rewriteRemoteInputDescription",value:function(e){var t=e.sdp,r=e.type,i=e.unifiedPlanSdp;if(this._iceCandidateFilter&&(t=n.i(_.c)(t,this._iceCandidateFilter,"remote")),g.isFirefox)if(i)t=i;else{var o=e.sdp,a=n.i(_.e)(e.sdp),c=s()(a,2),u=c[0],d=c[1];t=u,t=n.i(_.j)(t),d&&d.needsInteropTranslation&&(t=this._interop.toUnifiedPlan({type:e.type,sdp:t}).sdp),t=n.i(_.i)(t,d),m.default.verbose(C,"converted remote "+e.type+" SDP from plan b "+o+"\n\nto\n\n"+t)}return new RTCSessionDescription({sdp:t,type:r})}},{key:"_setLocalDescription",value:function(e){var t=this;return m.default.verbose(C,this+".setLocalDescription",e.sdp),new o.a(function(n,i){t._pc.setLocalDescription(e,function(){n(e)},function(e){i(r("setLocalDescription","failed to set local description",e))})})}},{key:"_setRemoteDescription",value:function(e){var t=this;return m.default.verbose(C,this+".setRemoteDescription",e.sdp),new o.a(function(n,i){t._pc.setRemoteDescription(e,function(){n()},function(e){i(r("setRemoteDescription","failed to set remote description",e))})})}},{key:"_createOffer",value:function(e){var t=this;return m.default.verbose(C,this+".createOffer"),new o.a(function(n,i){t._pc.createOffer(function(e){e?n(e):i(new Error("failed to create offer, no offer generated"))},function(e){i(r("createOffer","failed to create offer",e))},e)})}},{key:"_createAnswer",value:function(e){var t=this;return m.default.verbose(C,this+".createAnswer"),new o.a(function(n,i){t._pc.createAnswer(function(e){if(!e)return i(new Error("failed to create answer, no answer generated"));n(e)},function(e){i(r("createAnswer","failed to create answer",e))},e)})}},{key:"addIceCandidate",value:function(e){var t=this;if(0!==e.sdpMLineIndex)return m.default.debug(C,"ignored candidate with sdpMLineIndex != 0, "+e.sdpMLineIndex),o.a.resolve();if(e instanceof RTCIceCandidate||(e=new RTCIceCandidate(e)),this._iceCandidateFilter)try{var i=n.i(_.a)(e.candidate,"remote");if(!this._iceCandidateFilter(i))return m.default.debug(C,"ignored candidate due to being filtered out: "+e),o.a.resolve()}catch(e){return m.default.error(C,"ignoring candidate, error was thrown in candidate filter: "+e),o.a.resolve()}if(g.isFirefox){if(!this._firstMid)return o.a.reject(new Error("Tried to add ice candidate before local description was set"));e.sdpMid=this._firstMid}return new o.a(function(n,i){t._pc.addIceCandidate(e,n,function(e){i(r("addIceCandidate","failed add ice candidate",e))})})}},{key:"createDataChannel",value:function(e,t){return this._pc.createDataChannel(e,t)}},{key:"getStats",value:function(e){var t=this;return g.isFirefox?this._pc.getStats(e):new o.a(function(n,r){t._pc.getStats(function(e){var t={};e.result().forEach(function(e){var n={id:e.id,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),n(t)},e,r)})}},{key:"id",get:function(){return this._id}},{key:"signalingState",get:function(){return this._pc.signalingState}},{key:"iceConnectionState",get:function(){return this._pc.iceConnectionState}},{key:"iceGatheringState",get:function(){return this._pc.iceGatheringState}},{key:"hasRemoteDescription",get:function(){var e=this._pc.remoteDescription;return!!e&&!!e.type}},{key:"onaddstream",set:function(e){throw new Error(S.replace("FUNC","addstream"))}},{key:"ondatachannel",set:function(e){throw new Error(S.replace("FUNC","datachannel"))}},{key:"onicecandidate",set:function(e){throw new Error(S.replace("FUNC","icecandidate"))}},{key:"oniceconnectionstatechange",set:function(e){throw new Error(S.replace("FUNC","iceconnectionstatechange"))}},{key:"onnegotiationneeded",set:function(e){throw new Error(S.replace("FUNC","negotiationneeded"))}},{key:"onremovestream",set:function(e){throw new Error(S.replace("FUNC","removestream"))}},{key:"onsignalingstatechange",set:function(e){throw new Error(S.replace("FUNC","signalingstatechange"))}},{key:"localDescription",get:function(){return this._pc.localDescription}}]),PeerConnectionProxy}();t.a=PeerConnectionProxy},function(e,t,n){e.exports={default:n(170),__esModule:!0}},,,,,,function(e,t,n){e.exports={default:n(171),__esModule:!0}},function(e,t,n){n(173),e.exports=n(0).Object.assign},function(e,t,n){n(174);var r=n(0).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},function(e,t,n){"use strict";var r=n(25),i=n(68),o=n(43),a=n(26),s=n(67),c=Object.assign;e.exports=!c||n(21)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,d=i.f,l=o.f;c>u;)for(var f,p=s(arguments[u++]),h=d?r(p).concat(d(p)):r(p),m=h.length,v=0;m>v;)l.call(p,f=h[v++])&&(n[f]=p[f]);return n}:c},function(e,t,n){var r=n(7);r(r.S+r.F,"Object",{assign:n(172)})},function(e,t,n){n(46)("getOwnPropertyNames",function(){return n(91).f})},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},,,function(e,t,n){"use strict";var r=n(39),i=n.n(r),o=n(6),a=n.n(o),s=n(1),c=n.n(s),u=n(3),d=n.n(u),l=n(9),f=n.n(l),p=n(8),h=n.n(p),m=n(144),v=n(66),DummySource=function(e){function DummySource(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0},t=e.audio,n=e.video;c()(this,DummySource);var r=f()(this,(DummySource.__proto__||a()(DummySource)).call(this)),o=[];if(t){r._audioContext=v.audioContextUtil.get(),r._destination=r._audioContext.createMediaStreamDestination();var s=r._destination.stream.getTracks(),u=i()(s,1),d=u[0];o.push(d),r._silence=r._audioContext.createBufferSource(),r._silence.connect(r._destination,0,0)}if(n){r._canvas=document.createElement("canvas"),r._canvas.style.width="1px",r._canvas.style.height="1px",r._canvas.width=1,r._canvas.height=1,r._canvas.getContext("2d");var l=r._canvas.captureStream(1),p=l.getTracks(),h=i()(p,1),m=h[0];o.push(m)}return r._stream=new MediaStream(o),r.setStream(r._stream),r}return h()(DummySource,e),d()(DummySource,[{key:"stop",value:function(){this._stream&&(this.setStream(null),this._stream.getTracks().forEach(function(e){return e.stop()}),this._stream=null,this._canvas=null,this._audioContext&&(v.audioContextUtil.release(),this._audioContext=null,this._destination=null,this._silence.stop(),this._silence=null))}},{key:"output",get:function(){return this._output}}]),DummySource}(m.a);t.a=DummySource},,,,,,function(e,t,n){e.exports={default:n(203),__esModule:!0}},,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){var n={};n.ssrcs=[];var r=e.split(/(?=^m=)/gim);for(var i in r){for(var o=r[i].split(/\r?\n/),a={},s=0;s<o.length;s+=1){var c=o[s].match(p);c&&(c[1]in n.ssrcs||n.ssrcs.push(c[1]),n.msid=c[2],n.mstid=c[3]);var d=o[s].match(h);d&&(n.ssrc?(n.msid=d[1],n.mstid=d[2]):(a.msid=d[1],a.mstid=d[2]));var l=o[s].match(m);l&&(l[1]in n.ssrcs||n.ssrcs.push(l[1]),n.msid=l[2]);var f=o[s].match(v);f&&(f[1]in n.ssrcs||n.ssrcs.push(f[1]),n.mstid=f[2]);var y=o[s].match(g);y&&(y[1]in n.ssrcs||n.ssrcs.push(y[1]),n.cname=y[2],u()(a).length&&(n.msid=a.msid,n.mstid=a.mstid,a={}))}if(u()(n.ssrcs).length)for(var w in n.ssrcs){t[n.ssrcs[w]]={};for(var b in n)"ssrcs"!==b&&(t[n.ssrcs[w]][b]=n[b])}n={},n.ssrcs=[]}return t}function i(e,t,r){var i={timestamp:Date.now(),pcId:t.pcId};i=n.i(l.assign)(i,r),e.handleStats([i])}function o(e){var t=null,n=e.match(y);if(n)if(t={foundation:n[1],componentId:parseInt(n[2]),transport:n[3].toUpperCase(),priority:parseInt(n[4]),address:n[5],port:parseInt(n[6]),type:n[7]},n[9]&&(t.relatedAddress=n[9]),isNaN(n[10])||(t.relatedPort=parseInt(n[10])),n[12])t.tcpType=n[12];else if("TCP"===t.transport){if(0!==t.port&&9!==t.port)return;t.tcpType="active",t.port=9}return t}function a(e,t,r,a){var s=o(r.candidate);if(s){var c={sourceId:"candidates",localOrRemote:a};c=n.i(l.assign)(c,s),i(e,t,c)}}function s(e,t,o){function s(n){return a(t,p,n,"remote"),v.call(e,n)}var c="stats-monitor",u=null,l=0;o=o||w;var p={isRelay:!1,pcId:e.id};e.addEventListener("signalingstatechange",function(){if("closed"===e.signalingState)return d.default.debug(c,"stopped gather stats for "+e.id),clearInterval(l);e._pc.localDescription&&(p=r(e._pc.localDescription.sdp,p)),e._pc.remoteDescription&&(p=r(e._pc.remoteDescription.sdp,p))});var h,m=n.i(f.a)();e.addEventListener("iceconnectionstatechange",function(){var n=e.iceConnectionState;i(t,p,{sourceId:"iceConnectionState",iceConnectionState:n}),h&&(clearTimeout(h),h=null),null===u&&("connected"!==n&&"completed"!==n||(u=!0,i(t,p,{sourceId:"events",eventType:"callSetupResult",callSucceeded:!0}),e.getStats(null).then(function(e){var n=m(e,p);for(var r in n){var o=n[r];"localIpAddress"in o&&(i(t,p,o),"localCandidateType"in o&&(p.isRelay="relayed"===o.localCandidateType))}}).catch(function(e){d.default.warning(c,"getStats error:",e)})),"failed"===n&&(u=!1,i(t,p,{sourceId:"events",eventType:"callSetupResult",callSucceeded:!1})),"checking"!==n||h||(h=setTimeout(function(){u=!1,i(t,p,{sourceId:"events",eventType:"callSetupResult",callSucceeded:!1})},b)))}),e.addEventListener("icecandidate",function(e){e.candidate&&a(t,p,e.candidate,"local")});var v=e.addIceCandidate;e.addIceCandidate=s,l=setInterval(function(){e.getStats(null).then(function(e){var n=m(e,p);t.handleStats(n)}).catch(function(e){d.default.warning(c,"getStats error:",e)})},o)}t.a=s;var c=n(64),u=n.n(c),d=n(2),l=n(13),f=n(202),p=/^a=ssrc:(\d+) msid:([-a-zA-Z0-9]+) ([-a-zA-Z0-9]+)$/,h=/^a=msid:{([-a-zA-Z0-9]+)} {([-a-zA-Z0-9]+)}$/,m=/^a=ssrc:(\d+) mslabel:([-a-zA-Z0-9]+)$/,v=/^a=ssrc:(\d+) label:(?:{)([-a-zA-Z0-9]+)(?:})$/,g=/^a=ssrc:(\d+) cname:(?:{)([-a-zA-Z0-9]+)(?:})$/,y=new RegExp("^candidate:(\\d+) (\\d) (UDP|TCP) ([\\d\\.]*) ([\\d\\.a-f\\:]*) (\\d*) typ ([a-z]*)( raddr ([\\d\\.a-f\\:]*) rport (\\d*))?( tcptype (active|passive|so))?.*$","mi"),w=1e3,b=15e3},function(e,t,n){"use strict";function r(e,t){var n=e.match(_);if(!n)throw new Error("Could not parse "+t+" ice candidate: "+e);var r={foundation:n[1],componentId:parseInt(n[2]),transport:n[3].toUpperCase(),priority:parseInt(n[4]),address:n[5],port:parseInt(n[6]),type:n[7],candidate:e,origin:t};if(n[9]&&(r.relatedAddress=n[9]),isNaN(n[10])||(r.relatedPort=parseInt(n[10])),n[12])r.tcpType=n[12];else if("TCP"===r.transport){if(0!==r.port&&9!==r.port)return;r.tcpType="active",r.port=9}return r}function i(e,t,n){return e?e.split(/\r\n/).filter(function(e){if(0===e.indexOf("a=candidate:"))try{var i=e.slice(2),o=r(i,n);if(!t(o))return w.default.verbose(b,"ignored candidate due to being filtered out: "+i),!1}catch(e){return w.default.error(b,"ignoring candidate, error was thrown in candidate filter: "+e),!1}return!0}).join("\r\n"):e}function o(e){return e.match(C)?e:d(e)}function a(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=-1;for(var a in i)if(0===i[a].indexOf("m=application")){o=+a;break}if(-1===o)return[e,null];var s=i[o].match(/a=mid:(.*)/im)||[],c=v()(s,2),u=c[1];if(!u)throw new Error("sdp application block does not have an mId");var d=r.replace(C,function(e,t){var n=t.split(" "),r=n.indexOf(u);if(-1===r)throw new Error("sdp group:BUNDLE attribute did not contain application block mId");return n.splice(r,1),"a=group:BUNDLE "+n.join(" ")}),l=i.splice(o,1)[0];return[d+i.join(""),{block:l,index:o,applicationMId:u,needsInteropTranslation:!!i.length}]}function s(e,t){if(!t)return e;var n=e.split(T),r=y()(n),i=r[0],o=r.slice(1),a=i.replace(C,function(e,n){var r=n?n.split(" "):[];return r.splice(t.index,0,t.applicationMId),"a=group:BUNDLE "+r.join(" ")});return o.splice(t.index,0,t.block),a+o.join("")}function c(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=r.match(S)||[],a=v()(o,2),s=a[1],c=void 0===s?"sendrecv":s,u=P.inactive,d=P.inactive,l=P.inactive;return i.forEach(function(e){var t=e.match(E),n=v()(t,2),r=n[1],i=e.match(S)||[],o=v()(i,2),a=o[1],s=void 0===a?c:a,f=P[s];"audio"===r?u|=f:"video"===r?d|=f:"application"===r&&(l|=f)}),{audio:R[u],video:R[d],application:R[l]}}function u(e,t){var n=e.split(T),r=y()(n),i=r[0],o=r.slice(1);return o=o.map(function(e){var n=e.match(E),r=v()(n,2),i=r[1],o=t[i]||R[3];return e.replace(S,"a="+o)}),[i].concat(h()(o)).join("")}function d(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=i.map(function(e){var t=e.match(/^a=mid:(.+)$/im)||[],n=v()(t,2),r=n[1];if(!r){var i=e.match(E),o=v()(i,2),a=o[1];throw new Error("media block of type "+a+" did not contain mid attribute")}return r});o.unshift("");var a="a=group:BUNDLE"+o.join(" ");return r.match(C)?r=r.replace(C,a):r+=a+"\r\n",[r].concat(h()(i)).join("")}function l(e){return e.replace(x,"")}function f(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=i.map(function(e){var t=e.match(E);if("video"!==v()(t,2)[1])return e;var n=[],r=e.replace(k,function(e,t){return n.push(t),""}),i=new RegExp("a=ssrc:(?:"+n.join("|")+")\\s.*\r\n","gi");return r.replace(i,"").replace(I,"")});return[r].concat(h()(o)).join("")}t.a=r,t.c=i,t.d=o,t.e=a,t.i=s,t.f=c,t.g=u,t.h=d,t.b=l,t.j=f;var p=n(31),h=n.n(p),m=n(39),v=n.n(m),g=n(89),y=n.n(g),w=n(2),b="peer-connection",_=new RegExp("^candidate:(\\d+) (\\d) (UDP|TCP) ([\\d\\.]*) ([\\d\\.a-f\\:]*) (\\d*) typ ([a-z]*)( raddr ([\\d\\.a-f\\:]*) rport (\\d*))?( tcptype (active|passive|so))?(.*)$","i"),C=new RegExp("^a=group:BUNDLE (.*)$","mi"),S=new RegExp("^a=(inactive|recvonly|sendonly|sendrecv)$","mi"),T=new RegExp("(?=m=(?:audio|video|application))","i"),E=new RegExp("^m=(audio|video|application)","i"),P={inactive:0,sendonly:1,recvonly:2,sendrecv:3},R={0:"inactive",1:"sendonly",2:"recvonly",3:"sendrecv"},x=new RegExp("a=extmap:5 http://www\\.ietf\\.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","gi"),k=new RegExp("a=ssrc-group:.+\\s\\d+\\s(\\d+)\r\n","gi"),I=new RegExp("a=(?:fmtp:\\d+\\sapt=\\d+|rtpmap:\\d+\\srtx/\\d+)\r\n","gi")},function(e,t,n){"use strict";function StatsFormatter(e,t){this.context=n.i(r.assign)({},e),this.context.contextId=n.i(r.randomString)(16),this.context.userAgent=navigator.userAgent,this.reporter=t,this.tag="stats-formatter"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=StatsFormatter;var r=n(13);StatsFormatter.prototype.setPeerId=function(e){this.context.peerId=e},StatsFormatter.prototype.handleStats=function(e){for(var t in e)e[t]=n.i(r.assign)(e[t],this.context);this.reporter.handleStats(e)}},function(e,t,n){"use strict";function r(e,t){var r={},i=e.match(d);if(i){switch(i[1]){case"in":r.role="receiver";break;case"out":r.role="sender";break;default:return c.default.warning("stats-normalizer","No role match!"),null}switch(i[2]){case"rtp":r.reportType="receiver"===r.role?"receiver":"sender";break;case"rtcp":r.reportType="receiver"===r.role?"sender":"receiver";break;default:return c.default.warning("stats-normalizer","No reportType match!"),null}for(var o in t)l.indexOf(o)>=0||(r[o]=n.i(u.maybeConvertStringToNumber)(t[o].toString()));return r}}function i(e,t){var r={},i=e.match(f);if(i){switch(i[3]){case"recv":r.role="receiver",r.reportType="receiver";break;case"send":r.role="sender",r.reportType="sender";break;default:return c.default.warning("stats-normalizer","No role match!"),null}for(var o in t)if(!(p.indexOf(o)>=0))if(r[o]=n.i(u.maybeConvertStringToNumber)(t[o].toString()),"audioInputLevel"===o||"audioOutputLevel"===o)r.mediaType="audio";else{if("googFrameHeightReceived"!==o&&"googFrameHeightSent"!==o)continue;r.mediaType="video"}return r}}function o(e,t,r){for(var i in h){var o=h[i];if(o in e){r[t+o.charAt(0).toUpperCase()+o.slice(1)]=n.i(u.maybeConvertStringToNumber)(e[o])}}return r}function a(e,t,n){var r=t.localCandidateId,i=t.remoteCandidateId,a=e[r],s=e[i],c={};return c.sourceId="selectedPair",c=o(a,"local",c),c=o(s,"remote",c),"chrome"===n&&(c.localPriority=+a.priority,c.remotePriority=+s.priority),"firefox"===n&&(c.localPriority=+t.priority,c.remotePriority=+t.priority),c}function s(){function e(e,t){var o=[],a=Date.now();for(var s in e){var d=e[s],l=null,f=d.ssrc;if(f){var p=t[f];p?(u.isFirefox&&(l=r(s,d)),u.isChrome&&(l=i(s,d)),l&&(l.timestamp&&(l.getStatsTs=l.timestamp,delete l.timestamp),l.timestamp=a,l.pcId=t.pcId,l.isRelay=t.isRelay,l=n.i(u.assign)(l,p),l.sourceId="ssrc-"+f,o.push(l))):c.default.warning("stat-normalizer","got stat without identity:",d)}}return o}function t(e,t){var n=[],r=Date.now(),i={};for(var s in e){var c=e[s],u=null;if("candidatepair"===c.type&&!0===c.selected&&"succeeded"===c.state&&(u=a(e,c,"firefox")),"googCandidatePair"===c.type&&"true"===c.googActiveConnection&&(u=a(e,c,"chrome")),u){u.timestamp=r,u.pcId=t.pcId,u.isRelay=t.isRelay;var d=c.localCandidateId+c.remoteCandidateId;d in i||(i[d]=[]),i[d].push(u)}}for(var l in o)l in i||delete o[l];for(var f in i)f in o||(o[f]=!0,[].push.apply(n,i[f]));return n}var o={};return function(n,r){var i=[];return i=e(n,r),[].push.apply(i,t(n,r)),i}}t.a=s;var c=n(2),u=n(13),d=/(in|out)bound_(rtp|rtcp)_(audio|video)_(\d+)/,l=["id","type","isRemote","remoteId"],f=/(ssrc)_(\d+)_(recv|send)/,p=["id","type","googTrackId","transportId"],h=["portNumber","ipAddress","transport","candidateType"]},function(e,t,n){n(204);var r=n(0).Object;e.exports=function(e,t){return r.defineProperties(e,t)}},function(e,t,n){var r=n(7);r(r.S+r.F*!n(11),"Object",{defineProperties:n(95)})},function(e,t,n){var r,r,o=o||{};o.options=o.options||{},o.VERSION="0.14.3-6d236da",o.onwebrtcready=o.onwebrtcready||function(e){},o._onwebrtcreadies=[],o.webRTCReady=function(e){if("function"!=typeof e)throw new Error("Callback provided is not a function");var t=function(){"function"==typeof window.require&&"function"==typeof o._defineMediaSourcePolyfill&&o._defineMediaSourcePolyfill(),e(null!==o.WebRTCPlugin.plugin)};!0===o.onwebrtcreadyDone?t():o._onwebrtcreadies.push(t)},o.WebRTCPlugin=o.WebRTCPlugin||{},o.WebRTCPlugin.pluginInfo=o.WebRTCPlugin.pluginInfo||{prefix:"Tem",plugName:"TemWebRTCPlugin",pluginId:"plugin0",type:"application/x-temwebrtcplugin",onload:"__TemWebRTCReady0",portalLink:"https://skylink.io/plugin/",downloadLink:null,companyName:"Temasys",downloadLinks:{mac:"https://bit.ly/webrtcpluginpkg",win:"https://bit.ly/webrtcpluginmsi"}},void 0!==o.WebRTCPlugin.pluginInfo.downloadLinks&&null!==o.WebRTCPlugin.pluginInfo.downloadLinks&&(navigator.platform.match(/^Mac/i)?o.WebRTCPlugin.pluginInfo.downloadLink=o.WebRTCPlugin.pluginInfo.downloadLinks.mac:navigator.platform.match(/^Win/i)&&(o.WebRTCPlugin.pluginInfo.downloadLink=o.WebRTCPlugin.pluginInfo.downloadLinks.win)),o.WebRTCPlugin.TAGS={NONE:"none",AUDIO:"audio",VIDEO:"video"},o.WebRTCPlugin.pageId=Math.random().toString(36).slice(2),o.WebRTCPlugin.plugin=null,o.WebRTCPlugin.setLogLevel=null,o.WebRTCPlugin.defineWebRTCInterface=null,o.WebRTCPlugin.isPluginInstalled=null,o.WebRTCPlugin.pluginInjectionInterval=null,o.WebRTCPlugin.injectPlugin=null,o.WebRTCPlugin.PLUGIN_STATES={NONE:0,INITIALIZING:1,INJECTING:2,INJECTED:3,READY:4},o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.NONE,o.onwebrtcreadyDone=!1,o.WebRTCPlugin.PLUGIN_LOG_LEVELS={NONE:"NONE",ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO",VERBOSE:"VERBOSE",SENSITIVE:"SENSITIVE"},o.WebRTCPlugin.WaitForPluginReady=null,o.WebRTCPlugin.callWhenPluginReady=null,__TemWebRTCReady0=function(){if("complete"===document.readyState)o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.READY,o.maybeThroughWebRTCReady();else var e=setInterval(function(){"complete"===document.readyState&&(clearInterval(e),o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.READY,o.maybeThroughWebRTCReady())},100)},o.maybeThroughWebRTCReady=function(){o.onwebrtcreadyDone||(o.onwebrtcreadyDone=!0,o._onwebrtcreadies.length?o._onwebrtcreadies.forEach(function(e){"function"==typeof e&&e(null!==o.WebRTCPlugin.plugin)}):"function"==typeof o.onwebrtcready&&o.onwebrtcready(null!==o.WebRTCPlugin.plugin))},o.TEXT={PLUGIN:{REQUIRE_INSTALLATION:"This website requires you to install a WebRTC-enabling plugin to work on this browser.",NOT_SUPPORTED:"Your browser does not support WebRTC.",BUTTON:"Install Now"},REFRESH:{REQUIRE_REFRESH:"Please refresh page",BUTTON:"Refresh Page"}},o._iceConnectionStates={starting:"starting",checking:"checking",connected:"connected",completed:"connected",done:"completed",disconnected:"disconnected",failed:"failed",closed:"closed"},o._iceConnectionFiredStates=[],o.isDefined=null,o.parseWebrtcDetectedBrowser=function(){var e=null;if(window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0)e=navigator.userAgent.match(/OPR\/(\d+)/i)||[],webrtcDetectedBrowser="opera",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=26,webrtcDetectedType="webkit",webrtcDetectedDCSupport="SCTP";else if(navigator.userAgent.match(/Bowser\/[0-9.]*/g)){e=navigator.userAgent.match(/Bowser\/[0-9.]*/g)||[];var t=parseInt((navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[])[2]||"0",10);webrtcDetectedBrowser="bowser",webrtcDetectedVersion=parseFloat((e[0]||"0/0").split("/")[1],10),webrtcMinimumVersion=0,webrtcDetectedType="webkit",webrtcDetectedDCSupport=t>30?"SCTP":"RTP"}else if(navigator.userAgent.indexOf("OPiOS")>0)e=navigator.userAgent.match(/OPiOS\/([0-9]+)\./),webrtcDetectedBrowser="opera",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf("CriOS")>0)e=navigator.userAgent.match(/CriOS\/([0-9]+)\./)||[],webrtcDetectedBrowser="chrome",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf("FxiOS")>0)e=navigator.userAgent.match(/FxiOS\/([0-9]+)\./)||[],webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(document.documentMode)e=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedBrowser="IE",webrtcDetectedVersion=parseInt(e[1],10),webrtcMinimumVersion=9,webrtcDetectedType="plugin",webrtcDetectedDCSupport="SCTP",webrtcDetectedVersion||(e=/\bMSIE[ :]+(\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedVersion=parseInt(e[1]||"0",10));else if(window.StyleMedia||navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))e=navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)||[],webrtcDetectedBrowser="edge",webrtcDetectedVersion=parseFloat((e[0]||"0/0").split("/")[1],10),webrtcMinimumVersion=13.10547,webrtcDetectedType="ms",webrtcDetectedDCSupport=null;else if("undefined"!=typeof InstallTrigger||navigator.userAgent.indexOf("irefox")>0)e=navigator.userAgent.match(/Firefox\/([0-9]+)\./)||[],webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=33,webrtcDetectedType="moz",webrtcDetectedDCSupport="SCTP";else if(window.chrome&&window.chrome.webstore||navigator.userAgent.indexOf("Chrom")>0)e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[],webrtcDetectedBrowser="chrome",webrtcDetectedVersion=parseInt(e[2]||"0",10),webrtcMinimumVersion=38,webrtcDetectedType="webkit",webrtcDetectedDCSupport=webrtcDetectedVersion>30?"SCTP":"RTP";else if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){e=navigator.userAgent.match(/version\/(\d+)/i)||[];var n=navigator.userAgent.match(/(iPhone|iPad)/gi)||[];webrtcDetectedBrowser="safari",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=7,webrtcDetectedType=0===n.length?"plugin":null,webrtcDetectedDCSupport=0===n.length?"SCTP":null}window.webrtcDetectedBrowser=webrtcDetectedBrowser,window.webrtcDetectedVersion=webrtcDetectedVersion,window.webrtcMinimumVersion=webrtcMinimumVersion,window.webrtcDetectedType=webrtcDetectedType,window.webrtcDetectedDCSupport=webrtcDetectedDCSupport},o.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},o.renderNotificationBar=function(e,t,n){if("complete"===document.readyState){var r=window,i=document.createElement("iframe");i.name="adapterjs-alert",i.style.position="fixed",i.style.top="-41px",i.style.left=0,i.style.right=0,i.style.width="100%",i.style.height="40px",i.style.backgroundColor="#ffffe1",i.style.border="none",i.style.borderBottom="1px solid #888888",i.style.zIndex="9999999","string"==typeof i.style.webkitTransition?i.style.webkitTransition="all .5s ease-out":"string"==typeof i.style.transition&&(i.style.transition="all .5s ease-out"),document.body.appendChild(i);var a=i.contentWindow?i.contentWindow:i.contentDocument.document?i.contentDocument.document:i.contentDocument;a.document.open(),a.document.write('<span style="display: inline-block; font-family: Helvetica, Arial,sans-serif; font-size: .9rem; padding: 4px; vertical-align: middle; cursor: default;">'+e+"</span>"),t&&"function"==typeof n?(a.document.write('<button id="okay">'+t+'</button><button id="cancel">Cancel</button>'),a.document.close(),o.addEvent(a.document.getElementById("okay"),"click",function(e){e.preventDefault();try{e.cancelBubble=!0}catch(e){}n(e)}),o.addEvent(a.document.getElementById("cancel"),"click",function(e){r.document.body.removeChild(i)})):a.document.close(),setTimeout(function(){"string"==typeof i.style.webkitTransform?i.style.webkitTransform="translateY(40px)":"string"==typeof i.style.transform?i.style.transform="translateY(40px)":i.style.top="0px"},300)}},webrtcDetectedType=null,checkMediaDataChannelSettings=function(e,t,n,r){if("function"==typeof n){var i=!0,o="firefox"===webrtcDetectedBrowser,a="moz"===webrtcDetectedType&&webrtcDetectedVersion>30,s="firefox"===e;if(o&&s||a)try{delete r.mandatory.MozDontOfferDataChannel}catch(e){}else o&&!s&&(r.mandatory.MozDontOfferDataChannel=!0);if(!o)for(var c in r.mandatory)r.mandatory.hasOwnProperty(c)&&-1!==c.indexOf("Moz")&&delete r.mandatory[c];!o||s||a||(i=!1),n(i,r)}},checkIceConnectionState=function(e,t,n){"function"==typeof n&&(e=e||"peer",o._iceConnectionFiredStates[e]&&t!==o._iceConnectionStates.disconnected&&t!==o._iceConnectionStates.failed&&t!==o._iceConnectionStates.closed||(o._iceConnectionFiredStates[e]=[]),t=o._iceConnectionStates[t],o._iceConnectionFiredStates[e].indexOf(t)<0&&(o._iceConnectionFiredStates[e].push(t),t===o._iceConnectionStates.connected&&setTimeout(function(){o._iceConnectionFiredStates[e].push(o._iceConnectionStates.done),n(o._iceConnectionStates.done)},1e3),n(t)))},createIceServer=null,createIceServers=null,MediaStream="function"==typeof MediaStream?MediaStream:null,RTCPeerConnection="function"==typeof RTCPeerConnection?RTCPeerConnection:null,RTCSessionDescription="function"==typeof RTCSessionDescription?RTCSessionDescription:null,RTCIceCandidate="function"==typeof RTCIceCandidate?RTCIceCandidate:null,getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,webrtcMinimumVersion=null,!(navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))||0===(navigator.userAgent.match(/android/gi)||[]).length&&0===(navigator.userAgent.match(/chrome/gi)||[]).length&&navigator.userAgent.indexOf("Safari/")>0?("object"==typeof console&&"function"==typeof console.log||(console={}||console,console.log=function(e){},console.info=function(e){},console.error=function(e){},console.dir=function(e){},console.exception=function(e){},console.trace=function(e){},console.warn=function(e){},console.count=function(e){},console.debug=function(e){},console.count=function(e){},console.time=function(e){},console.timeEnd=function(e){},console.group=function(e){},console.groupCollapsed=function(e){},console.groupEnd=function(e){}),o.parseWebrtcDetectedBrowser(),isIE="IE"===webrtcDetectedBrowser,o.WebRTCPlugin.WaitForPluginReady=function(){for(;o.WebRTCPlugin.pluginState!==o.WebRTCPlugin.PLUGIN_STATES.READY;);},o.WebRTCPlugin.callWhenPluginReady=function(e){if(o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.READY)e();else var t=setInterval(function(){o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.READY&&(clearInterval(t),e())},100)},o.WebRTCPlugin.setLogLevel=function(e){o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.setLogLevel(e)})},o.WebRTCPlugin.injectPlugin=function(){if("complete"===document.readyState&&o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.INITIALIZING){if(o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INJECTING,"IE"===webrtcDetectedBrowser&&webrtcDetectedVersion<=10){var e=document.createDocumentFragment();for(o.WebRTCPlugin.plugin=document.createElement("div"),o.WebRTCPlugin.plugin.innerHTML='<object id="'+o.WebRTCPlugin.pluginInfo.pluginId+'" type="'+o.WebRTCPlugin.pluginInfo.type+'" width="1" height="1"><param name="pluginId" value="'+o.WebRTCPlugin.pluginInfo.pluginId+'" /> <param name="windowless" value="false" /> <param name="pageId" value="'+o.WebRTCPlugin.pageId+'" /> <param name="onload" value="'+o.WebRTCPlugin.pluginInfo.onload+'" /><param name="tag" value="'+o.WebRTCPlugin.TAGS.NONE+'" />'+(o.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+"</object>";o.WebRTCPlugin.plugin.firstChild;)e.appendChild(o.WebRTCPlugin.plugin.firstChild);document.body.appendChild(e),o.WebRTCPlugin.plugin=document.getElementById(o.WebRTCPlugin.pluginInfo.pluginId)}else o.WebRTCPlugin.plugin=document.createElement("object"),o.WebRTCPlugin.plugin.id=o.WebRTCPlugin.pluginInfo.pluginId,isIE?(o.WebRTCPlugin.plugin.width="1px",o.WebRTCPlugin.plugin.height="1px"):(o.WebRTCPlugin.plugin.width="0px",o.WebRTCPlugin.plugin.height="0px"),o.WebRTCPlugin.plugin.type=o.WebRTCPlugin.pluginInfo.type,o.WebRTCPlugin.plugin.innerHTML='<param name="onload" value="'+o.WebRTCPlugin.pluginInfo.onload+'"><param name="pluginId" value="'+o.WebRTCPlugin.pluginInfo.pluginId+'"><param name="windowless" value="false" /> '+(o.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+'<param name="pageId" value="'+o.WebRTCPlugin.pageId+'"><param name="tag" value="'+o.WebRTCPlugin.TAGS.NONE+'" />',document.body.appendChild(o.WebRTCPlugin.plugin);o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INJECTED}},o.WebRTCPlugin.isPluginInstalled=function(e,t,n,r,i){if(isIE){try{new ActiveXObject(e+"."+t)}catch(e){return void i()}r()}else{for(var o=navigator.mimeTypes,a=0;a<o.length;a++)if(o[a].type.indexOf(n)>=0)return void r();i()}},o.WebRTCPlugin.defineWebRTCInterface=function(){if(o.WebRTCPlugin.pluginState!==o.WebRTCPlugin.PLUGIN_STATES.READY){o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INITIALIZING,o.isDefined=function(e){return null!==e&&void 0!==e},createIceServer=function(e,t,n){var r=null,i=e.split(":");return 0===i[0].indexOf("stun")?r={url:e,hasCredentials:!1}:0===i[0].indexOf("turn")&&(r={url:e,hasCredentials:!0,credential:n,username:t}),r},createIceServers=function(e,t,n){for(var r=[],i=0;i<e.length;++i)r.push(createIceServer(e[i],t,n));return r},RTCSessionDescription=function(e){return o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.ConstructSessionDescription(e.type,e.sdp)},MediaStream=function(e){return o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.MediaStream(e)},RTCPeerConnection=function(e,t){if(void 0!==e&&null!==e&&!Array.isArray(e.iceServers))throw new Error("Failed to construct 'RTCPeerConnection': Malformed RTCConfiguration");if(void 0!==t&&null!==t){var n=!1;if(n|="object"!=typeof t,n|=t.hasOwnProperty("mandatory")&&void 0!==t.mandatory&&null!==t.mandatory&&t.mandatory.constructor!==Object,n|=t.hasOwnProperty("optional")&&void 0!==t.optional&&null!==t.optional&&!Array.isArray(t.optional))throw new Error("Failed to construct 'RTCPeerConnection': Malformed constraints object")}o.WebRTCPlugin.WaitForPluginReady();var r=null;if(e&&Array.isArray(e.iceServers)){r=e.iceServers;for(var i=0;i<r.length;i++)r[i].urls&&!r[i].url&&(r[i].url=r[i].urls),r[i].hasCredentials=o.isDefined(r[i].username)&&o.isDefined(r[i].credential)}if(o.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION&&o.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION>1)return r&&(e.iceServers=r),o.WebRTCPlugin.plugin.PeerConnection(e);var a=t&&t.mandatory?t.mandatory:null,s=t&&t.optional?t.optional:null;return o.WebRTCPlugin.plugin.PeerConnection(o.WebRTCPlugin.pageId,r,a,s)},MediaStreamTrack=function(){},MediaStreamTrack.getSources=function(e){o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.GetSources(e)})};var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n){if("string"==typeof e[n])return void(t[n]=e[n]);var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if("sourceId"===i("",n)&&void 0!==r.exact&&(r.ideal=r.exact,r.exact=void 0),void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};getUserMedia=function(t,n,r){var i={};i.audio=!!t.audio&&e(t.audio),i.video=!!t.video&&e(t.video),o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.getUserMedia(i,n,r)})},window.navigator.getUserMedia=getUserMedia,navigator.mediaDevices||"undefined"==typeof Promise||(requestUserMedia=function(e){return new Promise(function(t,n){try{getUserMedia(e,t,n)}catch(e){n(e)}})},navigator.mediaDevices={getUserMedia:requestUserMedia,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],id:e.id,deviceId:e.id,groupId:""}}))})})}}),attachMediaStream=function(e,t){if(e&&e.parentNode){var n;null===t?n="":(void 0!==t.enableSoundTracks&&t.enableSoundTracks(!0),n=t.id);var r=0===e.id.length?Math.random().toString(36).slice(2):e.id,i=e.nodeName.toLowerCase();if("object"!==i){var a;switch(i){case"audio":a=o.WebRTCPlugin.TAGS.AUDIO;break;case"video":a=o.WebRTCPlugin.TAGS.VIDEO;break;default:a=o.WebRTCPlugin.TAGS.NONE}var s=document.createDocumentFragment(),c=document.createElement("div"),u="";for(e.className?u='class="'+e.className+'" ':e.attributes&&e.attributes.class&&(u='class="'+e.attributes.class.value+'" '),c.innerHTML='<object id="'+r+'" '+u+'type="'+o.WebRTCPlugin.pluginInfo.type+'"><param name="pluginId" value="'+r+'" /> <param name="pageId" value="'+o.WebRTCPlugin.pageId+'" /> <param name="windowless" value="true" /> <param name="streamId" value="'+n+'" /> <param name="tag" value="'+a+'" /> </object>';c.firstChild;)s.appendChild(c.firstChild);var d="",l="";e.clientWidth||e.clientHeight?(l=e.clientWidth,d=e.clientHeight):(e.width||e.height)&&(l=e.width,d=e.height),e.parentNode.insertBefore(s,e),s=document.getElementById(r),s.width=l,s.height=d,e.parentNode.removeChild(e)}else{for(var f=e.children,p=0;p!==f.length;++p)if("streamId"===f[p].name){f[p].value=n;break}e.setStreamId(n)}var h=document.getElementById(r);return o.forwardEventHandlers(h,e,Object.getPrototypeOf(e)),h}},reattachMediaStream=function(e,t){for(var n=null,r=t.children,i=0;i!==r.length;++i)if("streamId"===r[i].name){o.WebRTCPlugin.WaitForPluginReady(),n=o.WebRTCPlugin.plugin.getStreamWithId(o.WebRTCPlugin.pageId,r[i].value);break}if(null!==n)return attachMediaStream(e,n)},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=getUserMedia,o.attachMediaStream=attachMediaStream,o.reattachMediaStream=reattachMediaStream,o.getUserMedia=getUserMedia,o.forwardEventHandlers=function(e,t,n){var r=Object.getOwnPropertyNames(n);for(var i in r)if(i){var a=r[i];"function"==typeof a.slice&&"on"===a.slice(0,2)&&"function"==typeof t[a]&&o.addEvent(e,a.slice(2),t[a])}var s=Object.getPrototypeOf(n);s&&o.forwardEventHandlers(e,t,s)},RTCIceCandidate=function(e){return e.sdpMid||(e.sdpMid=""),o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.ConstructIceCandidate(e.sdpMid,e.sdpMLineIndex,e.candidate)},o.addEvent(document,"readystatechange",o.WebRTCPlugin.injectPlugin),o.WebRTCPlugin.injectPlugin()}},o.WebRTCPlugin.pluginNeededButNotInstalledCb=o.WebRTCPlugin.pluginNeededButNotInstalledCb||function(){o.addEvent(document,"readystatechange",o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv),o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv()},o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv=function(){if(!o.options.hidePluginInstallPrompt){var e=o.WebRTCPlugin.pluginInfo.downloadLink;if(e){var t;t=o.WebRTCPlugin.pluginInfo.portalLink?'This website requires you to install the  <a href="'+o.WebRTCPlugin.pluginInfo.portalLink+'" target="_blank">'+o.WebRTCPlugin.pluginInfo.companyName+" WebRTC Plugin</a> to work on this browser.":o.TEXT.PLUGIN.REQUIRE_INSTALLATION,o.renderNotificationBar(t,o.TEXT.PLUGIN.BUTTON,function(){window.open(e,"_top");var t=setInterval(function(){isIE||navigator.plugins.refresh(!1),o.WebRTCPlugin.isPluginInstalled(o.WebRTCPlugin.pluginInfo.prefix,o.WebRTCPlugin.pluginInfo.plugName,o.WebRTCPlugin.pluginInfo.type,function(){clearInterval(t),o.WebRTCPlugin.defineWebRTCInterface()},function(){})},500)})}else o.renderNotificationBar(o.TEXT.PLUGIN.NOT_SUPPORTED)}},o.WebRTCPlugin.isPluginInstalled(o.WebRTCPlugin.pluginInfo.prefix,o.WebRTCPlugin.pluginInfo.plugName,o.WebRTCPlugin.pluginInfo.type,o.WebRTCPlugin.defineWebRTCInterface,o.WebRTCPlugin.pluginNeededButNotInstalledCb)):(navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)&&window.RTCPeerConnection&&(window.msRTCPeerConnection=window.RTCPeerConnection),function(t){e.exports=t()}(function(){return function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},r.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.getDtlsParameters=function(e,t){var n=r.splitLines(e);n=n.concat(r.splitLines(t));var i=n.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14);return{role:"auto",fingerprints:[{algorithm:i.split(" ")[0].toLowerCase(),value:i.split(" ")[1]}]}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return n=n.concat(r.splitLines(t)),{usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=r.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=r.parseRtpMap(s),u=r.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(0===d[0].indexOf("b=TIAS:")?d=parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")&&(d=parseInt(d[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=d})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.exports=r},{}],2:[function(e,t,n){"use strict";!function(){var n=e("./utils").log,r=e("./utils").browserDetails;t.exports.browserDetails=r,t.exports.extractVersion=e("./utils").extractVersion,t.exports.disableLog=e("./utils").disableLog;var i=e("./chrome/chrome_shim")||null,o=e("./edge/edge_shim")||null,a=e("./firefox/firefox_shim")||null,s=e("./safari/safari_shim")||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.exports.browserShim=s,s.shimGetUserMedia();break;default:n("Unsupported browser!")}}()},{"./chrome/chrome_shim":3,"./edge/edge_shim":5,"./firefox/firefox_shim":7,"./safari/safari_shim":9,"./utils":10}],3:[function(e,t,n){"use strict";var r=e("../utils.js").log,i=e("../utils.js").browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return i(e,t);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var c=function(e){o[1](s(a(e)))};return i.apply(this,[c,arguments[0]])}return new Promise(function(t,n){1===o.length&&"object"==typeof e?i.apply(r,[function(e){t(s(a(e)))},n]):i.apply(r,[function(e){t(s(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)}}};t.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils.js":10,"./getusermedia":4}],4:[function(e,t,n){"use strict";var r=e("../utils.js").log;t.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var i=t.video.facingMode;if((i=i&&("object"==typeof i?i:{ideal:i}))&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){o=o.filter(function(e){return"videoinput"===e.kind});var a=o.find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||o.length&&o[o.length-1];return a&&(t.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),r("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return r("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=i;var o=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).catch(function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":10}],5:[function(e,t,n){"use strict";var r=e("sdp"),i=e("../utils").browserDetails,o={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")||0===e.indexOf("stun:")&&i.version>=14393})[0])}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");else for(var r=1;r<t.length;r++)-1===t[r].indexOf("\r\na=end-of-candidates\r\n")&&(t[r]+="a=end-of-candidates\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var d=r.splitSections(n.localDescription.sdp);-1===s.candidate.candidate.indexOf("typ endOfCandidates")?d[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":d[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=d.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&l&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),l&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&(i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,d=a.localCapabilities,l=a.remoteCapabilities;if("0"!==e.split("\n",1)[0].split(" ",2)[1]&&!a.isDatachannel){var f=r.getIceParameters(e,n);if(o){var p=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});p.length&&c.setRemoteCandidates(p)}var h=r.getDtlsParameters(e,n);o&&(h.role="server"),i.usingBundle&&0!==t||(c.start(s,f,o?"controlling":"controlled"),u.start(h));var m=i._getCommonCapabilities(d,l);i._transceive(a,m.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u=r.splitLines(o),d=u[0].substr(2).split(" "),l=d[0],f="0"===d[1],p=r.getDirection(o,a),h=r.matchPrefix(o,"a=mid:");if(h=h.length?h[0].substr(6):r.generateIdentifier(),"application"===l&&"DTLS/SCTP"===d[2])return void(t.transceivers[c]={mid:h,isDatachannel:!0});var m,v,g,y,w,b,_,C,S,T,E,P,R=r.parseRtpParameters(o);f||(E=r.getIceParameters(o,a),P=r.getDtlsParameters(o,a),P.role="client"),C=r.parseRtpEncodingParameters(o);var x,k=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];k&&(x=k.value);var I=r.matchPrefix(o,"a=end-of-candidates",a).length>0,O=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||f)"answer"!==e.type||f||(m=t.transceivers[c],v=m.iceGatherer,g=m.iceTransport,y=m.dtlsTransport,w=m.rtpSender,b=m.rtpReceiver,_=m.sendEncodingParameters,S=m.localCapabilities,t.transceivers[c].recvEncodingParameters=C,t.transceivers[c].remoteCapabilities=R,t.transceivers[c].cname=x,(s||I)&&O.length&&g.setRemoteCandidates(O),t.usingBundle&&0!==c||(g.start(v,E,"controlling"),y.start(P)),t._transceive(m,"sendrecv"===p||"recvonly"===p,"sendrecv"===p||"sendonly"===p),!b||"sendrecv"!==p&&"sendonly"!==p?delete m.rtpReceiver:(T=b.track,i.push([T,b]),n.addTrack(T)));else{var M=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(h,c);if(I&&M.iceTransport.setRemoteCandidates(O),S=RTCRtpReceiver.getCapabilities(l),_=[{ssrc:1001*(2*c+2)}],b=new RTCRtpReceiver(M.dtlsTransport,l),T=b.track,i.push([T,b]),n.addTrack(T),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var D;"audio"===l?D=t.localStreams[0].getAudioTracks()[0]:"video"===l&&(D=t.localStreams[0].getVideoTracks()[0]),D&&(w=new RTCRtpSender(D,M.dtlsTransport))}t.transceivers[c]={iceGatherer:M.iceGatherer,iceTransport:M.iceTransport,dtlsTransport:M.dtlsTransport,localCapabilities:S,remoteCapabilities:R,rtpSender:w,rtpReceiver:b,kind:l,mid:h,cname:x,sendEncodingParameters:_,recvEncodingParameters:C},t._transceive(t.transceivers[c],!1,"sendrecv"===p||"sendonly"===p)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var i,o,a=t.track,c=t.kind,u=r.generateIdentifier(),d=e.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:e._createIceAndDtlsTransports(u,n),l=RTCRtpSender.getCapabilities(c),f=[{ssrc:1001*(2*n+1)}];a&&(i=new RTCRtpSender(a,d.dtlsTransport)),t.wantReceive&&(o=new RTCRtpReceiver(d.dtlsTransport,c)),s[n]={iceGatherer:d.iceGatherer,iceTransport:d.iceTransport,dtlsTransport:d.dtlsTransport,localCapabilities:l,remoteCapabilities:null,rtpSender:i,rtpReceiver:o,kind:c,mid:u,sendEncodingParameters:f,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n");var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};t.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":6,sdp:1}],6:[function(e,t,n){"use strict";t.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return t(n).catch(function(t){return Promise.reject(e(t))})}}},{}],7:[function(e,t,n){"use strict";var r=e("../utils").browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(r.version<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(e.iceServers[i])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}}};t.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":8}],8:[function(e,t,n){"use strict";var r=e("../utils").log,i=e("../utils").browserDetails;t.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),i.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),r("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){o(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},i.version<41){var o=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){return i.version<44?t(e,n,r):void navigator.mediaDevices.getUserMedia(e).then(n,r)}}},{"../utils":10}],9:[function(e,t,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};t.exports={shimGetUserMedia:r.shimGetUserMedia}},{}],10:[function(e,t,n){"use strict";var r=!0,i={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&console.log}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};t.exports={log:i.log,disableLog:i.disableLog,browserDetails:i.detectBrowser(),extractVersion:i.extractVersion}},{}]},{},[2])(2)}),o.parseWebrtcDetectedBrowser(),navigator.mozGetUserMedia?(MediaStreamTrack.getSources=function(e){setTimeout(function(){e([{kind:"audio",id:"default",label:"",facing:""},{kind:"video",id:"default",label:"",facing:""}])},0)},attachMediaStream=function(e,t){return e.srcObject=t,e},reattachMediaStream=function(e,t){return e.srcObject=t.srcObject,e},createIceServer=function(e,t,n){var r=null,i=e.split(":");if(0===i[0].indexOf("stun"))r={urls:[e]};else if(0===i[0].indexOf("turn"))if(webrtcDetectedVersion<27){var o=e.split("?");1!==o.length&&0!==o[1].indexOf("transport=udp")||(r={urls:[o[0]],credential:n,username:t})}else r={urls:[e],credential:n,username:t};return r},createIceServers=function(e,t,n){var r=[];for(i=0;i<e.length;i++){var o=createIceServer(e[i],t,n);null!==o&&r.push(o)}return r}):navigator.webkitGetUserMedia?(attachMediaStream=function(e,t){return webrtcDetectedVersion>=43?e.srcObject=t:void 0!==e.src&&(e.src=URL.createObjectURL(t)),e},reattachMediaStream=function(e,t){return webrtcDetectedVersion>=43?e.srcObject=t.srcObject:e.src=t.src,e},createIceServer=function(e,t,n){var r=null,i=e.split(":");return 0===i[0].indexOf("stun")?r={url:e}:0===i[0].indexOf("turn")&&(r={url:e,credential:n,username:t}),r},createIceServers=function(e,t,n){var r=[];if(webrtcDetectedVersion>=34)r={urls:e,credential:n,username:t};else for(i=0;i<e.length;i++){var o=createIceServer(e[i],t,n);null!==o&&r.push(o)}return r}):navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)&&(attachMediaStream=function(e,t){return e.srcObject=t,e},reattachMediaStream=function(e,t){return e.srcObject=t.srcObject,e}),attachMediaStream_base=attachMediaStream,"opera"===webrtcDetectedBrowser&&(attachMediaStream_base=function(e,t){webrtcDetectedVersion>38?e.srcObject=t:void 0!==e.src&&(e.src=URL.createObjectURL(t))}),attachMediaStream=function(e,t){return"chrome"!==webrtcDetectedBrowser&&"opera"!==webrtcDetectedBrowser||t?attachMediaStream_base(e,t):e.src="",e},reattachMediaStream_base=reattachMediaStream,reattachMediaStream=function(e,t){return reattachMediaStream_base(e,t),e},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=function(e,t,n){navigator.getUserMedia(e,t,n)},o.attachMediaStream=attachMediaStream,o.reattachMediaStream=reattachMediaStream,o.getUserMedia=getUserMedia,"undefined"==typeof Promise&&(requestUserMedia=null),o.maybeThroughWebRTCReady()),void 0!==t&&(e.exports=o),e.exports=o},function(e,t){e.exports=function e(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,r=this.length;n<r;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!e.apply(this[n],[t[n]]))return!1}else if(this[n]!=t[n])return!1;return!0}},function(e,t,n){t.Interop=n(208)},function(e,t,n){"use strict";function r(){this.cache={}}var i=n(209),o=n(206);e.exports=r,r.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var t=i.parse(this.cache.answer);if(t&&t.media&&Array.isArray(t.media))for(var n=0;n<t.media.length;n++)if(t.media[n].type==e&&(!t.media[n].direction||"sendrecv"===t.media[n].direction||"sendonly"===t.media[n].direction))return n;return null},r.prototype.toPlanB=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length<=3&&n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Unified Plan."),e;for(var r=e.sdp,o=!1,a=0;a<n.media.length;a++){n.media[a].rtp.forEach(function(e){if("NULL"===e.codec){o=!0;var n=i.parse(t.cache.offer);e.codec=n.media[a].rtp[0].codec}})}o&&(r=i.write(n)),this.cache[e.type]=r;var s=n.media;n.media=[];var c={},u=[];s.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");if("application"===e.type)return n.media.push(e),void u.push(e.mid);void 0===c[e.type]&&(c[e.type]=e),"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){"object"!=typeof c[e.type].sources&&(c[e.type].sources={}),c[e.type].sources[t]=e.sources[t],void 0!==e.msid&&(c[e.type].sources[t].msid=e.msid)}),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(void 0!==c[e.type].ssrcGroups&&Array.isArray(c[e.type].ssrcGroups)||(c[e.type].ssrcGroups=[]),c[e.type].ssrcGroups=c[e.type].ssrcGroups.concat(e.ssrcGroups)),c[e.type]===e&&(e.candidates=s[0].candidates,e.iceUfrag=s[0].iceUfrag,e.icePwd=s[0].icePwd,e.fingerprint=s[0].fingerprint,e.mid=e.type,delete e.bundleOnly,delete e.msid,u.push(e.type),n.media.push(e))}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=u.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var d=i.write(n);return new RTCSessionDescription({type:e.type,sdp:d})},r.prototype.toUnifiedPlan=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||!n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Plan B."),e;var r=[];n.media.forEach(function(e){r.push(e.mid)});var a=!1;if(void 0!==n.groups&&Array.isArray(n.groups)&&(a=n.groups.every(function(e){return"BUNDLE"!==e.type||o.apply(e.mids.sort(),[r.sort()])})),!a)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");var s;void 0!==this.cache[e.type]&&(s=i.parse(this.cache[e.type]));var c={audio:{},video:{}},u={};if(n.media.forEach(function(t){if(("string"!=typeof t.rtcpMux||"rtcp-mux"!==t.rtcpMux)&&"inactive"!==t.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"===t.type)return void(u[t.mid]=t);var n=t.sources,r=t.ssrcGroups,i=t.candidates,o=t.iceUfrag,a=t.icePwd,d=t.fingerprint,l=t.port;delete t.sources,delete t.ssrcGroups,delete t.candidates,delete t.iceUfrag,delete t.icePwd,delete t.fingerprint,delete t.port,delete t.mid;var f={};void 0!==r&&Array.isArray(r)&&r.forEach(function(e){"SIM"!==e.semantics&&void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(t){void 0===f[t]&&(f[t]=[]),f[t].push(e)})});var p={};"object"==typeof n&&Object.keys(n).forEach(function(r){var h;if("offer"===e.type&&!n[r].msid)return void(c[t.type][r]=n[r]);if(void 0!==f[r]&&Array.isArray(f[r])&&f[r].some(function(e){return e.ssrcs.some(function(e){if("object"==typeof p[e])return h=p[e],!0})}),"object"==typeof h)h.sources[r]=n[r],delete n[r].msid;else{if(h=Object.create(t),p[r]=h,void 0!==n[r].msid&&(h.msid=n[r].msid,h.direction="sendrecv",delete n[r].msid),h.sources={},h.sources[r]=n[r],h.ssrcGroups=f[r],void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach(function(e){"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){t===r&&(h.mid=e.mid)})}),void 0===h.mid){if("answer"===e.type)throw new Error("An unmapped SSRC was found.");h.mid=[t.type,"-",r].join("")}h.candidates=i,h.iceUfrag=o,h.icePwd=a,h.fingerprint=d,h.port=l,u[h.mid]=h}})}),n.media=[],r=[],"answer"===e.type)for(var d=0;d<s.media.length;d++){var l=s.media[d];void 0===u[l.mid]&&(delete l.msid,delete l.sources,delete l.ssrcGroups,l.direction&&"sendrecv"!==l.direction?"sendonly"===l.direction&&(l.direction="inactive"):l.direction="recvonly"),n.media.push(l),"string"==typeof l.mid&&r.push(l.mid)}else void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach(function(e){r.push(e.mid),void 0!==u[e.mid]?n.media.push(u[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="recvonly"),e.direction&&"sendonly"!==e.direction||(e.direction="inactive"),n.media.push(e))}),Object.keys(u).forEach(function(e){-1===r.indexOf(e)&&(r.push(e),"recvonly"===u[e].direction?n.media.some(function(t){if(("sendrecv"===t.direction||"sendonly"===t.direction)&&t.type===u[e].type)return Object.keys(u[e].sources).forEach(function(n){t.sources[n]=u[e].sources[n]}),!0}):n.media.push(u[e]))});["audio","video"].forEach(function(e){if(n&&n.media&&Array.isArray(n.media)){var r=null;if(Object.keys(c[e]).length>0&&null===(r=t.getFirstSendingIndexFromAnswer(e)))for(var i=0;i<n.media.length;i++)if(n.media[i].type===e){r=i;break}if(r&&n.media.length>r){var o=n.media[r];Object.keys(c[e]).forEach(function(t){o.sources&&o.sources[t]&&console.warn("Replacing an existing SSRC."),o.sources||(o.sources={}),o.sources[t]=c[e][t]})}}}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=r.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var f=i.write(n);return this.cache[e.type]=f,new RTCSessionDescription({type:e.type,sdp:f})}},function(e,t,n){var r=n(210);t.write=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){void 0!==e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach(function(t){var n=e.sources[t];Object.keys(n).forEach(function(r){e.ssrcs.push({id:t,attribute:r,value:n[r]})})}),delete e.sources),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),void 0!==e&&void 0!==e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){void 0!==e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),r.write(e,t)},t.parse=function(e){var t=r.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach(function(t){e.sources[t.id]||(e.sources[t.id]={}),e.sources[t.id][t.attribute]=t.value}),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),void 0!==t&&void 0!==t.groups&&Array.isArray(t.groups)&&t.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),t}},function(e,t,n){var r=n(211),i=n(212);t.write=i,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))},o=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:r?t[e.name]:t;i(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},a=n(175),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(i))return o(c,r,i)}}),t.media=n,t};var c=function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=r(n[1])),e};t.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(c,{})},t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t}},function(e,t,n){var r=n(175),i=function(e){var t=1,n=arguments,r=n.length;return e.replace(/%[sdv%]/g,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},o=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,o=[e+"="+r];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];t.name?o.push(n[t.name][s]):o.push(n[t.names[a]])}else o.push(n[t.name]);return i.apply(null,o)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||a,i=t.innerOrder||s,c=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(o(t,n,e))})})}),e.media.forEach(function(e){c.push(o("m",r.m[0],e)),i.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(o(t,n,e))})})})}),c.join("\r\n")+"\r\n"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){function e(e){var t=window.chrome.runtime.getManifest();window.chrome.pageAction.setTitle({tabId:e.id,title:t.page_action.start_title?t.page_action.start_title:t.page_action.default_title}),window.chrome.pageAction.setIcon({tabId:e.id,path:t.icons[128]})}function t(e){var t=window.chrome.runtime.getManifest();window.chrome.pageAction.setTitle({tabId:e.id,title:t.page_action.stop_title?t.page_action.stop_title:t.page_action.default_title}),window.chrome.pageAction.setIcon({tabId:e.id,path:t.icons[129]})}function r(e){var n=e.url?e.url.match(l)[1]:null;u={id:e.id,domain:n},t(e),s.default.debug(p,"activated tab",e),window.chrome.tabCapture.capture({video:!0,videoConstraints:{mandatory:{maxWidth:e.width,maxHeight:e.height,maxFrameRate:5}}},function(e){if(!e)return i();u?(u.stream=e,s.default.debug(p,"got stream",e),b("haveStream")):e.getVideoTracks()[0].stop()})}function i(){u&&(s.default.debug(p,"inactivating",u),e(u),u.stream&&(b("lostStream"),d&&(s.default.debug(p,"had ongoing call, ending"),y()),u.stream.getVideoTracks()[0].stop(),u.stream.active&&s.default.error("failed to stop media stream:",u.stream),u.stream=null),u=null)}function h(e){if(s.default.debug(p,"iceServers: ",o()(e,0,4)),!u)return s.default.warning(p,"tried to start call without active tab");if(!u.stream)return s.default.warning(p,"tried to start call without active stream");d&&y(),d=_({iceServers:e,iceCandidateFilter:function(e){return"relay"===e.type}}),s.default.debug(p,"adding stream",u.stream);var t=d;d.addStream(u.stream),d.performOffer({waitForIce:!0}).then(function(e){s.default.debug(p,"sending offer:",e),t===d&&b("offer",e)}).catch(function(e){throw new Error(e)}).catch(function(e){throw new Error(e)});var n=0;d.addEventListener("iceconnectionstatechange",function(){if(d){var e=d.iceConnectionState;s.default.debug(p,"connectionState: ",e),"failed"===e&&w(),"disconnected"===e?n=setTimeout(function(){w(),n=0},5e3):(clearTimeout(n),n=0)}}),d.addEventListener("signalingstatechange",function(){d&&(s.default.debug(p,"changed signaling state:",d.signalingState),"closed"===d.signalingState&&w())})}function m(e){d&&e&&(e=new RTCIceCandidate(e),d.addIceCandidate(e))}function v(e){d&&!d.hasAnswer&&(e=new RTCSessionDescription(e),d._setRemoteDescription(e).then(function(){d.hasAnswer=!0,s.default.debug(p,"answer",e)}).catch(function(e){throw new Error(e)}))}function g(e,t){u&&"number"==typeof e&&"number"==typeof t&&window.chrome.tabs.executeScript(u.id,{code:"window.scrollBy("+e+", "+t+")",allFrames:!0})}function y(){try{d&&d.close()}catch(e){s.default.error("failed to close peer connection:",e)}d=null}function w(){y(),i()}function b(e,t){if(!c)return s.default.warning(p,"could not send "+e+", no active port");c.postMessage({type:e,content:t})}function _(e){e=e||{};var StatsFormatter=n(201).default,t=e.rtcpMuxPolicy||"require",r=e.bundlePolicy||"max-bundle",i=e.iceServers,o=e.iceCandidateFilter,s=e.iceTransportPolicy;"string"==typeof i?i=[i]:Array.isArray(i)||(i=[]),i=i.map(function(e){return"string"==typeof e?{urls:e}:e}),StatsFormatter.handleStats=function(){return null};var c={iceServers:i,rtcpMuxPolicy:t,bundlePolicy:r,iceTransportPolicy:s};return new a.a(c,StatsFormatter,o)}window.chrome.runtime.onInstalled.addListener(function(e){window.chrome.declarativeContent.onPageChanged.removeRules()}),window.chrome.runtime.onMessageExternal.addListener(function(e,t,n){var r=e&&e.type;if(s.default.debug(p,"got external message:",e),"version"===r){var i=window.chrome.runtime.getManifest().version;n({version:i})}else if("uninstall"===r)window.chrome.management.uninstallSelf();else if("requestMediaSourceId"===r){var o=e.sourceTypes||f;window.chrome.desktopCapture.chooseDesktopMedia(o,t.tab,function(e){n({sourceId:e||null})})}return!0}),window.chrome.runtime.onConnectExternal.addListener(function(e){var t=null;e.name&&e.name.startsWith("options:")&&(t=JSON.parse(e.name.slice("options:".length))),s.default.debug(p,"external connection:",e.sender.url.slice(0,50));var n=c;if(c=e,n&&(s.default.debug(p,"disconnecting old port to:",n.sender.url.slice(0,50)),w(),n.disconnect()),s.default.debug(p,"portOptions: ",o()(t,0,4)),!t||t.showOwnTabAction){var r=e.sender.tab.id;window.chrome.pageAction.show(r)}if(t&&t.pageActionConditions){var a=t.pageActionConditions.map(function(e){return new window.chrome.declarativeContent.PageStateMatcher(e)}),d=[new window.chrome.declarativeContent.ShowPageAction];s.default.debug(p,"removing old page actions rules and installing new"),window.chrome.declarativeContent.onPageChanged.removeRules(void 0,function(){window.chrome.declarativeContent.onPageChanged.addRules([{conditions:a,actions:d}])})}u&&u.stream&&b("haveStream"),e.onMessage.addListener(function(e){"startCall"===e.type?h(e.content):"candidate"===e.type?m(e.content):"answer"===e.type?v(e.content):"endCall"===e.type?w():"scrollBy"===e.type&&g(e.content.x,e.content.y)}),e.onDisconnect.addListener(function(){s.default.debug(p,"port disconnected: ",e.sender.url.slice(0,50)),t&&!t.showOwnTabAction||window.chrome.pageAction.hide(r),c===e&&(c=null),w(),i(),c||(s.default.debug(p,"removing old page actions rules after disconnect"),window.chrome.declarativeContent.onPageChanged.removeRules())})}),window.chrome.pageAction.onClicked.addListener(function(e){u&&e.id===u.id?i():(i(),r(e))}),window.chrome.tabs.onRemoved.addListener(function(e){u&&e===u.id&&i()}),window.chrome.tabs.onUpdated.addListener(function(e,n,r){if(u&&e===u.id&&"loading"===n.status)if(u&&e===u.id&&t(r),r.url){s.default.debug(p,"active tab navigating to "+r.url+" from domain "+u.domain);var o=r.url.match(l)[1];o!==u.domain&&(s.default.debug(p,"active tab left domain, inactivating"),i())}else s.default.debug(p,"active tab left navigated to unknown domain, inactivating"),i()})}t.a=r;var i=n(48),o=n.n(i),a=n(162),s=n(2);n.d(t,"b",function(){return s.default});var c=null,u=null,d=null,l=/^[a-z]+:\/\/(?:[^@]+@)?([^:\/]+)/i,f=["screen","window"],p="tab-sharing"},,,,,,function(e,t,n){"use strict";function r(){function e(e){e({extensionId:window.chrome.runtime.id,message:"extensionIsInstalled"})}function t(e,t,r){var i=e.message.sourceTypes||n;window.chrome.desktopCapture.chooseDesktopMedia(i,t.tab,function(e){r({extensionId:window.chrome.runtime.id,message:"chromeMediaSourceId",content:e||null})})}var n=["screen","window"];window.chrome.runtime.onMessageExternal.addListener(function(n,r,i){if(o.default.debug(a,"got external message:",n),"version"===n.message){i({version:window.chrome.runtime.getManifest().version})}else"uninstall"===n.message?window.chrome.management.uninstallSelf():"getInstalledStatus"===n.message?e(i):"requestChromeMediaSourceId"===n.message&&t(n,r,i);return!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.startScreenSharing=r;var i=n(251);n.d(t,"startTabSharing",function(){return i.a});var o=n(2);n.d(t,"log",function(){return o.default});var a="chrome-extension",s=n(20);s&&n(2).setLog(s.log)}])});
\ No newline at end of file
diff --git a/screen-sharing/chrome-extension-ex/chrome-extension.js.map b/screen-sharing/chrome-extension-ex/chrome-extension.js.map
deleted file mode 100644
index baf8357..0000000
--- a/screen-sharing/chrome-extension-ex/chrome-extension.js.map
+++ /dev/null
@@ -1 +0,0 @@
-{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 8a27f142757ad0139ef4?05fd","webpack:///./~/core-js/library/modules/_core.js?1b62","webpack:///./~/babel-runtime/helpers/classCallCheck.js?21af","webpack:///./~/babel-runtime/helpers/createClass.js?1dfe","webpack:///./lib/common/log.js?a8d6","webpack:///./~/core-js/library/modules/_wks.js?3027","webpack:///./~/core-js/library/modules/_global.js?77aa","webpack:///./~/babel-runtime/core-js/object/get-prototype-of.js?b265","webpack:///./~/core-js/library/modules/_export.js?ece2","webpack:///./~/babel-runtime/helpers/inherits.js?0578","webpack:///./~/babel-runtime/helpers/possibleConstructorReturn.js?aad9","webpack:///./~/core-js/library/modules/_object-dp.js?4116","webpack:///./~/core-js/library/modules/_descriptors.js?7051","webpack:///./lib/common/argCheck.js?bd6d","webpack:///./lib/common/utils.js?be90","webpack:///./~/core-js/library/modules/_an-object.js?0da3","webpack:///./~/core-js/library/modules/_to-iobject.js?6946","webpack:///./~/core-js/library/modules/_hide.js?a6da","webpack:///./~/core-js/library/modules/_is-object.js?24c8","webpack:///./~/core-js/library/modules/_ctx.js?ce00","webpack:///external {\"root\":\"cct\",\"commonjs2\":\"@cct/libcct\",\"commonjs\":\"@cct/libcct\",\"amd\":\"@cct/libcct\"}","webpack:///./~/core-js/library/modules/_has.js?d850","webpack:///./~/core-js/library/modules/_fails.js?935d","webpack:///./~/core-js/library/modules/es6.string.iterator.js?fe18","webpack:///./~/babel-runtime/core-js/promise.js?13dc","webpack:///./~/core-js/library/modules/_iterators.js?aff7","webpack:///./~/core-js/library/modules/_object-keys.js?f5bc","webpack:///./~/core-js/library/modules/_to-object.js?b5c0","webpack:///./~/core-js/library/modules/_property-desc.js?1e86","webpack:///./~/core-js/library/modules/_set-to-string-tag.js?c945","webpack:///./~/core-js/library/modules/web.dom.iterable.js?bf0e","webpack:///./~/core-js/library/modules/_cof.js?48ea","webpack:///./~/babel-runtime/helpers/toConsumableArray.js?1825","webpack:///./~/babel-runtime/core-js/map.js?f6ea","webpack:///./~/babel-runtime/helpers/typeof.js?f4bd","webpack:///./lib/common/emitter.js?a192","webpack:///./~/core-js/library/modules/_defined.js?45d3","webpack:///./~/core-js/library/modules/_object-create.js?d8cf","webpack:///./~/core-js/library/modules/_to-length.js?62a7","webpack:///./~/core-js/library/modules/_uid.js?e8cd","webpack:///./~/babel-runtime/helpers/slicedToArray.js?39c4","webpack:///./~/core-js/library/modules/_for-of.js?526b","webpack:///./~/core-js/library/modules/_library.js?2c80","webpack:///./~/core-js/library/modules/_object-pie.js?d0d2","webpack:///./~/core-js/library/modules/_classof.js?b4b3","webpack:///./~/babel-runtime/core-js/set.js?0724","webpack:///./~/core-js/library/modules/_object-sap.js?a03e","webpack:///./~/babel-runtime/core-js/object/define-property.js?5f70","webpack:///./~/babel-runtime/core-js/json/stringify.js?4574","webpack:///./~/core-js/library/modules/_enum-bug-keys.js?7598","webpack:///./~/core-js/library/modules/_iter-define.js?9a94","webpack:///./~/core-js/library/modules/_meta.js?553d","webpack:///./~/core-js/library/modules/_object-gopd.js?d7d8","webpack:///./~/core-js/library/modules/_shared-key.js?2a6c","webpack:///./~/core-js/library/modules/_shared.js?7b6c","webpack:///./~/core-js/library/modules/_to-integer.js?f65f","webpack:///./~/core-js/library/modules/_to-primitive.js?49a4","webpack:///./~/core-js/library/modules/_wks-define.js?b6e0","webpack:///./~/core-js/library/modules/_wks-ext.js?6ee2","webpack:///./~/core-js/library/modules/_an-instance.js?e4d6","webpack:///./~/core-js/library/modules/_dom-create.js?ab44","webpack:///./~/core-js/library/modules/_redefine-all.js?c729","webpack:///./~/babel-runtime/core-js/object/create.js?aa4b","webpack:///./~/core-js/library/modules/_a-function.js?d53e","webpack:///./~/babel-runtime/core-js/object/keys.js?fe06","webpack:///./~/core-js/library/modules/core.get-iterator-method.js?9c88","webpack:///./lib/webrtc/utils.js?d778","webpack:///./~/core-js/library/modules/_iobject.js?5cf9","webpack:///./~/core-js/library/modules/_object-gops.js?a5fb","webpack:///./~/babel-runtime/helpers/get.js?a320","webpack:///./~/core-js/library/modules/_ie8-dom-define.js?bd1f","webpack:///./~/core-js/library/modules/_is-array-iter.js?a4b3","webpack:///./~/core-js/library/modules/_is-array.js?1843","webpack:///./~/core-js/library/modules/_iter-call.js?5189","webpack:///./~/core-js/library/modules/_iter-step.js?e209","webpack:///./~/core-js/library/modules/_object-gopn.js?1e07","webpack:///./~/core-js/library/modules/_object-gpo.js?d47d","webpack:///./~/core-js/library/modules/_object-keys-internal.js?fcea","webpack:///./~/core-js/library/modules/_redefine.js?1455","webpack:///./~/babel-runtime/core-js/array/from.js?efc2","webpack:///./~/core-js/library/modules/_collection-strong.js?1a37","webpack:///./~/core-js/library/modules/_collection-to-json.js?94a9","webpack:///./~/core-js/library/modules/_collection.js?55a5","webpack:///./~/core-js/library/modules/_html.js?e5af","webpack:///./~/core-js/library/modules/_iter-detect.js?0a91","webpack:///./~/core-js/library/modules/_set-species.js?27d6","webpack:///./lib/media/mediaNode.js?52e9","webpack:///./~/babel-runtime/core-js/symbol.js?a70d","webpack:///./~/babel-runtime/helpers/defineProperty.js?172e","webpack:///./~/babel-runtime/helpers/toArray.js?aa2d","webpack:///./~/core-js/library/modules/_task.js?123f","webpack:///./~/core-js/library/modules/_object-gopn-ext.js?d238","webpack:///./lib/media/common.js?6cb3","webpack:///./~/babel-runtime/core-js/object/get-own-property-descriptor.js?3223","webpack:///./~/babel-runtime/core-js/symbol/iterator.js?d16b","webpack:///./~/core-js/library/modules/_object-dps.js?47fd","webpack:///./~/babel-runtime/core-js/object/set-prototype-of.js?bb00","webpack:///./~/core-js/library/fn/array/from.js?669d","webpack:///./~/core-js/library/fn/object/create.js?738c","webpack:///./~/core-js/library/fn/object/define-property.js?b7d8","webpack:///./~/core-js/library/fn/object/get-own-property-descriptor.js?7504","webpack:///./~/core-js/library/fn/object/get-prototype-of.js?5193","webpack:///./~/core-js/library/fn/object/set-prototype-of.js?f909","webpack:///./~/core-js/library/fn/set.js?2c6c","webpack:///./~/core-js/library/fn/symbol/index.js?f07a","webpack:///./~/core-js/library/fn/symbol/iterator.js?238d","webpack:///./~/core-js/library/modules/_add-to-unscopables.js?d5e8","webpack:///./~/core-js/library/modules/_array-from-iterable.js?ec0e","webpack:///./~/core-js/library/modules/_array-includes.js?6199","webpack:///./~/core-js/library/modules/_array-methods.js?de71","webpack:///./~/core-js/library/modules/_array-species-constructor.js?d6aa","webpack:///./~/core-js/library/modules/_array-species-create.js?5116","webpack:///./~/core-js/library/modules/_create-property.js?1ad1","webpack:///./~/core-js/library/modules/_enum-keys.js?727a","webpack:///./~/core-js/library/modules/_iter-create.js?0127","webpack:///./~/core-js/library/modules/_keyof.js?0d3b","webpack:///./~/core-js/library/modules/_set-proto.js?9665","webpack:///./~/core-js/library/modules/_string-at.js?413a","webpack:///./~/core-js/library/modules/_to-index.js?9fd4","webpack:///./~/core-js/library/modules/es6.array.from.js?ce7d","webpack:///./~/core-js/library/modules/es6.array.iterator.js?1e09","webpack:///./~/core-js/library/modules/es6.object.create.js?9034","webpack:///./~/core-js/library/modules/es6.object.define-property.js?c82c","webpack:///./~/core-js/library/modules/es6.object.get-own-property-descriptor.js?fe21","webpack:///./~/core-js/library/modules/es6.object.get-prototype-of.js?eaa3","webpack:///./~/core-js/library/modules/es6.object.set-prototype-of.js?b195","webpack:///./~/core-js/library/modules/es6.set.js?dbba","webpack:///./~/core-js/library/modules/es6.symbol.js?670a","webpack:///./~/core-js/library/modules/es7.set.to-json.js?e75b","webpack:///./~/core-js/library/modules/es7.symbol.async-iterator.js?b8c5","webpack:///./~/core-js/library/modules/es7.symbol.observable.js?daa4","webpack:///./lib/media/mediaNodeInput.js?d202","webpack:///./~/core-js/library/fn/map.js?edc1","webpack:///./~/core-js/library/fn/object/keys.js?cc3f","webpack:///./~/core-js/library/fn/promise.js?84d2","webpack:///./~/core-js/library/modules/_invoke.js?0567","webpack:///./~/core-js/library/modules/_microtask.js?4cf6","webpack:///./~/core-js/library/modules/_species-constructor.js?737a","webpack:///./~/core-js/library/modules/es6.map.js?84b6","webpack:///./~/core-js/library/modules/es6.object.keys.js?c98f","webpack:///./~/core-js/library/modules/es6.promise.js?903b","webpack:///./~/core-js/library/modules/es7.map.to-json.js?184d","webpack:///./lib/media/mediaSource.js?15e7","webpack:///./lib/common/errors.js?897f","webpack:///./lib/media/htmlSink.js?82fa","webpack:///./~/core-js/library/fn/json/stringify.js?6708","webpack:///./lib/media/mediaNodeOutput.js?8cab","webpack:///./~/babel-runtime/core-js/get-iterator.js?1b08","webpack:///./lib/media/mediaSink.js?43b4","webpack:///./~/babel-runtime/core-js/is-iterable.js?350e","webpack:///./~/core-js/library/fn/get-iterator.js?2cf7","webpack:///./~/core-js/library/fn/is-iterable.js?0bd2","webpack:///./~/core-js/library/modules/core.get-iterator.js?aca7","webpack:///./~/core-js/library/modules/core.is-iterable.js?77cc","webpack:///./lib/common/queue.js?f15c","webpack:///./lib/webrtc/peerConnectionProxy.js?7aa0","webpack:///./~/babel-runtime/core-js/object/assign.js?e6ca","webpack:///./~/babel-runtime/core-js/object/get-own-property-names.js?5629","webpack:///./~/core-js/library/fn/object/assign.js?80e4","webpack:///./~/core-js/library/fn/object/get-own-property-names.js?4868","webpack:///./~/core-js/library/modules/_object-assign.js?5c0c","webpack:///./~/core-js/library/modules/es6.object.assign.js?9007","webpack:///./~/core-js/library/modules/es6.object.get-own-property-names.js?02fd","webpack:///./~/sdp-transform/lib/grammar.js?d164","webpack:///./lib/media/dummySource.js?7ffb","webpack:///./~/babel-runtime/core-js/object/define-properties.js?a4c7","webpack:///./lib/webrtc/peerConnectionMonitor.js?e6ad","webpack:///./lib/webrtc/sdpTransform.js?9a91","webpack:///./lib/webrtc/statsFormatter.js?ef18","webpack:///./lib/webrtc/statsNormalizer.js?39a3","webpack:///./~/core-js/library/fn/object/define-properties.js?11a6","webpack:///./~/core-js/library/modules/es6.object.define-properties.js?10f4","webpack:///./~/adapterjs/publish/adapter.min.js?13f8","webpack:///./~/sdp-interop/lib/array-equals.js?e9b1","webpack:///./~/sdp-interop/lib/index.js?d5fa","webpack:///./~/sdp-interop/lib/interop.js?6538","webpack:///./~/sdp-interop/lib/transform.js?26af","webpack:///./~/sdp-transform/lib/index.js?75eb","webpack:///./~/sdp-transform/lib/parser.js?89f7","webpack:///./~/sdp-transform/lib/writer.js?26de","webpack:///./lib/tabSharing.js","webpack:///./lib/chrome-extension.js"],"names":["Log","_defaultLogLevel","WARNING","_categoryLevels","_logHandlers","prototype","setLogHandler","levels","handler","arguments","length","ALL","TypeError","forEach","level","index","bind","setLogLevel","category","createLogFunction","mask","message","args","argCheck","string","logLevel","object","objectMessage","objectArgs","call","toUpperCase","NONE","reduce","ignored","log","setLog","_log","logFunctions","ERROR","console","error","warn","INFO","info","DEBUG","debug","VERBOSE","logColors","defaultLogHandler","colorLogHandler","color","colors","defaultHandler","isChrome","optArgCheck","prop","context","name","value","extra","undefined","e","count","requiredCount","actualCount","criteria","constructor","optObject","Array","isArray","RegExp","optInstance","instance","Error","atLeastOneMatch","some","names","map","join","optFunc","func","optArray","array","optString","optStringOrEmpty","stringOrEmpty","optValues","values","indexOf","optNumber","number","isNaN","isFinite","optBoolean","boolean","options","OptionsArgChecker","optOptions","empty","optOptionsArgCheck","type","find","collection","thisArg","key","hasOwnProperty","fill","len","i","filter","arr","push","mapValues","obj","diff","collection1","collection2","set1","set2","added","removed","has","element","toArray","arrayLike","hiddenProp","enumerable","configurable","writable","getter","get","range","from","to","step","defer","deferred","promise","resolve","reject","shallowCopy","keys","result","assign","other","wait","time","setTimeout","apply","randomString","size","now","crypto","noVendor","globalObject","require","randomBytes","window","Uint8Array","getRandomValues","Date","getTime","Math","random","rawString","String","fromCharCode","base64String","utf8ToBase64","replace","slice","arrayBufferSha1IfSupported","arrayBuffer","subtleCrypto","subtle","digest","base64ToUtf8","base64","global","Buffer","toString","atob","utf8","btoa","urlSafeBase64ToUtf8","urlSafeBase64","charFromUrlSafeBase64","utf8ToUrlSafeBase64","charToUrlSafeBase64","char","binaryStringToArrayBuffer","binaryString","buffer","ArrayBuffer","view","charCodeAt","unicodeStringToArrayBuffer","unicodeString","Uint16Array","bufferViewToString","chunkSize","subarray","arrayBufferToBinaryString","byteOffset","byteLength","arrayBufferToUnicodeString","parseDataUri","dataUri","split","mimeType","blobToArrayBuffer","blob","reader","FileReader","onload","onerror","readAsArrayBuffer","bufferToFile","fileName","file","Blob","lastModifiedDate","bufferToHex","x","hexToBuffer","hex","substr","parseInt","concatenateArrayBuffers","buffers","totalLength","offset","set","upper","unprefixed","__C3_SDK_INSTANCES__","listeners","addListener","listener","add","removeListener","delete","registerInstance","collectionName","unregisterInstance","splice","priv","assertPriv","providedPriv","isFirefox","test","navigator","userAgent","isGoogle","vendor","browser","isIE","document","documentMode","isObject","notInNode","thing","maybeConvertStringToNumber","Number","parseFloat","getStringByteLength","bytes","charCode","ReadOnlyMap","ReadOnlySet","createTimedBuffer","callback","timeout","arg","onTimeout","errorForwarder","location","newError","reason","DEFAULT_LISTENER_LIMIT","LEAK_MESSAGE","limit","emitterPrototype","Base","EmitterMixin","emitter","superclass","__listeners","eventType","_listeners","deprecationMessage","_deprecatedEvents","warning","remaining","iterating","pending","LISTENER_LIMIT","newListeners","concat","listenerCount","clear","called","stack","isWebRtcPlugin","webrtcDetectedType","MediaStream","AudioContext","isMediaStream","stream","id","addTrack","getTracks","webRtcReady","ret","AdapterJS","webRTCReady","addPeerConnectionStream","peerConnection","removeSet","_streamsPendingRemoval","addStream","ALLOWED_REMOVE_STATES","waitForStableState","onState","state","signalingState","removeEventListener","addEventListener","removeAllTracks","tracks","sender","getSenders","track","removeTrack","removePeerConnectionStream","removeStream","BinaryTree","nodes","tag","root","parent","child","childIndex","parentIndex","floor","left","right","AudioContextUtil","MAX_REFERENCES","_references","_context","release","close","audioContextUtil","getMediaStreamId","_blobId","fullId","collectStreams","streams","streamDiff","streams1","streams2","streamMap1","streamMap2","streamIds1","streamIds2","addedIds","removedIds","addedStreams","removedStreams","TAG","MediaNode","camelName","toLowerCase","output","input","HTMLElement","MediaNodeOutput","connect","disconnect","target","PortMap","portConstructor","onStream","onCreate","onDetach","_parent","_portConstructor","_onStream","_onCreate","_onDetach","port","oldStream","constructorError","detach","_","InputMap","inputConstructor","OutputMap","outputConstructor","mediaNodeSpecies","inputs","outputs","isMediaNode","doesntSupportPlugin","OverconstrainedError","errorName","gumQueue","NOT_ALLOWED_ERRORS","NOT_FOUND_ERRORS","OVERCONSTRAINED_ERRORS","getUserMedia","constraints","gumError","constraint","MediaNodeInput","_name","_output","_stream","_target","_setStream","chain","MediaSource","setStream","connectMixin","CctError","captureStackTrace","Object","defineProperty","toJSON","NotAllowedError","NotFoundError","UnknownError","replacement","HtmlSink","bail","_refreshSink","_refreshTick","detachEvent","attachEvent","catch","HTMLMediaElement","srcObject","src","attachMediaStream","originalElement","play","_cleanup","_assign","_targets","default","sink","verbose","_add","isHtmlSink","possibleSinkInput","sinkHasTargetAsTarget","_hasTarget","_delete","_clear","MediaSink","_input","AsyncQueue","_queue","_currentTask","factory","task","_poll","cancelled","self","shift","then","AsyncPipe","_deferredRead","item","pop","unshift","EVENT_HANDLER_ERROR_TEMPLATE","IceConfigErrorDetector","iceServers","_haveTurn","_haveStun","url","server","urls","_gotStun","_gotTurn","iceConnectionState","msg","PeerConnectionProxy","config","statsFormatter","rtcpMuxPolicy","bundlePolicy","iceCandidateFilter","pcConfig","_pc","RTCPeerConnection","_iceCandidateFilter","_eventTarget","_id","_interop","_iceErrorDetector","_firstMid","getLocalStreams","getRemoteStreams","addIceCandidate","_createAnswer","_createOffer","getStats","_setLocalDescription","_setRemoteDescription","waitForInitialIce","oniceconnectionstatechange","_emit","onnegotiationneeded","onsignalingstatechange","onaddstream","event","onremovestream","ondatachannel","channel","deferredIce","_initialIceComplete","onicecandidate","candidate","end","parseCandidateInfo","observedCandidate","sdpMid","match","simpleMid","attachPeerConnectionMonitor","on","off","_dummyStream","bandwidth","waitForIce","dummy","video","audio","_rewriteLocalInputDescription","desc","localDescription","offer","_rewriteLocalOutputDescription","_rewriteRemoteInputDescription","answer","sdp","disableSendBandwidthEstimation","filterSdpCandidates","workaroundSdpBundleBug","RTCSessionDescription","unifiedPlanSdp","mid","extractApplicationBlock","extractedSdp","extracted","needsInteropTranslation","mediaModeUnions","readMediaModeUnions","toPlanB","overrideMediaModes","rewriteBundleAttribute","injectApplicationBlock","oldSdp","removeChromeRetransmission","toUnifiedPlan","setLocalDescription","makeError","setRemoteDescription","createOffer","createAnswer","sdpMLineIndex","RTCIceCandidate","label","createDataChannel","selector","standardReport","response","standardStats","report","stat","iceGatheringState","remoteDescription","funcName","DummySource","_audioContext","_destination","createMediaStreamDestination","_silence","createBufferSource","_canvas","createElement","style","width","height","getContext","captureStream","stop","WEBRTC_MONITOR_REGEX_MSID_CHROME","WEBRTC_MONITOR_REGEX_MSID_FIREFOX","WEBRTC_MONITOR_REGEX_MSLABEL","WEBRTC_MONITOR_REGEX_LABEL","WEBRTC_MONITOR_REGEX_CNAME","parseIdentities","identities","ids","ssrcs","blocks","block","lines","msidTemp","line","sdpMsIdC","msid","mstid","sdpMsIdF","ssrc","sdpMsLabel","sdpLabel","sdpCname","cname","reportGenericStat","formatter","sample","timestamp","pcId","handleStats","PEER_CONNECTION_MONITOR_CANDIDATE_RE","parseCandidateString","candidateString","candidateMatches","relatedAddress","relatedPort","tcpType","transport","reportCandidate","rtcicecandidate","localOrRemote","sourceId","PEER_CONNECTION_MONITOR_INTERNAL_MS","PEER_CONNECTION_MONITOR_ICE_CHECKING_TIMEOUT_MS","pc","reportIntervalMs","callSucceeded","reportInterval","isRelay","clearInterval","normalizePeerConnectionStats","createPeerConnectionStatNormalizer","iceCheckingTimeout","clearTimeout","stats","normalizedStats","localCandidateType","realAddIceCandidate","setInterval","candidateRegExp","bundleAttributeRegExp","origin","foundation","componentId","priority","address","blockSplitRegExp","sessionBlock","mediaBlocks","applicationMBlockIndex","applicationMId","newSessionBlock","mIdsStr","mIds","applicationMBlock","newSdp","extractedBlock","modeRegExp","mediaTypeRegExp","modeValues","inactive","sendonly","recvonly","sendrecv","modeNames","defaultModeName","audioModeValue","videoModeValue","applicationModeValue","mediaBlock","mediaType","modeName","modeValue","application","mediaModes","mId","bundleAttribute","bweRegExp","ssrcGroupRegExp","rtxPayloadTypeRegExp","modifiedMediaBlocks","removedSsrcs","withoutSsrcGroups","ssrcRegExp","withoutSsrcs","withoutRtxPayloadTypes","StatsFormatter","reporter","contextId","setPeerId","peerId","STATS_OBJ_REGEX_FIREFOX","STATS_KEY_BLACKLIST_FIREFOX","STATS_OBJ_REGEX_CHROME","STATS_KEY_BLACKLIST_CHROME","normalizeStatsMatchFirefox","statKey","matchFirefox","role","reportType","k","normalizeStatsMatchChrome","matchChrome","candidatePairKeys","assignCandidatePairValues","destKey","charAt","getSelectedPairSampleFromStats","localCandidateId","remoteCandidateId","localStat","remoteStat","localPriority","remotePriority","selectedPairs","normalizeSsrcStats","samples","sampleTsMs","identity","getStatsTs","normalizeSelectedPairStats","newSelectedPairs","selected","googActiveConnection","newSelectedPair","oldPair","newPair","activePort","activeTab","DOMAIN_REGEX","DEFAULT_SCREEN_SOURCE_TYPES","startTabSharing","chrome","runtime","onInstalled","details","declarativeContent","onPageChanged","removeRules","onMessageExternal","request","sendResponse","version","getManifest","management","uninstallSelf","sourceTypes","desktopCapture","chooseDesktopMedia","tab","onConnectExternal","portOptions","startsWith","JSON","parse","oldActivePort","endCall","showOwnTabAction","tabId","pageAction","show","pageActionConditions","conditions","PageStateMatcher","condition","actions","ShowPageAction","addRules","send","onMessage","startCall","content","addCandidate","setAnswer","scrollBy","y","onDisconnect","hide","inactivateCurrentTab","onClicked","setActiveTab","tabs","onRemoved","onUpdated","update","status","activatePageAction","domain","newDomain","restorePageAction","manifest","setTitle","title","page_action","start_title","default_title","setIcon","path","icons","stop_title","tabCapture","capture","videoConstraints","mandatory","maxWidth","maxHeight","maxFrameRate","getVideoTracks","closePeerConnection","active","createRtcPeerConnection","currentPc","performOffer","description","disconnectTimeoutId","connectionState","hasAnswer","executeScript","code","allFrames","postMessage","iceTransportPolicy","cct","startScreenSharing","DEFAULT_SOURCE_TYPES","isInstalled","extensionId","requestScreenSharing"],"mappings":"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AACxD;AACA;AACA;AACA;AACA;AACA,gEAAgE,gBAAgB;AAChF;AACA;AACA,GAAG,2CAA2C,gCAAgC;AAC9E;AACA;AACA;AACA;AACA;AACA,wB;;;;;;ACxBA,sB;;;;;;;;;;;;ACAA,cAAc,sB;;;;;;ACAd;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB,EAAE;;AAE7C;AACA;AACA;AACA;AACA,GAAG,UAAU;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACtBA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,mDAAmD,OAAO,EAAE;AAC5D,E;;;;;;ACTA,kBAAkB,wD;;;;;;ACAlB,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA,a;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,aAAa;;AAEzC;AACA;AACA;AACA;AACA;AACA,wCAAwC,oCAAoC;AAC5E,4CAA4C,oCAAoC;AAChF,KAAK,2BAA2B,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,E;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;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wC;AAAA,MAK9BC,UAL8B;;AAM7C,MAAIC,eAAeF,SAASjS,GAAT,CAAa;AAAA,WAAM8R,WAAWtD,EAAX,CAAN;AAAA,GAAb,CAAnB;AACA,MAAI4D,iBAAiBF,WAAWlS,GAAX,CAAe;AAAA,WAAM6R,WAAWrD,EAAX,CAAN;AAAA,GAAf,CAArB;AACA,SAAO,CAAC2D,YAAD,EAAeC,cAAf,CAAP;AACD,C;;;;;;ACjPD;AACA;AACA;AACA;AACA,E;;;;;;ACJA,yC;;;;;;;ACAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACrCA;AACA,qEAAsE,gBAAgB,UAAU,GAAG;AACnG,CAAC,E;;;;;;ACFD;AACA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACPA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,E;;;;;;ACXA;AACA,UAAU;AACV,E;;;;;;ACFA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,E;;;;;;ACZA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AChBA,yC;;;;;;ACAA,kBAAkB,wD;;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,6DAA6D,OAAO;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,E;;;;;;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,E;;;;;;AC1DA,6E;;;;;;ACAA;AACA;;AAEA;AACA;AACA,+BAA+B,qBAAqB;AACpD,+BAA+B,SAAS,EAAE;AAC1C,CAAC,UAAU;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,SAAS,mBAAmB;AACvD,+BAA+B,aAAa;AAC5C;AACA,GAAG,UAAU;AACb;AACA,E;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AA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P;AACD,OA9BM,CAAP;AA+BD,KAhC0B,CAAN;AAAA,GAAd,CAAP;AAiCD,C;;;;;;ACrFD,kBAAkB,yD;;;;;;ACAlB,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACZA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA,mD;;;;;;ACFA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA,8D;;;;;;ACDA;AACA,8D;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA,4C;;;;;;ACLA;AACA;AACA;AACA;AACA,+C;;;;;;ACJA;AACA;AACA,uD;;;;;;ACFA,4BAA4B,e;;;;;;ACA5B;;AAEA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,WAAW,eAAe;AAC/B;AACA,KAAK;AACL;AACA,E;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,eAAe;AACxB;AACA;AACA;AACA,sCAAsC;AACtC;AACA,8BAA8B;AAC9B,6BAA6B;AAC7B,+BAA+B;AAC/B,mCAAmC;AACnC,SAAS,+BAA+B;AACxC;AACA;AACA;AACA;AACA,E;;;;;;AC3CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,E;;;;;;ACfA;AACA;;AAEA;AACA;AACA,E;;;;;;;ACLA;AACA;AACA;;AAEA;AACA;AACA;AACA,E;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,E;;;;;;;ACdA;AACA;AACA;AACA;AACA;;AAEA;AACA,0FAAgF,aAAa,EAAE;;AAE/F;AACA,qDAAqD,0BAA0B;AAC/E;AACA,E;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,OAAO,UAAU,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA,E;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wEAA0E,kBAAkB,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gCAAgC;AACpF;AACA;AACA,KAAK;AACL;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACpCD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,4B;;;;;;ACjCA;AACA;AACA,8BAA8B,gCAAoC,E;;;;;;ACFlE;AACA;AACA,qEAAuE,0CAA0C,E;;;;;;ACFjH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;ACRD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;ACRD;AACA;AACA,8BAA8B,6CAA4C,E;;;;;;;ACF1E;AACA;;AAEA;AACA;AACA,wBAAwB,mEAAmE;AAC3F,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC,U;;;;;;;ACXD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,oBAAoB,uBAAuB,SAAS,IAAI;AACxD,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA,KAAK;AACL;AACA,sBAAsB,iCAAiC;AACvD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,8BAA8B;AAC5F;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,gBAAgB;;AAE1E;AACA;AACA;AACA,oBAAoB,oBAAoB;;AAExC,0CAA0C,oBAAoB;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,wBAAwB,eAAe,EAAE;AACzC,wBAAwB,gBAAgB;AACxC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK,QAAQ,iCAAiC;AAClG,CAAC;AACD;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0C;;;;;;AC1OA;AACA;;AAEA,uCAAuC,uCAAgD,E;;;;;;ACHvF,yC;;;;;;ACAA,sC;;;;;;;;;;;;;;;ACAA;;;;AAEA;AACA;AACA;;AAEA;;AAEA,IAAM0U,MAAM,kBAAZ;;AAEA;;;;;;AAMA;;;;;;;;;;;;;;;;IAeqB6C,c;AACnB,gCAAsC;AAAA,QAAzBtW,IAAyB,QAAzBA,IAAyB;AAAA,QAAnB2R,MAAmB,QAAnBA,MAAmB;AAAA,QAAX2C,QAAW,QAAXA,QAAW;;AAAA;;AACpCxW,IAAA,gEAAAA,CAASC,MAAT,CAAgB,4BAAhB,EAA8C,MAA9C,EAAsDiC,IAAtD;AACA,QAAI,CAAC,wFAAA0V,CAAY/D,MAAZ,CAAL,EAA0B;AACxB7T,MAAA,gEAAAA,CAASiB,KAAT,CAAe,4BAAf,EAA6C,QAA7C,EAAuD,gBAAvD;AACD;AACDjB,IAAA,gEAAAA,CAASyD,IAAT,CAAc,4BAAd,EAA4C,UAA5C,EAAwD+S,QAAxD;AACA,SAAKiC,KAAL,GAAavW,IAAb;AACA,SAAKyU,OAAL,GAAe9C,MAAf;AACA,SAAKgD,SAAL,GAAiBL,QAAjB;AACA,SAAKkC,OAAL,GAAe,IAAf;AACA,SAAKC,OAAL,GAAe,IAAf;;AAEA,SAAKhC,OAAL,CAAa,4DAAb,EAAqBnJ,GAArB,CAAyB,IAAzB;AACD;;;;+BAEU;AACT,sCAA8B,KAAKtL,IAAnC,gBAAkD,KAAKyU,OAAvD;AACD;;AAED;;;;;;;;;;;;;;;;;;AA6EA;;;;;;;6BAOS;AACP,UAAI,KAAKiC,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAaxC,UAAb,CAAwB,IAAxB;AACD;AACD,WAAKO,OAAL,CAAa,4DAAb,EAAqBjJ,MAArB,CAA4B,IAA5B;AACA,WAAKiJ,OAAL,GAAe,IAAf;AACD;;;gCAEWN,M,EAAQ;AAClB,UAAI,KAAKA,MAAL,KAAgBA,MAApB,EAA4B;AAC1B1V,QAAA,mDAAAA,CAAIM,KAAJ,CAAU0U,GAAV,uDAAkEU,MAAlE,iBAAoF,KAAKA,MAAzF;AACD;AACD,WAAKuC,OAAL,GAAe,IAAf;AACA,WAAKC,UAAL,CAAgB,IAAhB;AACD;;;+BAEUhH,M,EAAQ;AACjB,UAAI,KAAK8G,OAAL,KAAiB9G,MAArB,EAA6B;AAC3B;AACD;AACD,UAAIoF,YAAY,KAAK0B,OAArB;AACA,WAAKA,OAAL,GAAe9G,MAAf;AACA,UAAI;AACF,aAAKgF,SAAL,CAAehF,MAAf,EAAuBoF,SAAvB;AACD,OAFD,CAEE,OAAOhW,KAAP,EAAc;AACdN,QAAA,mDAAAA,CAAIM,KAAJ,CAAU0U,GAAV,iCAA4C1U,KAA5C;AACD;AACF;;;;;AAvED;;;;;;;;;;wBAUW;AACT,aAAO,KAAKwX,KAAZ;AACD;;AAED;;;;;;;;;;;;wBASa;AACX,aAAO,KAAKG,OAAZ;AACD;;AAED;;;;;;;;;wBAMa;AACX,aAAO,KAAKD,OAAZ;AACD;;;4BA9DctC,M,EAAQ;AACrB,UAAIyC,QAAQ,CAACzC,MAAD,CAAZ;AACA,eAAS;AACP,YAAIA,kBAAkBmC,cAAtB,EAAsC;AACpC,iBAAOnC,MAAP;AACD,SAFD,MAEO,IAAI,CAAC,6EAAAzH,CAASyH,MAAT,CAAL,EAAuB;AAC5B,gBAAM,IAAIhX,SAAJ,CAAc,iCAA8ByZ,MAAM,CAAN,KAAYA,MAAM,CAAN,EAASnW,WAAT,CAAqBT,IAA/D,WAClB,0DADI,CAAN;AAED,SAHM,MAGA,IAAI,WAAWmU,MAAf,EAAuB;AAC5B,cAAI;AACFA,qBAASA,OAAOL,KAAhB;AACD,WAFD,CAEE,OAAO/U,KAAP,EAAc;AACd,kBAAM,IAAI5B,SAAJ,CAAc,gCAA8ByZ,MAAM,CAAN,EAASnW,WAAT,CAAqBT,IAAnD,0CACWmU,MADX,sBACkCpV,MAAMnB,OADxC,CAAd,CAAN;AAED;AACD,cAAIgZ,MAAM7U,OAAN,CAAcoS,MAAd,MAA0B,CAAC,CAA/B,EAAkC;AAChC,kBAAM,IAAIhX,SAAJ,CAAc,gCAA8ByZ,MAAM,CAAN,EAASnW,WAAT,CAAqBT,IAAnD,UAClB,0CADI,CAAN;AAED;AACD4W,gBAAMtT,IAAN,CAAW6Q,MAAX;AACD,SAZM,MAYA;AACL,gBAAM,IAAIhX,SAAJ,CAAc,gCAA8ByZ,MAAM,CAAN,EAASnW,WAAT,CAAqBT,IAAnD,WACfmU,OAAO1T,WAAP,CAAmBT,IADJ,sCAAd,CAAN;AAED;AACF;AACF;;;;;;yDA1DkBsW,c;;;;;;;;AC/BrB;AACA;AACA;AACA;AACA;AACA,4C;;;;;;ACLA;AACA,oD;;;;;;ACDA;AACA;AACA;AACA;AACA,gD;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,E;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,oBAAoB,EAAE;AAC7D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,E;;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;ACPA;AACA;;AAEA;AACA;AACA,wBAAwB,mEAAmE;AAC3F,CAAC;AACD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC,gB;;;;;;AChBD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;ACRD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,sDAAiD,oBAAoB;AACpH;AACA;AACA,GAAG,UAAU;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,gCAAgC;AACnD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,qCAAqC;AACpD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,uBAAuB,KAAK;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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AAO,oBAAoB;AAC3B,OAAO,kBAAkB;AACzB,UAAU;AACV,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uCAAuC,UAAU;AACjD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,KAAK;AACL;A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A6C,EAAE,iBAAiB,IAAI,4CAA4C,wCAAwC,uCAAuC,sCAAsC,iDAAiD,2CAA2C,8CAA8C,YAAY,qEAAqE,gCAAgC,mFAAmF,6DAA6D,EAAE,gBAAgB,kDAAkD,iBAAiB,mDAAmD,kBAAkB,QAAQ,cAAc,KAAK,yDAAyD,6CAA6C,kBAAkB,2EAA2E,6IAA6I,uCAAuC,gFAAgF,iDAAiD,2CAA2C,kDAAkD,QAAQ,8CAA8C,8CAA8C,YAAY,mDAAmD,kBAAkB,yCAAyC,iDAAiD,aAAa,cAAc,KAAK,yDAAyD,6CAA6C,kBAAkB,uHAAuH,wCAAwC,uCAAuC,sCAAsC,6HAA6H,6HAA6H,6CAA6C,8IAA8I,oFAAoF,4CAA4C,yJAAyJ,wDAAwD;;AAE7rlB;AACA,2B;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gBAAgB,KAAK,KAAK;AAC1B;AACA;AACA;AACA;AACA;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,+CAA+C,KAAK;AACpD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA,cAAc;;AAEd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,yBAAyB;AAChD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,0BAA0B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;;;;;;AChtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;;;;;;;AC9GA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;ACPA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,+CAA+C;;AAE/C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC,uCAAuC;AACvC;;AAEA,mBAAmB,kCAAkC;AACrD;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,4BAA4B;AAClD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;AC5FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjH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","file":"chrome-extension.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@cct/libcct\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@cct/libcct\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cct\"] = factory(require(\"@cct/libcct\"));\n\telse\n\t\troot[\"cct\"] = factory(root[\"cct\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_19__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 257);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8a27f142757ad0139ef4","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_core.js\n// module id = 0\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/classCallCheck.js\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/createClass.js\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6","'use strict'\n\nimport argCheck from 'common/argCheck'\nimport {isChrome, isFirefox} from 'common/utils'\n\n/**\n * A log interface that is exposed via the singleton `cct.log`.\n *\n * Log messages are sent using one of the five log functions, one for each log level:\n * {@link Log#error}, {@link Log#warning}, {@link Log#info}, {@link Log#debug}, {@link Log#verbose}.\n *\n * Each message is sent to a log category, which is identified by a string. The log level\n * of each category can be set separately, allowing heigher or lower log levels to be\n * set for specific categories.\n *\n * The log messages that don't get filtered out because of their level are forwarded\n * to the log handler for that log level. The default log handlers will use the built-in\n * `console` functions to print the category in square brackets followed by the message.\n *\n * @example <caption>Show all messages and in color, except for own events</caption>\n * cct.log.setLogLevel('own-events', cct.log.NONE);\n * cct.log.setLogLevel(cct.log.VERBOSE);\n * cct.log.color = true;\n *\n * @example <caption>Logging an info message in the gizmo category</caption>\n * cct.log.info('gizmo', 'widget initialized');\n *\n * @abstract\n * @class Log\n */\nexport function Log() {\n  this._defaultLogLevel = this.WARNING\n  this._categoryLevels = {}\n  this._logHandlers = {}\n}\n\n/**\n * @callback LogHandlerFunction\n *\n * @param {number} mask - The log level mask of the message.\n * @param {string} category - The message category.\n * @param {string} message - The log message.\n */\n\n/**\n * Sets the log handler for one or more log levels. The handler will be called whenever\n * anything is logged that doesn't get filtered because of it's log level.\n *\n * Setting a log handler will replace the default log handler for that log level.\n *\n * @example <caption>Setting log handler for multiple levels</caption>\n * log.setLogHandler(log.ERROR|log.WARNING, function (mask, category, ...args) {\n *     ...\n * });\n *\n * @param {number} [levels=ALL] - A mask that describles which log levels the handler\n *  should be applied to. If omitted the handler will be used for all log levels.\n * @param {LogHandlerFunction} handler - The log handler that will be called.\n */\nLog.prototype.setLogHandler = function (levels, handler) {\n  if (arguments.length <= 1) {\n    handler = levels\n    levels = this.ALL\n  }\n  if (typeof(levels) !== 'number') {\n    throw new TypeError('Log.setLogHandler: levels must be a number')\n  }\n  if (typeof(handler) !== 'function' && handler) {\n    throw new TypeError('Log.setLogHandler: handler must be a function')\n  }\n  this.levels.forEach(function (level, index) {\n    if ((1 << index) & levels) {\n      this._logHandlers[level] = handler\n    }\n  }.bind(this))\n}\n\n/**\n * Sets the log level either globally, or for a specific category.\n * The log handler will only be called for messages whose log level is\n * equal or lower than the log level for that category.\n *\n * The log level of any category is equal to the specific log level that has\n * been set for that category, and if none has been set, the gobal log level.\n *\n * @param {string} [category] - Optional log category to set the level of.\n *  If this is excluded, the global log level will be set instead.\n * @param {number} level - The new log level.\n */\nLog.prototype.setLogLevel = function (category, level) {\n  if (arguments.length <= 1) {\n    level = category\n    if (typeof(level) !== 'number') {\n      throw new TypeError('Log.setLogLevel: level must be a number')\n    }\n    this._defaultLogLevel = level\n  } else {\n    if (typeof(category) !== 'string') {\n      throw new TypeError('Log.setLogLevel: category must be a string')\n    }\n    if (typeof(level) !== 'number') {\n      throw new TypeError('Log.setLogLevel: level must be a number')\n    }\n    this._categoryLevels[category] = level\n  }\n}\n\nfunction createLogFunction(level, mask) {\n  return function (category, message, ...args) {\n    argCheck.string(`log.${level}`, 'category', category)\n    var logLevel = 0\n    if (typeof(category) !== 'string') {\n      throw new TypeError('Log.' + level + ': category has to be a string')\n    }\n    if (category in this._categoryLevels) {\n      logLevel = this._categoryLevels[category]\n    } else {\n      logLevel = this._defaultLogLevel\n    }\n    if (logLevel < mask) {\n      return\n    }\n    if (typeof(message) === 'string') {\n      argCheck.string(`log.${level}`, 'message', message)\n    } else {\n      let object = message\n      argCheck.object(`log.${level}`, 'object', object)\n      let [objectMessage, ...objectArgs] = args\n      argCheck.string(`log.${level}`, 'object message', objectMessage)\n\n      message = `${object} ${objectMessage}`\n      args = objectArgs\n    }\n    var handler = this._logHandlers[level]\n    if (handler) {\n      handler.call(this, mask, category, message, ...args)\n    }\n  }\n}\n\n/**\n * An array of the names of all log levels, in lowercase.\n * @type {string[]}\n */\nLog.prototype.levels = ['error', 'warning', 'info', 'debug', 'verbose']\n\nLog.prototype.levels.forEach(function (level, index) {\n  var mask = 1 << index\n  Log.prototype[level.toUpperCase()] = mask\n  Log.prototype[level] = createLogFunction(level, mask)\n})\n\n/**\n * The error log function. Will call the error log handler if the log\n * level of the given category is set to error or higher.\n * @function Log#error\n * @param {string} category - The category of this log message\n * @param {...*} args - The rest of the arguments to pass to the log handler\n */\n/**\n * The warning log function. Will call the warning log handler if the log\n * level of the given category is set to warning or higher.\n * @function Log#warning\n * @param {string} category - The category of this log message\n * @param {...*} args - The rest of the arguments to pass to the log handler\n */\n/**\n * The info log function. Will call the info log handler if the log\n * level of the given category is set to info or higher.\n * @function Log#info\n * @param {string} category - The category of this log message\n * @param {...*} args - The rest of the arguments to pass to the log handler\n */\n/**\n * The debug log function. Will call the debug log handler if the log\n * level of the given category is set to debug or higher.\n * @function Log#debug\n * @param {string} category - The category of this log message\n * @param {...*} args - The rest of the arguments to pass to the log handler\n */\n/**\n * The verbose log function. Will call the verbose log handler if the log\n * level of the given category is set to verbose or higher.\n * @function Log#verbose\n * @param {string} category - The category of this log message\n * @param {...*} args - The rest of the arguments to pass to the log handler\n */\n\n/**\n * Log level representing no logging at all.\n * @member {number} Log#NONE\n * @readonly\n */\n/**\n * Error level.\n * @member {number} Log#ERROR\n * @readonly\n */\n/**\n * Warning level.\n * @member {number} Log#WARNING\n * @readonly\n */\n/**\n * Info level.\n * @member {number} Log#INFO\n * @readonly\n */\n/**\n * Debug level.\n * @member {number} Log#DEBUG\n * @readonly\n */\n/**\n * Verbose level.\n * @member {number} Log#VERBOSE\n * @readonly\n */\n/**\n * Log level representing a mask of all log levels.\n * @member {number} Log#ALL\n * @readonly\n */\n\nLog.prototype.NONE = 0\nLog.prototype.ALL = Log.prototype.levels.reduce(function (mask, ignored, index) {\n  return mask | (1 << index)\n}, 0)\n\nvar log = new Log()\n\nexport default log\n\nexport function setLog(_log) {\n  log = _log\n}\n\n/**\n * Whether or not the default log handler should use color to represent log levels.\n * @member {boolean} Log#color\n */\n\nconst logFunctions = {\n  [log.ERROR]: (console.error || console.log).bind(console),\n  [log.WARNING]: (console.warn || console.log).bind(console),\n  [log.INFO]: (console.info || console.log).bind(console),\n  [log.DEBUG]: (console.debug || console.log).bind(console),\n  [log.VERBOSE]: console.log.bind(console),\n}\nconst logColors = {\n  [log.ERROR]: '#F74333',\n  [log.WARNING]: '#F79743',\n  [log.INFO]: '#3343F7',\n  [log.DEBUG]: '#43C733',\n  [log.VERBOSE]: '#F743F7',\n}\n\nfunction defaultLogHandler(level, category, message, ...args) {\n  logFunctions[level].call(console, `[${category}] ${message}`, ...args)\n}\n\nfunction colorLogHandler(level, category, message, ...args) {\n  if (this.color) {\n    logFunctions[level].call(console, `%c[${category}]%c ${message}`, ...[\n      'color: ' + logColors[level],\n      'color:',\n    ], ...args)\n  } else {\n    logFunctions[level].call(console, `[${category}] ${message}`, ...args)\n  }\n}\n\nlog.color = false\nlog.colors = logColors\n\nvar defaultHandler\n\nif (isChrome || isFirefox) {\n  defaultHandler = colorLogHandler\n} else {\n  defaultHandler = defaultLogHandler\n}\n\nlog.setLogHandler(log.ALL, defaultHandler)\nlog.defaultHandler = defaultHandler\n\n\n\n// WEBPACK FOOTER //\n// ./lib/common/log.js","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_wks.js\n// module id = 4\n// module chunks = 0 1 2 3 4 5 6","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_global.js\n// module id = 5\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/get-prototype-of.js\n// module id = 6\n// module chunks = 0 1 2 3 4 5 6","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_export.js\n// module id = 7\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/inherits.js\n// module id = 8\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/possibleConstructorReturn.js\n// module id = 9\n// module chunks = 0 1 2 3 4 5 6","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-dp.js\n// module id = 10\n// module chunks = 0 1 2 3 4 5 6","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_descriptors.js\n// module id = 11\n// module chunks = 0 1 2 3 4 5 6","'use strict'\n\nfunction optArgCheck(prop) {\n  return function (context, name, value, extra) {\n    if (value !== undefined && value !== null) {\n      try {\n        this[prop](context, name, value, extra)\n      } catch (e) {\n        e.message += ' if present'\n        throw e\n      }\n    }\n    return value\n  }\n}\n\nvar argCheck = {\n  count: function (context, requiredCount, actualCount) {\n    if (requiredCount > actualCount) {\n      throw new TypeError(context + ' requires at least' + requiredCount + ' arguments')\n    }\n  },\n  error: function (context, name, criteria) {\n    if (typeof(context) === 'object') {\n      context = context.constructor && context.constructor.name || 'Unknown'\n      context += ' constructor'\n    }\n    throw new TypeError(context + ': argument \\'' + name + '\\' must ' + criteria)\n  },\n  optObject: optArgCheck('object'),\n  object: function (context, name, value) {\n    if (typeof(value) !== 'object') {\n      this.error(context, name, 'be an object')\n    } else if (value === null) {\n      this.error(context, name, 'be an object, not null')\n    } else if (Array.isArray(value)) {\n      this.error(context, name, 'be an object, not an array')\n    } else if (value instanceof RegExp) {\n      this.error(context, name, 'be an object, not a RegExp instance')\n    }\n    return value\n  },\n  optInstance: optArgCheck('instance'),\n  instance(context, name, value, constructor) {\n    if (!constructor) {\n      throw new Error(`Failed instance argument check for ${name} in ${context}, constructor is ${constructor}.`)\n    }\n    if (Array.isArray(constructor)) {\n      let atLeastOneMatch = constructor.some(constructor => {\n        return value instanceof constructor\n      })\n      if (!atLeastOneMatch) {\n        let names = constructor.map(constructor => constructor.name).join(', ')\n        this.error(context, name, `be an instance of any of ${names}`)\n      }\n    } else if (!(value instanceof constructor)) {\n      this.error(context, name, `be an instance of ${constructor.name}`)\n    }\n    return value\n  },\n  optFunc: optArgCheck('func'),\n  func: function (context, name, value) {\n    if (typeof(value) !== 'function') {\n      this.error(context, name, 'be a function')\n    }\n    return value\n  },\n  optArray: optArgCheck('array'),\n  array: function (context, name, value) {\n    if (!Array.isArray(value)) {\n      this.error(context, name, 'be an array')\n    }\n    return value\n  },\n  optString: optArgCheck('string'),\n  string: function (context, name, value) {\n    if (typeof(value) !== 'string') {\n      this.error(context, name, 'be a string')\n    } else if (value === '') {\n      this.error(context, name, 'not be an empty string')\n    }\n    return value\n  },\n  optStringOrEmpty: optArgCheck('string'),\n  stringOrEmpty: function (context, name, value) {\n    if (typeof(value) !== 'string') {\n      this.error(context, name, 'be a string')\n    }\n    return value\n  },\n  optValues: optArgCheck('values'),\n  values: function (context, name, value, values) {\n    if (values.indexOf(value) === -1) {\n      this.error(context, name, 'be one of ' + values.join(', '))\n    }\n    return value\n  },\n  optNumber: optArgCheck('number'),\n  number: function (context, name, value) {\n    if (isNaN(value)) {\n      this.error(context, name, 'not be NaN')\n    } else if (!isFinite(value)) {\n      this.error(context, name, 'not be Infinite')\n    } else if (typeof(value) !== 'number') {\n      this.error(context, name, 'be a number')\n    }\n    return value\n  },\n  optBoolean: optArgCheck('boolean'),\n  boolean: function (context, name, value) {\n    if (typeof(value) !== 'boolean') {\n      this.error(context, name, 'be a boolean')\n    }\n    return value\n  },\n  options: function (context, name, value) {\n    this.object(context, name, value)\n    return new OptionsArgChecker(context, name, value)\n  },\n  optOptions: function (context, name, value) {\n    if (value !== undefined) {\n      try {\n        return this.options(context, name, value)\n      } catch (e) {\n        e.message += ' if present'\n        throw e\n      }\n    }\n    return new OptionsArgChecker(0, 0, 0, true)\n  },\n}\n\nexport default argCheck\n\nfunction OptionsArgChecker(context, name, value, empty) {\n  this.context = context\n  this.name = name\n  this.value = value\n  this.empty = empty\n}\n\nfunction optOptionsArgCheck(type) {\n  return function (prop, extra) {\n    if (!this.empty && prop in this.value) {\n      if (this.value[prop] !== undefined && this.value[prop] !== null) {\n        try {\n          this[type](prop, extra)\n        } catch (e) {\n          e.message += ' if present'\n          throw e\n        }\n      }\n    }\n    return this\n  }\n}\n\nOptionsArgChecker.prototype = {\n  optObject: optOptionsArgCheck('object'),\n  object: function (prop) {\n    if (!this.empty) {\n      argCheck.object(this.context, this.name + '.' + prop, this.value[prop])\n    }\n    return this\n  },\n  optInstance: optOptionsArgCheck('instance'),\n  instance: function (prop, constructor) {\n    if (!this.empty) {\n      argCheck.instance(this.context, this.name + '.' + prop, this.value[prop], constructor)\n    }\n    return this\n  },\n  optFunc: optOptionsArgCheck('func'),\n  func: function (prop) {\n    if (!this.empty) {\n      argCheck.func(this.context, this.name + '.' + prop, this.value[prop])\n    }\n    return this\n  },\n  optArray: optOptionsArgCheck('array'),\n  array: function (prop) {\n    if (!this.empty) {\n      argCheck.array(this.context, this.name + '.' + prop, this.value[prop])\n    }\n    return this\n  },\n  optString: optOptionsArgCheck('string'),\n  string: function (prop) {\n    if (!this.empty) {\n      argCheck.string(this.context, this.name + '.' + prop, this.value[prop])\n    }\n    return this\n  },\n  optStringOrEmpty: optOptionsArgCheck('stringOrEmpty'),\n  stringOrEmpty: function (prop) {\n    if (!this.empty) {\n      argCheck.stringOrEmpty(this.context, this.name + '.' + prop, this.value[prop])\n    }\n    return this\n  },\n  optValues: optOptionsArgCheck('values'),\n  values: function (prop, values) {\n    if (!this.empty) {\n      argCheck.values(this.context, this.name + '.' + prop, this.value[prop], values)\n    }\n    return this\n  },\n  optNumber: optOptionsArgCheck('number'),\n  number: function (prop) {\n    if (!this.empty) {\n      argCheck.number(this.context, this.name + '.' + prop, this.value[prop])\n    }\n    return this\n  },\n  optBoolean: optOptionsArgCheck('boolean'),\n  boolean: function (prop) {\n    if (!this.empty) {\n      argCheck.boolean(this.context, this.name + '.' + prop, this.value[prop])\n    }\n    return this\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/common/argCheck.js","'use strict'\n\nexport function find(collection, func, thisArg) {\n  for (var key in collection) {\n    if (collection.hasOwnProperty(key)) {\n      if (func.call(thisArg, collection[key], key, collection)) {\n        return collection[key]\n      }\n    }\n  }\n  return null\n}\n\nexport function fill(array, value = undefined) {\n  let len = array.length | 0\n\n  for (let i = 0; i < len; i += 1) {\n    array[i] = value\n  }\n\n  return array\n}\n\nexport function filter(collection, func, thisArg) {\n  var arr = []\n  for (var key in collection) {\n    if (collection.hasOwnProperty(key)) {\n      if (func.call(thisArg, collection[key], key, collection)) {\n        arr.push(collection[key])\n      }\n    }\n  }\n  return arr\n}\n\nexport function forEach(collection, func, thisArg) {\n  for (var key in collection) {\n    if (collection.hasOwnProperty(key)) {\n      func.call(thisArg, collection[key], key, collection)\n    }\n  }\n}\n\nexport function map(collection, func, thisArg) {\n  var arr = []\n  for (var key in collection) {\n    if (collection.hasOwnProperty(key)) {\n      arr.push(func.call(thisArg, collection[key], key, collection))\n    }\n  }\n  return arr\n}\n\nexport function mapValues(collection, func, thisArg) {\n  var obj = {}\n  for (var key in collection) {\n    if (collection.hasOwnProperty(key)) {\n      obj[key] = func.call(thisArg, collection[key], key, collection)\n    }\n  }\n  return obj\n}\n\nexport function values(collection) {\n  if (!collection) {\n    return []\n  }\n  if (Array.isArray(collection)) {\n    throw new TypeError('tried to call utils.values() on array')\n  }\n  return Object.keys(collection).map(key => collection[key])\n}\n\nexport function diff(collection1, collection2) {\n  let set1 = new Set(collection1)\n  let set2 = new Set(collection2)\n  let added = []\n  let removed = []\n  set1.forEach(element => {\n    if (!set2.has(element)) {\n      removed.push(element)\n    }\n  })\n  set2.forEach(element => {\n    if (!set1.has(element)) {\n      added.push(element)\n    }\n  })\n  return [added, removed]\n}\n\nexport function toArray(arrayLike) {\n  var arr = []\n  for (var i = 0; i < arrayLike.length; i += 1) {\n    arr[i] = arrayLike[i]\n  }\n  return arr\n}\n\nexport function hiddenProp(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    enumerable: false,\n    configurable: true,\n    writable: false,\n    value: value,\n  })\n}\n\nexport function prop(obj, name, func) {\n  Object.defineProperty(obj, name, {\n    enumerable: true,\n    configurable: false,\n    writable: false,\n    value: func,\n  })\n}\n\nexport function getter(obj, name, func) {\n  Object.defineProperty(obj, name, {\n    enumerable: true,\n    configurable: false,\n    get: func,\n  })\n}\n\nexport function range(from, to, step) {\n  if (arguments.length === 1) {\n    to = from\n    from = 0\n    step = 1\n  } else if (arguments.length === 2) {\n    step = 1\n  }\n  var arr = []\n  for (var i = from; i < to; i += step) {\n    arr.push(i)\n  }\n  return arr\n}\n\nexport function defer() {\n  var deferred = {}\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve\n    deferred.reject = reject\n  })\n  return deferred\n}\n\nexport function shallowCopy(obj, keys) {\n  if (!obj) {\n    return null\n  }\n  var result = {}\n  var key\n  if (keys) {\n    for (var index in keys) {\n      key = keys[index]\n      result[key] = obj[key]\n    }\n  } else {\n    for (key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        result[key] = obj[key]\n      }\n    }\n  }\n  return result\n}\n\nexport function assign(obj, other, keys) {\n  if (!obj) {\n    return null\n  }\n  if (!other) {\n    return obj\n  }\n  var key\n  if (keys) {\n    for (var index in keys) {\n      key = keys[index]\n      obj[key] = other[key]\n    }\n  } else {\n    for (key in other) {\n      if (other.hasOwnProperty(key)) {\n        obj[key] = other[key]\n      }\n    }\n  }\n  return obj\n}\n\nexport function wait(time) {\n  return function () {\n    var args = arguments\n    return new Promise(function (resolve) {\n      setTimeout(function () {\n        resolve.apply(null, args)\n      }, time)\n    })\n  }\n}\n\nexport function randomString(size) {\n  var array = null\n  var now\n  var i\n  var crypto = noVendor(globalObject, 'crypto')\n  if (process.env.NODEJS) {\n    array = require('crypto').randomBytes(size)\n  } else if (crypto && window.Uint8Array) {\n    array = new window.Uint8Array(size)\n    crypto.getRandomValues(array)\n  } else {\n    now = new Date().getTime()\n    array = []\n    for (i = 0; i < size; i += 1) {\n      array[i] = (Math.random() * now) & 255\n    }\n  }\n\n  var rawString = String.fromCharCode.apply(null, array)\n  var base64String = utf8ToBase64(rawString)\n  return base64String.replace(/\\-_/g, '').slice(0, size)\n}\n\nexport function arrayBufferSha1IfSupported(arrayBuffer) {\n  let subtleCrypto = window.crypto && window.crypto.subtle\n  if (subtleCrypto && subtleCrypto.digest) {\n    return subtleCrypto.digest('SHA-1', arrayBuffer)\n  }\n  return Promise.resolve(null)\n}\n\nexport function base64ToUtf8(base64) {\n  if (process.env.NODEJS) {\n    /* global global */\n    return global.Buffer.from(base64, 'base64').toString('utf8')\n  } else {\n    return atob(base64)\n  }\n}\n\nexport function utf8ToBase64(utf8) {\n  if (process.env.NODEJS) {\n    /* global global */\n    return global.Buffer.from(utf8, 'utf8').toString('base64')\n  } else {\n    return btoa(utf8)\n  }\n}\n\nexport function urlSafeBase64ToUtf8(urlSafeBase64) {\n  return base64ToUtf8(urlSafeBase64.replace(/[-_]/g, charFromUrlSafeBase64))\n}\n\nexport function utf8ToUrlSafeBase64(utf8) {\n  return utf8ToBase64(utf8).replace(/[+/=]/g, charToUrlSafeBase64)\n}\n\nfunction charToUrlSafeBase64(char) {\n  switch (char) {\n    case '+': return '-'\n    case '/': return '_'\n  }\n  return ''\n}\n\nfunction charFromUrlSafeBase64(char) {\n  switch (char) {\n    case '-': return '+'\n    case '_': return '/'\n  }\n  return ''\n}\n\nexport function binaryStringToArrayBuffer(binaryString) {\n  var buffer = new ArrayBuffer(binaryString.length)\n  var view = new Uint8Array(buffer)\n  var length = binaryString.length\n  for (var i = 0; i < length; i += 1) {\n    view[i] = binaryString.charCodeAt(i)\n  }\n  return buffer\n}\n\nexport function unicodeStringToArrayBuffer(unicodeString) {\n  var buffer = new ArrayBuffer(unicodeString.length * 2)\n  var view = new Uint16Array(buffer)\n  var length = unicodeString.length\n  for (var i = 0; i < length; i += 1) {\n    view[i] = unicodeString.charCodeAt(i)\n  }\n  return buffer\n}\n\nfunction bufferViewToString(view, chunkSize = 0x1000) {\n  let length = view.length\n  let result = ''\n  for (let i = 0; i < length; i += chunkSize) {\n    result += String.fromCharCode.apply(null, view.subarray(i, i + chunkSize))\n  }\n  return result\n}\n\nexport function arrayBufferToBinaryString(buffer) {\n  let view = new Uint8Array(buffer.buffer || buffer, buffer.byteOffset, buffer.byteLength)\n  return bufferViewToString(view)\n}\n\nexport function arrayBufferToUnicodeString(buffer) {\n  let view = new Uint16Array(buffer.buffer || buffer, buffer.byteOffset, buffer.byteLength >> 1)\n  return bufferViewToString(view)\n}\n\nexport function parseDataUri(dataUri) {\n  var split = dataUri.split(/:|;|,/g)\n  if (split[0] !== 'data') {\n    throw new Error('invalid data uri: ' + dataUri.slice(0, 100))\n  }\n  if (split[2] !== 'base64') {\n    throw new Error('invalid data uri: ' + dataUri.slice(0, 100))\n  }\n  return {\n    mimeType: split[1],\n    binaryString: base64ToUtf8(split[3]),\n  }\n}\n\nexport function blobToArrayBuffer(blob) {\n  var reader = new FileReader()\n  return new Promise(function (resolve, reject) {\n    reader.onload = function () {\n      resolve(reader.result)\n    }\n    reader.onerror = reject\n    reader.readAsArrayBuffer(blob)\n  })\n}\n\nexport function bufferToFile(buffer, fileName, mimeType) {\n  var file = new Blob([buffer], {\n    type: mimeType,\n  })\n  file.name = fileName\n  file.lastModifiedDate = new Date()\n  return file\n}\n\nexport function bufferToHex(buffer) {\n  var view = new Uint8Array(buffer)\n  return Array.prototype.map.call(view, function (x) {\n    return ('00' + x.toString(16)).slice(-2)\n  }).join('')\n}\n\nexport function hexToBuffer(hex) {\n  if (hex.length % 2 !== 0) {\n    throw new TypeError('hexToBuffer: hex length must be even')\n  }\n  var buffer = new Uint8Array(hex.length / 2)\n  for (var i = 0; hex.substr(i, 2); i += 2) {\n    buffer[i / 2] = parseInt(hex.substr(i, 2), 16)\n  }\n  return buffer\n}\n\nexport function concatenateArrayBuffers(buffers) {\n  let totalLength = 0\n  for (let index in buffers) {\n    totalLength += buffers[index].byteLength\n  }\n\n  let result = new Uint8Array(totalLength)\n  let offset = 0\n  for (let index in buffers) {\n    let view = new Uint8Array(buffers[index])\n    result.set(view, offset)\n    offset += view.byteLength\n  }\n\n  return result\n}\n\nexport function noVendor(obj, name) {\n  var upper = name[0].toUpperCase() + name.slice(1)\n  var unprefixed = obj[name] || obj['moz' + upper] || obj['webkit' + upper] || obj['ms' + upper]\n  if (!unprefixed) {\n    return null\n  }\n  if (typeof(unprefixed) === 'function') {\n    return unprefixed.bind(obj)\n  } else {\n    return unprefixed\n  }\n}\n\nvar globalObject\nif (process.env.NODEJS) {\n  /* global global */\n  globalObject = global\n} else {\n  globalObject = window\n}\n\nif (globalObject) {\n  globalObject.__C3_SDK_INSTANCES__ = {\n    listeners: new Set(),\n    addListener(listener) {\n      this.listeners.add(listener)\n    },\n    removeListener(listener) {\n      this.listeners.delete(listener)\n    },\n  }\n}\n\nexport function registerInstance(collectionName, instance) {\n  if (globalObject) {\n    let collection = globalObject.__C3_SDK_INSTANCES__[collectionName]\n    if (!collection) {\n      globalObject.__C3_SDK_INSTANCES__[collectionName] = [instance]\n    } else if (collection.indexOf(instance) === -1) {\n      collection.push(instance)\n    }\n    globalObject.__C3_SDK_INSTANCES__.listeners.forEach(listener => {\n      listener('added', collectionName, instance)\n    })\n  }\n}\n\nexport function unregisterInstance(collectionName, instance) {\n  if (globalObject) {\n    let collection = globalObject.__C3_SDK_INSTANCES__[collectionName]\n    let index = collection.indexOf(instance)\n    if (index !== -1) {\n      collection.splice(index, 1)\n    }\n    globalObject.__C3_SDK_INSTANCES__.listeners.forEach(listener => {\n      listener('removed', collectionName, instance)\n    })\n  }\n}\n\nexport function priv(constructor) {\n  var args = [priv]\n  var len = arguments.length\n  for (var i = 1; i < len; i += 1) {\n    args[i] = arguments[i]\n  }\n  var instance = Object.create(constructor.prototype)\n  constructor.apply(instance, args)\n  return instance\n}\n\nexport function assertPriv(name, providedPriv) {\n  if (priv !== providedPriv) {\n    throw new TypeError(name + ': cannot be used as a constructor')\n  }\n}\n\nexport const isFirefox = /firefox/i.test(typeof(navigator) !== 'undefined' && navigator.userAgent)\nconst isGoogle = /google inc/i.test(typeof(navigator) !== 'undefined' && navigator.vendor)\nexport const isChrome = isGoogle && /chrome/i.test(typeof(navigator) !== 'undefined' && navigator.userAgent)\nexport const browser = isChrome ? 'chrome' : (isFirefox ? 'firefox' : 'other')\n// Internet Explorer 6-11\nexport const isIE = /* @cc_on!@*/false || !!globalObject.document && !!globalObject.document.documentMode\n\nexport function isObject(obj) {\n  return typeof(obj) === 'object' && obj !== null && !Array.isArray(obj) && !(obj instanceof RegExp)\n}\n\nexport function notInNode(thing) {\n  if (process.env.NODEJS) {\n    throw new TypeError(`${thing} is not available in NodeJS`)\n  }\n}\n\nexport function maybeConvertStringToNumber(string) {\n  if (!isNaN(string)) {\n    if (Number(string) % 1 === 0) {\n      return parseInt(string)\n    }\n    return parseFloat(string)\n  }\n  return string\n}\n\nexport function getStringByteLength(string) {\n  var bytes = string.length\n  for (var i = string.length - 1; i >= 0; i -= 1) {\n    var charCode = string.charCodeAt(i)\n    if (charCode > 0x7f && charCode <= 0x7ff) {\n      bytes += 1\n    } else if (charCode > 0x7ff && charCode <= 0xffff) {\n      bytes += 2\n    } if (charCode >= 0xDC00 && charCode <= 0xDFFF) {\n            // trailing surrogate\n      i -= 1\n    }\n  }\n  return bytes\n}\n\n/**\n * A read-only version of the built-in Map class.\n *\n * @class ReadOnlyMap\n */\nexport class ReadOnlyMap extends Map {\n  constructor() {\n    super()\n    if (arguments.length) {\n      throw new TypeError('ReadOnlyMap does not support constructor arguments')\n    }\n  }\n\n  /**\n   * The number of entries in the map.\n   *\n   * @member {number} ReadOnlyMap#size\n   */\n\n  /**\n   * Provides a way to iterate through all the entries in this map. Each entry is represented\n   * by an array with two elements, were the first element is the key and the second is the value.\n   *\n   * @function ReadOnlyMap#entries\n   * @returns {Iterator<Array<*>>} - An iterator of all entries in this map.\n   */\n\n  /**\n   * Provited a way to iterate though all the keys in this map.\n   *\n   * @function ReadOnlyMap#keys\n   * @returns {Iterator<*>} - An iterator of all keys in this map.\n   */\n\n  /**\n   * Provited a way to iterate though all the values in this map.\n   *\n   * @function ReadOnlyMap#values\n   * @returns {Iterator<*>} - An iterator of all values in this map.\n   */\n\n  /**\n   * Returns the value for the given key.\n   *\n   * @function ReadOnlyMap#get\n   * @param {*} key - The key of the value to retreive.\n   * @returns {*} The value, if it exists, `undefined` otherwise\n   */\n\n  /**\n   * Returns true if the map has an entry for the given key.\n   *\n   * @function ReadOnlyMap#has\n   * @param {*} key - The key to look for.\n   */\n\n  /**\n   * Synchronously calls an interator function once for each entry in the map.\n   *\n   * Errors thrown inside the iterator function will cancel the iteration\n   *\n   * @function ReadOnlyMap#forEach\n   * @param {ReadOnlyMapForEachCallback} func - The iterator function.\n   * @param {*} [thisArg] - The value to use as `this` inside the iterator function.\n   */\n\n  /**\n   * The iterator function passed to {@link ReadOnlyMap#forEach}.\n   *\n   * @callback ReadOnlyMapForEachCallback\n   * @param {*} key - The key of the current entry.\n   * @param {*} value - The value of the current entry.\n   * @param {ReadOnlyMap} map - The map itself.\n   */\n\n  set() {\n    throw new TypeError('Map is read-only')\n  }\n\n  delete() {\n    throw new TypeError('Map is read-only')\n  }\n\n  clear() {\n    throw new TypeError('Map is read-only')\n  }\n\n  /* private */\n\n  _set(key, value) {\n    return super.set(key, value)\n  }\n\n  _delete(key) {\n    return super.delete(key)\n  }\n\n  _clear() {\n    return super.clear()\n  }\n}\n\nexport class ReadOnlySet extends Set {\n  constructor() {\n    super()\n    if (arguments.length) {\n      throw new TypeError('ReadOnlySet does not support constructor arguments')\n    }\n  }\n\n  add() {\n    throw new TypeError('Set is read-only')\n  }\n\n  delete() {\n    throw new TypeError('Set is read-only')\n  }\n\n  clear() {\n    throw new TypeError('Set is read-only')\n  }\n\n  _add(value) {\n    return super.add(value)\n  }\n\n  _delete(value) {\n    return super.delete(value)\n  }\n\n  _clear() {\n    return super.clear()\n  }\n}\n\nexport function createTimedBuffer(time, callback) {\n  let args = []\n  let timeout = 0\n  return function (arg) {\n    args.push(arg)\n    if (!timeout) {\n      timeout = setTimeout(onTimeout, time)\n    }\n    function onTimeout() {\n      timeout = 0\n      try {\n        callback(args)\n      } catch (error) {\n        console.error(`error in timed buffer callback: ${error}`)\n      }\n      args = []\n    }\n  }\n}\n\nexport function errorForwarder(handler, location) {\n  return error => {\n    if (!location) {\n      handler(error)\n    } else {\n      let newError = new Error(`Error in ${location}: ${error.message}`)\n      newError.reason = error\n      handler(newError)\n    }\n  }\n}\n\n/**\n * Types that can be serialized as JSON.\n *\n * This is identical to the parameters that can be passed to the built-in `JSON.stringify`.\n * Circular references are not allowed, and `toJSON` methods will be used.\n *\n * @typedef JsonTypes {string|number|boolean|null|Array<JsonTypes>|Object<JsonTypes>}\n */\n\n\n\n// WEBPACK FOOTER //\n// ./lib/common/utils.js","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_an-object.js\n// module id = 14\n// module chunks = 0 1 2 3 4 5 6","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-iobject.js\n// module id = 15\n// module chunks = 0 1 2 3 4 5 6","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_hide.js\n// module id = 16\n// module chunks = 0 1 2 3 4 5 6","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_is-object.js\n// module id = 17\n// module chunks = 0 1 2 3 4 5 6","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_ctx.js\n// module id = 18\n// module chunks = 0 1 2 3 4 5 6","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"cct\",\"commonjs2\":\"@cct/libcct\",\"commonjs\":\"@cct/libcct\",\"amd\":\"@cct/libcct\"}\n// module id = 19\n// module chunks = 1 3 5 6","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_has.js\n// module id = 20\n// module chunks = 0 1 2 3 4 5 6","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_fails.js\n// module id = 21\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.string.iterator.js\n// module id = 22\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/promise.js\n// module id = 23\n// module chunks = 0 1 2 3 4 5","module.exports = {};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iterators.js\n// module id = 24\n// module chunks = 0 1 2 3 4 5 6","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-keys.js\n// module id = 25\n// module chunks = 0 1 2 3 4 5 6","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-object.js\n// module id = 26\n// module chunks = 0 1 2 3 4 5 6","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_property-desc.js\n// module id = 27\n// module chunks = 0 1 2 3 4 5 6","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_set-to-string-tag.js\n// module id = 28\n// module chunks = 0 1 2 3 4 5 6","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/web.dom.iterable.js\n// module id = 29\n// module chunks = 0 1 2 3 4 5 6","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_cof.js\n// module id = 30\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/toConsumableArray.js\n// module id = 31\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/map.js\n// module id = 32\n// module chunks = 0 1 2 3 4 5","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/typeof.js\n// module id = 33\n// module chunks = 0 1 2 3 4 5 6","'use strict'\n\nimport log from 'common/log'\nimport argCheck from 'common/argCheck'\n\nvar DEFAULT_LISTENER_LIMIT = 10\nfunction LEAK_MESSAGE(limit) {\n  return 'Listener leak: added more than ' + limit +\n        ' listeners for a single event.  This limit can be changed' +\n        ' by setting the LISTENER_LIMIT property on the emitter object.'\n}\n\n/**\n * @mixin EventEmitter\n */\nconst emitterPrototype = (() => {\n  const Base = EmitterMixin(null)\n  let emitter = Object.create(null)\n  Object.getOwnPropertyNames(Base.prototype).forEach(name => {\n    if (name !== 'constructor') {\n      emitter[name] = Base.prototype[name]\n    }\n  })\n  return emitter\n})()\n\nfunction EmitterMixin(superclass = () => {}) {\n  if (arguments.length === 0) {\n    return Object.assign(this, emitterPrototype)\n  }\n\n  return class extends superclass {\n    _listeners() {\n      if (!this.__listeners) {\n        this.__listeners = new Map()\n      }\n      return this.__listeners\n    }\n    /**\n     * Adds a new listener for an event. All listeners will be called in the order in\n     * which they were added. Adding an already added listener is not an error and will\n     * result in the listener being called multiple times.\n     *\n     * @function EventEmitter#on\n     * @param {eventType} eventType - The event to listen for.\n     * @param {Function} listener - A function that will be called whenever the event is emitted.\n     * @returns {EventEmitter} Itself, to allow chained calls.\n     */\n    on(eventType, listener) {\n      argCheck.count('EventEmitter.on', 2, arguments.length)\n      argCheck.string('EventEmitter.on', 'eventType', eventType)\n      argCheck.func('EventEmitter.on', 'listener', listener)\n      let listeners = this._listeners().get(eventType)\n\n      let deprecationMessage = this.constructor._deprecatedEvents && this.constructor._deprecatedEvents[eventType]\n      if (deprecationMessage) {\n        log.warning('deprecated', deprecationMessage('on'))\n      }\n\n      if (!listeners) {\n        listeners = []\n        this._listeners().set(eventType, listeners)\n      }\n      let element = {\n        remaining: -1,\n        func: listener,\n      }\n      if (listeners.iterating) {\n        if (!listeners.pending) {\n          listeners.pending = []\n        }\n        listeners.pending.push(element)\n      } else {\n        listeners.push(element)\n      }\n      var limit = this.LISTENER_LIMIT\n      limit = typeof(limit) === 'number' ? limit : DEFAULT_LISTENER_LIMIT\n      if (listeners.length > limit) {\n        log.warning('emitter', LEAK_MESSAGE(limit), this)\n      }\n      return this\n    }\n\n    /**\n     * Works like {@link EventEmitter#on on}, but the listener is at most called once, and then removed.\n     * If no callback is passed, a promise will be returned instead.\n     *\n     * @function EventEmitter#once\n     * @param {eventType} eventType - The event to listen for.\n     * @param {Function} [listener=null] - A function that will be called whenever the event is emitted.\n     * @returns {EventEmitter|Promise} Itself, or a promise if no callback was passed.\n     */\n    once(eventType, listener) {\n      argCheck.count('EventEmitter.once', 1, arguments.length)\n      argCheck.string('EventEmitter.once', 'eventType', eventType)\n      argCheck.optFunc('EventEmitter.once', 'listener', listener)\n\n      let deprecationMessage = this.constructor._deprecatedEvents && this.constructor._deprecatedEvents[eventType]\n      if (deprecationMessage) {\n        log.warning('deprecated', deprecationMessage('once'))\n      }\n\n      if (listener) {\n        let newListeners = (this._listeners().get(eventType) || []).concat({\n          remaining: 1,\n          func: listener,\n        })\n        this._listeners().set(eventType, newListeners)\n        var listenerCount = this._listeners().get(eventType).length\n        var limit = this.LISTENER_LIMIT\n        limit = typeof(limit) === 'number' ? limit : DEFAULT_LISTENER_LIMIT\n        if (listenerCount > limit) {\n          log.warning('emitter', LEAK_MESSAGE(limit), this)\n        }\n        return this\n      } else {\n        return new Promise(resolve => {\n          let newListeners = (this._listeners().get(eventType) || []).concat({\n            remaining: 1,\n            func: resolve,\n          })\n          this._listeners().set(eventType, newListeners)\n        })\n      }\n    }\n\n    /**\n     * Removes a listener associated with an event. At most one listener is removed, if the\n     * same listener has been added multiple times, only the first listener is removed.\n     *\n     * @function EventEmitter#off\n     * @param {eventType} eventType - The event type from which to remove the listener(s).\n     * @param {Function} [listener] - The listener that should be removed. If omitted,\n     * all listeners for the event type are removed.\n     * @returns {EventEmitter} Itself, to allow chained calls.\n     */\n    off(eventType, listener) {\n      argCheck.count('EventEmitter.off', 1, arguments.length)\n      argCheck.string('EventEmitter.off', 'eventType', eventType)\n      argCheck.func('EventEmitter.off', 'listener', listener)\n\n      let deprecationMessage = this.constructor._deprecatedEvents && this.constructor._deprecatedEvents[eventType]\n      if (deprecationMessage) {\n        log.warning('deprecated', deprecationMessage('off'))\n      }\n\n      var listeners\n      var i\n      listeners = this._listeners().get(eventType)\n      if (listeners) {\n        for (i = 0; i < listeners.length; i += 1) {\n          if (listeners[i].func === listener) {\n            if (listeners.iterating) {\n              if (listeners[i].remaining === 0) {\n                continue\n              }\n              listeners[i].remaining = 0\n            } else {\n              listeners.splice(i, 1)\n            }\n            return this\n          }\n        }\n      }\n      return this\n    }\n\n    _clearListeners(eventType) {\n      if (eventType) {\n        this._listeners().delete(eventType)\n      } else {\n        this._listeners().clear()\n      }\n    }\n\n    /**\n     * @function EventEmitter#_getListeners\n     * @private\n     * @param {eventType} eventType - The event type to fetch the listeners for.\n     * @returns {EventEmitter} All listeners for the given event type.\n     */\n    _getListeners(eventType) {\n      argCheck.count('EventEmitter.listeners', 1, arguments.length)\n      argCheck.string('EventEmitter.listeners', 'eventType', eventType)\n      return (this._listeners().get(eventType) || []).filter(function (obj) {\n        return obj.remaining\n      }).map(function (obj) {\n        return obj.func\n      })\n    }\n\n    // eventType, args...\n    _emit(arg) {\n      var eventType = arg.eventType || arg\n      var defaultHandler = arg.defaultHandler\n      var listeners = this._listeners().get(eventType)\n      if (!listeners && !defaultHandler) {\n        return\n      }\n\n      var args = []\n      var i\n      for (i = 1; i < arguments.length; i += 1) {\n        args[i - 1] = arguments[i]\n      }\n\n      if (!listeners) {\n        defaultHandler.apply(this, args)\n        return\n      }\n      var called = false\n\n      listeners.iterating = true\n      for (i = 0; i < listeners.length; i += 1) {\n        var listener = listeners[i]\n        if (listener.remaining !== 0) {\n          if (listener.remaining > 0) {\n            listener.remaining -= 1\n          }\n          try {\n            listener.func.apply(this, args)\n            called = true\n          } catch (error) {\n            log.error('emitter', `Error in event listener, ${error} ${error.stack ? `${error.stack}\\n` : ''}`)\n          }\n        }\n      }\n      listeners.iterating = false\n\n      for (i = listeners.length - 1; i >= 0; i -= 1) {\n        if (listeners[i].remaining === 0) {\n          listeners.splice(i, 1)\n        }\n      }\n\n      if (listeners.pending) {\n        listeners.push(...listeners.pending)\n        delete listeners.pending\n      }\n\n      if (!called && defaultHandler) {\n        defaultHandler.apply(this, args)\n      }\n    }\n  }\n}\n\nexport default EmitterMixin\n\n\n\n// WEBPACK FOOTER //\n// ./lib/common/emitter.js","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_defined.js\n// module id = 35\n// module chunks = 0 1 2 3 4 5 6","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-create.js\n// module id = 36\n// module chunks = 0 1 2 3 4 5 6","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-length.js\n// module id = 37\n// module chunks = 0 1 2 3 4 5 6","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_uid.js\n// module id = 38\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/slicedToArray.js\n// module id = 39\n// module chunks = 0 1 2 6","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_for-of.js\n// module id = 40\n// module chunks = 0 1 2 3 4 5 6","module.exports = true;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_library.js\n// module id = 41\n// module chunks = 0 1 2 3 4 5 6","exports.f = {}.propertyIsEnumerable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-pie.js\n// module id = 43\n// module chunks = 0 1 2 3 4 5 6","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_classof.js\n// module id = 44\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/set.js\n// module id = 45\n// module chunks = 0 1 2 3 4 5 6","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-sap.js\n// module id = 46\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/define-property.js\n// module id = 47\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/json/stringify.js\n// module id = 48\n// module chunks = 0 1 2 3 5","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_enum-bug-keys.js\n// module id = 49\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iter-define.js\n// module id = 50\n// module chunks = 0 1 2 3 4 5 6","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_meta.js\n// module id = 51\n// module chunks = 0 1 2 3 4 5 6","var pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-gopd.js\n// module id = 52\n// module chunks = 0 1 2 3 4 5 6","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_shared-key.js\n// module id = 53\n// module chunks = 0 1 2 3 4 5 6","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_shared.js\n// module id = 54\n// module chunks = 0 1 2 3 4 5 6","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-integer.js\n// module id = 55\n// module chunks = 0 1 2 3 4 5 6","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-primitive.js\n// module id = 56\n// module chunks = 0 1 2 3 4 5 6","var global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_wks-define.js\n// module id = 57\n// module chunks = 0 1 2 3 4 5 6","exports.f = require('./_wks');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_wks-ext.js\n// module id = 58\n// module chunks = 0 1 2 3 4 5 6","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_an-instance.js\n// module id = 59\n// module chunks = 0 1 2 3 4 5 6","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_dom-create.js\n// module id = 60\n// module chunks = 0 1 2 3 4 5 6","var hide = require('./_hide');\nmodule.exports = function(target, src, safe){\n  for(var key in src){\n    if(safe && target[key])target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_redefine-all.js\n// module id = 61\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/create.js\n// module id = 62\n// module chunks = 0 1 2 3 4 5 6","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_a-function.js\n// module id = 63\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/keys.js\n// module id = 64\n// module chunks = 0 1 2 3 4 5","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/core.get-iterator-method.js\n// module id = 65\n// module chunks = 0 1 2 3 4 5 6","'use strict'\n\nimport AdapterJS from 'exports-loader?AdapterJS!adapterjs'\nexport {AdapterJS}\n\nimport log from 'common/log'\nimport {diff, find, isFirefox, noVendor} from 'common/utils'\n\n/**\n * @typedef {'signaling'|'connecting'|'connected'|'reconnecting'|'closed'} PeerConnectionState\n *\n * A string representing the connection state of a peer connection.\n *\n * - `'signaling'` - The connection is in the signaling state, e.i. waiting for offer or answer.\n * - `'connecting'` - The signaling has been completed and the connection is being set up.\n * - `'connected'` - Connected to the peer.\n * - `'reconnecting'` - The connection has been temporarily lost but might recover.\n * - `'closed'` - The container of the connection has been closed, i.e. the conference, call, etc.\n */\n\nexport const isWebRtcPlugin = window.webrtcDetectedType === 'plugin'\n\nexport const MediaStream = noVendor(window, 'MediaStream')\nexport const AudioContext = noVendor(window, 'AudioContext')\n\nexport function isMediaStream(stream) {\n  if (!stream) {\n    return false\n  }\n  if (MediaStream) {\n    return stream instanceof MediaStream\n  } else {\n    return stream.id && stream.addTrack && stream.getTracks\n  }\n}\n\n/**\n * A function that returns a promise that is resolved once WebRTC is ready to be used on the page.\n * The promise is always resolved to the first argument passed to the function, so it can\n * be transparently added to a promise `.then()` chain.\n *\n * It is only necessary to wait when using a browser plugin to enable WebRTC,\n * but it is good practice to call this function and make sure the promise is\n * resolved before doing anything WebRTC related, including creating media sources.\n *\n * @example\n * login()\n *   .then(cct.webRtcReady)\n *   .then(setupCall)\n *\n * @function cct.webRtcReady\n * @param {*} [ret] - The value that should be returned.\n * @returns {Promise} A promise that is resolved to the value of the\n *     ret argument once WebRTC is ready.\n */\nexport function webRtcReady(ret) {\n  return new Promise(function (resolve) {\n    if (AdapterJS) {\n      AdapterJS.webRTCReady(function () {\n        resolve(ret)\n      })\n    } else {\n      resolve(ret)\n    }\n  })\n}\n\nexport function addPeerConnectionStream(peerConnection, stream) {\n  if (isFirefox) {\n    let removeSet = peerConnection._streamsPendingRemoval\n    if (removeSet && removeSet.has(stream)) {\n      removeSet.delete(stream)\n    }\n  }\n  peerConnection.addStream(stream)\n}\n\nconst ALLOWED_REMOVE_STATES = ['stable', 'closed']\n\nfunction waitForStableState(peerConnection, callback) {\n  function onState() {\n    let state = peerConnection.signalingState\n    if (ALLOWED_REMOVE_STATES.indexOf(state) !== -1) {\n      peerConnection.removeEventListener('signalingstate', onState)\n      callback()\n    }\n  }\n  peerConnection.addEventListener('signalingstate', onState)\n}\n\nfunction removeAllTracks(peerConnection, tracks) {\n  tracks.forEach(track => {\n    let sender = find(peerConnection.getSenders(), sender => sender.track === track)\n    if (sender) {\n      peerConnection.removeTrack(sender)\n    } else {\n      log.debug('webrtc-utils', `Failed to remove track '${track}' form peer connection, no sender found.`)\n    }\n  })\n}\n\nexport function removePeerConnectionStream(peerConnection, stream) {\n  let state = peerConnection.signalingState\n  if (isFirefox && ALLOWED_REMOVE_STATES.indexOf(state) === -1) {\n    log.info('webrtc-utils', \"delaying removeTrack since we're not in a stable state\")\n    let removeSet = peerConnection._streamsPendingRemoval\n    if (!removeSet) {\n      removeSet = new Set()\n      peerConnection._streamsPendingRemoval = removeSet\n      waitForStableState(peerConnection, () => {\n        let removeSet = peerConnection._streamsPendingRemoval\n        log.info('webrtc-utils', `stable state reached, removing streams: ${removeSet}`)\n        removeSet.forEach(stream => removePeerConnectionStream(peerConnection, stream))\n      })\n    }\n    removeSet.add(stream)\n    return\n  }\n  if (peerConnection.removeStream) {\n    try {\n      peerConnection.removeStream(stream)\n    } catch (error) {\n      if (error.name === 'NotSupportedError') { // Workaround for FireFox\n        removeAllTracks(peerConnection, stream.getTracks())\n      } else {\n        throw error\n      }\n    }\n  } else {\n    removeAllTracks(peerConnection, stream.getTracks())\n  }\n}\n\nexport function BinaryTree(nodes) {\n  this.nodes = nodes || []\n}\n\nBinaryTree.prototype = {\n  constructor: BinaryTree,\n  tag: 'binary-tree',\n  toString: function () {\n    return 'binaryTree{nodes=' + this.nodes + '}'\n  },\n\n  root: function () {\n    return this.nodes[0]\n  },\n  parent: function (child) {\n    var childIndex = this.nodes.indexOf(child)\n    var parentIndex = (Math.floor((childIndex - 1) / 2))\n    return this.nodes[parentIndex]\n  },\n  left: function (parent) {\n    var parentIndex = this.nodes.indexOf(parent)\n    var childIndex = 2 * parentIndex + 1\n    return this.nodes[childIndex]\n  },\n  right: function (parent) {\n    var parentIndex = this.nodes.indexOf(parent)\n    var childIndex = 2 * parentIndex + 2\n    return this.nodes[childIndex]\n  },\n}\n\nAudioContextUtil.MAX_REFERENCES = 32\n\nfunction AudioContextUtil() {\n  this._references = 0\n  this._context = null\n}\n\nAudioContextUtil.prototype = {\n  constructor: AudioContextUtil,\n  tag: 'audio-context-util',\n  toString: function () {\n    return 'audio-context-util{references=' + this._references + ', context=' + this._context + '}'\n  },\n  get: function () {\n    this._references += 1\n    if (this._references > AudioContextUtil.MAX_REFERENCES) {\n      log.warning(this.tag, 'Too many audioContext references, possible leak.')\n    }\n    if (!this._context) {\n      this._context = new AudioContext()\n    }\n    return this._context\n  },\n  release: function () {\n    if (this._references === 0) {\n      log.error(this.tag, 'audioContext was dereferenced too many times.')\n      return\n    } else if (this._references === 1) {\n      this._context.close()\n      this._context = null\n    }\n    this._references -= 1\n  },\n}\n\nexport var audioContextUtil = new AudioContextUtil()\n\nexport function getMediaStreamId(stream) {\n  if (stream._blobId && stream._blobId.indexOf('MediaStream_') === 0) { // Only present in Cordova MediaStreams\n    // MediaStreams in Cordova have a weird id where the first half is the same for\n    // remote streams, while the second half is unique.\n    // An example ID is '0E6CFB41-27A7-4028-9E06-02206E3C5118-6A849356-4C8F-4D93-A438-8329888D0E03'\n    // Where '0E6CFB41-27A7-4028-9E06-02206E3C5118' is the bit we want to use\n    // We've seen other formats as well though, like base64-uuid, as opposed to the above uuid-uuid\n    // To protect agains changes to the Cordova plugin we handle a few different cases below\n    let fullId = stream.id\n    let split = fullId.split('-')\n    if (split.length === 2) {\n      return split[0]\n    } else if (split.length === 6) {\n      return split[0]\n    } else if (split.length === 10) {\n      return split.slice(0, 5).join('-')\n    } else {\n      log.warning('media-stream–id', `unexpected cordova media stream id: ${stream.id}`)\n      return stream.id\n    }\n  } else {\n    return stream.id\n  }\n}\n\nfunction collectStreams(streams, stream) {\n  let id = getMediaStreamId(stream)\n  streams[id] = stream\n  return streams\n}\n\nexport function streamDiff(streams1, streams2) {\n  let streamMap1 = [...streams1].reduce(collectStreams, {})\n  let streamMap2 = [...streams2].reduce(collectStreams, {})\n  let streamIds1 = Object.keys(streamMap1)\n  let streamIds2 = Object.keys(streamMap2)\n  let [addedIds, removedIds] = diff(streamIds1, streamIds2)\n  let addedStreams = addedIds.map(id => streamMap2[id])\n  let removedStreams = removedIds.map(id => streamMap1[id])\n  return [addedStreams, removedStreams]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webrtc/utils.js","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iobject.js\n// module id = 67\n// module chunks = 0 1 2 3 4 5 6","exports.f = Object.getOwnPropertySymbols;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-gops.js\n// module id = 68\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/get.js\n// module id = 69\n// module chunks = 0 1 2 3 4 5 6","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_ie8-dom-define.js\n// module id = 70\n// module chunks = 0 1 2 3 4 5 6","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_is-array-iter.js\n// module id = 71\n// module chunks = 0 1 2 3 4 5 6","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_is-array.js\n// module id = 72\n// module chunks = 0 1 2 3 4 5 6","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iter-call.js\n// module id = 73\n// module chunks = 0 1 2 3 4 5 6","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iter-step.js\n// module id = 74\n// module chunks = 0 1 2 3 4 5 6","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-gopn.js\n// module id = 75\n// module chunks = 0 1 2 3 4 5 6","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-gpo.js\n// module id = 76\n// module chunks = 0 1 2 3 4 5 6","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-keys-internal.js\n// module id = 77\n// module chunks = 0 1 2 3 4 5 6","module.exports = require('./_hide');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_redefine.js\n// module id = 78\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/array/from.js\n// module id = 79\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar dP          = require('./_object-dp').f\n  , create      = require('./_object-create')\n  , redefineAll = require('./_redefine-all')\n  , ctx         = require('./_ctx')\n  , anInstance  = require('./_an-instance')\n  , defined     = require('./_defined')\n  , forOf       = require('./_for-of')\n  , $iterDefine = require('./_iter-define')\n  , step        = require('./_iter-step')\n  , setSpecies  = require('./_set-species')\n  , DESCRIPTORS = require('./_descriptors')\n  , fastKey     = require('./_meta').fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_collection-strong.js\n// module id = 80\n// module chunks = 0 1 2 3 4 5 6","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof')\n  , from    = require('./_array-from-iterable');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_collection-to-json.js\n// module id = 81\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar global         = require('./_global')\n  , $export        = require('./_export')\n  , meta           = require('./_meta')\n  , fails          = require('./_fails')\n  , hide           = require('./_hide')\n  , redefineAll    = require('./_redefine-all')\n  , forOf          = require('./_for-of')\n  , anInstance     = require('./_an-instance')\n  , isObject       = require('./_is-object')\n  , setToStringTag = require('./_set-to-string-tag')\n  , dP             = require('./_object-dp').f\n  , each           = require('./_array-methods')(0)\n  , DESCRIPTORS    = require('./_descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function(target, iterable){\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        anInstance(this, C, KEY);\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)dP(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_collection.js\n// module id = 82\n// module chunks = 0 1 2 3 4 5 6","module.exports = require('./_global').document && document.documentElement;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_html.js\n// module id = 83\n// module chunks = 0 1 2 3 4 5 6","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iter-detect.js\n// module id = 84\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar global      = require('./_global')\n  , core        = require('./_core')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_set-species.js\n// module id = 85\n// module chunks = 0 1 2 3 4 5 6","'use strict'\n\nimport log from 'common/log'\nimport argCheck from 'common/argCheck'\nimport {ReadOnlyMap} from 'common/utils'\n\nimport MediaNodeInput from 'media/mediaNodeInput'\nimport MediaNodeOutput from 'media/mediaNodeOutput'\nimport {mediaNodeSpecies, inputs, outputs} from 'media/common'\n\nconst TAG = 'media-node'\n\n/**\n * @typedef {MediaNodeOutput|Object} MediaNodeConnectSource\n *\n * A set of types that a can connect to {@link MediaNode}s or {@link MediaNodeInput}s.\n *\n * The types are the same as the ones that can be passed to {@link MediaNodeOutput#resolve}.\n */\n\n/**\n * @typedef {MediaNodeInput|external:HTMLMediaElement|Object} MediaNodeConnectTarget\n *\n * A set of types that a {@link MediaNode} or {@link MediaNodeOutput} can be connected to.\n *\n * The types are the same as the ones that can be passed to {@link MediaNodeInput#resolve},\n * with the addition of {@link external:HTMLMediaElement}.\n *\n * If an HTML element is passed when connecting, an {@link HtmlSink} will be created and used\n * as the target. When disconnecting, all targets that are {@link HtmlSink}s which are rendering\n * to the given HTML element will be disconnected. This way the same HTML element can be passed\n * to connect and disconnect without any hassle.\n */\n\n/**\n * A base class that all pure media nodes inherit from.\n *\n * Classes inheriting from {@link MediaNode} are plain nodes with input and output ports directly attached.\n *\n * A media node has zero or more input and output ports, which can be connected to other nodes.\n * Media nodes are always connected from one output port to one input port, using the connect\n * method of either the output port or the media node.\n *\n * When using the connect method of a media node, the output port to be used is resolved by\n * recursively looking up the output property of the media node. The same method is used when\n * a media node is used as the target for a connection, but in that case an input port is looked\n * up via the input property.\n *\n * Because the input and output property lookups are recursive, it is easy to create simple container\n * nodes that have a number of internal media nodes, and then expose input and output ports as\n * properties.\n *\n * As an example, we might have `cameraSource` and `blurFilter`, which both inherit from\n * {@link MediaNode}. The source has one output port, while the filter has one input and one ouput.\n * We can connect these two together using `cameraSource.output.connect(blurFilter.input)`. This is\n * a bit verbose, but because the connect method will look up the input and output properties, we\n * can just use `cameraSource.connect(blurFilter)` instead. The connect method is made available\n * to the camera source class using {@link MediaSource.connectMixin}.\n *\n * Let's say we now want to create a `BlurredCameraSource` class, which reuses the nodes from the\n * above example. The ES6 class declaration would be\n * `class BlurredCameraSource extends MediaSource.connectMixin()`. The mixin adds the connect and\n * disconnect methods for convenience. In the constructor, we can now create our camera source and\n * blur filter, connect them together, and simply expose the ouput property of the `blurFilter`\n * using `this.output = blurFilter.output`. Since the output lookup is recursive, we can call the\n * connect method of our `blurredCameraSource` directly, but the output port of the blurFilter will\n * in the end be what is actually connected.\n *\n * @class MediaNode\n */\nexport default class MediaNode {\n  constructor() {\n    this[inputs] = new Set()\n    this[outputs] = new Set()\n  }\n\n  toString() {\n    let name = this.constructor.name\n    let camelName\n    if (!name) {\n      camelName = '_mediaNode'\n    } else {\n      camelName = name[0].toLowerCase() + name.slice(1)\n    }\n\n    return `${camelName}{io=${this[inputs].size}/${this[outputs].size}}`\n  }\n\n  // Public methods\n\n  /**\n   * Connect two media nodes or ports together. Both the input and the output will be resolved\n   * using the respective resolve methods.\n   *\n   * Usually adding the {@link MediaNode.connectMixin} to the source class is more convenient and clearer than using\n   * these methods.\n   *\n   * @example <caption>Connecting a DeviceSource to a MuteFilter.</caption>\n   * // Passing in MediaNodes\n   * MediaNode.connect(deviceSource, muteFilter)\n   *\n   * // Explicitly passing in inputs and outputs, will result in the same connection as above.\n   * MediaNode.connect(deviceSource.output, muteFilter.input)\n   *\n   * @param  {MediaNodeConnectSource} output - The source ouput or node.\n   * @param  {MediaNodeConnectTarget} input - The target input, node, or element.\n   */\n  static connect(output, input) {\n    argCheck.object(`${output.constructor.name}.connect`, 'output', output)\n    if (!(input instanceof HTMLElement)) {\n      argCheck.object(`${output.constructor.name}.connect`, 'input', input)\n    }\n    output = MediaNodeOutput.resolve(output)\n    output.connect(input)\n  }\n\n  /**\n   * Disconnect two media nodes or ports. Both the input and the output will be resolved\n   * using the respective resolve methods.\n   *\n   * @param  {MediaNodeConnectSource} output - The source ouput or node.\n   * @param  {MediaNodeConnectTarget} input - The target input, node, or element.\n   */\n  static disconnect(output, input) {\n    argCheck.object(`${output.constructor.name}.connect`, 'output', output)\n    if (!(input instanceof HTMLElement)) {\n      argCheck.optObject(`${output.constructor.name}.connect`, 'input', input)\n    }\n    output = MediaNodeOutput.resolve(output)\n    output.disconnect(input)\n  }\n\n  /**\n   * A mixin that adds the connect and disconnect methods from {@link MediaNode} as member methods.\n   *\n   * @mixin ConnectMixin\n   */\n\n  /**\n   * Connect the node to a target. Each output can be connected to multiple targets.\n   *\n   * @function ConnectMixin#connect\n   * @param  {MediaNodeConnectTarget} input - The target input, node, or element.\n   */\n\n  /**\n   * Disconnect the node from a target.\n   *\n   * If no target is specified, all targets will be disconnected.\n   *\n   * @function ConnectMixin#disconnect\n   * @param {MediaNodeConnectTarget} [target] - The target to disconnect from.\n   */\n\n  /**\n   * A mixin that adds the connect and disconnect methods to a class.\n   *\n   * @example <caption>Usage with ES6 classes.</caption>\n   * // Without superclass\n   * class MyClass extends MediaNode.connectMixin() {\n   * }\n   *\n   * // With a superclass\n   * class MyClass extends MediaNode.connectMixin(MySuperClass) {\n   * }\n   *\n   * @param {class} [superclass] - The superclass to extend, if no class is given a class with only the\n   *   mixin applied is returned.\n   * @returns {class} A new class extended with the connect and disconnect methods.\n   */\n  static connectMixin(superclass = () => {}) {\n    return class ConnectableNode extends superclass {\n      connect(target) {\n        MediaNode.connect(this, target)\n      }\n\n      disconnect(target) {\n        MediaNode.disconnect(this, target)\n      }\n    }\n  }\n\n  // Private\n\n  get [mediaNodeSpecies]() {\n    return true\n  }\n}\n\n/**\n * A base class for input and output maps.\n *\n * @class PortMap\n * @abstract\n * @extends ReadOnlyMap\n */\nclass PortMap extends ReadOnlyMap {\n  constructor({parent, portConstructor, onStream, onCreate, onDetach}) {\n    super()\n    argCheck.object(`${this.constructor.name} constructor`, 'parent', parent)\n    argCheck.func(`${this.constructor.name} constructor`, 'portConstructor', portConstructor)\n    this._parent = parent\n    this._portConstructor = portConstructor\n    this._onStream = onStream\n    this._onCreate = onCreate\n    this._onDetach = onDetach\n  }\n\n  /**\n   * Gets the input for the given key. If the input doesn't exist, it is created.\n   *\n   * @param {string} key - The name of the port.\n   * @returns {MediaNodeInput|MediaNodeOutput} An existing or newly created port.\n   */\n  get(key) {\n    argCheck.string(`${this.constructor.name}.get`, 'key', key)\n    let port = super.get(key)\n    if (!port) {\n      try {\n        let options = {\n          name: key,\n          parent: this._parent,\n        }\n        if (this._onStream) {\n          options.onStream = (stream, oldStream) => this._onStream(key, stream, oldStream)\n        }\n        port = new this._portConstructor(options)\n      } catch (constructorError) {\n        let error = new Error(`Error thrown in ${this._portConstructor.name} constructor, ${constructorError}`)\n        error.reason = constructorError\n        throw error\n      }\n      super._set(key, port)\n      if (this._onCreate) {\n        try {\n          this._onCreate(port)\n        } catch (error) {\n          log.error(TAG, `Error thrown in ${this.constructor.name}.onCreate: ${error}`)\n        }\n      }\n    }\n    return port\n  }\n\n  /**\n   * Removes and detaches the input or output with the given name.\n   *\n   * @param {string} key - The name of the port.\n   * @returns {boolean} True if the was a port to delete.\n   */\n  delete(key) {\n    argCheck.string(`${this.constructor.name}.delete`, 'key', key)\n    let port = super.get(key)\n    if (port) {\n      super._delete(key)\n      port.detach()\n      if (this._onDetach) {\n        try {\n          this._onDetach(port)\n        } catch (error) {\n          log.error(TAG, `Error thrown in ${this.constructor.name}.onDetach: ${error}`)\n        }\n      }\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Removes and detaches all the ports in the map.\n   */\n  clear() {\n    super.forEach((_, key) => {\n      this.delete(key)\n    })\n  }\n}\n\n/**\n * A callback that is called when the stream of any of the inputs is updated.\n *\n * @callback InputMap~OnStreamCallback\n * @param {string} key - The key for the input port of the updated stream.\n * @param {?MediaStream} stream - The new media stream.\n * @param {?MediaStream} oldStream - The old media stream.\n */\n\n/**\n * A callback for when a new input is created.\n *\n * @callback InputMap~OnCreateCallback\n * @param {MediaNodeInput} input - The input that was created.\n */\n\n/**\n * A callback for when an input is detached.\n *\n * @callback InputMap~OnDetachCallback\n * @param {MediaNodeInput} input - The input that was detached.\n */\n\n/**\n * A map of inputs for a media node. This allows for a node to have multiple named inputs.\n *\n * @class InputMap\n * @extends PortMap\n * @param {Object} options - Options object.\n * @param {MediaNode} options.parent - The parent media node.\n * @param {class} [options.inputConstructor=MediaNodeInput] - The constructor of the inputs in this map.\n *   Must be `MediaNodeInput`, or a subclass.\n * @param {InputMap~OnStreamCallback} onStream - Callback for when any of the inputs streams are updated.\n * @param {InputMap~OnCreateCallback} onCreate - Callback for when a new port is created.\n * @param {InputMap~OnDetachCallback} onDetach - Callback for when a new port is detached and removed.\n */\nexport class InputMap extends PortMap {\n  constructor({inputConstructor = MediaNodeInput, parent, onStream, onCreate, onDetach}) {\n    argCheck.optFunc('InputMap constructor', 'onStream', onStream)\n    if (!onStream) {\n      onStream = (...args) => parent.onStream(...args)\n    }\n    super({portConstructor: inputConstructor, parent, onStream, onCreate, onDetach})\n  }\n}\n\n/**\n * A callback for when a new output is created.\n *\n * @callback OutputMap~OnCreateCallback\n * @param {MediaNodeInput} output - The output that was created.\n */\n\n/**\n * A callback for when an output is detached.\n *\n * @callback OutputMap~OnDetachCallback\n * @param {MediaNodeInput} output - The output that was detached.\n */\n\n/**\n * A map of ouputs for a media node. This allows for a node to have multiple named ouputs.\n *\n * @class OutputMap\n * @extends PortMap\n * @param {Object} options - Options object.\n * @param {MediaNode} options.parent - The parent media node.\n * @param {class} [options.outputConstructor=MediaNodeOutput] - The constructor of the outputs in this map.\n *   Must be `MediaNodeOutput`, or a subclass.\n * @param {OutputMap~OnCreateCallback} onCreate - Callback for when a new port is created.\n * @param {OutputMap~OnDetachCallback} onDetach - Callback for when a new port is detached and removed.\n */\nexport class OutputMap extends PortMap {\n  constructor({outputConstructor = MediaNodeOutput, parent, onCreate, onDetach}) {\n    super({portConstructor: outputConstructor, parent, onCreate, onDetach})\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/mediaNode.js","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/symbol.js\n// module id = 87\n// module chunks = 0 1 2 3 4 5 6","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/defineProperty.js\n// module id = 88\n// module chunks = 0 1 2 3 4 5","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  return Array.isArray(arr) ? arr : (0, _from2.default)(arr);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/toArray.js\n// module id = 89\n// module chunks = 0 1 2 3 4 5","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_task.js\n// module id = 90\n// module chunks = 0 1 2 3 4 5","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-gopn-ext.js\n// module id = 91\n// module chunks = 0 1 2 3 4 5 6","'use strict'\n\nimport AsyncQueue from 'common/queue'\nimport CctError, {NotAllowedError, NotFoundError, UnknownError} from 'common/errors'\n\nimport {isWebRtcPlugin} from 'webrtc/utils'\n\nexport const mediaNodeSpecies = Symbol('media-node')\nexport const inputs = Symbol('inputs')\nexport const outputs = Symbol('outputs')\n\n/**\n * Checks whether a given object is a media node.\n *\n * @param {Object} obj - An object to test.\n * @returns {boolean} True if the object is a media node, false otherwise.\n */\nexport function isMediaNode(obj) {\n  return !!(obj && obj[mediaNodeSpecies])\n}\n\nexport function doesntSupportPlugin(instance) {\n  if (isWebRtcPlugin) {\n    throw new Error(`${instance.constructor.name} is not supported when using a WebRTC plugin`)\n  }\n}\n\n/**\n * The constraints of the performed action could not be satisfied, e.g. the requested\n * video frame rate could not be delivered.\n *\n * @class OverconstrainedError\n * @extends CctError\n */\nexport class OverconstrainedError extends CctError {}\nOverconstrainedError.errorName = 'OverconstrainedError'\n\nconst gumQueue = new AsyncQueue()\n\n// Browsers are inconsistent in what errors are thrown when mic/camera access is denied.\n// PermissionDeniedError is thrown by Chrome and the plugin\n// SecurityError is from Firefox 48\n// NotAllowedError is from Firefox 50 Developer edition and onward\nconst NOT_ALLOWED_ERRORS = ['SecurityError', 'NotAllowedError', 'PermissionDeniedError', 'PermissionDismissedError']\nconst NOT_FOUND_ERRORS = ['NotFoundError', 'DevicesNotFoundError']\nconst OVERCONSTRAINED_ERRORS = ['OverconstrainedError', 'ConstraintNotSatisfiedError']\n\nexport function getUserMedia(constraints) {\n  if (!navigator.getUserMedia) {\n    return Promise.reject(new Error('no getUserMedia found'))\n  }\n\n  return gumQueue.push(() => new Promise((resolve, reject) => {\n    return navigator.getUserMedia(constraints, stream => {\n      if (stream) {\n        resolve(stream)\n      } else {\n        reject(new NotFoundError('Received a null media stream'))\n      }\n    }, gumError => {\n      var error\n      if (NOT_ALLOWED_ERRORS.indexOf(gumError.name) !== -1) {\n        // According to spec, denying the gum request should lead to a NotAllowedError\n        error = new NotAllowedError(gumError.message)\n      } else if (OVERCONSTRAINED_ERRORS.indexOf(gumError.name) !== -1) {\n        // According to spec, constraint errors should lead to an OverconstrainedError\n        let message = gumError.message\n        if (!message) {\n          if (gumError.constraint) {\n            message = `media constraint '${gumError.constraint}' could not be satisfied`\n          } else {\n            message = 'media constraints could not be satisfied'\n          }\n        }\n        error = new OverconstrainedError(message)\n      } else if (NOT_FOUND_ERRORS.indexOf(gumError.name) !== -1) {\n        // According to spec, not found errors should lead to a NotFoundError\n        error = new NotFoundError(gumError.message)\n      } else {\n        error = new UnknownError(gumError.message)\n      }\n      error.reason = gumError\n      reject(error)\n    })\n  }))\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/common.js","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/get-own-property-descriptor.js\n// module id = 93\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/symbol/iterator.js\n// module id = 94\n// module chunks = 0 1 2 3 4 5 6","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-dps.js\n// module id = 95\n// module chunks = 0 1 2 3 4 5 6","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/set-prototype-of.js\n// module id = 96\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/array/from.js\n// module id = 97\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/create.js\n// module id = 98\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/define-property.js\n// module id = 99\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key){\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/get-own-property-descriptor.js\n// module id = 100\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/get-prototype-of.js\n// module id = 101\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/set-prototype-of.js\n// module id = 102\n// module chunks = 0 1 2 3 4 5 6","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nmodule.exports = require('../modules/_core').Set;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/set.js\n// module id = 103\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/symbol/index.js\n// module id = 104\n// module chunks = 0 1 2 3 4 5 6","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/symbol/iterator.js\n// module id = 105\n// module chunks = 0 1 2 3 4 5 6","module.exports = function(){ /* empty */ };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_add-to-unscopables.js\n// module id = 106\n// module chunks = 0 1 2 3 4 5 6","var forOf = require('./_for-of');\n\nmodule.exports = function(iter, ITERATOR){\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_array-from-iterable.js\n// module id = 107\n// module chunks = 0 1 2 3 4 5 6","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_array-includes.js\n// module id = 108\n// module chunks = 0 1 2 3 4 5 6","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_array-methods.js\n// module id = 109\n// module chunks = 0 1 2 3 4 5 6","var isObject = require('./_is-object')\n  , isArray  = require('./_is-array')\n  , SPECIES  = require('./_wks')('species');\n\nmodule.exports = function(original){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_array-species-constructor.js\n// module id = 110\n// module chunks = 0 1 2 3 4 5 6","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_array-species-create.js\n// module id = 111\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar $defineProperty = require('./_object-dp')\n  , createDesc      = require('./_property-desc');\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_create-property.js\n// module id = 112\n// module chunks = 0 1 2 3 4 5 6","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_enum-keys.js\n// module id = 113\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_iter-create.js\n// module id = 114\n// module chunks = 0 1 2 3 4 5 6","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_keyof.js\n// module id = 115\n// module chunks = 0 1 2 3 4 5 6","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_set-proto.js\n// module id = 116\n// module chunks = 0 1 2 3 4 5 6","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_string-at.js\n// module id = 117\n// module chunks = 0 1 2 3 4 5 6","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_to-index.js\n// module id = 118\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.array.from.js\n// module id = 119\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.array.iterator.js\n// module id = 120\n// module chunks = 0 1 2 3 4 5 6","var $export = require('./_export')\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', {create: require('./_object-create')});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.create.js\n// module id = 121\n// module chunks = 0 1 2 3 4 5 6","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.define-property.js\n// module id = 122\n// module chunks = 0 1 2 3 4 5 6","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject                 = require('./_to-iobject')\n  , $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function(){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.get-own-property-descriptor.js\n// module id = 123\n// module chunks = 0 1 2 3 4 5 6","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.get-prototype-of.js\n// module id = 124\n// module chunks = 0 1 2 3 4 5 6","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.set-prototype-of.js\n// module id = 125\n// module chunks = 0 1 2 3 4 5 6","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.set.js\n// module id = 126\n// module chunks = 0 1 2 3 4 5 6","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.symbol.js\n// module id = 127\n// module chunks = 0 1 2 3 4 5 6","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Set', {toJSON: require('./_collection-to-json')('Set')});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es7.set.to-json.js\n// module id = 128\n// module chunks = 0 1 2 3 4 5 6","require('./_wks-define')('asyncIterator');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 129\n// module chunks = 0 1 2 3 4 5 6","require('./_wks-define')('observable');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es7.symbol.observable.js\n// module id = 130\n// module chunks = 0 1 2 3 4 5 6","'use strict'\n\nimport log from 'common/log'\nimport argCheck from 'common/argCheck'\nimport {isObject} from 'common/utils'\n\nimport {isMediaNode, inputs} from 'media/common'\n\nconst TAG = 'media-node-input'\n\n/**\n * @callback MediaNodeInput~OnStreamCallback\n * @param {?MediaStream} stream - The current media stream, or null.\n * @param {?MediaStream} oldStream - The previous media stream, or null.\n */\n\n/**\n * A class which represents an input of a {@link MediaNode}. Outputs are connected to\n * inputs in order to forward media streams.\n *\n * This class should only be used within the implementation of {@link MediaNode}s. While it\n * is possible to attach inputs to an existing media node, it should be avoided. Use an additional\n * media node to implement the desired behaviour instead, such as a {@link Passthrough}.\n *\n * @class MediaNodeInput\n * @param {Object} options - Options object.\n * @param {string} options.name - The name of the output, should be 'default' for single inputs.\n * @param {MediaNode} options.parent - The parent media node.\n * @param {MediaNodeInput~OnStreamCallback} options.parent - A callback that will be called whenever\n * the stream of this media node changes.\n */\nexport default class MediaNodeInput {\n  constructor({name, parent, onStream}) {\n    argCheck.string('MediaNodeInput constructor', 'name', name)\n    if (!isMediaNode(parent)) {\n      argCheck.error('MediaNodeInput constructor', 'parent', 'be a MediaNode')\n    }\n    argCheck.func('MediaNodeInput constructor', 'onStream', onStream)\n    this._name = name\n    this._parent = parent\n    this._onStream = onStream\n    this._output = null\n    this._stream = null\n\n    this._parent[inputs].add(this)\n  }\n\n  toString() {\n    return `mediaNodeInput{name=${this.name},parent=${this._parent}}`\n  }\n\n  /**\n   * Resolves the input of a target. If the lookup fails, an error will be thrown.\n   *\n   * Inputs are resolved as follows, starting with a target:\n   *   1. If the current target is a {@link MediaNodeInput} instance, stop and return the target.\n   *   2. If the target is an object, set the new target to the `input` property of the target, and start over.\n   *   3. Throw error.\n   *\n   * If a circular input object structure is encountered, an error will be thrown.\n   *\n   * @param {MediaNodeInput|Object} target - The target to resolve the input of.\n   * @returns {MediaNodeInput} The resolved input.\n   */\n  static resolve(target) {\n    let chain = [target]\n    for (;;) {\n      if (target instanceof MediaNodeInput) {\n        return target\n      } else if (!isObject(target)) {\n        throw new TypeError(`failed to resolve input of ${chain[0] && chain[0].constructor.name}, ` +\n          'input must be a MediaNodeInput or have an input property')\n      } else if ('input' in target) {\n        try {\n          target = target.input\n        } catch (error) {\n          throw new TypeError(`failed to resolve input of ${chain[0].constructor.name}, ` +\n            `getting input property of ${target} threw error: ${error.message}`)\n        }\n        if (chain.indexOf(target) !== -1) {\n          throw new TypeError(`failed to resolve input of ${chain[0].constructor.name}, ` +\n            'encountered loop in input property chain')\n        }\n        chain.push(target)\n      } else {\n        throw new TypeError(`failed to resolve input of ${chain[0].constructor.name}, ` +\n          `${target.constructor.name} does not have an input property`)\n      }\n    }\n  }\n\n  /**\n   * The name of this input. This is only meaningful for inputs that belong to media nodes with\n   * multiple inputs.\n   *\n   * Any input that belong to one of the base media node implementations, such as {@link MediaSink},\n   * will have the name `'default'`.\n   *\n   * @readonly\n   * @member {string} MediaNodeInput#name\n   */\n  get name() {\n    return this._name\n  }\n\n  /**\n   * The current target of this input.\n   *\n   * The input will always be set to the {@link MediaNodeOutput} that the input is connected to,\n   * and not the media node that the connect might have been called on.\n   *\n   * @readonly\n   * @member {ReadOnlySet<MediaNodeInput>} MediaNodeInput#target\n   */\n  get target() {\n    return this._target\n  }\n\n  /**\n   * The inputs's current media stream, or null.\n   *\n   * @readonly\n   * @member {MediaStream} MediaNodeInput#stream\n   */\n  get stream() {\n    return this._stream\n  }\n\n  /**\n   * Detaches the input from it's parent and removes any connection. Use this to clean up inputs\n   * in media nodes with dynamic inputs, such as a media mixer. After this method has been called\n   * the input can no longer be used.\n   *\n   * This method is internal and should only be called by the implementation of the parent media node.\n   */\n  detach() {\n    if (this._target) {\n      this._target.disconnect(this)\n    }\n    this._parent[inputs].delete(this)\n    this._parent = null\n  }\n\n  _disconnect(target) {\n    if (this.target !== target) {\n      log.error(TAG, `invalid input disconnect state, expected target ${target} but was ${this.target}`)\n    }\n    this._target = null\n    this._setStream(null)\n  }\n\n  _setStream(stream) {\n    if (this._stream === stream) {\n      return\n    }\n    let oldStream = this._stream\n    this._stream = stream\n    try {\n      this._onStream(stream, oldStream)\n    } catch (error) {\n      log.error(TAG, `Error thrown in onStream: ${error}`)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/mediaNodeInput.js","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nmodule.exports = require('../modules/_core').Map;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/map.js\n// module id = 134\n// module chunks = 0 1 2 3 4 5","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/keys.js\n// module id = 135\n// module chunks = 0 1 2 3 4 5","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/_core').Promise;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/promise.js\n// module id = 136\n// module chunks = 0 1 2 3 4 5","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_invoke.js\n// module id = 137\n// module chunks = 0 1 2 3 4 5","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_microtask.js\n// module id = 138\n// module chunks = 0 1 2 3 4 5","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_species-constructor.js\n// module id = 139\n// module chunks = 0 1 2 3 4 5","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.map.js\n// module id = 140\n// module chunks = 0 1 2 3 4 5","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object')\n  , $keys    = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.keys.js\n// module id = 141\n// module chunks = 0 1 2 3 4 5","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.promise.js\n// module id = 142\n// module chunks = 0 1 2 3 4 5","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Map', {toJSON: require('./_collection-to-json')('Map')});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es7.map.to-json.js\n// module id = 143\n// module chunks = 0 1 2 3 4 5","'use strict'\n\nimport MediaNode from 'media/mediaNode'\nimport MediaNodeOutput from 'media/mediaNodeOutput'\n\n/**\n * A base class for media nodes with a single output and no input. Typically used to represent nodes\n * that generate streams, or as a base for nodes with multiple inputs.\n *\n * The subclass should call the `setStream` method to update the output stream.\n *\n * @class MediaSource\n * @extends MediaNode\n * @extends ConnectMixin\n */\nexport default class MediaSource extends MediaNode.connectMixin(MediaNode) {\n  constructor() {\n    super()\n    this._output = new MediaNodeOutput({\n      name: 'default',\n      parent: this,\n    })\n  }\n\n  /**\n   * The current output stream.\n   *\n   * @readonly\n   * @member {MediaStream} MediaSource#stream\n   */\n  get stream() {\n    return this._output.stream\n  }\n\n  /**\n   * The output.\n   *\n   * @readonly\n   * @member {MediaNodeOutput} MediaSource#output\n   */\n  get output() {\n    return this._output\n  }\n\n  /**\n   * Sets the current output stream.\n   *\n   * This should only be called by the subclass implementation, not from outside the media node.\n   *\n   * @param {?MediaStream} stream - The new output stream, or null.\n   */\n  setStream(stream) {\n    this._output.setStream(stream)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/mediaSource.js","'use strict'\n\nimport argCheck from 'common/argCheck'\n\n/**\n * Base class for all custom errors in the library.\n *\n * The main purpose of this class is to provide a cross-browser way to\n * subclass errors and have proper stack traces.\n *\n * It is safe to subclass this error in a babel environment, as opposed\n * to subclassing the `Error` builtin.\n *\n * The static `errorName` property is used to determine the default name\n * for instances of each subclass. The property is used to avoid problems\n * minification and should be set by all subclasses.\n *\n * @class CctError\n * @extends Error\n *\n * @example\n * class MyError extends CctError {\n *   constructor() {\n *     super('This is my error')\n *   }\n * }\n * MyError.errorName = 'MyError'\n */\n\n// Need to do some trickery here to allow subclassing later on\n// http://stackoverflow.com/questions/33870684\nexport default function CctError(message) {\n  argCheck.stringOrEmpty('CctError constructor', 'message', message)\n  Object.defineProperties(this, {\n    message: {\n      configurable: true,\n      enumerable: true,\n      value: message,\n    },\n  })\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor)\n  } else {\n    let stack = new Error(message).stack\n    // IE11 does not initialize 'Error.stack' until the object is thrown.\n    if (!stack) {\n      try {\n        throw new Error()\n      } catch (e) {\n        stack = e.stack\n      }\n    }\n    Object.defineProperty(this, 'stack', {\n      configurable: true,\n      enumerable: false,\n      value: stack,\n    })\n  }\n}\nCctError.errorName = 'CctError'\n\nCctError.prototype = Object.create(Error.prototype, {\n  constructor: {value: CctError},\n\n  /**\n   * The name of the error. Will always be set to the name of the class\n   * unless something else is indicated.\n   *\n   * @readonly\n   * @member {string} CctError#name\n   */\n  name: {\n    get() {\n      return this.constructor.errorName\n    },\n  },\n\n  /**\n   * Error objects are by default JSON serialized as `{\"name\":<name>,\"message\":<message>}`\n   *\n   * @method CctError#toJson\n   * @returns {Object} - JSON representation of the error.\n   */\n  toJSON: {\n    value() {\n      return {\n        name: this.name,\n        message: this.message,\n      }\n    },\n  },\n  toString: {\n    value() {\n      return `${this.name}: ${this.message}`\n    },\n  },\n})\n\n/**\n * The requested action could not be performed because it is not allowed, e.g. the\n * authenticated user doesn't have enough power level, or a user media request was denied.\n *\n * Actions that are not allowed because the user has a guest account result in a\n * {@link GuestAccessError} instead of this.\n *\n * @class NotAllowedError\n * @extends CctError\n */\nexport class NotAllowedError extends CctError {}\nNotAllowedError.errorName = 'NotAllowedError'\n\n/**\n * The requested resource could not be found, e.g. when looking up a room by alias\n * or requesting a media source.\n *\n * @class NotFoundError\n * @extends CctError\n */\nexport class NotFoundError extends CctError {}\nNotFoundError.errorName = 'NotFoundError'\n\n/**\n * The cause of the error could not be determined. Seeing this error is in itself an error\n * because the real error reason should always be possible to determine.\n *\n * @class UnknownError\n * @extends CctError\n */\nexport class UnknownError extends CctError {}\nUnknownError.errorName = 'UnknownError'\n\n\n\n// WEBPACK FOOTER //\n// ./lib/common/errors.js","'use strict'\n\nimport log from 'common/log'\n\nimport MediaSink from 'media/mediaSink'\n\nconst TAG = 'html-sink'\n\nconst replacement = Symbol('sink-replacement')\n\n/**\n * A media sink that renders to a target HTML media element, either `<audio>` or `<video>`.\n *\n * @class HtmlSink\n * @extends MediaSink\n * @param {Object} [options] - Optional options object.\n * @param {external:HTMLMediaElement} target - The target HTML element.\n */\nexport default class HtmlSink extends MediaSink {\n  constructor({target = null} = {}) {\n    super()\n    let bail = 0\n    while (target && target[replacement] && bail < 5) {\n      target = target[replacement]\n      bail += 1\n    }\n    if (bail >= 5) {\n      log.error(TAG, 'HtmlSink got stuck in element replacement loop')\n    }\n    this._target = target\n    this._refreshSink = this._refreshSink.bind(this)\n    this._refreshTick = null\n  }\n\n  /**\n   * The target HTML element to render to.\n   *\n   * This can be updated at any time.\n   *\n   * @member {external:HTMLMediaElement} HtmlSink#target\n   */\n  get target() {\n    return this._target\n  }\n\n  set target(target) {\n    if (this._target) {\n      this._cleanup()\n    }\n    this._target = target || null\n    if (target) {\n      this._assign()\n    }\n  }\n\n  _hasTarget(target) {\n    if (this._target === target) {\n      return true\n    } else if (this._target === target[replacement]) {\n      return true\n    }\n    return false\n  }\n\n  // eslint-disable-next-line\n  /**\n   * @private\n   */\n  onStream(stream, oldStream) {\n    if (oldStream) {\n      if (oldStream.removeEventListener) {\n        oldStream.removeEventListener('addtrack', this._refreshSink)\n        oldStream.removeEventListener('removetrack', this._refreshSink)\n      } else {\n        oldStream.detachEvent('addtrack', this._refreshSink)\n        oldStream.detachEvent('removetrack', this._refreshSink)\n      }\n    }\n    if (stream) {\n      if (stream.addEventListener) {\n        stream.addEventListener('addtrack', this._refreshSink)\n        stream.addEventListener('removetrack', this._refreshSink)\n      } else {\n        stream.attachEvent('addtrack', this._refreshSink)\n        stream.attachEvent('removetrack', this._refreshSink)\n      }\n    }\n    if (!this._refreshTick) {\n      this._refreshTick = Promise.reject().catch(() => {\n        this._refreshTick = null\n        if (this.stream !== oldStream) {\n          this._refreshSink()\n        }\n      })\n    }\n  }\n\n  _cleanup() {\n    if (this._target && (this._target instanceof HTMLMediaElement)) {\n      if (this._target.srcObject) {\n        this._target.srcObject = null\n      } else if (this._target.src) {\n        this._target.src = ''\n      }\n    } else {\n      this._target = window.attachMediaStream(this._target, null)\n    }\n  }\n\n  _assign() {\n    if (this.stream) {\n      try {\n        let originalElement = this._target\n        this._target = window.attachMediaStream(this._target, this.stream)\n        if (originalElement instanceof HTMLMediaElement) {\n          originalElement[replacement] = this._target\n        }\n      } catch (error) {\n        log.info(TAG, `Error when assigning html sink stream: ${error}`)\n      }\n      try {\n        let result = this._target.play()\n        if (result && result.catch) {\n          result.catch(error => {\n            log.debug(TAG, `Failed to play stream, ${error}`)\n          })\n        }\n      } catch (error) {\n        log.info(TAG, `Error when playing html sink stream: ${error}`)\n      }\n    }\n  }\n\n  _refreshSink() {\n    if (this._target) {\n      this._cleanup()\n      this._assign()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/htmlSink.js","var core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/json/stringify.js\n// module id = 148\n// module chunks = 0 1 2 3 5","'use strict'\n\nimport log from 'common/log'\nimport argCheck from 'common/argCheck'\nimport {isObject, ReadOnlySet} from 'common/utils'\n\nimport {isMediaStream} from 'webrtc/utils'\n\nimport {isMediaNode, outputs} from 'media/common'\nimport MediaNodeInput from 'media/mediaNodeInput'\n\nconst TAG = 'media-node-output'\n\n/**\n * A class which represents an output of a {@link MediaNode}. Outputs are connected to\n * inputs in order to forward media streams.\n *\n * This class should only be used within the implementation of {@link MediaNode}s. While it\n * is possible to attach outputs to an existing media node, it should be avoided. Use an additional\n * media node to implement the desired behaviour instead, such as a {@link Passthrough}.\n *\n * @class MediaNodeOutput\n * @param {Object} options - Options object.\n * @param {string} options.name - The name of the output, should be 'default' for single outputs.\n * @param {MediaNode} options.parent - The parent media node.\n */\nexport default class MediaNodeOutput {\n  constructor({name, parent}) {\n    argCheck.string('MediaNodeInput constructor', 'name', name)\n    if (!isMediaNode(parent)) {\n      argCheck.error('MediaNodeInput constructor', 'parent', 'be a MediaNode')\n    }\n    this._name = name\n    this._parent = parent\n    this._targets = new ReadOnlySet()\n    this._stream = null\n\n    this._parent[outputs].add(this)\n  }\n\n  toString() {\n    return `mediaNodeOutput{name=${this.name},parent=${this._parent},targets=${this._targets.size}}}`\n  }\n\n  /**\n   * Resolves the output of a target. If the lookup fails, an error will be thrown.\n   *\n   * Outputs are resolved as follows, starting with a target:\n   *   1. If the current target is a {@link MediaNodeOutput} instance, stop and return the target.\n   *   2. If the target is an object, set the new target to the `output` property of the target, and start over.\n   *   3. Throw error.\n   *\n   * If a circular output object structure is encountered, an error will be thrown.\n   *\n   * @param {MediaNodeOutput|Object} target - The target to resolve the output of.\n   * @returns {MediaNodeOutput} The resolved output.\n   */\n  static resolve(target) {\n    let chain = [target]\n    for (;;) {\n      if (target instanceof MediaNodeOutput) {\n        return target\n      } else if (!isObject(target)) {\n        throw new TypeError(`failed to resolve output of ${chain[0] && chain[0].constructor.name}, ` +\n          'output must be a MediaNodeOutput or have an output property')\n      } else if ('output' in target) {\n        try {\n          target = target.output\n        } catch (error) {\n          throw new TypeError(`failed to resolve output of ${chain[0].constructor.name}, ` +\n            `getting output property of ${target} threw error: ${error.message}`)\n        }\n        if (chain.indexOf(target) !== -1) {\n          throw new TypeError(`failed to resolve output of ${chain[0].constructor.name}, ` +\n            'encountered loop in output property chain')\n        }\n        chain.push(target)\n      } else {\n        throw new TypeError(`failed to resolve output of ${chain[0].constructor.name}, ` +\n          `${target.constructor.name} does not have an output property`)\n      }\n    }\n  }\n\n  /**\n   * The name of this output. This is only meaningful for outputs that belong to media nodes with\n   * multiple outputs.\n   *\n   * Any output that belong to one of the base media node implementations, such as {@link MediaSource},\n   * will have the name `'default'`.\n   *\n   * @readonly\n   * @member {string} MediaNodeOutput#name\n   */\n  get name() {\n    return this._name\n  }\n\n  /**\n   * A read-only set of all the current targets of the output.\n   *\n   * The set will only contain resolved inputs, and not the original targets given to the connect method.\n   *\n   * @readonly\n   * @member {ReadOnlySet<MediaNodeInput>} MediaNodeOutput#targets\n   */\n  get targets() {\n    return this._targets\n  }\n\n  /**\n   * The output's current media stream, or null.\n   *\n   * @readonly\n   * @member {MediaStream} MediaNodeOutput#stream\n   */\n  get stream() {\n    return this._stream\n  }\n\n  /**\n   * Connect this output to a target. Each output can be connected to multiple targets.\n   *\n   * @param {MediaNodeConnectTarget} target - The target to connect the output to.\n   */\n  connect(target) {\n    if (!this._parent) {\n      return log.error(TAG, 'tried to connect a detached ouput')\n    }\n\n    if (target instanceof HTMLElement) {\n      // require here to avoid circular dependency\n      const HtmlSink = require('media/htmlSink').default\n      let sink = new HtmlSink({target})\n      this.connect(sink)\n      return\n    }\n\n    target = MediaNodeInput.resolve(target)\n    log.info(TAG, `connecting ${this} to ${target}`)\n    if (this._targets.has(target)) {\n      log.verbose(TAG, 'ignored connect with same target')\n      return\n    }\n    if (!target._parent) {\n      return log.error(TAG, 'tried to connect to a detached input')\n    }\n    if (target._target) {\n      log.debug(TAG, `disconnecting target's existing target: ${target._target}`)\n      target._target.disconnect(target)\n    }\n    log.debug(TAG, `connecting to new target: ${target}`)\n    this._targets._add(target)\n    target._target = this\n    target._setStream(this._stream)\n  }\n\n  /**\n   * Disconnect this output from a target.\n   *\n   * If no target is specified, all targets will be disconnected.\n   *\n   * @param {MediaNodeConnectTarget} [target] - The target to disconnect from.\n   */\n  disconnect(target) {\n    if (!this._parent) {\n      log.error(TAG, 'tried to disconnect a detached ouput')\n      return\n    }\n    if (this._targets.size === 0) {\n      log.warning(TAG, `tried to disconnect ${this}, but it is not connected to anything`)\n      return\n    }\n\n    if (target instanceof HTMLElement) {\n      // Iterate through the targets and find html sinks with the input as target\n      this._targets.forEach(possibleSinkInput => {\n        // require here to avoid circular dependency\n        const HtmlSink = require('media/htmlSink').default\n        let isHtmlSink = possibleSinkInput._parent instanceof HtmlSink\n        let sinkHasTargetAsTarget = possibleSinkInput._parent._hasTarget(target)\n        if (isHtmlSink && sinkHasTargetAsTarget) {\n          this.disconnect(possibleSinkInput)\n        }\n      })\n    } else if (target) {\n      target = MediaNodeInput.resolve(target)\n      log.info(TAG, `disconnecting ${this} from ${target}`)\n      if (this._targets._delete(target)) {\n        target._target = null\n        target._setStream(null)\n      } else {\n        throw new Error(`failed to disconnect ${this} from ${target}, not connected`)\n      }\n    } else {\n      log.info(TAG, `disconnecting ${this} from all ${this._targets.size} targets`)\n      this._targets.forEach(target => {\n        log.info(TAG, `disconnecting ${this} from ${target}`)\n        target._target = null\n        target._setStream(null)\n      })\n      this._targets._clear()\n    }\n  }\n\n  /**\n   * Sets the current stream of this output.\n   *\n   * This method is internal and should only be called by the implementation of the parent media node.\n   *\n   * @param {MediaStream} stream - A media stream, or null.\n   */\n  setStream(stream) {\n    if (!this._parent) {\n      return log.error(TAG, 'tried to setStream of a detached ouput')\n    }\n    if (stream === null || isMediaStream(stream)) {\n      this._stream = stream\n      this._targets.forEach(target => target._setStream(stream))\n    } else {\n      argCheck.error('MediaNodeOutput.setStream', 'stream', 'be a MediaStream or null')\n    }\n  }\n\n  /**\n   * Detaches the output from it's parent and removes any connections. Use this to clean up outputs\n   * in media nodes with dynamic outputs, such as a media demultiplexer. After this method has been called\n   * the input can no longer be used.\n   *\n   * This method is internal and should only be called by the implementation of the parent media node.\n   */\n  detach() {\n    this.disconnect()\n    this._parent[outputs].delete(this)\n    this._parent = null\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/mediaNodeOutput.js","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/get-iterator.js\n// module id = 152\n// module chunks = 0 1 2 6","'use strict'\n\nimport log from 'common/log'\n\nimport MediaNode from 'media/mediaNode'\nimport MediaNodeInput from 'media/mediaNodeInput'\n\nconst TAG = 'media-input'\n\n/**\n * A base class for media nodes with a single input and no output. Typically used to render\n * the stream, or as a base for nodes with multiple outputs.\n *\n * The subclass should override the `onStream` method.\n *\n * @class MediaSink\n * @extends MediaNode\n */\nexport default class MediaSink extends MediaNode {\n  constructor() {\n    super()\n    this._input = new MediaNodeInput({\n      name: 'default',\n      parent: this,\n      onStream: (stream, oldStream) => this.onStream(stream, oldStream),\n    })\n  }\n\n  /**\n   * The current input stream.\n   *\n   * @readonly\n   * @member {MediaStream} MediaSink#stream\n   */\n  get stream() {\n    return this._input.stream\n  }\n\n  /**\n   * The input.\n   *\n   * @readonly\n   * @member {MediaNodeInput} MediaSink#input\n   */\n  get input() {\n    return this._input\n  }\n\n  /**\n   * Abstract method that is called whenever the input stream is updated, this should\n   * be overridden by the subclass.\n   *\n   * This will only ever be called if the stream has changed, been added, or removed,\n   * i.e. stream and oldStream will never be equal.\n   *\n   * The `onStream` method will not be called when the backing tracks of a stream is changed.\n   * If the subclass needs to be notified of track updates this has to be done manually using\n   * the MediaStream listeners.\n   *\n   * @abstract\n   * @param {?MediaStream} stream - The new media stream, or null.\n   * @param {?MediaStream} oldStream - The old media stream, or null.\n   */\n  onStream(stream, oldStream) {\n    log.warning(TAG, `${this.constructor.name}.onStream should be overridden`)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/mediaSink.js","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/is-iterable.js\n// module id = 155\n// module chunks = 0 1 2 6","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/get-iterator.js\n// module id = 156\n// module chunks = 0 1 2 6","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/is-iterable.js\n// module id = 157\n// module chunks = 0 1 2 6","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/core.get-iterator.js\n// module id = 158\n// module chunks = 0 1 2 6","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/core.is-iterable.js\n// module id = 159\n// module chunks = 0 1 2 6","'use strict'\n\nimport log from 'common/log'\n\nimport {defer} from 'common/utils'\n\nexport default class AsyncQueue {\n  constructor() {\n    this._queue = []\n    this._currentTask = null\n  }\n\n  toString() {\n    return 'AsyncQueue{executing=' + !!this._currentTask + 'queued=' + this._queue.length + '}'\n  }\n\n  push(factory) {\n    var task = defer()\n    task.factory = factory\n    this._queue.push(task)\n    if (!this._currentTask) {\n      this._poll()\n    }\n    return task.promise\n  }\n\n  clear() {\n    if (this._currentTask) {\n      this._currentTask.cancelled = true\n      this._currentTask = null\n    }\n    this._queue.length = 0\n  }\n\n  _poll() {\n    if (this._currentTask || !this._queue.length) {\n      return\n    }\n    var self = this\n    var task = this._currentTask = this._queue.shift()\n    if (!task) {\n      return\n    }\n\n    var promise = null\n    try {\n      promise = task.factory()\n    } catch (e) {\n      log.error(this.tag, 'AsyncQueue.process: factory threw error', e, e.stack)\n    }\n    if (promise) {\n      promise.then(function (result) {\n        if (task.cancelled) {\n          throw new Error('task was cancelled')\n        }\n        task.resolve(result)\n      }).catch(task.reject).then(function () {\n        self._currentTask = null\n        self._poll()\n      }).catch(function (error) {\n        log.error(self.tag, 'error calling poll after task completion: ', error)\n      })\n    } else {\n      this._currentTask = null\n      this._poll()\n    }\n  }\n}\n\nAsyncQueue.tag = 'async-queue'\n\nexport class AsyncPipe {\n  constructor() {\n    this._queue = []\n    this._deferredRead = null\n  }\n\n  read() {\n    if (!this._queue) {\n      return Promise.reject()\n    } else if (this._deferredRead) {\n      return this._deferredRead.promise\n    } else if (this._queue.length) {\n      let item = this._queue.pop()\n      return Promise.resolve(item)\n    } else {\n      this._deferredRead = defer()\n      return this._deferredRead.promise\n    }\n  }\n\n  write(message) {\n    if (!this._queue) {\n      throw new Error('AsyncPipe is closed')\n    } else if (!this._deferredRead) {\n      this._queue.unshift(message)\n    } else {\n      this._deferredRead.resolve(message)\n      this._deferredRead = null\n    }\n  }\n\n  close() {\n    if (!this._queue) {\n      throw new Error('AsyncPipe has already been closed')\n    }\n    if (this._deferredRead) {\n      this._deferredRead.reject()\n      this._deferredRead = null\n    }\n    this._queue.length = 0\n    this._queue = null\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/common/queue.js","\nimport {Interop} from 'sdp-interop'\n\nimport log from 'common/log'\nimport EmitterMixin from 'common/emitter'\nimport {defer, isChrome, isFirefox, randomString} from 'common/utils'\n\nimport attachPeerConnectionMonitor from 'webrtc/peerConnectionMonitor'\nimport DummySource from 'media/dummySource'\nimport {addPeerConnectionStream, removePeerConnectionStream} from 'webrtc/utils'\nimport {\n  parseCandidateInfo,\n  filterSdpCandidates,\n  workaroundSdpBundleBug,\n  extractApplicationBlock,\n  injectApplicationBlock,\n  readMediaModeUnions,\n  overrideMediaModes,\n  disableSendBandwidthEstimation,\n  rewriteBundleAttribute,\n  removeChromeRetransmission,\n} from 'webrtc/sdpTransform'\n\nconst TAG = 'peer-connection'\n\nconst EVENT_HANDLER_ERROR_TEMPLATE = 'onFUNC is not available, use addEventListener instead'\n\nclass IceConfigErrorDetector {\n  constructor(iceServers) {\n    this._haveTurn = false\n    this._haveStun = false\n    if (iceServers) {\n      iceServers.forEach(server => {\n        let url = server.urls || server.url\n        if (!url) {\n          log.error('peer-connection', `ice server has no url: ${JSON.stringify(server)}`)\n        }\n        if (url.indexOf('stun:') === 0) {\n          this._haveStun = true\n        }\n        if (url.indexOf('turn:') === 0) {\n          this._haveStun = true\n          this._haveTurn = true\n        }\n      })\n    }\n  }\n  observedCandidate(info) {\n    if (info.type !== 'host') {\n      this._gotStun = true\n    }\n    if (info.type === 'relay') {\n      this._gotTurn = true\n    }\n  }\n  end(iceConnectionState) {\n    // We might not bother gathering candidates with lower priority if we find a good connection\n    // early. But if that happens we will have moved on from iceConnectionState 'new'.\n    // So we only want to continue the check if we're still in 'new' state.\n    if (iceConnectionState !== 'new') {\n      return null\n    }\n    if (this._haveTurn && !this._gotTurn) {\n      let msg = \"'iceServers' contained a turn server, but no relay candidates were received.\" +\n        ' Check the turn server configuration and availability.'\n      log.warning('peer-connection', msg)\n      return 'turn'\n    } else if (this._haveStun && !this._gotStun) {\n      let msg = \"'iceServers' contained a stun server, but no stun candidates were received.\" +\n        ' Check the stun server configuration and availability.'\n      log.warning('peer-connection', msg)\n      return 'stun'\n    }\n    return null\n  }\n}\n\nexport default class PeerConnectionProxy {\n  static create(config) {\n    config = config || {}\n    var statsFormatter = config.statsFormatter\n    var rtcpMuxPolicy = config.rtcpMuxPolicy || 'require'\n    var bundlePolicy = config.bundlePolicy || 'max-bundle'\n    var iceServers = config.iceServers\n    var iceCandidateFilter = config.iceCandidateFilter\n    if (typeof(iceServers) === 'string') {\n      iceServers = [iceServers]\n    } else if (!Array.isArray(iceServers)) {\n      iceServers = []\n    }\n    iceServers = iceServers.map(function (server) {\n      if (typeof(server) === 'string') {\n        return {\n          urls: server,\n        }\n      } else {\n        return server\n      }\n    })\n    var pcConfig = {iceServers, rtcpMuxPolicy, bundlePolicy}\n    return new PeerConnectionProxy(pcConfig, statsFormatter, iceCandidateFilter)\n  }\n\n  constructor(pcConfig, statsFormatter, iceCandidateFilter) {\n    log.debug(TAG, 'creating peer connection with config:', pcConfig)\n    this._pc = new RTCPeerConnection(pcConfig)\n    this._iceCandidateFilter = iceCandidateFilter\n    this._eventTarget = new EmitterMixin()\n    this._id = randomString(30)\n    this._interop = new Interop()\n    this._iceErrorDetector = new IceConfigErrorDetector(pcConfig.iceServers)\n    this._firstMid = null\n\n    this.addEventListener = this.addEventListener.bind(this)\n    this.addStream = this.addStream.bind(this)\n    this.close = this.close.bind(this)\n    this.getLocalStreams = this.getLocalStreams.bind(this)\n    this.getRemoteStreams = this.getRemoteStreams.bind(this)\n    this.addIceCandidate = this.addIceCandidate.bind(this)\n    this._createAnswer = this._createAnswer.bind(this)\n    this._createOffer = this._createOffer.bind(this)\n    this.getStats = this.getStats.bind(this)\n    this._setLocalDescription = this._setLocalDescription.bind(this)\n    this._setRemoteDescription = this._setRemoteDescription.bind(this)\n    this.removeEventListener = this.removeEventListener.bind(this)\n    this.removeStream = this.removeStream.bind(this)\n    this.waitForInitialIce = this.waitForInitialIce.bind(this)\n\n    this._pc.oniceconnectionstatechange = event => {\n      this._eventTarget._emit('iceconnectionstatechange', {target: this})\n    }\n\n    this._pc.onnegotiationneeded = event => {\n      this._eventTarget._emit('negotiationneeded', {target: this})\n    }\n\n    this._pc.onsignalingstatechange = event => {\n      this._eventTarget._emit('signalingstatechange', {target: this})\n    }\n\n    this._pc.onaddstream = event => {\n      this._eventTarget._emit('addstream', {target: this, stream: event.stream})\n    }\n\n    this._pc.onremovestream = event => {\n      this._eventTarget._emit('removestream', {target: this, stream: event.stream})\n    }\n\n    this._pc.ondatachannel = event => {\n      let {channel} = event\n      log.warning('data-channel', \"received data channel, which shouldn't happen\")\n      this._eventTarget._emit('datachannel', {target: this, channel: channel})\n    }\n\n    let deferredIce = defer()\n    this._initialIceComplete = deferredIce.promise\n\n    this._pc.onicecandidate = event => {\n      let {candidate} = event\n      if (!candidate) {\n        this._eventTarget._emit('icecandidate', {target: this, candidate})\n        if (this._iceErrorDetector) {\n          if (this._iceErrorDetector.end(this._pc.iceConnectionState) === 'turn') {\n            deferredIce.reject(new Error('No relay candidates received while turn server was configured'))\n          }\n          this._iceErrorDetector = null\n        }\n        deferredIce.resolve()\n        return\n      }\n\n      let info = parseCandidateInfo(candidate.candidate, 'local')\n      if (this._iceErrorDetector) {\n        this._iceErrorDetector.observedCandidate(info)\n      }\n\n      if (this._iceCandidateFilter) {\n        try {\n          if (!this._iceCandidateFilter(info)) {\n            log.debug(TAG, `ignored candidate due to being filtered out: ${candidate}`)\n            return\n          }\n          setTimeout(() => {\n            deferredIce.resolve()\n          }, 200)\n        } catch (error) {\n          log.error(TAG, `ignoring candidate, error was thrown in candidate filter: ${error}`)\n          return\n        }\n      }\n\n      if (isFirefox) {\n        let [, simpleMid] = candidate.sdpMid.match(/^(audio|video)-[0-9]+$/) || []\n        if (simpleMid) {\n          candidate.sdpMid = simpleMid\n        }\n      }\n\n      this._eventTarget._emit('icecandidate', {target: this, candidate})\n    }\n\n    if (statsFormatter) {\n      attachPeerConnectionMonitor(this, statsFormatter)\n    }\n  }\n\n  get id() {\n    return this._id\n  }\n\n  get signalingState() {\n    return this._pc.signalingState\n  }\n\n  get iceConnectionState() {\n    return this._pc.iceConnectionState\n  }\n\n  get iceGatheringState() {\n    return this._pc.iceGatheringState\n  }\n\n  get hasRemoteDescription() {\n    let {remoteDescription} = this._pc\n    return !!remoteDescription && !!remoteDescription.type\n  }\n\n  set onaddstream(value) {\n    throw new Error(EVENT_HANDLER_ERROR_TEMPLATE.replace('FUNC', 'addstream'))\n  }\n\n  set ondatachannel(value) {\n    throw new Error(EVENT_HANDLER_ERROR_TEMPLATE.replace('FUNC', 'datachannel'))\n  }\n\n  set onicecandidate(value) {\n    throw new Error(EVENT_HANDLER_ERROR_TEMPLATE.replace('FUNC', 'icecandidate'))\n  }\n\n  set oniceconnectionstatechange(value) {\n    throw new Error(EVENT_HANDLER_ERROR_TEMPLATE.replace('FUNC', 'iceconnectionstatechange'))\n  }\n\n  set onnegotiationneeded(value) {\n    throw new Error(EVENT_HANDLER_ERROR_TEMPLATE.replace('FUNC', 'negotiationneeded'))\n  }\n\n  set onremovestream(value) {\n    throw new Error(EVENT_HANDLER_ERROR_TEMPLATE.replace('FUNC', 'removestream'))\n  }\n\n  set onsignalingstatechange(value) {\n    throw new Error(EVENT_HANDLER_ERROR_TEMPLATE.replace('FUNC', 'signalingstatechange'))\n  }\n\n  toString() {\n    return `peerConnection{id=${this._id}}`\n  }\n\n  addEventListener(event, listener) {\n    return this._eventTarget.on(event, listener)\n  }\n\n  removeEventListener(event, listener) {\n    return this._eventTarget.off(event, listener)\n  }\n\n  addStream(stream) {\n    return addPeerConnectionStream(this._pc, stream)\n  }\n\n  removeStream(stream) {\n    return removePeerConnectionStream(this._pc, stream)\n  }\n\n  getLocalStreams() {\n    return this._pc.getLocalStreams().filter(stream => stream !== this._dummyStream)\n  }\n\n  getRemoteStreams() {\n    return this._pc.getRemoteStreams()\n  }\n\n  close() {\n    return this._pc.close()\n  }\n\n  waitForInitialIce() {\n    return this._initialIceComplete\n  }\n\n  get localDescription() {\n    return this._pc.localDescription\n  }\n  // performOffer, performAnswer, and handleAnswer are high-level versions\n  // of the setLocal/RemoteDescription and createOffer/Answer dance.\n  // We use higher-level constructs because that allows us to make some assuptions\n  // that makes sdp transformations easier and cheaper to do. e.g. we don't need\n  // to support using both the description received from setLocalDescription and\n  // createOffer/Answer, as well as the localDescription property, and instead just\n  // munge the SDP once.\n  performOffer({constraints = null, bandwidth = null, waitForIce = false}) {\n    // Chrome 57 introduced a bug that breaks renegotiation of additional media\n    // blocks if the initial connection only included data channels. We work around\n    // this by adding a dummy stream that forces a video block to be added.\n    // Simply setting OfferToCreateVideo/Audio constraints does not work.\n    //\n    // We used to remove the dummy stream once a real stream is added, but this\n    // seems to now break sendonly connections towards Firefox. If the dummy\n    // stream is replaced without any incoming connection, all communication seems\n    // to break, including data channels.\n    // So for now we just keep the dummy stream around until we find a better solution.\n    //\n    // TODO: A possible workaround is to use constructed MediaStream instances as the\n    // streams that are added to the RTCPeerConnections. When adding streams we instead\n    // just take the tracks and add those to the existing streams. More importantly\n    // we never remove streams from the RTCPeerConnection, just remove the tracks\n    // from the stream.\n    if (isChrome && this._pc.getLocalStreams().length === 0) {\n      let dummy = new DummySource({video: true, audio: true})\n      this.addStream(dummy.stream)\n      this._dummyStream = dummy.stream\n    }\n\n    return this._createOffer(constraints)\n      .then(desc => this._rewriteLocalInputDescription(desc, {bandwidth}))\n      .then(desc => this._setLocalDescription(desc))\n      .then(offer => {\n        if (waitForIce) {\n          return this._initialIceComplete.then(() => this._pc.localDescription)\n        } else {\n          return offer\n        }\n      })\n      .then(desc => this._rewriteLocalOutputDescription(desc))\n  }\n\n  performAnswer({offer, constraints = null, bandwidth = null}) {\n    return Promise.resolve(offer)\n      .then(desc => this._rewriteRemoteInputDescription(desc))\n      .then(desc => this._setRemoteDescription(desc))\n      .then(() => this._createAnswer(constraints))\n      .then(desc => this._rewriteLocalInputDescription(desc, {bandwidth}))\n      .then(desc => this._setLocalDescription(desc))\n      .then(desc => this._rewriteLocalOutputDescription(desc))\n  }\n\n  handleAnswer({answer}) {\n    return Promise.resolve(answer)\n      .then(desc => this._rewriteRemoteInputDescription(desc))\n      .then(desc => this._setRemoteDescription(desc))\n  }\n\n  _rewriteLocalInputDescription(desc, {bandwidth}) {\n    let {sdp, type} = desc\n\n    if (bandwidth) {\n      sdp = sdp.replace(/^b=AS:[0-9]+$/gm, `b=AS:${bandwidth}`)\n    }\n\n    // TODO: only do this in Chrome 58 & 59\n    if (isChrome) {\n      sdp = disableSendBandwidthEstimation(sdp)\n    }\n\n    if (this._iceCandidateFilter) {\n      sdp = filterSdpCandidates(sdp, this._iceCandidateFilter, 'local')\n    }\n\n    sdp = workaroundSdpBundleBug(sdp)\n\n    return new RTCSessionDescription({sdp, type})\n  }\n\n  _rewriteLocalOutputDescription(desc) {\n    let {sdp, type} = desc\n    var unifiedPlanSdp\n\n    if (isFirefox && !this._firstMid) {\n      // Start off by grabbing the mid for the first media block. This has to be\n      // done straight away and stored, since future renegotiatons may inactivate the\n      // block and remove the mid from the SDP.\n      // We need this in order to add ICE candidates, since we will be receiving candidates\n      // that have translated mIds.\n      let [, mid] = desc.sdp.match(/^a=mid:(.+)$/m) || []\n      if (mid) {\n        this._firstMid = mid\n      }\n    }\n\n    if (this._iceCandidateFilter) {\n      sdp = filterSdpCandidates(sdp, this._iceCandidateFilter, 'local')\n    }\n\n    if (isFirefox) {\n      unifiedPlanSdp = desc.sdp\n      let [extractedSdp, extracted] = extractApplicationBlock(desc.sdp)\n      sdp = extractedSdp\n      if (extracted && extracted.needsInteropTranslation) {\n        // Firefox uses the unified SDP format, which adds multiple media blocks,\n        // one block for each track. Each block has an individual mode describing if it's\n        // inactive, sending, receiving, or both (inactive, sendonly, recvonly, sendrecv).\n        // When that SDP is converted to plan B format, which has a single media block\n        // for each media type, only the last mode mentioned in the SDP will\n        // be used, which will often break the connection.\n        // readMediaModeUnions() reads the modes of the different media types\n        // in the initial SDP and creates a union for each media type, e.g.\n        // sendonly | recvonly = sendrecv, inactive | sendonly = sendonly, etc.\n        // overrideMediaModes() then injects those union modes to the plan B SDP.\n        let mediaModeUnions = readMediaModeUnions(desc.sdp)\n        sdp = this._interop.toPlanB({type: desc.type, sdp}).sdp\n        sdp = overrideMediaModes(sdp, mediaModeUnions)\n\n        // The interop SDP transform doesn't always rewrite the bundle\n        // attribute properly, so we recreate it just in case\n        sdp = rewriteBundleAttribute(sdp)\n      }\n      sdp = injectApplicationBlock(sdp, extracted)\n      log.verbose(TAG, `converted local ${desc.type} SDP from unified plan ${unifiedPlanSdp}\\n\\nto\\n\\n${sdp}`)\n    }\n\n    return {\n      sdp,\n      type,\n      unifiedPlanSdp,\n    }\n  }\n\n  _rewriteRemoteInputDescription(desc) {\n    let {sdp, type, unifiedPlanSdp} = desc\n\n    if (this._iceCandidateFilter) {\n      sdp = filterSdpCandidates(sdp, this._iceCandidateFilter, 'remote')\n    }\n\n    if (isFirefox) {\n      // When we receive a description it might already contain a unified plan SDP\n      // if it was sent by Firefox, use it directly in that case\n      if (unifiedPlanSdp) {\n        sdp = unifiedPlanSdp\n      } else {\n        // Otherwise we need to convert the SDP from plan B to unified plan\n        let oldSdp = desc.sdp\n        let [extractedSdp, extracted] = extractApplicationBlock(desc.sdp)\n        sdp = extractedSdp\n        sdp = removeChromeRetransmission(sdp)\n        if (extracted && extracted.needsInteropTranslation) {\n          sdp = this._interop.toUnifiedPlan({type: desc.type, sdp}).sdp\n        }\n        sdp = injectApplicationBlock(sdp, extracted)\n        log.verbose(TAG, `converted remote ${desc.type} SDP from plan b ${oldSdp}\\n\\nto\\n\\n${sdp}`)\n      }\n    }\n\n    return new RTCSessionDescription({\n      sdp,\n      type,\n    })\n  }\n\n  _setLocalDescription(desc) {\n    log.verbose(TAG, this + '.setLocalDescription', desc.sdp)\n    return new Promise((resolve, reject) => {\n      this._pc.setLocalDescription(desc, () => {\n        resolve(desc)\n      }, error => {\n        reject(makeError('setLocalDescription', 'failed to set local description', error))\n      })\n    })\n  }\n\n  _setRemoteDescription(desc) {\n    log.verbose(TAG, this + '.setRemoteDescription', desc.sdp)\n    return new Promise((resolve, reject) => {\n      this._pc.setRemoteDescription(desc, () => {\n        resolve()\n      }, error => {\n        reject(makeError('setRemoteDescription', 'failed to set remote description', error))\n      })\n    })\n  }\n\n  _createOffer(constraints) {\n    log.verbose(TAG, this + '.createOffer')\n    return new Promise((resolve, reject) => {\n      this._pc.createOffer(desc => {\n        if (!desc) {\n          reject(new Error('failed to create offer, no offer generated'))\n        } else {\n          resolve(desc)\n        }\n      }, error => {\n        reject(makeError('createOffer', 'failed to create offer', error))\n      }, constraints)\n    })\n  }\n\n  _createAnswer(constraints) {\n    log.verbose(TAG, this + '.createAnswer')\n    return new Promise((resolve, reject) => {\n      this._pc.createAnswer(desc => {\n        if (!desc) {\n          return reject(new Error('failed to create answer, no answer generated'))\n        }\n        resolve(desc)\n      }, error => {\n        reject(makeError('createAnswer', 'failed to create answer', error))\n      }, constraints)\n    })\n  }\n\n  addIceCandidate(candidate) {\n    if (candidate.sdpMLineIndex !== 0) {\n      log.debug(TAG, `ignored candidate with sdpMLineIndex != 0, ${candidate.sdpMLineIndex}`)\n      return Promise.resolve()\n    }\n    if (!(candidate instanceof RTCIceCandidate)) {\n      candidate = new RTCIceCandidate(candidate)\n    }\n    if (this._iceCandidateFilter) {\n      try {\n        let info = parseCandidateInfo(candidate.candidate, 'remote')\n        if (!this._iceCandidateFilter(info)) {\n          log.debug(TAG, `ignored candidate due to being filtered out: ${candidate}`)\n          return Promise.resolve()\n        }\n      } catch (error) {\n        log.error(TAG, `ignoring candidate, error was thrown in candidate filter: ${error}`)\n        return Promise.resolve()\n      }\n    }\n    if (isFirefox) {\n      if (!this._firstMid) {\n        return Promise.reject(new Error('Tried to add ice candidate before local description was set'))\n      }\n      candidate.sdpMid = this._firstMid\n    }\n    return new Promise((resolve, reject) => {\n      this._pc.addIceCandidate(candidate, resolve, error => {\n        reject(makeError('addIceCandidate', 'failed add ice candidate', error))\n      })\n    })\n  }\n\n  createDataChannel(label, config) {\n    return this._pc.createDataChannel(label, config)\n  }\n\n  getStats(selector) {\n    if (isFirefox) {\n      return this._pc.getStats(selector)\n    }\n    return new Promise((resolve, reject) => {\n      this._pc.getStats(response => {\n        var standardReport = {}\n        response.result().forEach(report => {\n          var standardStats = {\n            id: report.id,\n            type: report.type,\n          }\n          report.names().forEach(name => {\n            standardStats[name] = report.stat(name)\n          })\n          standardReport[standardStats.id] = standardStats\n        })\n        resolve(standardReport)\n      }, selector, reject)\n    })\n  }\n}\n\nfunction makeError(funcName, message, reason) {\n  let msg = `Error in ${funcName}, ${message}`\n  try {\n    let error = new Error(`${msg}: ${reason}`)\n    error.reason = reason\n    error.stack = reason.stack\n    return error\n  } catch (error) {\n    return new Error(`${msg} and failed to serialize root cause: ${error}`)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webrtc/peerConnectionProxy.js","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/assign.js\n// module id = 163\n// module chunks = 0 1 4","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-names\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/get-own-property-names.js\n// module id = 169\n// module chunks = 0 1 4","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/assign.js\n// module id = 170\n// module chunks = 0 1 4","require('../../modules/es6.object.get-own-property-names');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyNames(it){\n  return $Object.getOwnPropertyNames(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/get-own-property-names.js\n// module id = 171\n// module chunks = 0 1 4","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_object-assign.js\n// module id = 172\n// module chunks = 0 1 4","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.assign.js\n// module id = 173\n// module chunks = 0 1 4","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function(){\n  return require('./_object-gopn-ext').f;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.get-own-property-names.js\n// module id = 174\n// module chunks = 0 1 4","var grammar = module.exports = {\n  v: [{\n      name: 'version',\n      reg: /^(\\d*)$/\n  }],\n  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: \"%s %s %d %s IP%d %s\"\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  //k: [{}], // outdated thing ignored\n  t: [{ //t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: \"%d %d\"\n  }],\n  c: [{ //c=IN IP4 10.47.197.26\n      name: 'connection',\n      reg: /^IN IP(\\d) (\\S*)/,\n      names: ['version', 'ip'],\n      format: \"IN IP%d %s\"\n  }],\n  b: [{ //b=AS:4000\n      push: 'bandwidth',\n      reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n      names: ['type', 'limit'],\n      format: \"%s:%s\"\n  }],\n  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n      // NB: special - pushes to session\n      // TODO: rtp/fmtp should be filtered by the payloads found here?\n      reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n      names: ['type', 'port', 'protocol', 'payloads'],\n      format: \"%s %d %s %s\"\n  }],\n  a: [\n    { //a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding) ?\n          \"rtpmap:%d %s/%s/%s\":\n          o.rate ?\n          \"rtpmap:%d %s/%s\":\n          \"rtpmap:%d %s\";\n      }\n    },\n    {\n      //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      //a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: \"fmtp:%d %s\"\n    },\n    { //a=control:streamid=0\n        name: 'control',\n        reg: /^control:(.*)/,\n        format: \"control:%s\"\n    },\n    { //a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null) ?\n          \"rtcp:%d %s IP%d %s\":\n          \"rtcp:%d\";\n      }\n    },\n    { //a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: \"rtcp-fb:%d trr-int %d\"\n    },\n    { //a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null) ?\n          \"rtcp-fb:%s %s %s\":\n          \"rtcp-fb:%s %s\";\n      }\n    },\n    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      //a=extmap:1/recvonly URI-gps-string\n      push: 'ext',\n      reg: /^extmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['value', 'uri', 'config'], // value may include \"/direction\" suffix\n      format: function (o) {\n        return (o.config != null) ?\n          \"extmap:%s %s %s\":\n          \"extmap:%s %s\";\n      }\n    },\n    {\n      //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null) ?\n          \"crypto:%d %s %s %s\":\n          \"crypto:%d %s %s\";\n      }\n    },\n    { //a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: \"setup:%s\"\n    },\n    { //a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: \"mid:%s\"\n    },\n    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: \"msid:%s\"\n    },\n    { //a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*)/,\n      format: \"ptime:%d\"\n    },\n    { //a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*)/,\n      format: \"maxptime:%d\"\n    },\n    { //a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    { //a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    { //a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: \"ice-ufrag:%s\"\n    },\n    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: \"ice-pwd:%s\"\n    },\n    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: \"fingerprint:%s %s\"\n    },\n    {\n      //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0\n      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0\n      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0\n      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation'],\n      format: function (o) {\n        var str = \"candidate:%s %d %s %d %s %d typ %s\";\n\n        str += (o.raddr != null) ? \" raddr %s rport %d\" : \"%v%v\";\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? \" tcptype %s\" : \"%v\";\n\n        if (o.generation != null) {\n          str += \" generation %d\";\n        }\n        return str;\n      }\n    },\n    { //a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: \"remote-candidates:%s\"\n    },\n    { //a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: \"ice-options:%s\"\n    },\n    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: \"ssrcs\",\n      reg: /^ssrc:(\\d*) ([\\w_]*):(.*)/,\n      names: ['id', 'attribute', 'value'],\n      format: \"ssrc:%d %s:%s\"\n    },\n    { //a=ssrc-group:FEC 1 2\n      push: \"ssrcGroups\",\n      reg: /^ssrc-group:(\\w*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: \"ssrc-group:%s %s\"\n    },\n    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: \"msidSemantic\",\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: \"msid-semantic: %s %s\" // space after \":\" is not accidental\n    },\n    { //a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: \"group:%s %s\"\n    },\n    { //a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    { //a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    { // any a= that we don't understand is kepts verbatim on media.invalid\n      push: 'invalid',\n      names: [\"value\"]\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = \"%s\";\n    }\n  });\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/grammar.js\n// module id = 175\n// module chunks = 0 1","'use strict'\n\nimport MediaSource from 'media/mediaSource'\nimport {audioContextUtil} from 'webrtc/utils'\n\n/**\n * A dummy source that can generate a silent audio stream and a 1x1 black video stream.\n *\n * Useful for testing and working around browser bugs where streams have to be present.\n *\n * @class DummySource\n * @extends MediaSource\n * @param {Object} [options] - Optional options object\n * @param {boolean} [options.video=true] - Whether to generate dummy video.\n * @param {boolean} [options.audio=true] - Whether to generate dummy audio.\n */\nexport default class DummySource extends MediaSource {\n  constructor({audio, video} = {audio: true, video: true}) {\n    super()\n    let tracks = []\n    if (audio) {\n      this._audioContext = audioContextUtil.get()\n      this._destination = this._audioContext.createMediaStreamDestination()\n      let [track] = this._destination.stream.getTracks()\n      // track.enabled = false\n      tracks.push(track)\n\n      this._silence = this._audioContext.createBufferSource()\n      this._silence.connect(this._destination, 0, 0)\n    }\n    if (video) {\n      this._canvas = document.createElement('canvas')\n      this._canvas.style.width = '1px'\n      this._canvas.style.height = '1px'\n      this._canvas.width = 1\n      this._canvas.height = 1\n\n      // Otherwise Firefox will complain about the canvas not being initialized\n      this._canvas.getContext('2d')\n\n      let stream = this._canvas.captureStream(1)\n      let [track] = stream.getTracks()\n      // track.enabled = false\n      tracks.push(track)\n    }\n    this._stream = new MediaStream(tracks)\n    this.setStream(this._stream)\n  }\n\n  get output() {\n    return this._output\n  }\n\n  /**\n   * Stops the source and cleans up all resources. This has to be called once the source\n   * is no longer used in order to clean up resources.\n   *\n   * Calling this method multiple times has no effect.\n   */\n  stop() {\n    if (this._stream) {\n      this.setStream(null)\n      this._stream.getTracks().forEach(track => track.stop())\n      this._stream = null\n      this._canvas = null\n      if (this._audioContext) {\n        audioContextUtil.release()\n        this._audioContext = null\n        this._destination = null\n        this._silence.stop()\n        this._silence = null\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @function DummySource#setStream\n   */\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/media/dummySource.js","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/object/define-properties.js\n// module id = 184\n// module chunks = 0 1","'use strict'\n\nimport log from 'common/log'\nimport {assign} from 'common/utils'\n\nimport createPeerConnectionStatNormalizer from 'webrtc/statsNormalizer'\n\n// function MediaStreamTrackMonitor(pc, mst) {\n//     this.pc = pc;\n//     this.mst = mst;\n//     mst.addEventListener('started', function () {\n//         log.verbose('stats-monitor', 'mst: onstarted');\n//     });\n//     mst.addEventListener('mute', function () {\n//         log.verbose('stats-monitor', 'mst: onmute');\n//     });\n//     mst.addEventListener('unmute', function () {\n//         log.verbose('stats-monitor', 'mst: onunmute');\n//     });\n//     mst.addEventListener('overconstrained', function () {\n//         log.verbose('stats-monitor', 'mst: onoverconstrained: ' + JSON.stringify(mst.getConstraints()));\n//     });\n//     mst.addEventListener('ended', function () {\n//         log.verbose('stats-monitor', 'mst: onended');\n//     });\n// }\n//\n// function MediaStreamMonitor(pc, ms) {\n//     var self = this;\n//     this.pc = pc;\n//     this.ms = ms;\n//     this.mediaStreamTracks = {};\n//     ms.addEventListener('active', function () {\n//         log.verbose('stats-monitor', 'ms: onactive');\n//     });\n//     ms.addEventListener('addtrack', function (e) {\n//         log.verbose('stats-monitor', 'ms: onaddtrack: ' + e.track.id);\n//         self.mediaStreamTracks[e.track.id] = new MediaStreamTrackMonitor(self, e.track);\n//     });\n//     ms.addEventListener('ended', function () {\n//         log.verbose('stats-monitor', 'ms: onended');\n//     });\n//     ms.addEventListener('inactive', function () {\n//         log.verbose('stats-monitor', 'ms: oninactive');\n//     });\n//     ms.addEventListener('removetrack', function (e) {\n//         log.verbose('stats-monitor', 'ms: onremovetrack: ' + e.track.id);\n//         delete self.mediaStreamTracks[e.track.id];\n//     });\n// }\n\nvar WEBRTC_MONITOR_REGEX_MSID_CHROME = /^a=ssrc:(\\d+) msid:([-a-zA-Z0-9]+) ([-a-zA-Z0-9]+)$/\nvar WEBRTC_MONITOR_REGEX_MSID_FIREFOX = /^a=msid:{([-a-zA-Z0-9]+)} {([-a-zA-Z0-9]+)}$/\nvar WEBRTC_MONITOR_REGEX_MSLABEL = /^a=ssrc:(\\d+) mslabel:([-a-zA-Z0-9]+)$/\nvar WEBRTC_MONITOR_REGEX_LABEL = /^a=ssrc:(\\d+) label:(?:{)([-a-zA-Z0-9]+)(?:})$/\nvar WEBRTC_MONITOR_REGEX_CNAME = /^a=ssrc:(\\d+) cname:(?:{)([-a-zA-Z0-9]+)(?:})$/\n\nfunction parseIdentities(sdp, identities) {\n  var ids = {}\n  ids.ssrcs = []\n  var blocks = sdp.split(/(?=^m=)/mig)\n  for (var block in blocks) {\n    var lines = blocks[block].split(/\\r?\\n/)\n    var msidTemp = {}\n    for (var line = 0; line < lines.length; line += 1) {\n      var sdpMsIdC = lines[line].match(WEBRTC_MONITOR_REGEX_MSID_CHROME)\n      if (sdpMsIdC) {\n        if (!(sdpMsIdC[1] in ids.ssrcs)) {\n          ids.ssrcs.push(sdpMsIdC[1])\n        }\n        ids.msid = sdpMsIdC[2]\n        ids.mstid = sdpMsIdC[3]\n      }\n      var sdpMsIdF = lines[line].match(WEBRTC_MONITOR_REGEX_MSID_FIREFOX)\n      if (sdpMsIdF) {\n        if (ids.ssrc) {\n          ids.msid = sdpMsIdF[1]\n          ids.mstid = sdpMsIdF[2]\n        } else {\n          msidTemp.msid = sdpMsIdF[1]\n          msidTemp.mstid = sdpMsIdF[2]\n        }\n      }\n      var sdpMsLabel = lines[line].match(WEBRTC_MONITOR_REGEX_MSLABEL)\n      if (sdpMsLabel) {\n        if (!(sdpMsLabel[1] in ids.ssrcs)) {\n          ids.ssrcs.push(sdpMsLabel[1])\n        }\n        ids.msid = sdpMsLabel[2]\n      }\n      var sdpLabel = lines[line].match(WEBRTC_MONITOR_REGEX_LABEL)\n      if (sdpLabel) {\n        if (!(sdpLabel[1] in ids.ssrcs)) {\n          ids.ssrcs.push(sdpLabel[1])\n        }\n        ids.mstid = sdpLabel[2]\n      }\n      var sdpCname = lines[line].match(WEBRTC_MONITOR_REGEX_CNAME)\n      if (sdpCname) {\n        if (!(sdpCname[1] in ids.ssrcs)) {\n          ids.ssrcs.push(sdpCname[1])\n        }\n        ids.cname = sdpCname[2]\n        if (Object.keys(msidTemp).length) {\n          ids.msid = msidTemp.msid\n          ids.mstid = msidTemp.mstid\n          msidTemp = {}\n        }\n      }\n    }\n    if (Object.keys(ids.ssrcs).length) {\n      for (var ssrc in ids.ssrcs) {\n        identities[ids.ssrcs[ssrc]] = {}\n        for (var id in ids) {\n          if (id === 'ssrcs') {\n            continue\n          }\n          identities[ids.ssrcs[ssrc]][id] = ids[id]\n        }\n      }\n    }\n    ids = {}\n    ids.ssrcs = []\n  }\n  return identities\n}\n\nfunction reportGenericStat(formatter, identities, stat) {\n  var sample = {\n    timestamp: Date.now(),\n    pcId: identities.pcId,\n  }\n\n  sample = assign(sample, stat)\n\n  formatter.handleStats([sample])\n}\n\nvar PEER_CONNECTION_MONITOR_CANDIDATE_RE = new RegExp('' +\n  '^candidate:(\\\\d+) (\\\\d) (UDP|TCP) ([\\\\d\\\\.]*) ([\\\\d\\\\.a-f\\\\:]*) (\\\\d*) ' +\n  'typ ([a-z]*)( raddr ([\\\\d\\\\.a-f\\\\:]*) rport (\\\\d*))?( tcptype (active|passive|so))?.*$', 'mi')\n\nfunction parseCandidateString(candidateString) {\n  var candidate = null\n  var candidateMatches = candidateString.match(PEER_CONNECTION_MONITOR_CANDIDATE_RE)\n  if (candidateMatches) {\n    candidate = {\n      'foundation': candidateMatches[1],\n      'componentId': parseInt(candidateMatches[2]),\n      'transport': candidateMatches[3].toUpperCase(),\n      'priority': parseInt(candidateMatches[4]),\n      'address': candidateMatches[5],\n      'port': parseInt(candidateMatches[6]),\n      'type': candidateMatches[7],\n    }\n    if (candidateMatches[9]) {\n      candidate.relatedAddress = candidateMatches[9]\n    }\n    if (!isNaN(candidateMatches[10])) {\n      candidate.relatedPort = parseInt(candidateMatches[10])\n    }\n    if (candidateMatches[12]) {\n      candidate.tcpType = candidateMatches[12]\n    } else if (candidate.transport === 'TCP') {\n      if (candidate.port === 0 || candidate.port === 9) {\n        candidate.tcpType = 'active'\n        candidate.port = 9\n      } else {\n        return\n      }\n    }\n  }\n  return candidate\n}\n\nfunction reportCandidate(formatter, identities, rtcicecandidate, localOrRemote) {\n  var candidate = parseCandidateString(rtcicecandidate.candidate)\n  if (!candidate) {\n    return\n  }\n  var report = {\n    sourceId: 'candidates',\n    localOrRemote: localOrRemote,\n  }\n  report = assign(report, candidate)\n  reportGenericStat(formatter, identities, report)\n}\n\nvar PEER_CONNECTION_MONITOR_INTERNAL_MS = 1000\nvar PEER_CONNECTION_MONITOR_ICE_CHECKING_TIMEOUT_MS = 15000\n\nexport default function attachPeerConnectionMonitor(pc, formatter, reportIntervalMs) {\n  var tag = 'stats-monitor'\n  var callSucceeded = null\n\n  var reportInterval = 0\n  reportIntervalMs = reportIntervalMs || PEER_CONNECTION_MONITOR_INTERNAL_MS\n\n  var identities = {\n    isRelay: false,\n    pcId: pc.id,\n  }\n\n  pc.addEventListener('signalingstatechange', function () {\n    if (pc.signalingState === 'closed') {\n      log.debug(tag, 'stopped gather stats for ' + pc.id)\n      return clearInterval(reportInterval)\n    }\n\n    if (pc._pc.localDescription) {\n      identities = parseIdentities(pc._pc.localDescription.sdp, identities)\n    }\n    if (pc._pc.remoteDescription) {\n      identities = parseIdentities(pc._pc.remoteDescription.sdp, identities)\n    }\n  })\n\n  var normalizePeerConnectionStats = createPeerConnectionStatNormalizer()\n  var iceCheckingTimeout\n\n  pc.addEventListener('iceconnectionstatechange', function () {\n    var iceConnectionState = pc.iceConnectionState\n    reportGenericStat(formatter, identities, {\n      sourceId: 'iceConnectionState',\n      iceConnectionState: iceConnectionState,\n    })\n    if (iceCheckingTimeout) {\n      clearTimeout(iceCheckingTimeout)\n      iceCheckingTimeout = null\n    }\n    if (callSucceeded === null) {\n      if (iceConnectionState === 'connected' || iceConnectionState === 'completed') {\n        callSucceeded = true\n        reportGenericStat(formatter, identities, {\n          sourceId: 'events',\n          eventType: 'callSetupResult',\n          callSucceeded: true,\n        })\n\n        pc.getStats(null).then(function (stats) {\n          var normalizedStats = normalizePeerConnectionStats(stats, identities)\n          for (var i in normalizedStats) {\n            var stat = normalizedStats[i]\n            if ('localIpAddress' in stat) {\n              reportGenericStat(formatter, identities, stat)\n              if ('localCandidateType' in stat) {\n                identities.isRelay = stat.localCandidateType === 'relayed'\n              }\n            }\n          }\n        }).catch(function (error) {\n          log.warning(tag, 'getStats error:', error)\n        })\n      }\n      if (iceConnectionState === 'failed') {\n        callSucceeded = false\n        reportGenericStat(formatter, identities, {\n          sourceId: 'events',\n          eventType: 'callSetupResult',\n          callSucceeded: false,\n        })\n      }\n      if (iceConnectionState === 'checking' && !iceCheckingTimeout) {\n        iceCheckingTimeout = setTimeout(function () {\n          callSucceeded = false\n          reportGenericStat(formatter, identities, {\n            sourceId: 'events',\n            eventType: 'callSetupResult',\n            callSucceeded: false,\n          })\n        }, PEER_CONNECTION_MONITOR_ICE_CHECKING_TIMEOUT_MS)\n      }\n    }\n  })\n\n  pc.addEventListener('icecandidate', function (event) {\n    if (!event.candidate) {\n      return\n    }\n    reportCandidate(formatter, identities, event.candidate, 'local')\n  })\n\n  var realAddIceCandidate = pc.addIceCandidate\n  function addIceCandidate(candidate) {\n    reportCandidate(formatter, identities, candidate, 'remote')\n    return realAddIceCandidate.call(pc, candidate)\n  }\n  pc.addIceCandidate = addIceCandidate\n\n  reportInterval = setInterval(function () {\n    pc.getStats(null).then(function (stats) {\n      var normalizedStats = normalizePeerConnectionStats(stats, identities)\n      formatter.handleStats(normalizedStats)\n    }).catch(function (error) {\n      log.warning(tag, 'getStats error:', error)\n    })\n  }, reportIntervalMs)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webrtc/peerConnectionMonitor.js","\nimport log from 'common/log'\n\nconst TAG = 'peer-connection'\n\nconst candidateRegExp = new RegExp('^candidate:(\\\\d+) (\\\\d) (UDP|TCP) ([\\\\d\\\\.]*) ([\\\\d\\\\.a-f\\\\:]*) (\\\\d*)' +\n  ' typ ([a-z]*)( raddr ([\\\\d\\\\.a-f\\\\:]*) rport (\\\\d*))?' +\n  '( tcptype (active|passive|so))?(.*)$', 'i')\nconst bundleAttributeRegExp = new RegExp('^a=group:BUNDLE (.*)$', 'mi')\n\n/**\n * @typedef IceCandidateInfo\n *\n * An object containing information about an ICE candidate.\n *\n * More information can be found in [RFC 5245](https://tools.ietf.org/html/rfc5245) and\n * [RFC 6544](https://tools.ietf.org/html/rfc6544).\n *\n * @property {string} foundation - The candidate foundation.\n * @property {number} componentId - The candidate component id, will almost always be 1 because of RTCP multiplexing.\n * @property {string} transport - The transport used, `'TCP'` or `'UDP'`.\n * @property {number} priority - The candidate priority.\n * @property {string} address - The candidate address.\n * @property {number} port - The candidate port.\n * @property {string} type - The candidate type, `'host'`, `'srflx'`, `'prflx'`, or `'relay'`.\n * @property {string} candidate - The original candidate line, always without attribute prefix (`a=`).\n * @property {string} origin - The origin of the candidate, `'local'` or `'remote'`.\n * @property {string} [relatedAddress] - The candidate related address, not used in host candidates.\n * @property {number} [relatedPort] - The candidate related port, not used in host candidates.\n * @property {string} [tcpType] - The candidate tcp type, `'active'`, `'passive'`, simultaneous-open, `'so'`.\n */\n\nexport function parseCandidateInfo(line, origin) {\n  let match = line.match(candidateRegExp)\n  if (!match) {\n    throw new Error(`Could not parse ${origin} ice candidate: ${line}`)\n  }\n  let info = {\n    foundation: match[1],\n    componentId: parseInt(match[2]),\n    transport: match[3].toUpperCase(),\n    priority: parseInt(match[4]),\n    address: match[5],\n    port: parseInt(match[6]),\n    type: match[7],\n    candidate: line,\n    origin: origin,\n  }\n  if (match[9]) {\n    info.relatedAddress = match[9]\n  }\n  if (!isNaN(match[10])) {\n    info.relatedPort = parseInt(match[10])\n  }\n  if (match[12]) {\n    info.tcpType = match[12]\n  } else if (info.transport === 'TCP') {\n    if (info.port === 0 || info.port === 9) {\n      info.tcpType = 'active'\n      info.port = 9\n    } else {\n      return\n    }\n  }\n  return info\n}\n\nexport function filterSdpCandidates(sdp, filter, origin) {\n  if (!sdp) {\n    return sdp\n  }\n  return sdp.split(/\\r\\n/).filter(line => {\n    if (line.indexOf('a=candidate:') === 0) {\n      try {\n        let candidate = line.slice(2)\n        let info = parseCandidateInfo(candidate, origin)\n        if (!filter(info)) {\n          log.verbose(TAG, `ignored candidate due to being filtered out: ${candidate}`)\n          return false\n        }\n      } catch (error) {\n        log.error(TAG, `ignoring candidate, error was thrown in candidate filter: ${error}`)\n        return false\n      }\n    }\n    return true\n  }).join('\\r\\n')\n}\n\nexport function workaroundSdpBundleBug(sdp) {\n  if (sdp.match(bundleAttributeRegExp)) {\n    // If the SDP already has a group attribute, we don't need to do anything\n    return sdp\n  }\n  return rewriteBundleAttribute(sdp)\n}\n\nexport function extractApplicationBlock(sdp) {\n  let [sessionBlock, ...mediaBlocks] = sdp.split(blockSplitRegExp)\n\n  let applicationMBlockIndex = -1\n  for (let index in mediaBlocks) {\n    if (mediaBlocks[index].indexOf('m=application') === 0) {\n      applicationMBlockIndex = +index\n      break\n    }\n  }\n\n  if (applicationMBlockIndex === -1) {\n    return [sdp, null]\n  }\n\n  let [, applicationMId] = mediaBlocks[applicationMBlockIndex].match(/a=mid:(.*)/mi) || []\n  if (!applicationMId) {\n    throw new Error('sdp application block does not have an mId')\n  }\n\n  let newSessionBlock = sessionBlock.replace(bundleAttributeRegExp, (_, mIdsStr) => {\n    let mIds = mIdsStr.split(' ')\n    let index = mIds.indexOf(applicationMId)\n    if (index === -1) {\n      throw new Error('sdp group:BUNDLE attribute did not contain application block mId')\n    }\n    mIds.splice(index, 1)\n    return 'a=group:BUNDLE ' + mIds.join(' ')\n  })\n\n  let applicationMBlock = mediaBlocks.splice(applicationMBlockIndex, 1)[0]\n  let newSdp = newSessionBlock + mediaBlocks.join('')\n  return [newSdp, {\n    block: applicationMBlock,\n    index: applicationMBlockIndex,\n    applicationMId,\n    needsInteropTranslation: !!mediaBlocks.length,\n  }]\n}\n\nexport function injectApplicationBlock(sdp, extractedBlock) {\n  if (!extractedBlock) {\n    return sdp\n  }\n\n  let [sessionBlock, ...mediaBlocks] = sdp.split(blockSplitRegExp)\n\n  let newSessionBlock = sessionBlock.replace(bundleAttributeRegExp, (_, mIdsStr) => {\n    let mIds = mIdsStr ? mIdsStr.split(' ') : []\n    mIds.splice(extractedBlock.index, 0, extractedBlock.applicationMId)\n    return 'a=group:BUNDLE ' + mIds.join(' ')\n  })\n\n  mediaBlocks.splice(extractedBlock.index, 0, extractedBlock.block)\n  return newSessionBlock + mediaBlocks.join('')\n}\n\nconst modeRegExp = new RegExp('^a=(inactive|recvonly|sendonly|sendrecv)$', 'mi')\nconst blockSplitRegExp = new RegExp('(?=m=(?:audio|video|application))', 'i')\nconst mediaTypeRegExp = new RegExp('^m=(audio|video|application)', 'i')\n\nconst modeValues = {\n  inactive: 0,\n  sendonly: 1,\n  recvonly: 2,\n  sendrecv: 3,\n}\nconst modeNames = {\n  0: 'inactive',\n  1: 'sendonly',\n  2: 'recvonly',\n  3: 'sendrecv',\n}\n\nexport function readMediaModeUnions(sdp) {\n  let [sessionBlock, ...mediaBlocks] = sdp.split(blockSplitRegExp)\n  // the mode above the media blocks is used if a media block doesn't have it's own mode\n  let [, defaultModeName = 'sendrecv'] = sessionBlock.match(modeRegExp) || []\n\n  let audioModeValue = modeValues.inactive\n  let videoModeValue = modeValues.inactive\n  let applicationModeValue = modeValues.inactive\n\n  mediaBlocks.forEach(mediaBlock => {\n    let [, mediaType] = mediaBlock.match(mediaTypeRegExp)\n    let [, modeName = defaultModeName] = mediaBlock.match(modeRegExp) || []\n    let modeValue = modeValues[modeName]\n    if (mediaType === 'audio') {\n      audioModeValue |= modeValue\n    } else if (mediaType === 'video') {\n      videoModeValue |= modeValue\n    } else if (mediaType === 'application') {\n      applicationModeValue |= modeValue\n    }\n  })\n\n  return {\n    audio: modeNames[audioModeValue],\n    video: modeNames[videoModeValue],\n    application: modeNames[applicationModeValue],\n  }\n}\n\nexport function overrideMediaModes(sdp, mediaModes) {\n  let [sessionBlock, ...mediaBlocks] = sdp.split(blockSplitRegExp)\n\n  mediaBlocks = mediaBlocks.map(mediaBlock => {\n    let [, mediaType] = mediaBlock.match(mediaTypeRegExp)\n    let modeName = mediaModes[mediaType] || modeNames[3] // default to sendrecv\n    return mediaBlock.replace(modeRegExp, `a=${modeName}`)\n  })\n\n  return [sessionBlock, ...mediaBlocks].join('')\n}\n\n// This rewrites the bundle attribute according to the actual media blocks in the sdp\nexport function rewriteBundleAttribute(sdp) {\n  let [sessionBlock, ...mediaBlocks] = sdp.split(blockSplitRegExp)\n  let mIds = mediaBlocks.map(mediaBlock => {\n    let [, mId] = mediaBlock.match(/^a=mid:(.+)$/mi) || []\n    if (!mId) {\n      let [, mediaType] = mediaBlock.match(mediaTypeRegExp)\n      throw new Error(`media block of type ${mediaType} did not contain mid attribute`)\n    }\n    return mId\n  })\n\n  mIds.unshift('') // conditional padding weith space after BUNDLE\n  let bundleAttribute = `a=group:BUNDLE${mIds.join(' ')}`\n\n  if (sessionBlock.match(bundleAttributeRegExp)) {\n    sessionBlock = sessionBlock.replace(bundleAttributeRegExp, bundleAttribute)\n  } else {\n    sessionBlock += `${bundleAttribute}\\r\\n`\n  }\n  return [sessionBlock, ...mediaBlocks].join('')\n}\n\nconst bweRegExp = new RegExp('a=extmap:5 ' +\n  'http://www\\\\.ietf\\\\.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01' +\n  '\\r\\n', 'gi')\n\n// Chrome 58 and 59 has a broken bandwidth estimation implementation that\n// doesn't detect when packets are sent using TURN/TCP. This results in\n// the estimated bandwidth to always end up at 10kbps.\n// The fix we use is to always disable the new bandwidth estimation algorithm\n// for all connections.\nexport function disableSendBandwidthEstimation(sdp) {\n  return sdp.replace(bweRegExp, '')\n}\n\nconst ssrcGroupRegExp = new RegExp('a=ssrc-group:.+\\\\s\\\\d+\\\\s(\\\\d+)' + '\\r\\n', 'gi')\nconst rtxPayloadTypeRegExp = new RegExp('a=(?:fmtp:\\\\d+\\\\sapt=\\\\d+|rtpmap:\\\\d+\\\\srtx/\\\\d+)' + '\\r\\n', 'gi')\n\n// Removes retransmission information from a Chrome-style (Plan B) SDPs.\n// This includes rtpmap and fmtp attributes with rtx/apt values, ssrc-group\n// attributes, and the ssrc attributes for the ssrcs used for retransmission.\nexport function removeChromeRetransmission(sdp) {\n  let [sessionBlock, ...mediaBlocks] = sdp.split(blockSplitRegExp)\n\n  let modifiedMediaBlocks = mediaBlocks.map(mediaBlock => {\n    let [, mediaType] = mediaBlock.match(mediaTypeRegExp)\n    if (mediaType !== 'video') {\n      return mediaBlock\n    }\n    let removedSsrcs = []\n\n    let withoutSsrcGroups = mediaBlock.replace(ssrcGroupRegExp, (_, ssrc) => {\n      // We assume the second SSRC is used for retransmission\n      removedSsrcs.push(ssrc)\n      return ''\n    })\n    let ssrcRegExp = new RegExp(`a=ssrc:(?:${removedSsrcs.join('|')})\\\\s.*\\r\\n`, 'gi')\n    let withoutSsrcs = withoutSsrcGroups.replace(ssrcRegExp, '')\n    let withoutRtxPayloadTypes = withoutSsrcs.replace(rtxPayloadTypeRegExp, '')\n    return withoutRtxPayloadTypes\n  })\n\n  return [sessionBlock, ...modifiedMediaBlocks].join('')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webrtc/sdpTransform.js","'use strict'\n\nimport {assign, randomString} from 'common/utils'\n\nexport default function StatsFormatter(context, reporter) {\n  this.context = assign({}, context)\n  this.context.contextId = randomString(16)\n  this.context.userAgent = navigator.userAgent\n  this.reporter = reporter\n  this.tag = 'stats-formatter'\n}\n\nStatsFormatter.prototype.setPeerId = function (peerId) {\n  this.context.peerId = peerId\n}\n\nStatsFormatter.prototype.handleStats = function (stats) {\n  for (var i in stats) {\n    stats[i] = assign(stats[i], this.context)\n  }\n  this.reporter.handleStats(stats)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webrtc/statsFormatter.js","'use strict'\n\nimport log from 'common/log'\nimport {\n  assign,\n  isChrome,\n  isFirefox,\n  maybeConvertStringToNumber,\n} from 'common/utils'\n\nvar STATS_OBJ_REGEX_FIREFOX = /(in|out)bound_(rtp|rtcp)_(audio|video)_(\\d+)/\nvar STATS_KEY_BLACKLIST_FIREFOX = [\n  'id',\n  'type',\n  'isRemote',\n  'remoteId',\n]\n\nvar STATS_OBJ_REGEX_CHROME = /(ssrc)_(\\d+)_(recv|send)/\nvar STATS_KEY_BLACKLIST_CHROME = [\n  'id',\n  'type',\n  'googTrackId',\n  'transportId',\n]\n\nfunction normalizeStatsMatchFirefox(statKey, stat) {\n  var sample = {}\n  var matchFirefox = statKey.match(STATS_OBJ_REGEX_FIREFOX)\n  if (matchFirefox) {\n    switch (matchFirefox[1]) {\n      case 'in':\n        sample.role = 'receiver'\n        break\n      case 'out':\n        sample.role = 'sender'\n        break\n      default:\n        log.warning('stats-normalizer', 'No role match!')\n        return null\n    }\n    switch (matchFirefox[2]) {\n      case 'rtp':\n        sample.reportType = sample.role === 'receiver' ? 'receiver' : 'sender'\n        break\n      case 'rtcp':\n        sample.reportType = sample.role === 'receiver' ? 'sender' : 'receiver'\n        break\n      default:\n        log.warning('stats-normalizer', 'No reportType match!')\n        return null\n    }\n\n    for (var k in stat) {\n      if (STATS_KEY_BLACKLIST_FIREFOX.indexOf(k) >= 0) {\n        continue\n      }\n      sample[k] = maybeConvertStringToNumber(stat[k].toString())\n    }\n    return sample\n  }\n}\n\nfunction normalizeStatsMatchChrome(statKey, stat) {\n  var sample = {}\n  var matchChrome = statKey.match(STATS_OBJ_REGEX_CHROME)\n  if (matchChrome) {\n    switch (matchChrome[3]) {\n      case 'recv':\n        sample.role = 'receiver'\n        sample.reportType = 'receiver'\n        break\n      case 'send':\n        sample.role = 'sender'\n        sample.reportType = 'sender'\n        break\n      default:\n        log.warning('stats-normalizer', 'No role match!')\n        return null\n    }\n\n    for (var k in stat) {\n      if (STATS_KEY_BLACKLIST_CHROME.indexOf(k) >= 0) {\n        continue\n      }\n      sample[k] = maybeConvertStringToNumber(stat[k].toString())\n            // FIXME - set the mediaType from an ssrc lookup after parsing the sdp\n      if (k === 'audioInputLevel' || k === 'audioOutputLevel') {\n        sample.mediaType = 'audio'\n      } else if (k === 'googFrameHeightReceived' || k === 'googFrameHeightSent') {\n        sample.mediaType = 'video'\n      } else {\n        continue\n      }\n    }\n    return sample\n  }\n}\n\nvar candidatePairKeys = [\n  'portNumber',\n  'ipAddress',\n  'transport',\n  'candidateType',\n  // 'relatedAddress',\n  // 'relatedPort',\n  // 'tcpType',\n]\nfunction assignCandidatePairValues(stat, localOrRemote, sample) {\n  for (var i in candidatePairKeys) {\n    var key = candidatePairKeys[i]\n    if (key in stat) {\n      var destKey = localOrRemote + key.charAt(0).toUpperCase() + key.slice(1)\n      sample[destKey] = maybeConvertStringToNumber(stat[key])\n    }\n  }\n  return sample\n}\n\nfunction getSelectedPairSampleFromStats(stats, stat, browser) {\n  var localCandidateId = stat.localCandidateId\n  var remoteCandidateId = stat.remoteCandidateId\n  var localStat = stats[localCandidateId]\n  var remoteStat = stats[remoteCandidateId]\n\n  var sample = {}\n\n  sample.sourceId = 'selectedPair'\n\n  sample = assignCandidatePairValues(localStat, 'local', sample)\n  sample = assignCandidatePairValues(remoteStat, 'remote', sample)\n  if (browser === 'chrome') {\n    sample.localPriority = +localStat.priority\n    sample.remotePriority = +remoteStat.priority\n  }\n  if (browser === 'firefox') {\n    sample.localPriority = +stat.priority\n    sample.remotePriority = +stat.priority\n  }\n\n  return sample\n}\n\nexport default function createPeerConnectionStatNormalizer() {\n  var selectedPairs = {}\n\n  function normalizeSsrcStats(stats, identities) {\n    var samples = []\n    var sampleTsMs = Date.now()\n\n    for (var i in stats) {\n      var stat = stats[i]\n      var sample = null\n      var ssrc = stat.ssrc\n      if (!ssrc) {\n        continue\n      }\n      var identity = identities[ssrc]\n      if (!identity) {\n        log.warning('stat-normalizer', 'got stat without identity:', stat)\n        continue\n      }\n\n      if (isFirefox) {\n        sample = normalizeStatsMatchFirefox(i, stat)\n      }\n      if (isChrome) {\n        sample = normalizeStatsMatchChrome(i, stat)\n      }\n      if (!sample) {\n        continue\n      }\n\n      if (sample.timestamp) {\n        sample.getStatsTs = sample.timestamp\n        delete sample.timestamp\n      }\n\n      sample.timestamp = sampleTsMs\n      sample.pcId = identities.pcId\n      sample.isRelay = identities.isRelay\n\n      sample = assign(sample, identity)\n      sample.sourceId = 'ssrc-' + ssrc\n\n      samples.push(sample)\n    }\n\n    return samples\n  }\n\n  function normalizeSelectedPairStats(stats, identities) {\n    var samples = []\n    var sampleTsMs = Date.now()\n    var newSelectedPairs = {}\n\n    for (var i in stats) {\n      var stat = stats[i]\n      var sample = null\n\n      if (stat.type === 'candidatepair' && stat.selected === true && stat.state === 'succeeded') {\n        sample = getSelectedPairSampleFromStats(stats, stat, 'firefox')\n      }\n      if (stat.type === 'googCandidatePair' && stat.googActiveConnection === 'true') {\n        sample = getSelectedPairSampleFromStats(stats, stat, 'chrome')\n      }\n\n      if (!sample) {\n        continue\n      }\n\n      sample.timestamp = sampleTsMs\n      sample.pcId = identities.pcId\n      sample.isRelay = identities.isRelay\n\n      var newSelectedPair = stat.localCandidateId + stat.remoteCandidateId\n      if (!(newSelectedPair in newSelectedPairs)) {\n        newSelectedPairs[newSelectedPair] = []\n      }\n      newSelectedPairs[newSelectedPair].push(sample)\n    }\n\n    for (var oldPair in selectedPairs) {\n      if (!(oldPair in newSelectedPairs)) {\n        delete selectedPairs[oldPair]\n      }\n    }\n    for (var newPair in newSelectedPairs) {\n      if (!(newPair in selectedPairs)) {\n        selectedPairs[newPair] = true;\n        [].push.apply(samples, newSelectedPairs[newPair])\n      }\n    }\n\n    return samples\n  }\n\n  return function normalizePeerConnectionStats(stats, identities) {\n    var samples = []\n\n    samples = normalizeSsrcStats(stats, identities);\n    [].push.apply(samples, normalizeSelectedPairStats(stats, identities))\n\n    return samples\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webrtc/statsNormalizer.js","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D){\n  return $Object.defineProperties(T, D);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/object/define-properties.js\n// module id = 203\n// module chunks = 0 1","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperties: require('./_object-dps')});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/es6.object.define-properties.js\n// module id = 204\n// module chunks = 0 1","/*! adapterjs - v0.14.3-6d236da - 2017-05-24 */\nvar AdapterJS=AdapterJS||{};AdapterJS.options=AdapterJS.options||{},AdapterJS.VERSION=\"0.14.3-6d236da\",AdapterJS.onwebrtcready=AdapterJS.onwebrtcready||function(isUsingPlugin){},AdapterJS._onwebrtcreadies=[],AdapterJS.webRTCReady=function(baseCallback){if(\"function\"!=typeof baseCallback)throw new Error(\"Callback provided is not a function\");var callback=function(){\"function\"==typeof window.require&&\"function\"==typeof AdapterJS._defineMediaSourcePolyfill&&AdapterJS._defineMediaSourcePolyfill(),baseCallback(null!==AdapterJS.WebRTCPlugin.plugin)};!0===AdapterJS.onwebrtcreadyDone?callback():AdapterJS._onwebrtcreadies.push(callback)},AdapterJS.WebRTCPlugin=AdapterJS.WebRTCPlugin||{},AdapterJS.WebRTCPlugin.pluginInfo=AdapterJS.WebRTCPlugin.pluginInfo||{prefix:\"Tem\",plugName:\"TemWebRTCPlugin\",pluginId:\"plugin0\",type:\"application/x-temwebrtcplugin\",onload:\"__TemWebRTCReady0\",portalLink:\"https://skylink.io/plugin/\",downloadLink:null,companyName:\"Temasys\",downloadLinks:{mac:\"https://bit.ly/webrtcpluginpkg\",win:\"https://bit.ly/webrtcpluginmsi\"}},\"undefined\"!=typeof AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks&&null!==AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks&&(navigator.platform.match(/^Mac/i)?AdapterJS.WebRTCPlugin.pluginInfo.downloadLink=AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks.mac:navigator.platform.match(/^Win/i)&&(AdapterJS.WebRTCPlugin.pluginInfo.downloadLink=AdapterJS.WebRTCPlugin.pluginInfo.downloadLinks.win)),AdapterJS.WebRTCPlugin.TAGS={NONE:\"none\",AUDIO:\"audio\",VIDEO:\"video\"},AdapterJS.WebRTCPlugin.pageId=Math.random().toString(36).slice(2),AdapterJS.WebRTCPlugin.plugin=null,AdapterJS.WebRTCPlugin.setLogLevel=null,AdapterJS.WebRTCPlugin.defineWebRTCInterface=null,AdapterJS.WebRTCPlugin.isPluginInstalled=null,AdapterJS.WebRTCPlugin.pluginInjectionInterval=null,AdapterJS.WebRTCPlugin.injectPlugin=null,AdapterJS.WebRTCPlugin.PLUGIN_STATES={NONE:0,INITIALIZING:1,INJECTING:2,INJECTED:3,READY:4},AdapterJS.WebRTCPlugin.pluginState=AdapterJS.WebRTCPlugin.PLUGIN_STATES.NONE,AdapterJS.onwebrtcreadyDone=!1,AdapterJS.WebRTCPlugin.PLUGIN_LOG_LEVELS={NONE:\"NONE\",ERROR:\"ERROR\",WARNING:\"WARNING\",INFO:\"INFO\",VERBOSE:\"VERBOSE\",SENSITIVE:\"SENSITIVE\"},AdapterJS.WebRTCPlugin.WaitForPluginReady=null,AdapterJS.WebRTCPlugin.callWhenPluginReady=null,__TemWebRTCReady0=function(){if(\"complete\"===document.readyState)AdapterJS.WebRTCPlugin.pluginState=AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY,AdapterJS.maybeThroughWebRTCReady();else var timer=setInterval(function(){\"complete\"===document.readyState&&(clearInterval(timer),AdapterJS.WebRTCPlugin.pluginState=AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY,AdapterJS.maybeThroughWebRTCReady())},100)},AdapterJS.maybeThroughWebRTCReady=function(){AdapterJS.onwebrtcreadyDone||(AdapterJS.onwebrtcreadyDone=!0,AdapterJS._onwebrtcreadies.length?AdapterJS._onwebrtcreadies.forEach(function(callback){\"function\"==typeof callback&&callback(null!==AdapterJS.WebRTCPlugin.plugin)}):\"function\"==typeof AdapterJS.onwebrtcready&&AdapterJS.onwebrtcready(null!==AdapterJS.WebRTCPlugin.plugin))},AdapterJS.TEXT={PLUGIN:{REQUIRE_INSTALLATION:\"This website requires you to install a WebRTC-enabling plugin to work on this browser.\",NOT_SUPPORTED:\"Your browser does not support WebRTC.\",BUTTON:\"Install Now\"},REFRESH:{REQUIRE_REFRESH:\"Please refresh page\",BUTTON:\"Refresh Page\"}},AdapterJS._iceConnectionStates={starting:\"starting\",checking:\"checking\",connected:\"connected\",completed:\"connected\",done:\"completed\",disconnected:\"disconnected\",failed:\"failed\",closed:\"closed\"},AdapterJS._iceConnectionFiredStates=[],AdapterJS.isDefined=null,AdapterJS.parseWebrtcDetectedBrowser=function(){var hasMatch=null;if(window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(\" OPR/\")>=0)hasMatch=navigator.userAgent.match(/OPR\\/(\\d+)/i)||[],webrtcDetectedBrowser=\"opera\",webrtcDetectedVersion=parseInt(hasMatch[1]||\"0\",10),webrtcMinimumVersion=26,webrtcDetectedType=\"webkit\",webrtcDetectedDCSupport=\"SCTP\";else if(navigator.userAgent.match(/Bowser\\/[0-9.]*/g)){hasMatch=navigator.userAgent.match(/Bowser\\/[0-9.]*/g)||[];var chromiumVersion=parseInt((navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./i)||[])[2]||\"0\",10);webrtcDetectedBrowser=\"bowser\",webrtcDetectedVersion=parseFloat((hasMatch[0]||\"0/0\").split(\"/\")[1],10),webrtcMinimumVersion=0,webrtcDetectedType=\"webkit\",webrtcDetectedDCSupport=chromiumVersion>30?\"SCTP\":\"RTP\"}else if(navigator.userAgent.indexOf(\"OPiOS\")>0)hasMatch=navigator.userAgent.match(/OPiOS\\/([0-9]+)\\./),webrtcDetectedBrowser=\"opera\",webrtcDetectedVersion=parseInt(hasMatch[1]||\"0\",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf(\"CriOS\")>0)hasMatch=navigator.userAgent.match(/CriOS\\/([0-9]+)\\./)||[],webrtcDetectedBrowser=\"chrome\",webrtcDetectedVersion=parseInt(hasMatch[1]||\"0\",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf(\"FxiOS\")>0)hasMatch=navigator.userAgent.match(/FxiOS\\/([0-9]+)\\./)||[],webrtcDetectedBrowser=\"firefox\",webrtcDetectedVersion=parseInt(hasMatch[1]||\"0\",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(document.documentMode)hasMatch=/\\brv[ :]+(\\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedBrowser=\"IE\",webrtcDetectedVersion=parseInt(hasMatch[1],10),webrtcMinimumVersion=9,webrtcDetectedType=\"plugin\",webrtcDetectedDCSupport=\"SCTP\",webrtcDetectedVersion||(hasMatch=/\\bMSIE[ :]+(\\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedVersion=parseInt(hasMatch[1]||\"0\",10));else if(window.StyleMedia||navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))hasMatch=navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)||[],webrtcDetectedBrowser=\"edge\",webrtcDetectedVersion=parseFloat((hasMatch[0]||\"0/0\").split(\"/\")[1],10),webrtcMinimumVersion=13.10547,webrtcDetectedType=\"ms\",webrtcDetectedDCSupport=null;else if(\"undefined\"!=typeof InstallTrigger||navigator.userAgent.indexOf(\"irefox\")>0)hasMatch=navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)||[],webrtcDetectedBrowser=\"firefox\",webrtcDetectedVersion=parseInt(hasMatch[1]||\"0\",10),webrtcMinimumVersion=33,webrtcDetectedType=\"moz\",webrtcDetectedDCSupport=\"SCTP\";else if(window.chrome&&window.chrome.webstore||navigator.userAgent.indexOf(\"Chrom\")>0)hasMatch=navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./i)||[],webrtcDetectedBrowser=\"chrome\",webrtcDetectedVersion=parseInt(hasMatch[2]||\"0\",10),webrtcMinimumVersion=38,webrtcDetectedType=\"webkit\",webrtcDetectedDCSupport=webrtcDetectedVersion>30?\"SCTP\":\"RTP\";else if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){hasMatch=navigator.userAgent.match(/version\\/(\\d+)/i)||[];var isMobile=navigator.userAgent.match(/(iPhone|iPad)/gi)||[];webrtcDetectedBrowser=\"safari\",webrtcDetectedVersion=parseInt(hasMatch[1]||\"0\",10),webrtcMinimumVersion=7,webrtcDetectedType=0===isMobile.length?\"plugin\":null,webrtcDetectedDCSupport=0===isMobile.length?\"SCTP\":null}window.webrtcDetectedBrowser=webrtcDetectedBrowser,window.webrtcDetectedVersion=webrtcDetectedVersion,window.webrtcMinimumVersion=webrtcMinimumVersion,window.webrtcDetectedType=webrtcDetectedType,window.webrtcDetectedDCSupport=webrtcDetectedDCSupport},AdapterJS.addEvent=function(elem,evnt,func){elem.addEventListener?elem.addEventListener(evnt,func,!1):elem.attachEvent?elem.attachEvent(\"on\"+evnt,func):elem[evnt]=func},AdapterJS.renderNotificationBar=function(message,buttonText,buttonCallback){if(\"complete\"===document.readyState){var w=window,i=document.createElement(\"iframe\");i.name=\"adapterjs-alert\",i.style.position=\"fixed\",i.style.top=\"-41px\",i.style.left=0,i.style.right=0,i.style.width=\"100%\",i.style.height=\"40px\",i.style.backgroundColor=\"#ffffe1\",i.style.border=\"none\",i.style.borderBottom=\"1px solid #888888\",i.style.zIndex=\"9999999\",\"string\"==typeof i.style.webkitTransition?i.style.webkitTransition=\"all .5s ease-out\":\"string\"==typeof i.style.transition&&(i.style.transition=\"all .5s ease-out\"),document.body.appendChild(i);var c=i.contentWindow?i.contentWindow:i.contentDocument.document?i.contentDocument.document:i.contentDocument;c.document.open(),c.document.write('<span style=\"display: inline-block; font-family: Helvetica, Arial,sans-serif; font-size: .9rem; padding: 4px; vertical-align: middle; cursor: default;\">'+message+\"</span>\"),buttonText&&\"function\"==typeof buttonCallback?(c.document.write('<button id=\"okay\">'+buttonText+'</button><button id=\"cancel\">Cancel</button>'),c.document.close(),AdapterJS.addEvent(c.document.getElementById(\"okay\"),\"click\",function(e){e.preventDefault();try{e.cancelBubble=!0}catch(error){}buttonCallback(e)}),AdapterJS.addEvent(c.document.getElementById(\"cancel\"),\"click\",function(e){w.document.body.removeChild(i)})):c.document.close(),setTimeout(function(){\"string\"==typeof i.style.webkitTransform?i.style.webkitTransform=\"translateY(40px)\":\"string\"==typeof i.style.transform?i.style.transform=\"translateY(40px)\":i.style.top=\"0px\"},300)}},webrtcDetectedType=null,checkMediaDataChannelSettings=function(peerBrowserAgent,peerBrowserVersion,callback,constraints){if(\"function\"==typeof callback){var beOfferer=!0,isLocalFirefox=\"firefox\"===webrtcDetectedBrowser,isLocalFirefoxInterop=\"moz\"===webrtcDetectedType&&webrtcDetectedVersion>30,isPeerFirefox=\"firefox\"===peerBrowserAgent;if(isLocalFirefox&&isPeerFirefox||isLocalFirefoxInterop)try{delete constraints.mandatory.MozDontOfferDataChannel}catch(error){}else isLocalFirefox&&!isPeerFirefox&&(constraints.mandatory.MozDontOfferDataChannel=!0);if(!isLocalFirefox)for(var prop in constraints.mandatory)constraints.mandatory.hasOwnProperty(prop)&&prop.indexOf(\"Moz\")!==-1&&delete constraints.mandatory[prop];!isLocalFirefox||isPeerFirefox||isLocalFirefoxInterop||(beOfferer=!1),callback(beOfferer,constraints)}},checkIceConnectionState=function(peerId,iceConnectionState,callback){\"function\"==typeof callback&&(peerId=peerId?peerId:\"peer\",AdapterJS._iceConnectionFiredStates[peerId]&&iceConnectionState!==AdapterJS._iceConnectionStates.disconnected&&iceConnectionState!==AdapterJS._iceConnectionStates.failed&&iceConnectionState!==AdapterJS._iceConnectionStates.closed||(AdapterJS._iceConnectionFiredStates[peerId]=[]),iceConnectionState=AdapterJS._iceConnectionStates[iceConnectionState],AdapterJS._iceConnectionFiredStates[peerId].indexOf(iceConnectionState)<0&&(AdapterJS._iceConnectionFiredStates[peerId].push(iceConnectionState),iceConnectionState===AdapterJS._iceConnectionStates.connected&&setTimeout(function(){AdapterJS._iceConnectionFiredStates[peerId].push(AdapterJS._iceConnectionStates.done),callback(AdapterJS._iceConnectionStates.done)},1e3),callback(iceConnectionState)))},createIceServer=null,createIceServers=null,MediaStream=\"function\"==typeof MediaStream?MediaStream:null,RTCPeerConnection=\"function\"==typeof RTCPeerConnection?RTCPeerConnection:null,RTCSessionDescription=\"function\"==typeof RTCSessionDescription?RTCSessionDescription:null,RTCIceCandidate=\"function\"==typeof RTCIceCandidate?RTCIceCandidate:null,getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,webrtcMinimumVersion=null,!(navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices&&navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))||0===(navigator.userAgent.match(/android/gi)||[]).length&&0===(navigator.userAgent.match(/chrome/gi)||[]).length&&navigator.userAgent.indexOf(\"Safari/\")>0?(\"object\"==typeof console&&\"function\"==typeof console.log||(console={}||console,console.log=function(arg){},console.info=function(arg){},console.error=function(arg){},console.dir=function(arg){},console.exception=function(arg){},console.trace=function(arg){},console.warn=function(arg){},console.count=function(arg){},console.debug=function(arg){},console.count=function(arg){},console.time=function(arg){},console.timeEnd=function(arg){},console.group=function(arg){},console.groupCollapsed=function(arg){},console.groupEnd=function(arg){}),AdapterJS.parseWebrtcDetectedBrowser(),isIE=\"IE\"===webrtcDetectedBrowser,AdapterJS.WebRTCPlugin.WaitForPluginReady=function(){for(;AdapterJS.WebRTCPlugin.pluginState!==AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY;);},AdapterJS.WebRTCPlugin.callWhenPluginReady=function(callback){if(AdapterJS.WebRTCPlugin.pluginState===AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY)callback();else var checkPluginReadyState=setInterval(function(){AdapterJS.WebRTCPlugin.pluginState===AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY&&(clearInterval(checkPluginReadyState),callback())},100)},AdapterJS.WebRTCPlugin.setLogLevel=function(logLevel){AdapterJS.WebRTCPlugin.callWhenPluginReady(function(){AdapterJS.WebRTCPlugin.plugin.setLogLevel(logLevel)})},AdapterJS.WebRTCPlugin.injectPlugin=function(){if(\"complete\"===document.readyState&&AdapterJS.WebRTCPlugin.pluginState===AdapterJS.WebRTCPlugin.PLUGIN_STATES.INITIALIZING){if(AdapterJS.WebRTCPlugin.pluginState=AdapterJS.WebRTCPlugin.PLUGIN_STATES.INJECTING,\"IE\"===webrtcDetectedBrowser&&webrtcDetectedVersion<=10){var frag=document.createDocumentFragment();for(AdapterJS.WebRTCPlugin.plugin=document.createElement(\"div\"),AdapterJS.WebRTCPlugin.plugin.innerHTML='<object id=\"'+AdapterJS.WebRTCPlugin.pluginInfo.pluginId+'\" type=\"'+AdapterJS.WebRTCPlugin.pluginInfo.type+'\" width=\"1\" height=\"1\"><param name=\"pluginId\" value=\"'+AdapterJS.WebRTCPlugin.pluginInfo.pluginId+'\" /> <param name=\"windowless\" value=\"false\" /> <param name=\"pageId\" value=\"'+AdapterJS.WebRTCPlugin.pageId+'\" /> <param name=\"onload\" value=\"'+AdapterJS.WebRTCPlugin.pluginInfo.onload+'\" /><param name=\"tag\" value=\"'+AdapterJS.WebRTCPlugin.TAGS.NONE+'\" />'+(AdapterJS.options.getAllCams?'<param name=\"forceGetAllCams\" value=\"True\" />':\"\")+\"</object>\";AdapterJS.WebRTCPlugin.plugin.firstChild;)frag.appendChild(AdapterJS.WebRTCPlugin.plugin.firstChild);document.body.appendChild(frag),AdapterJS.WebRTCPlugin.plugin=document.getElementById(AdapterJS.WebRTCPlugin.pluginInfo.pluginId)}else AdapterJS.WebRTCPlugin.plugin=document.createElement(\"object\"),AdapterJS.WebRTCPlugin.plugin.id=AdapterJS.WebRTCPlugin.pluginInfo.pluginId,isIE?(AdapterJS.WebRTCPlugin.plugin.width=\"1px\",AdapterJS.WebRTCPlugin.plugin.height=\"1px\"):(AdapterJS.WebRTCPlugin.plugin.width=\"0px\",AdapterJS.WebRTCPlugin.plugin.height=\"0px\"),AdapterJS.WebRTCPlugin.plugin.type=AdapterJS.WebRTCPlugin.pluginInfo.type,AdapterJS.WebRTCPlugin.plugin.innerHTML='<param name=\"onload\" value=\"'+AdapterJS.WebRTCPlugin.pluginInfo.onload+'\"><param name=\"pluginId\" value=\"'+AdapterJS.WebRTCPlugin.pluginInfo.pluginId+'\"><param name=\"windowless\" value=\"false\" /> '+(AdapterJS.options.getAllCams?'<param name=\"forceGetAllCams\" value=\"True\" />':\"\")+'<param name=\"pageId\" value=\"'+AdapterJS.WebRTCPlugin.pageId+'\"><param name=\"tag\" value=\"'+AdapterJS.WebRTCPlugin.TAGS.NONE+'\" />',document.body.appendChild(AdapterJS.WebRTCPlugin.plugin);AdapterJS.WebRTCPlugin.pluginState=AdapterJS.WebRTCPlugin.PLUGIN_STATES.INJECTED}},AdapterJS.WebRTCPlugin.isPluginInstalled=function(comName,plugName,plugType,installedCb,notInstalledCb){if(isIE){try{new ActiveXObject(comName+\".\"+plugName)}catch(e){return void notInstalledCb()}installedCb()}else{for(var pluginArray=navigator.mimeTypes,i=0;i<pluginArray.length;i++)if(pluginArray[i].type.indexOf(plugType)>=0)return void installedCb();notInstalledCb()}},AdapterJS.WebRTCPlugin.defineWebRTCInterface=function(){if(AdapterJS.WebRTCPlugin.pluginState!==AdapterJS.WebRTCPlugin.PLUGIN_STATES.READY){AdapterJS.WebRTCPlugin.pluginState=AdapterJS.WebRTCPlugin.PLUGIN_STATES.INITIALIZING,AdapterJS.isDefined=function(variable){return null!==variable&&void 0!==variable},createIceServer=function(url,username,password){var iceServer=null,urlParts=url.split(\":\");return 0===urlParts[0].indexOf(\"stun\")?iceServer={url:url,hasCredentials:!1}:0===urlParts[0].indexOf(\"turn\")&&(iceServer={url:url,hasCredentials:!0,credential:password,username:username}),iceServer},createIceServers=function(urls,username,password){for(var iceServers=[],i=0;i<urls.length;++i)iceServers.push(createIceServer(urls[i],username,password));return iceServers},RTCSessionDescription=function(info){return AdapterJS.WebRTCPlugin.WaitForPluginReady(),AdapterJS.WebRTCPlugin.plugin.ConstructSessionDescription(info.type,info.sdp)},MediaStream=function(mediaStreamOrTracks){return AdapterJS.WebRTCPlugin.WaitForPluginReady(),AdapterJS.WebRTCPlugin.plugin.MediaStream(mediaStreamOrTracks)},RTCPeerConnection=function(servers,constraints){if(void 0!==servers&&null!==servers&&!Array.isArray(servers.iceServers))throw new Error(\"Failed to construct 'RTCPeerConnection': Malformed RTCConfiguration\");if(\"undefined\"!=typeof constraints&&null!==constraints){var invalidConstraits=!1;if(invalidConstraits|=\"object\"!=typeof constraints,invalidConstraits|=constraints.hasOwnProperty(\"mandatory\")&&void 0!==constraints.mandatory&&null!==constraints.mandatory&&constraints.mandatory.constructor!==Object,invalidConstraits|=constraints.hasOwnProperty(\"optional\")&&void 0!==constraints.optional&&null!==constraints.optional&&!Array.isArray(constraints.optional))throw new Error(\"Failed to construct 'RTCPeerConnection': Malformed constraints object\")}AdapterJS.WebRTCPlugin.WaitForPluginReady();var iceServers=null;if(servers&&Array.isArray(servers.iceServers)){iceServers=servers.iceServers;for(var i=0;i<iceServers.length;i++)iceServers[i].urls&&!iceServers[i].url&&(iceServers[i].url=iceServers[i].urls),iceServers[i].hasCredentials=AdapterJS.isDefined(iceServers[i].username)&&AdapterJS.isDefined(iceServers[i].credential)}if(AdapterJS.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION&&AdapterJS.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION>1)return iceServers&&(servers.iceServers=iceServers),AdapterJS.WebRTCPlugin.plugin.PeerConnection(servers);var mandatory=constraints&&constraints.mandatory?constraints.mandatory:null,optional=constraints&&constraints.optional?constraints.optional:null;return AdapterJS.WebRTCPlugin.plugin.PeerConnection(AdapterJS.WebRTCPlugin.pageId,iceServers,mandatory,optional)},MediaStreamTrack=function(){},MediaStreamTrack.getSources=function(callback){AdapterJS.WebRTCPlugin.callWhenPluginReady(function(){AdapterJS.WebRTCPlugin.plugin.GetSources(callback)})};var constraintsToPlugin=function(c){if(\"object\"!=typeof c||c.mandatory||c.optional)return c;var cc={};return Object.keys(c).forEach(function(key){if(\"require\"!==key&&\"advanced\"!==key){if(\"string\"==typeof c[key])return void(cc[key]=c[key]);var r=\"object\"==typeof c[key]?c[key]:{ideal:c[key]};void 0!==r.exact&&\"number\"==typeof r.exact&&(r.min=r.max=r.exact);var oldname=function(prefix,name){return prefix?prefix+name.charAt(0).toUpperCase()+name.slice(1):\"deviceId\"===name?\"sourceId\":name};if(\"sourceId\"===oldname(\"\",key)&&void 0!==r.exact&&(r.ideal=r.exact,r.exact=void 0),void 0!==r.ideal){cc.optional=cc.optional||[];var oc={};\"number\"==typeof r.ideal?(oc[oldname(\"min\",key)]=r.ideal,cc.optional.push(oc),oc={},oc[oldname(\"max\",key)]=r.ideal,cc.optional.push(oc)):(oc[oldname(\"\",key)]=r.ideal,cc.optional.push(oc))}void 0!==r.exact&&\"number\"!=typeof r.exact?(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname(\"\",key)]=r.exact):[\"min\",\"max\"].forEach(function(mix){void 0!==r[mix]&&(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname(mix,key)]=r[mix])})}}),c.advanced&&(cc.optional=(cc.optional||[]).concat(c.advanced)),cc};getUserMedia=function(constraints,successCallback,failureCallback){var cc={};cc.audio=!!constraints.audio&&constraintsToPlugin(constraints.audio),cc.video=!!constraints.video&&constraintsToPlugin(constraints.video),AdapterJS.WebRTCPlugin.callWhenPluginReady(function(){AdapterJS.WebRTCPlugin.plugin.getUserMedia(cc,successCallback,failureCallback)})},window.navigator.getUserMedia=getUserMedia,navigator.mediaDevices||\"undefined\"==typeof Promise||(requestUserMedia=function(constraints){return new Promise(function(resolve,reject){try{getUserMedia(constraints,resolve,reject)}catch(error){reject(error)}})},navigator.mediaDevices={getUserMedia:requestUserMedia,enumerateDevices:function(){return new Promise(function(resolve){var kinds={audio:\"audioinput\",video:\"videoinput\"};return MediaStreamTrack.getSources(function(devices){resolve(devices.map(function(device){return{label:device.label,kind:kinds[device.kind],id:device.id,deviceId:device.id,groupId:\"\"}}))})})}}),attachMediaStream=function(element,stream){if(element&&element.parentNode){var streamId;null===stream?streamId=\"\":(\"undefined\"!=typeof stream.enableSoundTracks&&stream.enableSoundTracks(!0),streamId=stream.id);var elementId=0===element.id.length?Math.random().toString(36).slice(2):element.id,nodeName=element.nodeName.toLowerCase();if(\"object\"!==nodeName){var tag;switch(nodeName){case\"audio\":tag=AdapterJS.WebRTCPlugin.TAGS.AUDIO;break;case\"video\":tag=AdapterJS.WebRTCPlugin.TAGS.VIDEO;break;default:tag=AdapterJS.WebRTCPlugin.TAGS.NONE}var frag=document.createDocumentFragment(),temp=document.createElement(\"div\"),classHTML=\"\";for(element.className?classHTML='class=\"'+element.className+'\" ':element.attributes&&element.attributes.class&&(classHTML='class=\"'+element.attributes.class.value+'\" '),temp.innerHTML='<object id=\"'+elementId+'\" '+classHTML+'type=\"'+AdapterJS.WebRTCPlugin.pluginInfo.type+'\"><param name=\"pluginId\" value=\"'+elementId+'\" /> <param name=\"pageId\" value=\"'+AdapterJS.WebRTCPlugin.pageId+'\" /> <param name=\"windowless\" value=\"true\" /> <param name=\"streamId\" value=\"'+streamId+'\" /> <param name=\"tag\" value=\"'+tag+'\" /> </object>';temp.firstChild;)frag.appendChild(temp.firstChild);var height=\"\",width=\"\";element.clientWidth||element.clientHeight?(width=element.clientWidth,height=element.clientHeight):(element.width||element.height)&&(width=element.width,height=element.height),element.parentNode.insertBefore(frag,element),frag=document.getElementById(elementId),frag.width=width,frag.height=height,element.parentNode.removeChild(element)}else{for(var children=element.children,i=0;i!==children.length;++i)if(\"streamId\"===children[i].name){children[i].value=streamId;break}element.setStreamId(streamId)}var newElement=document.getElementById(elementId);return AdapterJS.forwardEventHandlers(newElement,element,Object.getPrototypeOf(element)),newElement}},reattachMediaStream=function(to,from){for(var stream=null,children=from.children,i=0;i!==children.length;++i)if(\"streamId\"===children[i].name){AdapterJS.WebRTCPlugin.WaitForPluginReady(),stream=AdapterJS.WebRTCPlugin.plugin.getStreamWithId(AdapterJS.WebRTCPlugin.pageId,children[i].value);break}if(null!==stream)return attachMediaStream(to,stream)},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=getUserMedia,AdapterJS.attachMediaStream=attachMediaStream,AdapterJS.reattachMediaStream=reattachMediaStream,AdapterJS.getUserMedia=getUserMedia,AdapterJS.forwardEventHandlers=function(destElem,srcElem,prototype){var properties=Object.getOwnPropertyNames(prototype);for(var prop in properties)if(prop){var propName=properties[prop];\"function\"==typeof propName.slice&&\"on\"===propName.slice(0,2)&&\"function\"==typeof srcElem[propName]&&AdapterJS.addEvent(destElem,propName.slice(2),srcElem[propName])}var subPrototype=Object.getPrototypeOf(prototype);subPrototype&&AdapterJS.forwardEventHandlers(destElem,srcElem,subPrototype)},RTCIceCandidate=function(candidate){return candidate.sdpMid||(candidate.sdpMid=\"\"),AdapterJS.WebRTCPlugin.WaitForPluginReady(),AdapterJS.WebRTCPlugin.plugin.ConstructIceCandidate(candidate.sdpMid,candidate.sdpMLineIndex,candidate.candidate)},AdapterJS.addEvent(document,\"readystatechange\",AdapterJS.WebRTCPlugin.injectPlugin),AdapterJS.WebRTCPlugin.injectPlugin()}},AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCb=AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCb||function(){AdapterJS.addEvent(document,\"readystatechange\",AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCbPriv),AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCbPriv()},AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCbPriv=function(){if(!AdapterJS.options.hidePluginInstallPrompt){var downloadLink=AdapterJS.WebRTCPlugin.pluginInfo.downloadLink;if(downloadLink){var popupString;popupString=AdapterJS.WebRTCPlugin.pluginInfo.portalLink?'This website requires you to install the  <a href=\"'+AdapterJS.WebRTCPlugin.pluginInfo.portalLink+'\" target=\"_blank\">'+AdapterJS.WebRTCPlugin.pluginInfo.companyName+\" WebRTC Plugin</a> to work on this browser.\":AdapterJS.TEXT.PLUGIN.REQUIRE_INSTALLATION,AdapterJS.renderNotificationBar(popupString,AdapterJS.TEXT.PLUGIN.BUTTON,function(){window.open(downloadLink,\"_top\");var pluginInstallInterval=setInterval(function(){isIE||navigator.plugins.refresh(!1),AdapterJS.WebRTCPlugin.isPluginInstalled(AdapterJS.WebRTCPlugin.pluginInfo.prefix,AdapterJS.WebRTCPlugin.pluginInfo.plugName,AdapterJS.WebRTCPlugin.pluginInfo.type,function(){clearInterval(pluginInstallInterval),AdapterJS.WebRTCPlugin.defineWebRTCInterface()},function(){})},500)})}else AdapterJS.renderNotificationBar(AdapterJS.TEXT.PLUGIN.NOT_SUPPORTED)}},AdapterJS.WebRTCPlugin.isPluginInstalled(AdapterJS.WebRTCPlugin.pluginInfo.prefix,AdapterJS.WebRTCPlugin.pluginInfo.plugName,AdapterJS.WebRTCPlugin.pluginInfo.type,AdapterJS.WebRTCPlugin.defineWebRTCInterface,AdapterJS.WebRTCPlugin.pluginNeededButNotInstalledCb)):(navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)&&window.RTCPeerConnection&&(window.msRTCPeerConnection=window.RTCPeerConnection),function(f){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=f();else if(\"function\"==typeof define&&define.amd)define([],f);else{var g;g=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,g.adapter=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=\"function\"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i=\"function\"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(requirecopy,module,exports){\"use strict\";var SDPUtils={};SDPUtils.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},SDPUtils.localCName=SDPUtils.generateIdentifier(),SDPUtils.splitLines=function(blob){return blob.trim().split(\"\\n\").map(function(line){return line.trim()})},SDPUtils.splitSections=function(blob){var parts=blob.split(\"\\nm=\");return parts.map(function(part,index){return(index>0?\"m=\"+part:part).trim()+\"\\r\\n\"})},SDPUtils.matchPrefix=function(blob,prefix){return SDPUtils.splitLines(blob).filter(function(line){return 0===line.indexOf(prefix)})},SDPUtils.parseCandidate=function(line){var parts;parts=0===line.indexOf(\"a=candidate:\")?line.substring(12).split(\" \"):line.substring(10).split(\" \");for(var candidate={foundation:parts[0],component:parts[1],protocol:parts[2].toLowerCase(),priority:parseInt(parts[3],10),ip:parts[4],port:parseInt(parts[5],10),type:parts[7]},i=8;i<parts.length;i+=2)switch(parts[i]){case\"raddr\":candidate.relatedAddress=parts[i+1];break;case\"rport\":candidate.relatedPort=parseInt(parts[i+1],10);break;case\"tcptype\":candidate.tcpType=parts[i+1]}return candidate},SDPUtils.writeCandidate=function(candidate){var sdp=[];sdp.push(candidate.foundation),sdp.push(candidate.component),sdp.push(candidate.protocol.toUpperCase()),sdp.push(candidate.priority),sdp.push(candidate.ip),sdp.push(candidate.port);var type=candidate.type;return sdp.push(\"typ\"),sdp.push(type),\"host\"!==type&&candidate.relatedAddress&&candidate.relatedPort&&(sdp.push(\"raddr\"),sdp.push(candidate.relatedAddress),sdp.push(\"rport\"),sdp.push(candidate.relatedPort)),candidate.tcpType&&\"tcp\"===candidate.protocol.toLowerCase()&&(sdp.push(\"tcptype\"),sdp.push(candidate.tcpType)),\"candidate:\"+sdp.join(\" \")},SDPUtils.parseRtpMap=function(line){var parts=line.substr(9).split(\" \"),parsed={payloadType:parseInt(parts.shift(),10)};return parts=parts[0].split(\"/\"),parsed.name=parts[0],parsed.clockRate=parseInt(parts[1],10),parsed.numChannels=3===parts.length?parseInt(parts[2],10):1,parsed},SDPUtils.writeRtpMap=function(codec){var pt=codec.payloadType;return void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),\"a=rtpmap:\"+pt+\" \"+codec.name+\"/\"+codec.clockRate+(1!==codec.numChannels?\"/\"+codec.numChannels:\"\")+\"\\r\\n\"},SDPUtils.parseExtmap=function(line){var parts=line.substr(9).split(\" \");return{id:parseInt(parts[0],10),uri:parts[1]}},SDPUtils.writeExtmap=function(headerExtension){return\"a=extmap:\"+(headerExtension.id||headerExtension.preferredId)+\" \"+headerExtension.uri+\"\\r\\n\"},SDPUtils.parseFmtp=function(line){for(var kv,parsed={},parts=line.substr(line.indexOf(\" \")+1).split(\";\"),j=0;j<parts.length;j++)kv=parts[j].trim().split(\"=\"),parsed[kv[0].trim()]=kv[1];return parsed},SDPUtils.writeFmtp=function(codec){var line=\"\",pt=codec.payloadType;if(void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.parameters&&Object.keys(codec.parameters).length){var params=[];Object.keys(codec.parameters).forEach(function(param){params.push(param+\"=\"+codec.parameters[param])}),line+=\"a=fmtp:\"+pt+\" \"+params.join(\";\")+\"\\r\\n\"}return line},SDPUtils.parseRtcpFb=function(line){var parts=line.substr(line.indexOf(\" \")+1).split(\" \");return{type:parts.shift(),parameter:parts.join(\" \")}},SDPUtils.writeRtcpFb=function(codec){var lines=\"\",pt=codec.payloadType;return void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.rtcpFeedback&&codec.rtcpFeedback.length&&codec.rtcpFeedback.forEach(function(fb){lines+=\"a=rtcp-fb:\"+pt+\" \"+fb.type+(fb.parameter&&fb.parameter.length?\" \"+fb.parameter:\"\")+\"\\r\\n\"}),lines},SDPUtils.parseSsrcMedia=function(line){var sp=line.indexOf(\" \"),parts={ssrc:parseInt(line.substr(7,sp-7),10)},colon=line.indexOf(\":\",sp);return colon>-1?(parts.attribute=line.substr(sp+1,colon-sp-1),parts.value=line.substr(colon+1)):parts.attribute=line.substr(sp+1),parts},SDPUtils.getMid=function(mediaSection){var mid=SDPUtils.matchPrefix(mediaSection,\"a=mid:\")[0];if(mid)return mid.substr(6)},SDPUtils.getDtlsParameters=function(mediaSection,sessionpart){var lines=SDPUtils.splitLines(mediaSection);lines=lines.concat(SDPUtils.splitLines(sessionpart));var fpLine=lines.filter(function(line){return 0===line.indexOf(\"a=fingerprint:\")})[0].substr(14),dtlsParameters={role:\"auto\",fingerprints:[{algorithm:fpLine.split(\" \")[0].toLowerCase(),value:fpLine.split(\" \")[1]}]};return dtlsParameters},SDPUtils.writeDtlsParameters=function(params,setupType){var sdp=\"a=setup:\"+setupType+\"\\r\\n\";return params.fingerprints.forEach(function(fp){sdp+=\"a=fingerprint:\"+fp.algorithm+\" \"+fp.value+\"\\r\\n\"}),sdp},SDPUtils.getIceParameters=function(mediaSection,sessionpart){var lines=SDPUtils.splitLines(mediaSection);lines=lines.concat(SDPUtils.splitLines(sessionpart));var iceParameters={usernameFragment:lines.filter(function(line){return 0===line.indexOf(\"a=ice-ufrag:\")})[0].substr(12),password:lines.filter(function(line){return 0===line.indexOf(\"a=ice-pwd:\")})[0].substr(10)};return iceParameters},SDPUtils.writeIceParameters=function(params){return\"a=ice-ufrag:\"+params.usernameFragment+\"\\r\\na=ice-pwd:\"+params.password+\"\\r\\n\"},SDPUtils.parseRtpParameters=function(mediaSection){for(var description={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},lines=SDPUtils.splitLines(mediaSection),mline=lines[0].split(\" \"),i=3;i<mline.length;i++){var pt=mline[i],rtpmapline=SDPUtils.matchPrefix(mediaSection,\"a=rtpmap:\"+pt+\" \")[0];if(rtpmapline){var codec=SDPUtils.parseRtpMap(rtpmapline),fmtps=SDPUtils.matchPrefix(mediaSection,\"a=fmtp:\"+pt+\" \");switch(codec.parameters=fmtps.length?SDPUtils.parseFmtp(fmtps[0]):{},codec.rtcpFeedback=SDPUtils.matchPrefix(mediaSection,\"a=rtcp-fb:\"+pt+\" \").map(SDPUtils.parseRtcpFb),description.codecs.push(codec),codec.name.toUpperCase()){case\"RED\":case\"ULPFEC\":description.fecMechanisms.push(codec.name.toUpperCase())}}}return SDPUtils.matchPrefix(mediaSection,\"a=extmap:\").forEach(function(line){\ndescription.headerExtensions.push(SDPUtils.parseExtmap(line))}),description},SDPUtils.writeRtpDescription=function(kind,caps){var sdp=\"\";sdp+=\"m=\"+kind+\" \",sdp+=caps.codecs.length>0?\"9\":\"0\",sdp+=\" UDP/TLS/RTP/SAVPF \",sdp+=caps.codecs.map(function(codec){return void 0!==codec.preferredPayloadType?codec.preferredPayloadType:codec.payloadType}).join(\" \")+\"\\r\\n\",sdp+=\"c=IN IP4 0.0.0.0\\r\\n\",sdp+=\"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\",caps.codecs.forEach(function(codec){sdp+=SDPUtils.writeRtpMap(codec),sdp+=SDPUtils.writeFmtp(codec),sdp+=SDPUtils.writeRtcpFb(codec)});var maxptime=0;return caps.codecs.forEach(function(codec){codec.maxptime>maxptime&&(maxptime=codec.maxptime)}),maxptime>0&&(sdp+=\"a=maxptime:\"+maxptime+\"\\r\\n\"),sdp+=\"a=rtcp-mux\\r\\n\",caps.headerExtensions.forEach(function(extension){sdp+=SDPUtils.writeExtmap(extension)}),sdp},SDPUtils.parseRtpEncodingParameters=function(mediaSection){var secondarySsrc,encodingParameters=[],description=SDPUtils.parseRtpParameters(mediaSection),hasRed=description.fecMechanisms.indexOf(\"RED\")!==-1,hasUlpfec=description.fecMechanisms.indexOf(\"ULPFEC\")!==-1,ssrcs=SDPUtils.matchPrefix(mediaSection,\"a=ssrc:\").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(parts){return\"cname\"===parts.attribute}),primarySsrc=ssrcs.length>0&&ssrcs[0].ssrc,flows=SDPUtils.matchPrefix(mediaSection,\"a=ssrc-group:FID\").map(function(line){var parts=line.split(\" \");return parts.shift(),parts.map(function(part){return parseInt(part,10)})});flows.length>0&&flows[0].length>1&&flows[0][0]===primarySsrc&&(secondarySsrc=flows[0][1]),description.codecs.forEach(function(codec){if(\"RTX\"===codec.name.toUpperCase()&&codec.parameters.apt){var encParam={ssrc:primarySsrc,codecPayloadType:parseInt(codec.parameters.apt,10),rtx:{ssrc:secondarySsrc}};encodingParameters.push(encParam),hasRed&&(encParam=JSON.parse(JSON.stringify(encParam)),encParam.fec={ssrc:secondarySsrc,mechanism:hasUlpfec?\"red+ulpfec\":\"red\"},encodingParameters.push(encParam))}}),0===encodingParameters.length&&primarySsrc&&encodingParameters.push({ssrc:primarySsrc});var bandwidth=SDPUtils.matchPrefix(mediaSection,\"b=\");return bandwidth.length&&(0===bandwidth[0].indexOf(\"b=TIAS:\")?bandwidth=parseInt(bandwidth[0].substr(7),10):0===bandwidth[0].indexOf(\"b=AS:\")&&(bandwidth=parseInt(bandwidth[0].substr(5),10)),encodingParameters.forEach(function(params){params.maxBitrate=bandwidth})),encodingParameters},SDPUtils.parseRtcpParameters=function(mediaSection){var rtcpParameters={},remoteSsrc=SDPUtils.matchPrefix(mediaSection,\"a=ssrc:\").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(obj){return\"cname\"===obj.attribute})[0];remoteSsrc&&(rtcpParameters.cname=remoteSsrc.value,rtcpParameters.ssrc=remoteSsrc.ssrc);var rsize=SDPUtils.matchPrefix(mediaSection,\"a=rtcp-rsize\");rtcpParameters.reducedSize=rsize.length>0,rtcpParameters.compound=0===rsize.length;var mux=SDPUtils.matchPrefix(mediaSection,\"a=rtcp-mux\");return rtcpParameters.mux=mux.length>0,rtcpParameters},SDPUtils.parseMsid=function(mediaSection){var parts,spec=SDPUtils.matchPrefix(mediaSection,\"a=msid:\");if(1===spec.length)return parts=spec[0].substr(7).split(\" \"),{stream:parts[0],track:parts[1]};var planB=SDPUtils.matchPrefix(mediaSection,\"a=ssrc:\").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(parts){return\"msid\"===parts.attribute});return planB.length>0?(parts=planB[0].value.split(\" \"),{stream:parts[0],track:parts[1]}):void 0},SDPUtils.writeSessionBoilerplate=function(){return\"v=0\\r\\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n\"},SDPUtils.writeMediaSection=function(transceiver,caps,type,stream){var sdp=SDPUtils.writeRtpDescription(transceiver.kind,caps);if(sdp+=SDPUtils.writeIceParameters(transceiver.iceGatherer.getLocalParameters()),sdp+=SDPUtils.writeDtlsParameters(transceiver.dtlsTransport.getLocalParameters(),\"offer\"===type?\"actpass\":\"active\"),sdp+=\"a=mid:\"+transceiver.mid+\"\\r\\n\",sdp+=transceiver.rtpSender&&transceiver.rtpReceiver?\"a=sendrecv\\r\\n\":transceiver.rtpSender?\"a=sendonly\\r\\n\":transceiver.rtpReceiver?\"a=recvonly\\r\\n\":\"a=inactive\\r\\n\",transceiver.rtpSender){var msid=\"msid:\"+stream.id+\" \"+transceiver.rtpSender.track.id+\"\\r\\n\";sdp+=\"a=\"+msid,sdp+=\"a=ssrc:\"+transceiver.sendEncodingParameters[0].ssrc+\" \"+msid,transceiver.sendEncodingParameters[0].rtx&&(sdp+=\"a=ssrc:\"+transceiver.sendEncodingParameters[0].rtx.ssrc+\" \"+msid,sdp+=\"a=ssrc-group:FID \"+transceiver.sendEncodingParameters[0].ssrc+\" \"+transceiver.sendEncodingParameters[0].rtx.ssrc+\"\\r\\n\")}return sdp+=\"a=ssrc:\"+transceiver.sendEncodingParameters[0].ssrc+\" cname:\"+SDPUtils.localCName+\"\\r\\n\",transceiver.rtpSender&&transceiver.sendEncodingParameters[0].rtx&&(sdp+=\"a=ssrc:\"+transceiver.sendEncodingParameters[0].rtx.ssrc+\" cname:\"+SDPUtils.localCName+\"\\r\\n\"),sdp},SDPUtils.getDirection=function(mediaSection,sessionpart){for(var lines=SDPUtils.splitLines(mediaSection),i=0;i<lines.length;i++)switch(lines[i]){case\"a=sendrecv\":case\"a=sendonly\":case\"a=recvonly\":case\"a=inactive\":return lines[i].substr(2)}return sessionpart?SDPUtils.getDirection(sessionpart):\"sendrecv\"},SDPUtils.getKind=function(mediaSection){var lines=SDPUtils.splitLines(mediaSection),mline=lines[0].split(\" \");return mline[0].substr(2)},SDPUtils.isRejected=function(mediaSection){return\"0\"===mediaSection.split(\" \",2)[1]},module.exports=SDPUtils},{}],2:[function(requirecopy,module,exports){\"use strict\";!function(){var logging=requirecopy(\"./utils\").log,browserDetails=requirecopy(\"./utils\").browserDetails;module.exports.browserDetails=browserDetails,module.exports.extractVersion=requirecopy(\"./utils\").extractVersion,module.exports.disableLog=requirecopy(\"./utils\").disableLog;var chromeShim=requirecopy(\"./chrome/chrome_shim\")||null,edgeShim=requirecopy(\"./edge/edge_shim\")||null,firefoxShim=requirecopy(\"./firefox/firefox_shim\")||null,safariShim=requirecopy(\"./safari/safari_shim\")||null;switch(browserDetails.browser){case\"opera\":case\"chrome\":if(!chromeShim||!chromeShim.shimPeerConnection)return void logging(\"Chrome shim is not included in this adapter release.\");logging(\"adapter.js shimming chrome.\"),module.exports.browserShim=chromeShim,chromeShim.shimGetUserMedia(),chromeShim.shimMediaStream(),chromeShim.shimSourceObject(),chromeShim.shimPeerConnection(),chromeShim.shimOnTrack();break;case\"firefox\":if(!firefoxShim||!firefoxShim.shimPeerConnection)return void logging(\"Firefox shim is not included in this adapter release.\");logging(\"adapter.js shimming firefox.\"),module.exports.browserShim=firefoxShim,firefoxShim.shimGetUserMedia(),firefoxShim.shimSourceObject(),firefoxShim.shimPeerConnection(),firefoxShim.shimOnTrack();break;case\"edge\":if(!edgeShim||!edgeShim.shimPeerConnection)return void logging(\"MS edge shim is not included in this adapter release.\");logging(\"adapter.js shimming edge.\"),module.exports.browserShim=edgeShim,edgeShim.shimGetUserMedia(),edgeShim.shimPeerConnection();break;case\"safari\":if(!safariShim)return void logging(\"Safari shim is not included in this adapter release.\");logging(\"adapter.js shimming safari.\"),module.exports.browserShim=safariShim,safariShim.shimGetUserMedia();break;default:logging(\"Unsupported browser!\")}}()},{\"./chrome/chrome_shim\":3,\"./edge/edge_shim\":5,\"./firefox/firefox_shim\":7,\"./safari/safari_shim\":9,\"./utils\":10}],3:[function(requirecopy,module,exports){\"use strict\";var logging=requirecopy(\"../utils.js\").log,browserDetails=requirecopy(\"../utils.js\").browserDetails,chromeShim={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){\"object\"!=typeof window||!window.RTCPeerConnection||\"ontrack\"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,\"ontrack\",{get:function(){return this._ontrack},set:function(f){var self=this;this._ontrack&&(this.removeEventListener(\"track\",this._ontrack),this.removeEventListener(\"addstream\",this._ontrackpoly)),this.addEventListener(\"track\",this._ontrack=f),this.addEventListener(\"addstream\",this._ontrackpoly=function(e){e.stream.addEventListener(\"addtrack\",function(te){var event=new Event(\"track\");event.track=te.track,event.receiver={track:te.track},event.streams=[e.stream],self.dispatchEvent(event)}),e.stream.getTracks().forEach(function(track){var event=new Event(\"track\");event.track=track,event.receiver={track:track},event.streams=[e.stream],this.dispatchEvent(event)}.bind(this))}.bind(this))}})},shimSourceObject:function(){\"object\"==typeof window&&(!window.HTMLMediaElement||\"srcObject\"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,\"srcObject\",{get:function(){return this._srcObject},set:function(stream){var self=this;return this._srcObject=stream,this.src&&URL.revokeObjectURL(this.src),stream?(this.src=URL.createObjectURL(stream),stream.addEventListener(\"addtrack\",function(){self.src&&URL.revokeObjectURL(self.src),self.src=URL.createObjectURL(stream)}),void stream.addEventListener(\"removetrack\",function(){self.src&&URL.revokeObjectURL(self.src),self.src=URL.createObjectURL(stream)})):void(this.src=\"\")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(pcConfig,pcConstraints){logging(\"PeerConnection\"),pcConfig&&pcConfig.iceTransportPolicy&&(pcConfig.iceTransports=pcConfig.iceTransportPolicy);var pc=new webkitRTCPeerConnection(pcConfig,pcConstraints),origGetStats=pc.getStats.bind(pc);return pc.getStats=function(selector,successCallback,errorCallback){var self=this,args=arguments;if(arguments.length>0&&\"function\"==typeof selector)return origGetStats(selector,successCallback);var fixChromeStats_=function(response){var standardReport={},reports=response.result();return reports.forEach(function(report){var standardStats={id:report.id,timestamp:report.timestamp,type:report.type};report.names().forEach(function(name){standardStats[name]=report.stat(name)}),standardReport[standardStats.id]=standardStats}),standardReport},makeMapStats=function(stats,legacyStats){var map=new Map(Object.keys(stats).map(function(key){return[key,stats[key]]}));return legacyStats=legacyStats||stats,Object.keys(legacyStats).forEach(function(key){map[key]=legacyStats[key]}),map};if(arguments.length>=2){var successCallbackWrapper_=function(response){args[1](makeMapStats(fixChromeStats_(response)))};return origGetStats.apply(this,[successCallbackWrapper_,arguments[0]])}return new Promise(function(resolve,reject){1===args.length&&\"object\"==typeof selector?origGetStats.apply(self,[function(response){resolve(makeMapStats(fixChromeStats_(response)))},reject]):origGetStats.apply(self,[function(response){resolve(makeMapStats(fixChromeStats_(response),response.result()))},reject])}).then(successCallback,errorCallback)},pc},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,\"generateCertificate\",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),[\"createOffer\",\"createAnswer\"].forEach(function(method){var nativeMethod=webkitRTCPeerConnection.prototype[method];webkitRTCPeerConnection.prototype[method]=function(){var self=this;if(arguments.length<1||1===arguments.length&&\"object\"==typeof arguments[0]){var opts=1===arguments.length?arguments[0]:void 0;return new Promise(function(resolve,reject){nativeMethod.apply(self,[resolve,reject,opts])})}return nativeMethod.apply(this,arguments)}}),browserDetails.version<51&&[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach(function(method){var nativeMethod=webkitRTCPeerConnection.prototype[method];webkitRTCPeerConnection.prototype[method]=function(){var args=arguments,self=this,promise=new Promise(function(resolve,reject){nativeMethod.apply(self,[args[0],resolve,reject])});return args.length<2?promise:promise.then(function(){args[1].apply(null,[])},function(err){args.length>=3&&args[2].apply(null,[err])})}}),[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach(function(method){var nativeMethod=webkitRTCPeerConnection.prototype[method];webkitRTCPeerConnection.prototype[method]=function(){return arguments[0]=new(\"addIceCandidate\"===method?RTCIceCandidate:RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}});var nativeAddIceCandidate=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():nativeAddIceCandidate.apply(this,arguments)}}};module.exports={shimMediaStream:chromeShim.shimMediaStream,shimOnTrack:chromeShim.shimOnTrack,shimSourceObject:chromeShim.shimSourceObject,shimPeerConnection:chromeShim.shimPeerConnection,shimGetUserMedia:requirecopy(\"./getusermedia\")}},{\"../utils.js\":10,\"./getusermedia\":4}],4:[function(requirecopy,module,exports){\"use strict\";var logging=requirecopy(\"../utils.js\").log;module.exports=function(){var constraintsToChrome_=function(c){if(\"object\"!=typeof c||c.mandatory||c.optional)return c;var cc={};return Object.keys(c).forEach(function(key){if(\"require\"!==key&&\"advanced\"!==key&&\"mediaSource\"!==key){var r=\"object\"==typeof c[key]?c[key]:{ideal:c[key]};void 0!==r.exact&&\"number\"==typeof r.exact&&(r.min=r.max=r.exact);var oldname_=function(prefix,name){return prefix?prefix+name.charAt(0).toUpperCase()+name.slice(1):\"deviceId\"===name?\"sourceId\":name};if(void 0!==r.ideal){cc.optional=cc.optional||[];var oc={};\"number\"==typeof r.ideal?(oc[oldname_(\"min\",key)]=r.ideal,cc.optional.push(oc),oc={},oc[oldname_(\"max\",key)]=r.ideal,cc.optional.push(oc)):(oc[oldname_(\"\",key)]=r.ideal,cc.optional.push(oc))}void 0!==r.exact&&\"number\"!=typeof r.exact?(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_(\"\",key)]=r.exact):[\"min\",\"max\"].forEach(function(mix){void 0!==r[mix]&&(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_(mix,key)]=r[mix])})}}),c.advanced&&(cc.optional=(cc.optional||[]).concat(c.advanced)),cc},shimConstraints_=function(constraints,func){if(constraints=JSON.parse(JSON.stringify(constraints)),constraints&&constraints.audio&&(constraints.audio=constraintsToChrome_(constraints.audio)),constraints&&\"object\"==typeof constraints.video){var face=constraints.video.facingMode;if(face=face&&(\"object\"==typeof face?face:{ideal:face}),face&&(\"user\"===face.exact||\"environment\"===face.exact||\"user\"===face.ideal||\"environment\"===face.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete constraints.video.facingMode,\"environment\"===face.exact||\"environment\"===face.ideal))return navigator.mediaDevices.enumerateDevices().then(function(devices){devices=devices.filter(function(d){return\"videoinput\"===d.kind});var back=devices.find(function(d){return d.label.toLowerCase().indexOf(\"back\")!==-1})||devices.length&&devices[devices.length-1];return back&&(constraints.video.deviceId=face.exact?{exact:back.deviceId}:{ideal:back.deviceId}),constraints.video=constraintsToChrome_(constraints.video),logging(\"chrome: \"+JSON.stringify(constraints)),func(constraints)});constraints.video=constraintsToChrome_(constraints.video)}return logging(\"chrome: \"+JSON.stringify(constraints)),func(constraints)},shimError_=function(e){return{name:{PermissionDeniedError:\"NotAllowedError\",ConstraintNotSatisfiedError:\"OverconstrainedError\"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&\": \")+this.message}}},getUserMedia_=function(constraints,onSuccess,onError){shimConstraints_(constraints,function(c){navigator.webkitGetUserMedia(c,onSuccess,function(e){onError(shimError_(e))})})};navigator.getUserMedia=getUserMedia_;var getUserMediaPromise_=function(constraints){return new Promise(function(resolve,reject){navigator.getUserMedia(constraints,resolve,reject)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:getUserMediaPromise_,enumerateDevices:function(){return new Promise(function(resolve){var kinds={audio:\"audioinput\",video:\"videoinput\"};return MediaStreamTrack.getSources(function(devices){resolve(devices.map(function(device){return{label:device.label,kind:kinds[device.kind],deviceId:device.id,groupId:\"\"}}))})})}}),navigator.mediaDevices.getUserMedia){var origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(cs){return shimConstraints_(cs,function(c){return origGetUserMedia(c).catch(function(e){return Promise.reject(shimError_(e))})})}}else navigator.mediaDevices.getUserMedia=function(constraints){return getUserMediaPromise_(constraints)};\"undefined\"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){logging(\"Dummy mediaDevices.addEventListener called.\")}),\"undefined\"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){logging(\"Dummy mediaDevices.removeEventListener called.\")})}},{\"../utils.js\":10}],5:[function(requirecopy,module,exports){\"use strict\";var SDPUtils=requirecopy(\"sdp\"),browserDetails=requirecopy(\"../utils\").browserDetails,edgeShim={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(args){return args}),window.RTCSessionDescription||(window.RTCSessionDescription=function(args){return args})),window.RTCPeerConnection=function(config){var self=this,_eventTarget=document.createDocumentFragment();if([\"addEventListener\",\"removeEventListener\",\"dispatchEvent\"].forEach(function(method){self[method]=_eventTarget[method].bind(_eventTarget)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return self.localStreams},this.getRemoteStreams=function(){return self.remoteStreams},this.localDescription=new RTCSessionDescription({type:\"\",sdp:\"\"}),this.remoteDescription=new RTCSessionDescription({type:\"\",sdp:\"\"}),this.signalingState=\"stable\",this.iceConnectionState=\"new\",this.iceGatheringState=\"new\",this.iceOptions={gatherPolicy:\"all\",iceServers:[]},config&&config.iceTransportPolicy)switch(config.iceTransportPolicy){case\"all\":case\"relay\":this.iceOptions.gatherPolicy=config.iceTransportPolicy;break;case\"none\":throw new TypeError('iceTransportPolicy \"none\" not supported')}if(this.usingBundle=config&&\"max-bundle\"===config.bundlePolicy,config&&config.iceServers){var iceServers=JSON.parse(JSON.stringify(config.iceServers));this.iceOptions.iceServers=iceServers.filter(function(server){if(server&&server.urls){var urls=server.urls;return\"string\"==typeof urls&&(urls=[urls]),urls=urls.filter(function(url){return 0===url.indexOf(\"turn:\")&&url.indexOf(\"transport=udp\")!==-1&&url.indexOf(\"turn:[\")===-1||0===url.indexOf(\"stun:\")&&browserDetails.version>=14393})[0],!!urls}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var self=this,sections=SDPUtils.splitSections(self.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(event){var end=!event.candidate||0===Object.keys(event.candidate).length;if(end)for(var j=1;j<sections.length;j++)sections[j].indexOf(\"\\r\\na=end-of-candidates\\r\\n\")===-1&&(sections[j]+=\"a=end-of-candidates\\r\\n\");else event.candidate.candidate.indexOf(\"typ endOfCandidates\")===-1&&(sections[event.candidate.sdpMLineIndex+1]+=\"a=\"+event.candidate.candidate+\"\\r\\n\");if(self.localDescription.sdp=sections.join(\"\"),self.dispatchEvent(event),null!==self.onicecandidate&&self.onicecandidate(event),!event.candidate&&\"complete\"!==self.iceGatheringState){var complete=self.transceivers.every(function(transceiver){return transceiver.iceGatherer&&\"completed\"===transceiver.iceGatherer.state});complete&&(self.iceGatheringState=\"complete\")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(stream){this.localStreams.push(stream.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(stream){var idx=this.localStreams.indexOf(stream);idx>-1&&(this.localStreams.splice(idx,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(transceiver){return!!transceiver.rtpSender}).map(function(transceiver){return transceiver.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(transceiver){return!!transceiver.rtpReceiver}).map(function(transceiver){return transceiver.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(localCapabilities,remoteCapabilities){var commonCapabilities={codecs:[],headerExtensions:[],fecMechanisms:[]};return localCapabilities.codecs.forEach(function(lCodec){for(var i=0;i<remoteCapabilities.codecs.length;i++){var rCodec=remoteCapabilities.codecs[i];if(lCodec.name.toLowerCase()===rCodec.name.toLowerCase()&&lCodec.clockRate===rCodec.clockRate&&lCodec.numChannels===rCodec.numChannels){commonCapabilities.codecs.push(rCodec),rCodec.rtcpFeedback=rCodec.rtcpFeedback.filter(function(fb){for(var j=0;j<lCodec.rtcpFeedback.length;j++)if(lCodec.rtcpFeedback[j].type===fb.type&&lCodec.rtcpFeedback[j].parameter===fb.parameter)return!0;return!1});break}}}),localCapabilities.headerExtensions.forEach(function(lHeaderExtension){for(var i=0;i<remoteCapabilities.headerExtensions.length;i++){var rHeaderExtension=remoteCapabilities.headerExtensions[i];if(lHeaderExtension.uri===rHeaderExtension.uri){commonCapabilities.headerExtensions.push(rHeaderExtension);break}}}),commonCapabilities},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(mid,sdpMLineIndex){var self=this,iceGatherer=new RTCIceGatherer(self.iceOptions),iceTransport=new RTCIceTransport(iceGatherer);iceGatherer.onlocalcandidate=function(evt){var event=new Event(\"icecandidate\");event.candidate={sdpMid:mid,sdpMLineIndex:sdpMLineIndex};var cand=evt.candidate,end=!cand||0===Object.keys(cand).length;end?(void 0===iceGatherer.state&&(iceGatherer.state=\"completed\"),event.candidate.candidate=\"candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates\"):(cand.component=\"RTCP\"===iceTransport.component?2:1,event.candidate.candidate=SDPUtils.writeCandidate(cand));var sections=SDPUtils.splitSections(self.localDescription.sdp);event.candidate.candidate.indexOf(\"typ endOfCandidates\")===-1?sections[event.candidate.sdpMLineIndex+1]+=\"a=\"+event.candidate.candidate+\"\\r\\n\":sections[event.candidate.sdpMLineIndex+1]+=\"a=end-of-candidates\\r\\n\",self.localDescription.sdp=sections.join(\"\");var complete=self.transceivers.every(function(transceiver){return transceiver.iceGatherer&&\"completed\"===transceiver.iceGatherer.state});switch(self.iceGatheringState){case\"new\":self._localIceCandidatesBuffer.push(event),end&&complete&&self._localIceCandidatesBuffer.push(new Event(\"icecandidate\"));break;case\"gathering\":self._emitBufferedCandidates(),self.dispatchEvent(event),null!==self.onicecandidate&&self.onicecandidate(event),complete&&(self.dispatchEvent(new Event(\"icecandidate\")),null!==self.onicecandidate&&self.onicecandidate(new Event(\"icecandidate\")),self.iceGatheringState=\"complete\");break;case\"complete\":}},iceTransport.onicestatechange=function(){self._updateConnectionState()};var dtlsTransport=new RTCDtlsTransport(iceTransport);return dtlsTransport.ondtlsstatechange=function(){self._updateConnectionState()},dtlsTransport.onerror=function(){dtlsTransport.state=\"failed\",self._updateConnectionState()},{iceGatherer:iceGatherer,iceTransport:iceTransport,dtlsTransport:dtlsTransport}},window.RTCPeerConnection.prototype._transceive=function(transceiver,send,recv){var params=this._getCommonCapabilities(transceiver.localCapabilities,transceiver.remoteCapabilities);send&&transceiver.rtpSender&&(params.encodings=transceiver.sendEncodingParameters,params.rtcp={cname:SDPUtils.localCName},transceiver.recvEncodingParameters.length&&(params.rtcp.ssrc=transceiver.recvEncodingParameters[0].ssrc),transceiver.rtpSender.send(params)),recv&&transceiver.rtpReceiver&&(params.encodings=transceiver.recvEncodingParameters,params.rtcp={cname:transceiver.cname},transceiver.sendEncodingParameters.length&&(params.rtcp.ssrc=transceiver.sendEncodingParameters[0].ssrc),transceiver.rtpReceiver.receive(params))},window.RTCPeerConnection.prototype.setLocalDescription=function(description){var sections,sessionpart,self=this;if(\"offer\"===description.type)this._pendingOffer&&(sections=SDPUtils.splitSections(description.sdp),sessionpart=sections.shift(),sections.forEach(function(mediaSection,sdpMLineIndex){var caps=SDPUtils.parseRtpParameters(mediaSection);self._pendingOffer[sdpMLineIndex].localCapabilities=caps}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if(\"answer\"===description.type){sections=SDPUtils.splitSections(self.remoteDescription.sdp),sessionpart=sections.shift();var isIceLite=SDPUtils.matchPrefix(sessionpart,\"a=ice-lite\").length>0;sections.forEach(function(mediaSection,sdpMLineIndex){var transceiver=self.transceivers[sdpMLineIndex],iceGatherer=transceiver.iceGatherer,iceTransport=transceiver.iceTransport,dtlsTransport=transceiver.dtlsTransport,localCapabilities=transceiver.localCapabilities,remoteCapabilities=transceiver.remoteCapabilities,rejected=\"0\"===mediaSection.split(\"\\n\",1)[0].split(\" \",2)[1];if(!rejected&&!transceiver.isDatachannel){var remoteIceParameters=SDPUtils.getIceParameters(mediaSection,sessionpart);if(isIceLite){var cands=SDPUtils.matchPrefix(mediaSection,\"a=candidate:\").map(function(cand){return SDPUtils.parseCandidate(cand)}).filter(function(cand){return\"1\"===cand.component});cands.length&&iceTransport.setRemoteCandidates(cands)}var remoteDtlsParameters=SDPUtils.getDtlsParameters(mediaSection,sessionpart);isIceLite&&(remoteDtlsParameters.role=\"server\"),self.usingBundle&&0!==sdpMLineIndex||(iceTransport.start(iceGatherer,remoteIceParameters,isIceLite?\"controlling\":\"controlled\"),dtlsTransport.start(remoteDtlsParameters));var params=self._getCommonCapabilities(localCapabilities,remoteCapabilities);self._transceive(transceiver,params.codecs.length>0,!1)}})}switch(this.localDescription={type:description.type,sdp:description.sdp},description.type){case\"offer\":this._updateSignalingState(\"have-local-offer\");break;case\"answer\":this._updateSignalingState(\"stable\");break;default:throw new TypeError('unsupported type \"'+description.type+'\"')}var hasCallback=arguments.length>1&&\"function\"==typeof arguments[1];if(hasCallback){var cb=arguments[1];window.setTimeout(function(){cb(),\"new\"===self.iceGatheringState&&(self.iceGatheringState=\"gathering\"),self._emitBufferedCandidates()},0)}var p=Promise.resolve();return p.then(function(){hasCallback||(\"new\"===self.iceGatheringState&&(self.iceGatheringState=\"gathering\"),window.setTimeout(self._emitBufferedCandidates.bind(self),500))}),p},window.RTCPeerConnection.prototype.setRemoteDescription=function(description){var self=this,stream=new MediaStream,receiverList=[],sections=SDPUtils.splitSections(description.sdp),sessionpart=sections.shift(),isIceLite=SDPUtils.matchPrefix(sessionpart,\"a=ice-lite\").length>0;switch(this.usingBundle=SDPUtils.matchPrefix(sessionpart,\"a=group:BUNDLE \").length>0,sections.forEach(function(mediaSection,sdpMLineIndex){var lines=SDPUtils.splitLines(mediaSection),mline=lines[0].substr(2).split(\" \"),kind=mline[0],rejected=\"0\"===mline[1],direction=SDPUtils.getDirection(mediaSection,sessionpart),mid=SDPUtils.matchPrefix(mediaSection,\"a=mid:\");if(mid=mid.length?mid[0].substr(6):SDPUtils.generateIdentifier(),\"application\"===kind&&\"DTLS/SCTP\"===mline[2])return void(self.transceivers[sdpMLineIndex]={mid:mid,isDatachannel:!0});var transceiver,iceGatherer,iceTransport,dtlsTransport,rtpSender,rtpReceiver,sendEncodingParameters,recvEncodingParameters,localCapabilities,track,remoteIceParameters,remoteDtlsParameters,remoteCapabilities=SDPUtils.parseRtpParameters(mediaSection);rejected||(remoteIceParameters=SDPUtils.getIceParameters(mediaSection,sessionpart),remoteDtlsParameters=SDPUtils.getDtlsParameters(mediaSection,sessionpart),remoteDtlsParameters.role=\"client\"),recvEncodingParameters=SDPUtils.parseRtpEncodingParameters(mediaSection);var cname,remoteSsrc=SDPUtils.matchPrefix(mediaSection,\"a=ssrc:\").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(obj){return\"cname\"===obj.attribute})[0];remoteSsrc&&(cname=remoteSsrc.value);var isComplete=SDPUtils.matchPrefix(mediaSection,\"a=end-of-candidates\",sessionpart).length>0,cands=SDPUtils.matchPrefix(mediaSection,\"a=candidate:\").map(function(cand){return SDPUtils.parseCandidate(cand)}).filter(function(cand){return\"1\"===cand.component});if(\"offer\"!==description.type||rejected)\"answer\"!==description.type||rejected||(transceiver=self.transceivers[sdpMLineIndex],iceGatherer=transceiver.iceGatherer,iceTransport=transceiver.iceTransport,dtlsTransport=transceiver.dtlsTransport,rtpSender=transceiver.rtpSender,rtpReceiver=transceiver.rtpReceiver,sendEncodingParameters=transceiver.sendEncodingParameters,localCapabilities=transceiver.localCapabilities,self.transceivers[sdpMLineIndex].recvEncodingParameters=recvEncodingParameters,self.transceivers[sdpMLineIndex].remoteCapabilities=remoteCapabilities,self.transceivers[sdpMLineIndex].cname=cname,(isIceLite||isComplete)&&cands.length&&iceTransport.setRemoteCandidates(cands),self.usingBundle&&0!==sdpMLineIndex||(iceTransport.start(iceGatherer,remoteIceParameters,\"controlling\"),dtlsTransport.start(remoteDtlsParameters)),self._transceive(transceiver,\"sendrecv\"===direction||\"recvonly\"===direction,\"sendrecv\"===direction||\"sendonly\"===direction),!rtpReceiver||\"sendrecv\"!==direction&&\"sendonly\"!==direction?delete transceiver.rtpReceiver:(track=rtpReceiver.track,receiverList.push([track,rtpReceiver]),stream.addTrack(track)));else{var transports=self.usingBundle&&sdpMLineIndex>0?{iceGatherer:self.transceivers[0].iceGatherer,iceTransport:self.transceivers[0].iceTransport,dtlsTransport:self.transceivers[0].dtlsTransport}:self._createIceAndDtlsTransports(mid,sdpMLineIndex);if(isComplete&&transports.iceTransport.setRemoteCandidates(cands),localCapabilities=RTCRtpReceiver.getCapabilities(kind),sendEncodingParameters=[{ssrc:1001*(2*sdpMLineIndex+2)}],rtpReceiver=new RTCRtpReceiver(transports.dtlsTransport,kind),track=rtpReceiver.track,receiverList.push([track,rtpReceiver]),stream.addTrack(track),self.localStreams.length>0&&self.localStreams[0].getTracks().length>=sdpMLineIndex){var localTrack;\"audio\"===kind?localTrack=self.localStreams[0].getAudioTracks()[0]:\"video\"===kind&&(localTrack=self.localStreams[0].getVideoTracks()[0]),localTrack&&(rtpSender=new RTCRtpSender(localTrack,transports.dtlsTransport))}self.transceivers[sdpMLineIndex]={iceGatherer:transports.iceGatherer,iceTransport:transports.iceTransport,dtlsTransport:transports.dtlsTransport,localCapabilities:localCapabilities,remoteCapabilities:remoteCapabilities,rtpSender:rtpSender,rtpReceiver:rtpReceiver,kind:kind,mid:mid,cname:cname,sendEncodingParameters:sendEncodingParameters,recvEncodingParameters:recvEncodingParameters},self._transceive(self.transceivers[sdpMLineIndex],!1,\"sendrecv\"===direction||\"sendonly\"===direction)}}),this.remoteDescription={type:description.type,sdp:description.sdp},description.type){case\"offer\":this._updateSignalingState(\"have-remote-offer\");break;case\"answer\":this._updateSignalingState(\"stable\");break;default:throw new TypeError('unsupported type \"'+description.type+'\"')}return stream.getTracks().length&&(self.remoteStreams.push(stream),window.setTimeout(function(){var event=new Event(\"addstream\");event.stream=stream,self.dispatchEvent(event),null!==self.onaddstream&&window.setTimeout(function(){self.onaddstream(event)},0),receiverList.forEach(function(item){var track=item[0],receiver=item[1],trackEvent=new Event(\"track\");trackEvent.track=track,trackEvent.receiver=receiver,\ntrackEvent.streams=[stream],self.dispatchEvent(event),null!==self.ontrack&&window.setTimeout(function(){self.ontrack(trackEvent)},0)})},0)),arguments.length>1&&\"function\"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(transceiver){transceiver.iceTransport&&transceiver.iceTransport.stop(),transceiver.dtlsTransport&&transceiver.dtlsTransport.stop(),transceiver.rtpSender&&transceiver.rtpSender.stop(),transceiver.rtpReceiver&&transceiver.rtpReceiver.stop()}),this._updateSignalingState(\"closed\")},window.RTCPeerConnection.prototype._updateSignalingState=function(newState){this.signalingState=newState;var event=new Event(\"signalingstatechange\");this.dispatchEvent(event),null!==this.onsignalingstatechange&&this.onsignalingstatechange(event)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var event=new Event(\"negotiationneeded\");this.dispatchEvent(event),null!==this.onnegotiationneeded&&this.onnegotiationneeded(event)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var newState,self=this,states={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(transceiver){states[transceiver.iceTransport.state]++,states[transceiver.dtlsTransport.state]++}),states.connected+=states.completed,newState=\"new\",states.failed>0?newState=\"failed\":states.connecting>0||states.checking>0?newState=\"connecting\":states.disconnected>0?newState=\"disconnected\":states.new>0?newState=\"new\":(states.connected>0||states.completed>0)&&(newState=\"connected\"),newState!==self.iceConnectionState){self.iceConnectionState=newState;var event=new Event(\"iceconnectionstatechange\");this.dispatchEvent(event),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(event)}},window.RTCPeerConnection.prototype.createOffer=function(){var self=this;if(this._pendingOffer)throw new Error(\"createOffer called while there is a pending offer.\");var offerOptions;1===arguments.length&&\"function\"!=typeof arguments[0]?offerOptions=arguments[0]:3===arguments.length&&(offerOptions=arguments[2]);var tracks=[],numAudioTracks=0,numVideoTracks=0;if(this.localStreams.length&&(numAudioTracks=this.localStreams[0].getAudioTracks().length,numVideoTracks=this.localStreams[0].getVideoTracks().length),offerOptions){if(offerOptions.mandatory||offerOptions.optional)throw new TypeError(\"Legacy mandatory/optional constraints not supported.\");void 0!==offerOptions.offerToReceiveAudio&&(numAudioTracks=offerOptions.offerToReceiveAudio),void 0!==offerOptions.offerToReceiveVideo&&(numVideoTracks=offerOptions.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(track){tracks.push({kind:track.kind,track:track,wantReceive:\"audio\"===track.kind?numAudioTracks>0:numVideoTracks>0}),\"audio\"===track.kind?numAudioTracks--:\"video\"===track.kind&&numVideoTracks--});numAudioTracks>0||numVideoTracks>0;)numAudioTracks>0&&(tracks.push({kind:\"audio\",wantReceive:!0}),numAudioTracks--),numVideoTracks>0&&(tracks.push({kind:\"video\",wantReceive:!0}),numVideoTracks--);var sdp=SDPUtils.writeSessionBoilerplate(),transceivers=[];tracks.forEach(function(mline,sdpMLineIndex){var rtpSender,rtpReceiver,track=mline.track,kind=mline.kind,mid=SDPUtils.generateIdentifier(),transports=self.usingBundle&&sdpMLineIndex>0?{iceGatherer:transceivers[0].iceGatherer,iceTransport:transceivers[0].iceTransport,dtlsTransport:transceivers[0].dtlsTransport}:self._createIceAndDtlsTransports(mid,sdpMLineIndex),localCapabilities=RTCRtpSender.getCapabilities(kind),sendEncodingParameters=[{ssrc:1001*(2*sdpMLineIndex+1)}];track&&(rtpSender=new RTCRtpSender(track,transports.dtlsTransport)),mline.wantReceive&&(rtpReceiver=new RTCRtpReceiver(transports.dtlsTransport,kind)),transceivers[sdpMLineIndex]={iceGatherer:transports.iceGatherer,iceTransport:transports.iceTransport,dtlsTransport:transports.dtlsTransport,localCapabilities:localCapabilities,remoteCapabilities:null,rtpSender:rtpSender,rtpReceiver:rtpReceiver,kind:kind,mid:mid,sendEncodingParameters:sendEncodingParameters,recvEncodingParameters:null}}),this.usingBundle&&(sdp+=\"a=group:BUNDLE \"+transceivers.map(function(t){return t.mid}).join(\" \")+\"\\r\\n\"),tracks.forEach(function(mline,sdpMLineIndex){var transceiver=transceivers[sdpMLineIndex];sdp+=SDPUtils.writeMediaSection(transceiver,transceiver.localCapabilities,\"offer\",self.localStreams[0])}),this._pendingOffer=transceivers;var desc=new RTCSessionDescription({type:\"offer\",sdp:sdp});return arguments.length&&\"function\"==typeof arguments[0]&&window.setTimeout(arguments[0],0,desc),Promise.resolve(desc)},window.RTCPeerConnection.prototype.createAnswer=function(){var self=this,sdp=SDPUtils.writeSessionBoilerplate();this.usingBundle&&(sdp+=\"a=group:BUNDLE \"+this.transceivers.map(function(t){return t.mid}).join(\" \")+\"\\r\\n\"),this.transceivers.forEach(function(transceiver){if(transceiver.isDatachannel)return void(sdp+=\"m=application 0 DTLS/SCTP 5000\\r\\nc=IN IP4 0.0.0.0\\r\\na=mid:\"+transceiver.mid+\"\\r\\n\");var commonCapabilities=self._getCommonCapabilities(transceiver.localCapabilities,transceiver.remoteCapabilities);sdp+=SDPUtils.writeMediaSection(transceiver,commonCapabilities,\"answer\",self.localStreams[0])});var desc=new RTCSessionDescription({type:\"answer\",sdp:sdp});return arguments.length&&\"function\"==typeof arguments[0]&&window.setTimeout(arguments[0],0,desc),Promise.resolve(desc)},window.RTCPeerConnection.prototype.addIceCandidate=function(candidate){if(null===candidate)this.transceivers.forEach(function(transceiver){transceiver.iceTransport.addRemoteCandidate({})});else{var mLineIndex=candidate.sdpMLineIndex;if(candidate.sdpMid)for(var i=0;i<this.transceivers.length;i++)if(this.transceivers[i].mid===candidate.sdpMid){mLineIndex=i;break}var transceiver=this.transceivers[mLineIndex];if(transceiver){var cand=Object.keys(candidate.candidate).length>0?SDPUtils.parseCandidate(candidate.candidate):{};if(\"tcp\"===cand.protocol&&(0===cand.port||9===cand.port))return;if(\"1\"!==cand.component)return;\"endOfCandidates\"===cand.type&&(cand={}),transceiver.iceTransport.addRemoteCandidate(cand);var sections=SDPUtils.splitSections(this.remoteDescription.sdp);sections[mLineIndex+1]+=(cand.type?candidate.candidate.trim():\"a=end-of-candidates\")+\"\\r\\n\",this.remoteDescription.sdp=sections.join(\"\")}}return arguments.length>1&&\"function\"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var promises=[];this.transceivers.forEach(function(transceiver){[\"rtpSender\",\"rtpReceiver\",\"iceGatherer\",\"iceTransport\",\"dtlsTransport\"].forEach(function(method){transceiver[method]&&promises.push(transceiver[method].getStats())})});var cb=arguments.length>1&&\"function\"==typeof arguments[1]&&arguments[1];return new Promise(function(resolve){var results=new Map;Promise.all(promises).then(function(res){res.forEach(function(result){Object.keys(result).forEach(function(id){results.set(id,result[id]),results[id]=result[id]})}),cb&&window.setTimeout(cb,0,results),resolve(results)})})}}};module.exports={shimPeerConnection:edgeShim.shimPeerConnection,shimGetUserMedia:requirecopy(\"./getusermedia\")}},{\"../utils\":10,\"./getusermedia\":6,sdp:1}],6:[function(requirecopy,module,exports){\"use strict\";module.exports=function(){var shimError_=function(e){return{name:{PermissionDeniedError:\"NotAllowedError\"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(c){return origGetUserMedia(c).catch(function(e){return Promise.reject(shimError_(e))})}}},{}],7:[function(requirecopy,module,exports){\"use strict\";var browserDetails=requirecopy(\"../utils\").browserDetails,firefoxShim={shimOnTrack:function(){\"object\"!=typeof window||!window.RTCPeerConnection||\"ontrack\"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,\"ontrack\",{get:function(){return this._ontrack},set:function(f){this._ontrack&&(this.removeEventListener(\"track\",this._ontrack),this.removeEventListener(\"addstream\",this._ontrackpoly)),this.addEventListener(\"track\",this._ontrack=f),this.addEventListener(\"addstream\",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(track){var event=new Event(\"track\");event.track=track,event.receiver={track:track},event.streams=[e.stream],this.dispatchEvent(event)}.bind(this))}.bind(this))}})},shimSourceObject:function(){\"object\"==typeof window&&(!window.HTMLMediaElement||\"srcObject\"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,\"srcObject\",{get:function(){return this.mozSrcObject},set:function(stream){this.mozSrcObject=stream}}))},shimPeerConnection:function(){if(\"object\"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(pcConfig,pcConstraints){if(browserDetails.version<38&&pcConfig&&pcConfig.iceServers){for(var newIceServers=[],i=0;i<pcConfig.iceServers.length;i++){var server=pcConfig.iceServers[i];if(server.hasOwnProperty(\"urls\"))for(var j=0;j<server.urls.length;j++){var newServer={url:server.urls[j]};0===server.urls[j].indexOf(\"turn\")&&(newServer.username=server.username,newServer.credential=server.credential),newIceServers.push(newServer)}else newIceServers.push(pcConfig.iceServers[i])}pcConfig.iceServers=newIceServers}return new mozRTCPeerConnection(pcConfig,pcConstraints)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,\"generateCertificate\",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach(function(method){var nativeMethod=RTCPeerConnection.prototype[method];RTCPeerConnection.prototype[method]=function(){return arguments[0]=new(\"addIceCandidate\"===method?RTCIceCandidate:RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}});var nativeAddIceCandidate=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():nativeAddIceCandidate.apply(this,arguments)};var makeMapStats=function(stats){var map=new Map;return Object.keys(stats).forEach(function(key){map.set(key,stats[key]),map[key]=stats[key]}),map},nativeGetStats=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(selector,onSucc,onErr){return nativeGetStats.apply(this,[selector||null]).then(function(stats){return makeMapStats(stats)}).then(onSucc,onErr)}}}};module.exports={shimOnTrack:firefoxShim.shimOnTrack,shimSourceObject:firefoxShim.shimSourceObject,shimPeerConnection:firefoxShim.shimPeerConnection,shimGetUserMedia:requirecopy(\"./getusermedia\")}},{\"../utils\":10,\"./getusermedia\":8}],8:[function(requirecopy,module,exports){\"use strict\";var logging=requirecopy(\"../utils\").log,browserDetails=requirecopy(\"../utils\").browserDetails;module.exports=function(){var shimError_=function(e){return{name:{SecurityError:\"NotAllowedError\",PermissionDeniedError:\"NotAllowedError\"}[e.name]||e.name,message:{\"The operation is insecure.\":\"The request is not allowed by the user agent or the platform in the current context.\"}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&\": \")+this.message}}},getUserMedia_=function(constraints,onSuccess,onError){var constraintsToFF37_=function(c){if(\"object\"!=typeof c||c.require)return c;var require=[];return Object.keys(c).forEach(function(key){if(\"require\"!==key&&\"advanced\"!==key&&\"mediaSource\"!==key){var r=c[key]=\"object\"==typeof c[key]?c[key]:{ideal:c[key]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||require.push(key),void 0!==r.exact&&(\"number\"==typeof r.exact?r.min=r.max=r.exact:c[key]=r.exact,delete r.exact),void 0!==r.ideal){c.advanced=c.advanced||[];var oc={};\"number\"==typeof r.ideal?oc[key]={min:r.ideal,max:r.ideal}:oc[key]=r.ideal,c.advanced.push(oc),delete r.ideal,Object.keys(r).length||delete c[key]}}}),require.length&&(c.require=require),c};return constraints=JSON.parse(JSON.stringify(constraints)),browserDetails.version<38&&(logging(\"spec: \"+JSON.stringify(constraints)),constraints.audio&&(constraints.audio=constraintsToFF37_(constraints.audio)),constraints.video&&(constraints.video=constraintsToFF37_(constraints.video)),logging(\"ff37: \"+JSON.stringify(constraints))),navigator.mozGetUserMedia(constraints,onSuccess,function(e){onError(shimError_(e))})},getUserMediaPromise_=function(constraints){return new Promise(function(resolve,reject){getUserMedia_(constraints,resolve,reject)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:getUserMediaPromise_,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(resolve){var infos=[{kind:\"audioinput\",deviceId:\"default\",label:\"\",groupId:\"\"},{kind:\"videoinput\",deviceId:\"default\",label:\"\",groupId:\"\"}];resolve(infos)})},browserDetails.version<41){var orgEnumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return orgEnumerateDevices().then(void 0,function(e){if(\"NotFoundError\"===e.name)return[];throw e})}}if(browserDetails.version<49){var origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(c){return origGetUserMedia(c).catch(function(e){return Promise.reject(shimError_(e))})}}navigator.getUserMedia=function(constraints,onSuccess,onError){return browserDetails.version<44?getUserMedia_(constraints,onSuccess,onError):void navigator.mediaDevices.getUserMedia(constraints).then(onSuccess,onError)}}},{\"../utils\":10}],9:[function(requirecopy,module,exports){\"use strict\";var safariShim={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};module.exports={shimGetUserMedia:safariShim.shimGetUserMedia}},{}],10:[function(requirecopy,module,exports){\"use strict\";var logDisabled_=!0,utils={disableLog:function(bool){return\"boolean\"!=typeof bool?new Error(\"Argument type: \"+typeof bool+\". Please use a boolean.\"):(logDisabled_=bool,bool?\"adapter.js logging disabled\":\"adapter.js logging enabled\")},log:function(){if(\"object\"==typeof window){if(logDisabled_)return;\"undefined\"!=typeof console&&\"function\"==typeof console.log}},extractVersion:function(uastring,expr,pos){var match=uastring.match(expr);return match&&match.length>=pos&&parseInt(match[pos],10)},detectBrowser:function(){var result={};if(result.browser=null,result.version=null,\"undefined\"==typeof window||!window.navigator)return result.browser=\"Not a browser.\",result;if(navigator.mozGetUserMedia)result.browser=\"firefox\",result.version=this.extractVersion(navigator.userAgent,/Firefox\\/([0-9]+)\\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)result.browser=\"chrome\",result.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\\/([0-9]+)\\./,2);else{if(!navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/))return result.browser=\"Unsupported webkit-based browser with GUM support but no WebRTC support.\",result;result.browser=\"safari\",result.version=this.extractVersion(navigator.userAgent,/AppleWebKit\\/([0-9]+)\\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))return result.browser=\"Not a supported browser.\",result;result.browser=\"edge\",result.version=this.extractVersion(navigator.userAgent,/Edge\\/(\\d+).(\\d+)$/,2)}return result}};module.exports={log:utils.log,disableLog:utils.disableLog,browserDetails:utils.detectBrowser(),extractVersion:utils.extractVersion}},{}]},{},[2])(2)}),AdapterJS.parseWebrtcDetectedBrowser(),navigator.mozGetUserMedia?(MediaStreamTrack.getSources=function(successCb){setTimeout(function(){var infos=[{kind:\"audio\",id:\"default\",label:\"\",facing:\"\"},{kind:\"video\",id:\"default\",label:\"\",facing:\"\"}];successCb(infos)},0)},attachMediaStream=function(element,stream){return element.srcObject=stream,element},reattachMediaStream=function(to,from){return to.srcObject=from.srcObject,to},createIceServer=function(url,username,password){var iceServer=null,urlParts=url.split(\":\");if(0===urlParts[0].indexOf(\"stun\"))iceServer={urls:[url]};else if(0===urlParts[0].indexOf(\"turn\"))if(webrtcDetectedVersion<27){var turnUrlParts=url.split(\"?\");1!==turnUrlParts.length&&0!==turnUrlParts[1].indexOf(\"transport=udp\")||(iceServer={urls:[turnUrlParts[0]],credential:password,username:username})}else iceServer={urls:[url],credential:password,username:username};return iceServer},createIceServers=function(urls,username,password){var iceServers=[];for(i=0;i<urls.length;i++){var iceServer=createIceServer(urls[i],username,password);null!==iceServer&&iceServers.push(iceServer)}return iceServers}):navigator.webkitGetUserMedia?(attachMediaStream=function(element,stream){return webrtcDetectedVersion>=43?element.srcObject=stream:\"undefined\"!=typeof element.src&&(element.src=URL.createObjectURL(stream)),element},reattachMediaStream=function(to,from){return webrtcDetectedVersion>=43?to.srcObject=from.srcObject:to.src=from.src,to},createIceServer=function(url,username,password){var iceServer=null,urlParts=url.split(\":\");return 0===urlParts[0].indexOf(\"stun\")?iceServer={url:url}:0===urlParts[0].indexOf(\"turn\")&&(iceServer={url:url,credential:password,username:username}),iceServer},createIceServers=function(urls,username,password){var iceServers=[];if(webrtcDetectedVersion>=34)iceServers={urls:urls,credential:password,username:username};else for(i=0;i<urls.length;i++){var iceServer=createIceServer(urls[i],username,password);null!==iceServer&&iceServers.push(iceServer)}return iceServers}):navigator.mediaDevices&&navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)&&(attachMediaStream=function(element,stream){return element.srcObject=stream,element},reattachMediaStream=function(to,from){return to.srcObject=from.srcObject,to}),attachMediaStream_base=attachMediaStream,\"opera\"===webrtcDetectedBrowser&&(attachMediaStream_base=function(element,stream){webrtcDetectedVersion>38?element.srcObject=stream:\"undefined\"!=typeof element.src&&(element.src=URL.createObjectURL(stream))}),attachMediaStream=function(element,stream){return\"chrome\"!==webrtcDetectedBrowser&&\"opera\"!==webrtcDetectedBrowser||stream?attachMediaStream_base(element,stream):element.src=\"\",element},reattachMediaStream_base=reattachMediaStream,reattachMediaStream=function(to,from){return reattachMediaStream_base(to,from),to},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=function(constraints,onSuccess,onFailure){navigator.getUserMedia(constraints,onSuccess,onFailure)},AdapterJS.attachMediaStream=attachMediaStream,AdapterJS.reattachMediaStream=reattachMediaStream,AdapterJS.getUserMedia=getUserMedia,\"undefined\"==typeof Promise&&(requestUserMedia=null),AdapterJS.maybeThroughWebRTCReady()),\"undefined\"!=typeof exports&&(module.exports=AdapterJS);\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = AdapterJS;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/exports-loader?AdapterJS!./~/adapterjs/publish/adapter.min.js\n// module id = 205\n// module chunks = 0 1","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = function arrayEquals(array) {\n    // if the other array is a falsy value, return\n    if (!array)\n        return false;\n\n    // compare lengths - can save a lot of time\n    if (this.length != array.length)\n        return false;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n        // Check if we have nested arrays\n        if (this[i] instanceof Array && array[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!arrayEquals.apply(this[i], [array[i]]))\n                return false;\n        } else if (this[i] != array[i]) {\n            // Warning - two different object instances will never be equal:\n            // {x:20} != {x:20}\n            return false;\n        }\n    }\n    return true;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/array-equals.js\n// module id = 206\n// module chunks = 0 1","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexports.Interop = require('./interop');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/index.js\n// module id = 207\n// module chunks = 0 1","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global RTCSessionDescription */\n/* jshint -W097 */\n\"use strict\";\n\nvar transform = require('./transform');\nvar arrayEquals = require('./array-equals');\n\nfunction Interop() {\n\n    /**\n     * This map holds the most recent Unified Plan offer/answer SDP that was\n     * converted to Plan B, with the SDP type ('offer' or 'answer') as keys and\n     * the SDP string as values.\n     *\n     * @type {{}}\n     */\n    this.cache = {};\n}\n\nmodule.exports = Interop;\n\n/**\n * Returns the index of the first m-line with the given media type and with a\n * direction which allows sending, in the last Unified Plan description with\n * type \"answer\" converted to Plan B. Returns {null} if there is no saved\n * answer, or if none of its m-lines with the given type allow sending.\n * @param type the media type (\"audio\" or \"video\").\n * @returns {*}\n */\nInterop.prototype.getFirstSendingIndexFromAnswer = function(type) {\n    if (!this.cache.answer) {\n        return null;\n    }\n\n    var session = transform.parse(this.cache.answer);\n    if (session && session.media && Array.isArray(session.media)){\n        for (var i = 0; i < session.media.length; i++) {\n            if (session.media[i].type == type &&\n                (!session.media[i].direction /* default to sendrecv */ ||\n                    session.media[i].direction === 'sendrecv' ||\n                    session.media[i].direction === 'sendonly')){\n                return i;\n            }\n        }\n    }\n\n    return null;\n};\n\n/**\n * This method transforms a Unified Plan SDP to an equivalent Plan B SDP. A\n * PeerConnection wrapper transforms the SDP to Plan B before passing it to the\n * application.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toPlanB = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    // Objectify the SDP for easier manipulation.\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Unified Plan SDP. Plan B\n    // SDP has a video, an audio and a data \"channel\" at most.\n    if (session.media.length <= 3 && session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Unified Plan.');\n        return desc;\n    }\n\n    //#endregion\n\n    // HACK https://bugzilla.mozilla.org/show_bug.cgi?id=1113443\n    var sdp = desc.sdp;\n    var rewrite = false;\n    for (var i = 0; i < session.media.length; i++) {\n        var uLine = session.media[i];\n        uLine.rtp.forEach(function(rtp) {\n            if (rtp.codec === 'NULL')\n            {\n                rewrite = true;\n                var offer = transform.parse(self.cache['offer']);\n                rtp.codec = offer.media[i].rtp[0].codec;\n            }\n        });\n    };\n    if (rewrite) {\n        sdp = transform.write(session);\n    }\n\n    // Unified Plan SDP is our \"precious\". Cache it for later use in the Plan B\n    // -> Unified Plan transformation.\n    this.cache[desc.type] = sdp;\n\n    //#region Convert from Unified Plan to Plan B.\n\n    // We rebuild the session.media array.\n    var media = session.media;\n    session.media = [];\n\n    // Associative array that maps channel types to channel objects for fast\n    // access to channel objects by their type, e.g. type2bl['audio']->channel\n    // obj.\n    var type2bl = {};\n\n    // Used to build the group:BUNDLE value after the channels construction\n    // loop.\n    var types = [];\n\n    // Implode the Unified Plan m-lines/tracks into Plan B channels.\n    media.forEach(function(uLine) {\n\n        // rtcp-mux is required in the Plan B SDP.\n        if ((typeof uLine.rtcpMux !== 'string' ||\n            uLine.rtcpMux !== 'rtcp-mux') &&\n            uLine.direction !== 'inactive') {\n            throw new Error('Cannot convert to Plan B because m-lines ' +\n                'without the rtcp-mux attribute were found.');\n        }\n\n        if (uLine.type === 'application') {\n            session.media.push(uLine);\n            types.push(uLine.mid);\n            return;\n        }\n\n        // If we don't have a channel for this uLine.type, then use this\n        // uLine as the channel basis.\n        if (typeof type2bl[uLine.type] === 'undefined') {\n            type2bl[uLine.type] = uLine;\n        }\n\n        // Add sources to the channel and handle a=msid.\n        if (typeof uLine.sources === 'object') {\n            Object.keys(uLine.sources).forEach(function(ssrc) {\n                if (typeof type2bl[uLine.type].sources !== 'object')\n                    type2bl[uLine.type].sources = {};\n\n                // Assign the sources to the channel.\n                type2bl[uLine.type].sources[ssrc] =\n                    uLine.sources[ssrc];\n\n                if (typeof uLine.msid !== 'undefined') {\n                    // In Plan B the msid is an SSRC attribute. Also, we don't\n                    // care about the obsolete label and mslabel attributes.\n                    //\n                    // Note that it is not guaranteed that the uLine will\n                    // have an msid. recvonly channels in particular don't have\n                    // one.\n                    type2bl[uLine.type].sources[ssrc].msid =\n                        uLine.msid;\n                }\n                // NOTE ssrcs in ssrc groups will share msids, as\n                // draft-uberti-rtcweb-plan-00 mandates.\n            });\n        }\n\n        // Add ssrc groups to the channel.\n        if (typeof uLine.ssrcGroups !== 'undefined' &&\n                Array.isArray(uLine.ssrcGroups)) {\n\n            // Create the ssrcGroups array, if it's not defined.\n            if (typeof type2bl[uLine.type].ssrcGroups === 'undefined' ||\n                    !Array.isArray(type2bl[uLine.type].ssrcGroups)) {\n                type2bl[uLine.type].ssrcGroups = [];\n            }\n\n            type2bl[uLine.type].ssrcGroups =\n                type2bl[uLine.type].ssrcGroups.concat(\n                    uLine.ssrcGroups);\n        }\n\n        if (type2bl[uLine.type] === uLine) {\n            // Copy ICE related stuff from the principal media line.\n            uLine.candidates = media[0].candidates;\n            uLine.iceUfrag = media[0].iceUfrag;\n            uLine.icePwd = media[0].icePwd;\n            uLine.fingerprint = media[0].fingerprint;\n\n            // Plan B mids are in ['audio', 'video', 'data']\n            uLine.mid = uLine.type;\n\n            // Plan B doesn't support/need the bundle-only attribute.\n            delete uLine.bundleOnly;\n\n            // In Plan B the msid is an SSRC attribute.\n            delete uLine.msid;\n\n            // Used to build the group:BUNDLE value after this loop.\n            types.push(uLine.type);\n\n            // Add the channel to the new media array.\n            session.media.push(uLine);\n        }\n    });\n\n    // We regenerate the BUNDLE group with the new mids.\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = types.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n/**\n * This method transforms a Plan B SDP to an equivalent Unified Plan SDP. A\n * PeerConnection wrapper transforms the SDP to Unified Plan before passing it\n * to FF.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toUnifiedPlan = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Plan B SDP. Plan B SDP has\n    // a video, an audio and a data \"channel\" at most.\n    if (session.media.length > 3 || !session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Plan B.');\n        return desc;\n    }\n\n    // Make sure this Plan B SDP can be converted to a Unified Plan SDP.\n    var mids = [];\n    session.media.forEach(function(m) {\n        mids.push(m.mid);\n    });\n\n    var hasBundle = false;\n    if (typeof session.groups !== 'undefined' &&\n        Array.isArray(session.groups)) {\n        hasBundle = session.groups.every(function(g) {\n            return g.type !== 'BUNDLE' ||\n                arrayEquals.apply(g.mids.sort(), [mids.sort()]);\n        });\n    }\n\n    if (!hasBundle) {\n        throw new Error(\"Cannot convert to Unified Plan because m-lines that\" +\n            \" are not bundled were found.\");\n    }\n\n    //#endregion\n\n\n    //#region Convert from Plan B to Unified Plan.\n\n    // Unfortunately, a Plan B offer/answer doesn't have enough information to\n    // rebuild an equivalent Unified Plan offer/answer.\n    //\n    // For example, if this is a local answer (in Unified Plan style) that we\n    // convert to Plan B prior to handing it over to the application (the\n    // PeerConnection wrapper called us, for instance, after a successful\n    // createAnswer), we want to remember the m-line at which we've seen the\n    // (local) SSRC. That's because when the application wants to do call the\n    // SLD method, forcing us to do the inverse transformation (from Plan B to\n    // Unified Plan), we need to know to which m-line to assign the (local)\n    // SSRC. We also need to know all the other m-lines that the original\n    // answer had and include them in the transformed answer as well.\n    //\n    // Another example is if this is a remote offer that we convert to Plan B\n    // prior to giving it to the application, we want to remember the mid at\n    // which we've seen the (remote) SSRC.\n    //\n    // In the iteration that follows, we use the cached Unified Plan (if it\n    // exists) to assign mids to ssrcs.\n\n    var cached;\n    if (typeof this.cache[desc.type] !== 'undefined') {\n        cached = transform.parse(this.cache[desc.type]);\n    }\n\n    var recvonlySsrcs = {\n        audio: {},\n        video: {}\n    };\n\n    // A helper map that sends mids to m-line objects. We use it later to\n    // rebuild the Unified Plan style session.media array.\n    var mid2ul = {};\n    session.media.forEach(function(bLine) {\n        if ((typeof bLine.rtcpMux !== 'string' ||\n            bLine.rtcpMux !== 'rtcp-mux') &&\n            bLine.direction !== 'inactive') {\n            throw new Error(\"Cannot convert to Unified Plan because m-lines \" +\n                \"without the rtcp-mux attribute were found.\");\n        }\n\n        if (bLine.type === 'application') {\n            mid2ul[bLine.mid] = bLine;\n            return;\n        }\n\n        // With rtcp-mux and bundle all the channels should have the same ICE\n        // stuff.\n        var sources = bLine.sources;\n        var ssrcGroups = bLine.ssrcGroups;\n        var candidates = bLine.candidates;\n        var iceUfrag = bLine.iceUfrag;\n        var icePwd = bLine.icePwd;\n        var fingerprint = bLine.fingerprint;\n        var port = bLine.port;\n\n        // We'll use the \"bLine\" object as a prototype for each new \"mLine\"\n        // that we create, but first we need to clean it up a bit.\n        delete bLine.sources;\n        delete bLine.ssrcGroups;\n        delete bLine.candidates;\n        delete bLine.iceUfrag;\n        delete bLine.icePwd;\n        delete bLine.fingerprint;\n        delete bLine.port;\n        delete bLine.mid;\n\n        // inverted ssrc group map\n        var ssrc2group = {};\n        if (typeof ssrcGroups !== 'undefined' && Array.isArray(ssrcGroups)) {\n            ssrcGroups.forEach(function (ssrcGroup) {\n\n                // TODO(gp) find out how to receive simulcast with FF. For the\n                // time being, hide it.\n                if (ssrcGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                // XXX This might brake if an SSRC is in more than one group\n                // for some reason.\n                if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                    Array.isArray(ssrcGroup.ssrcs)) {\n                    ssrcGroup.ssrcs.forEach(function (ssrc) {\n                        if (typeof ssrc2group[ssrc] === 'undefined') {\n                            ssrc2group[ssrc] = [];\n                        }\n\n                        ssrc2group[ssrc].push(ssrcGroup);\n                    });\n                }\n            });\n        }\n\n        // ssrc to m-line index.\n        var ssrc2ml = {};\n\n        if (typeof sources === 'object') {\n\n            // Explode the Plan B channel sources with one m-line per source.\n            Object.keys(sources).forEach(function(ssrc) {\n\n                // The (unified) m-line for this SSRC. We either create it from\n                // scratch or, if it's a grouped SSRC, we re-use a related\n                // mline. In other words, if the source is grouped with another\n                // source, put the two together in the same m-line.\n                var uLine;\n\n                // We assume here that we are the answerer in the O/A, so any\n                // offers which we translate come from the remote side, while\n                // answers are local. So the check below is to make that we\n                // handle receive-only SSRCs in a special way only if they come\n                // from the remote side.\n                if (desc.type==='offer') {\n                    // We want to detect SSRCs which are used by a remote peer\n                    // in an m-line with direction=recvonly (i.e. they are\n                    // being used for RTCP only).\n                    // This information would have gotten lost if the remote\n                    // peer used Unified Plan and their local description was\n                    // translated to Plan B. So we use the lack of an MSID\n                    // attribute to deduce a \"receive only\" SSRC.\n                    if (!sources[ssrc].msid) {\n                        recvonlySsrcs[bLine.type][ssrc] = sources[ssrc];\n                        // Receive-only SSRCs must not create new m-lines. We\n                        // will assign them to an existing m-line later.\n                        return;\n                    }\n                }\n\n                if (typeof ssrc2group[ssrc] !== 'undefined' &&\n                    Array.isArray(ssrc2group[ssrc])) {\n                    ssrc2group[ssrc].some(function (ssrcGroup) {\n                        // ssrcGroup.ssrcs *is* an Array, no need to check\n                        // again here.\n                        return ssrcGroup.ssrcs.some(function (related) {\n                            if (typeof ssrc2ml[related] === 'object') {\n                                uLine = ssrc2ml[related];\n                                return true;\n                            }\n                        });\n                    });\n                }\n\n                if (typeof uLine === 'object') {\n                    // the m-line already exists. Just add the source.\n                    uLine.sources[ssrc] = sources[ssrc];\n                    delete sources[ssrc].msid;\n                } else {\n                    // Use the \"bLine\" as a prototype for the \"uLine\".\n                    uLine = Object.create(bLine);\n                    ssrc2ml[ssrc] = uLine;\n\n                    if (typeof sources[ssrc].msid !== 'undefined') {\n                        // Assign the msid of the source to the m-line. Note\n                        // that it is not guaranteed that the source will have\n                        // msid. In particular \"recvonly\" sources don't have an\n                        // msid. Note that \"recvonly\" is a term only defined\n                        // for m-lines.\n                        uLine.msid = sources[ssrc].msid;\n                        uLine.direction = 'sendrecv';\n                        delete sources[ssrc].msid;\n                    }\n\n                    // We assign one SSRC per media line.\n                    uLine.sources = {};\n                    uLine.sources[ssrc] = sources[ssrc];\n                    uLine.ssrcGroups = ssrc2group[ssrc];\n\n                    // Use the cached Unified Plan SDP (if it exists) to assign\n                    // SSRCs to mids.\n                    if (typeof cached !== 'undefined' &&\n                        typeof cached.media !== 'undefined' &&\n                        Array.isArray(cached.media)) {\n\n                        cached.media.forEach(function (m) {\n                            if (typeof m.sources === 'object') {\n                                Object.keys(m.sources).forEach(function (s) {\n                                    if (s === ssrc) {\n                                        uLine.mid = m.mid;\n                                    }\n                                });\n                            }\n                        });\n                    }\n\n                    if (typeof uLine.mid === 'undefined') {\n\n                        // If this is an SSRC that we see for the first time\n                        // assign it a new mid. This is typically the case when\n                        // this method is called to transform a remote\n                        // description for the first time or when there is a\n                        // new SSRC in the remote description because a new\n                        // peer has joined the conference. Local SSRCs should\n                        // have already been added to the map in the toPlanB\n                        // method.\n                        //\n                        // Because FF generates answers in Unified Plan style,\n                        // we MUST already have a cached answer with all the\n                        // local SSRCs mapped to some m-line/mid.\n\n                        if (desc.type === 'answer') {\n                            throw new Error(\"An unmapped SSRC was found.\");\n                        }\n\n                        uLine.mid = [bLine.type, '-', ssrc].join('');\n                    }\n\n                    // Include the candidates in the 1st media line.\n                    uLine.candidates = candidates;\n                    uLine.iceUfrag = iceUfrag;\n                    uLine.icePwd = icePwd;\n                    uLine.fingerprint = fingerprint;\n                    uLine.port = port;\n\n                    mid2ul[uLine.mid] = uLine;\n                }\n            });\n        }\n    });\n\n    // Rebuild the media array in the right order and add the missing mLines\n    // (missing from the Plan B SDP).\n    session.media = [];\n    mids = []; // reuse\n\n    if (desc.type === 'answer') {\n\n        // The media lines in the answer must match the media lines in the\n        // offer. The order is important too. Here we assume that Firefox is\n        // the answerer, so we merely have to use the reconstructed (unified)\n        // answer to update the cached (unified) answer accordingly.\n        //\n        // In the general case, one would have to use the cached (unified)\n        // offer to find the m-lines that are missing from the reconstructed\n        // answer, potentially grabbing them from the cached (unified) answer.\n        // One has to be careful with this approach because inactive m-lines do\n        // not always have an mid, making it tricky (impossible?) to find where\n        // exactly and which m-lines are missing from the reconstructed answer.\n\n        for (var i = 0; i < cached.media.length; i++) {\n            var uLine = cached.media[i];\n\n            if (typeof mid2ul[uLine.mid] === 'undefined') {\n\n                // The mid isn't in the reconstructed (unified) answer.\n                // This is either a (unified) m-line containing a remote\n                // track only, or a (unified) m-line containing a remote\n                // track and a local track that has been removed.\n                // In either case, it MUST exist in the cached\n                // (unified) answer.\n                //\n                // In case this is a removed local track, clean-up\n                // the (unified) m-line and make sure it's 'recvonly' or\n                // 'inactive'.\n\n                delete uLine.msid;\n                delete uLine.sources;\n                delete uLine.ssrcGroups;\n                if (!uLine.direction\n                    || uLine.direction === 'sendrecv')\n                    uLine.direction = 'recvonly';\n                else if (uLine.direction === 'sendonly')\n                    uLine.direction = 'inactive';\n            } else {\n                // This is an (unified) m-line/channel that contains a local\n                // track (sendrecv or sendonly channel) or it's a unified\n                // recvonly m-line/channel. In either case, since we're\n                // going from PlanB -> Unified Plan this m-line MUST\n                // exist in the cached answer.\n            }\n\n            session.media.push(uLine);\n\n            if (typeof uLine.mid === 'string') {\n                // inactive lines don't/may not have an mid.\n                mids.push(uLine.mid);\n            }\n        }\n    } else {\n\n        // SDP offer/answer (and the JSEP spec) forbids removing an m-section\n        // under any circumstances. If we are no longer interested in sending a\n        // track, we just remove the msid and ssrc attributes and set it to\n        // either a=recvonly (as the reofferer, we must use recvonly if the\n        // other side was previously sending on the m-section, but we can also\n        // leave the possibility open if it wasn't previously in use), or\n        // a=inactive.\n\n        if (typeof cached !== 'undefined' &&\n            typeof cached.media !== 'undefined' &&\n            Array.isArray(cached.media)) {\n            cached.media.forEach(function(uLine) {\n                mids.push(uLine.mid);\n                if (typeof mid2ul[uLine.mid] !== 'undefined') {\n                    session.media.push(mid2ul[uLine.mid]);\n                } else {\n                    delete uLine.msid;\n                    delete uLine.sources;\n                    delete uLine.ssrcGroups;\n                    if (!uLine.direction\n                        || uLine.direction === 'sendrecv')\n                        uLine.direction = 'recvonly';\n                    if (!uLine.direction\n                        || uLine.direction === 'sendonly')\n                        uLine.direction = 'inactive';\n                    session.media.push(uLine);\n                }\n            });\n        }\n\n        // Add all the remaining (new) m-lines of the transformed SDP.\n        Object.keys(mid2ul).forEach(function(mid) {\n            if (mids.indexOf(mid) === -1) {\n                mids.push(mid);\n                if (mid2ul[mid].direction === 'recvonly') {\n                    // This is a remote recvonly channel. Add its SSRC to the\n                    // appropriate sendrecv or sendonly channel.\n                    // TODO(gp) what if we don't have sendrecv/sendonly\n                    // channel?\n\n                    session.media.some(function (uLine) {\n                        if ((uLine.direction === 'sendrecv' ||\n                            uLine.direction === 'sendonly') &&\n                            uLine.type === mid2ul[mid].type) {\n\n                            // mid2ul[mid] shouldn't have any ssrc-groups\n                            Object.keys(mid2ul[mid].sources).forEach(\n                                function (ssrc) {\n                                uLine.sources[ssrc] =\n                                    mid2ul[mid].sources[ssrc];\n                            });\n\n                            return true;\n                        }\n                    });\n                } else {\n                    session.media.push(mid2ul[mid]);\n                }\n            }\n        });\n    }\n\n    // After we have constructed the Plan Unified m-lines we can figure out\n    // where (in which m-line) to place the 'recvonly SSRCs'.\n    // Note: we assume here that we are the answerer in the O/A, so any offers\n    // which we translate come from the remote side, while answers are local\n    // (and so our last local description is cached as an 'answer').\n    [\"audio\", \"video\"].forEach(function (type) {\n        if (!session || !session.media || !Array.isArray(session.media))\n            return;\n\n        var idx = null;\n        if (Object.keys(recvonlySsrcs[type]).length > 0) {\n            idx = self.getFirstSendingIndexFromAnswer(type);\n            if (idx === null){\n                // If this is the first offer we receive, we don't have a\n                // cached answer. Assume that we will be sending media using\n                // the first m-line for each media type.\n\n                for (var i = 0; i < session.media.length; i++) {\n                    if (session.media[i].type === type) {\n                        idx = i;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (idx && session.media.length > idx) {\n            var mLine = session.media[idx];\n            Object.keys(recvonlySsrcs[type]).forEach(function(ssrc) {\n                if (mLine.sources && mLine.sources[ssrc]) {\n                    console.warn(\"Replacing an existing SSRC.\");\n                }\n                if (!mLine.sources) {\n                    mLine.sources = {};\n                }\n\n                mLine.sources[ssrc] = recvonlySsrcs[type][ssrc];\n            });\n        }\n    });\n\n    // We regenerate the BUNDLE group (since we regenerated the mids)\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = mids.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    // Cache the transformed SDP (Unified Plan) for later re-use in this\n    // function.\n    this.cache[desc.type] = resStr;\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/interop.js\n// module id = 208\n// module chunks = 0 1","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar transform = require('sdp-transform');\n\nexports.write = function(session, opts) {\n\n  if (typeof session !== 'undefined' &&\n      typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // expand sources to ssrcs\n      if (typeof mLine.sources !== 'undefined' &&\n        Object.keys(mLine.sources).length !== 0) {\n          mLine.ssrcs = [];\n          Object.keys(mLine.sources).forEach(function (ssrc) {\n            var source = mLine.sources[ssrc];\n            Object.keys(source).forEach(function (attribute) {\n              mLine.ssrcs.push({\n                id: ssrc,\n                attribute: attribute,\n                value: source[attribute]\n              });\n            });\n          });\n          delete mLine.sources;\n        }\n\n      // join ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                Array.isArray(ssrcGroup.ssrcs)) {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.join(' ');\n            }\n          });\n        }\n    });\n  }\n\n  // join group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids !== 'undefined' && Array.isArray(g.mids)) {\n        g.mids = g.mids.join(' ');\n      }\n    });\n  }\n\n  return transform.write(session, opts);\n};\n\nexports.parse = function(sdp) {\n  var session = transform.parse(sdp);\n\n  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // group sources attributes by ssrc\n      if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n        mLine.sources = {};\n        mLine.ssrcs.forEach(function (ssrc) {\n          if (!mLine.sources[ssrc.id])\n          mLine.sources[ssrc.id] = {};\n        mLine.sources[ssrc.id][ssrc.attribute] = ssrc.value;\n        });\n\n        delete mLine.ssrcs;\n      }\n\n      // split ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs === 'string') {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.split(' ');\n            }\n          });\n        }\n    });\n  }\n  // split group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids === 'string') {\n        g.mids = g.mids.split(' ');\n      }\n    });\n  }\n\n  return session;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/transform.js\n// module id = 209\n// module chunks = 0 1","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseFmtpConfig = parser.parseFmtpConfig;\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/index.js\n// module id = 210\n// module chunks = 0 1","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar fmtpReducer = function (acc, expr) {\n  var s = expr.split('=');\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  }\n  return acc;\n};\n\nexports.parseFmtpConfig = function (str) {\n  return str.split(/\\;\\s?/).reduce(fmtpReducer, {});\n};\n\nexports.parsePayloads = function (str) {\n  return str.split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/parser.js\n// module id = 211\n// module chunks = 0 1","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n      case '%%':\n        return '%';\n      case '%s':\n        return String(arg);\n      case '%d':\n        return Number(arg);\n      case '%v':\n        return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // \"v=0\" must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = \" \"; // \"s= \" must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = \"\";\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/writer.js\n// module id = 212\n// module chunks = 0 1","'use strict'\n\nimport PeerConnectionProxy from 'webrtc/peerConnectionProxy'\nimport log from 'common/log'\n\nvar activePort = null\nvar activeTab = null\nvar peerConnection = null\n\nvar DOMAIN_REGEX = /^[a-z]+:\\/\\/(?:[^@]+@)?([^:\\/]+)/i\nvar DEFAULT_SCREEN_SOURCE_TYPES = ['screen', 'window']\n\nconst TAG = 'tab-sharing'\n\nexport function startTabSharing() {\n  window.chrome.runtime.onInstalled.addListener(function (details) {\n    window.chrome.declarativeContent.onPageChanged.removeRules()\n  })\n\n  window.chrome.runtime.onMessageExternal.addListener(\n\t\tfunction (request, sender, sendResponse) {\n  var type = request && request.type\n  console.debug(TAG, 'got external message:', request)\n  if (type === 'version') {\n    var version = window.chrome.runtime.getManifest().version\n    sendResponse({version: version})\n  } else if (type === 'uninstall') {\n    window.chrome.management.uninstallSelf()\n  } else if (type === 'requestMediaSourceId') {\n    var sourceTypes = request.sourceTypes || DEFAULT_SCREEN_SOURCE_TYPES\n    window.chrome.desktopCapture.chooseDesktopMedia(sourceTypes, sender.tab, sourceId => {\n      sendResponse({sourceId: sourceId || null})\n    })\n  }\n\n  return true\n})\n\n  window.chrome.runtime.onConnectExternal.addListener(function (port) {\n    var portOptions = null\n    if (port.name && port.name.startsWith('options:')) {\n      portOptions = JSON.parse(port.name.slice('options:'.length))\n    }\n\n    console.debug(TAG, 'external connection:', port.sender.url.slice(0, 50))\n\n    let oldActivePort = activePort\n    activePort = port\n\n    if (oldActivePort) {\n      console.debug(TAG, 'disconnecting old port to:', oldActivePort.sender.url.slice(0, 50))\n      endCall()\n      oldActivePort.disconnect()\n    }\n\n    console.debug(TAG, 'portOptions: ', JSON.stringify(portOptions, 0, 4))\n\n    if (!portOptions || portOptions.showOwnTabAction) {\n      var tabId = port.sender.tab.id\n      window.chrome.pageAction.show(tabId)\n    }\n\n    if (portOptions && portOptions.pageActionConditions) {\n      let conditions = portOptions.pageActionConditions.map(condition => {\n        return new window.chrome.declarativeContent.PageStateMatcher(condition)\n      })\n      let actions = [new window.chrome.declarativeContent.ShowPageAction()]\n\n      console.debug(TAG, 'removing old page actions rules and installing new')\n      window.chrome.declarativeContent.onPageChanged.removeRules(undefined, function () {\n        window.chrome.declarativeContent.onPageChanged.addRules([{conditions, actions}])\n      })\n    }\n\n    if (activeTab && activeTab.stream) {\n      send('haveStream')\n    }\n\n    port.onMessage.addListener(function (msg) {\n      if (msg.type === 'startCall') {\n        startCall(msg.content)\n      } else if (msg.type === 'candidate') {\n        addCandidate(msg.content)\n      } else if (msg.type === 'answer') {\n        setAnswer(msg.content)\n      } else if (msg.type === 'endCall') {\n        endCall()\n      } else if (msg.type === 'scrollBy') {\n        scrollBy(msg.content.x, msg.content.y)\n      }\n    })\n\n    port.onDisconnect.addListener(function () {\n      console.debug(TAG, 'port disconnected: ', port.sender.url.slice(0, 50))\n      if (!portOptions || portOptions.showOwnTabAction) {\n        window.chrome.pageAction.hide(tabId)\n      }\n      if (activePort === port) {\n        activePort = null\n      }\n      endCall()\n      inactivateCurrentTab()\n\n      if (!activePort) {\n        console.debug(TAG, 'removing old page actions rules after disconnect')\n        window.chrome.declarativeContent.onPageChanged.removeRules()\n      }\n    })\n  })\n\n  window.chrome.pageAction.onClicked.addListener(function (tab) {\n    if (activeTab && tab.id === activeTab.id) {\n      inactivateCurrentTab()\n    } else {\n      inactivateCurrentTab()\n      setActiveTab(tab)\n    }\n  })\n\n  window.chrome.tabs.onRemoved.addListener(function (tabId) {\n    if (activeTab && tabId === activeTab.id) {\n      inactivateCurrentTab()\n    }\n  })\n\n  window.chrome.tabs.onUpdated.addListener(function (tabId, update, tab) {\n    if (!activeTab || tabId !== activeTab.id) {\n      return\n    }\n    if (update.status === 'loading') {\n      if (activeTab && tabId === activeTab.id) {\n        activatePageAction(tab)\n      }\n      if (tab.url) {\n        console.debug(TAG, 'active tab navigating to ' + tab.url + ' from domain ' + activeTab.domain)\n        var newDomain = tab.url.match(DOMAIN_REGEX)[1]\n        if (newDomain !== activeTab.domain) {\n          console.debug(TAG, 'active tab left domain, inactivating')\n          inactivateCurrentTab()\n        }\n      } else {\n        console.debug(TAG, 'active tab left navigated to unknown domain, inactivating')\n        inactivateCurrentTab()\n      }\n    }\n  })\n\n  function restorePageAction(tab) {\n    var manifest = window.chrome.runtime.getManifest()\n    window.chrome.pageAction.setTitle({\n      tabId: tab.id,\n      title: (manifest.page_action.start_title) ? manifest.page_action.start_title : manifest.page_action.default_title,\n    })\n    window.chrome.pageAction.setIcon({\n      tabId: tab.id,\n      path: manifest.icons['128'],\n    })\n  }\n\n  function activatePageAction(tab) {\n    var manifest = window.chrome.runtime.getManifest()\n    window.chrome.pageAction.setTitle({\n      tabId: tab.id,\n      title: (manifest.page_action.stop_title) ? manifest.page_action.stop_title : manifest.page_action.default_title,\n    })\n    window.chrome.pageAction.setIcon({\n      tabId: tab.id,\n      path: manifest.icons['129'],\n    })\n  }\n\n  function setActiveTab(tab) {\n    var domain = tab.url ? tab.url.match(DOMAIN_REGEX)[1] : null\n    activeTab = {\n      id: tab.id,\n      domain: domain,\n    }\n    activatePageAction(tab)\n    console.debug(TAG, 'activated tab', tab)\n\n    window.chrome.tabCapture.capture({\n      video: true,\n      videoConstraints: {\n        mandatory: {\n          maxWidth: tab.width,\n          maxHeight: tab.height,\n          maxFrameRate: 5,\n        },\n      },\n    }, function (stream) {\n      if (!stream) {\n        return inactivateCurrentTab()\n      }\n      if (activeTab) {\n        activeTab.stream = stream\n        console.debug(TAG, 'got stream', stream)\n        send('haveStream')\n      } else {\n        stream.getVideoTracks()[0].stop()\n      }\n    })\n\n    // forwards window size information from the content script\n    // window.chrome.tabs.executeScript(tab.id, {\n    //   file: 'window-sizer.js',\n    // }, () => {\n    //   let port = window.chrome.tabs.connect(tab.id)\n    //   port.onMessage.addListener(message => {\n    //     send(message.type, message.content)\n    //   })\n    // })\n  }\n\n  function inactivateCurrentTab() {\n    if (!activeTab) {\n      return\n    }\n    console.debug(TAG, 'inactivating', activeTab)\n    restorePageAction(activeTab)\n    if (activeTab.stream) {\n      send('lostStream')\n      if (peerConnection) {\n        console.debug(TAG, 'had ongoing call, ending')\n        closePeerConnection()\n      }\n      activeTab.stream.getVideoTracks()[0].stop()\n      if (activeTab.stream.active) {\n        console.error('failed to stop media stream:', activeTab.stream)\n      }\n      activeTab.stream = null\n    }\n    activeTab = null\n  }\n\n  function startCall(iceServers) {\n    console.debug(TAG, 'iceServers: ', JSON.stringify(iceServers, 0, 4))\n    if (!activeTab) {\n      return console.warning(TAG, 'tried to start call without active tab')\n    }\n    if (!activeTab.stream) {\n      return console.warning(TAG, 'tried to start call without active stream')\n    }\n    if (peerConnection) {\n      closePeerConnection()\n    }\n    peerConnection = createRtcPeerConnection({\n      iceServers,\n      iceCandidateFilter(info) {\n        return info.type === 'relay'\n      },\n    })\n\n    console.debug(TAG, 'adding stream', activeTab.stream)\n    let currentPc = peerConnection\n    peerConnection.addStream(activeTab.stream)\n    peerConnection.performOffer({waitForIce: true})\n    .then(description => {\n      console.debug(TAG, 'sending offer:', description)\n      if (currentPc === peerConnection) {\n        send('offer', description)\n      }\n    }).catch(error => { throw new Error(error) })\n    .catch(error => { throw new Error(error) })\n    var disconnectTimeoutId = 0\n    peerConnection.addEventListener('iceconnectionstatechange', function () {\n      if (!peerConnection) {\n        return\n      }\n      var connectionState = peerConnection.iceConnectionState\n      console.debug(TAG, 'connectionState: ', connectionState)\n      if (connectionState === 'failed') {\n        endCall()\n      }\n      if (connectionState === 'disconnected') {\n        disconnectTimeoutId = setTimeout(function () {\n          endCall()\n          disconnectTimeoutId = 0\n        }, 5000)\n      } else {\n        clearTimeout(disconnectTimeoutId)\n        disconnectTimeoutId = 0\n      }\n    })\n    peerConnection.addEventListener('signalingstatechange', function () {\n      if (!peerConnection) {\n        return\n      }\n      console.debug(TAG, 'changed signaling state:', peerConnection.signalingState)\n      if (peerConnection.signalingState === 'closed') {\n        endCall()\n      }\n    })\n  }\n\n  function addCandidate(candidate) {\n    if (peerConnection && candidate) {\n      candidate = new RTCIceCandidate(candidate)\n      peerConnection.addIceCandidate(candidate)\n    }\n  }\n\n  function setAnswer(answer) {\n    if (peerConnection && !peerConnection.hasAnswer) {\n      answer = new RTCSessionDescription(answer)\n      peerConnection._setRemoteDescription(answer)\n      .then(function () {\n        peerConnection.hasAnswer = true\n        console.debug(TAG, 'answer', answer)\n      }).catch(error => { throw new Error(error) })\n    }\n  }\n\n  function scrollBy(x, y) {\n    if (activeTab) {\n      if (typeof (x) === 'number' && typeof (y) === 'number') {\n        window.chrome.tabs.executeScript(activeTab.id, {\n          code: 'window.scrollBy(' + x + ', ' + y + ')',\n          allFrames: true,\n        })\n      }\n    }\n  }\n\n  function closePeerConnection() {\n    try {\n      if (peerConnection) {\n        peerConnection.close()\n      }\n    } catch (error) {\n      console.error('failed to close peer connection:', error)\n    }\n    peerConnection = null\n  }\n\n  function endCall() {\n    closePeerConnection()\n    inactivateCurrentTab()\n  }\n\n  function send(type, content) {\n    if (!activePort) {\n      return console.warning(TAG, 'could not send ' + type + ', no active port')\n    }\n    activePort.postMessage({\n      type: type,\n      content: content,\n    })\n  }\n\n  function createRtcPeerConnection(config) {\n    config = config || {}\n    var StatsFormatter = require('webrtc/statsFormatter').default\n    var rtcpMuxPolicy = config.rtcpMuxPolicy || 'require'\n    var bundlePolicy = config.bundlePolicy || 'max-bundle'\n    var iceServers = config.iceServers\n    var iceCandidateFilter = config.iceCandidateFilter\n    var iceTransportPolicy = config.iceTransportPolicy\n    if (typeof (iceServers) === 'string') {\n      iceServers = [iceServers]\n    } else if (!Array.isArray(iceServers)) {\n      iceServers = []\n    }\n    iceServers = iceServers.map(function (server) {\n      if (typeof (server) === 'string') {\n        return {\n          urls: server,\n        }\n      } else {\n        return server\n      }\n    })\n\n    StatsFormatter.handleStats = function () { return null }\n\n    var pcConfig = {iceServers, rtcpMuxPolicy, bundlePolicy, iceTransportPolicy}\n    return new PeerConnectionProxy(pcConfig, StatsFormatter, iceCandidateFilter)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/tabSharing.js","export * from './tabSharing'\n\nimport log from 'common/log'\n\nconst TAG = 'chrome-extension'\nconst cct = require('cct')\n// Sets the log singleton to an external one in case a version of libcct is already loaded\nif (cct) {\n  require('common/log').setLog(cct.log)\n}\n\nexport function startScreenSharing() {\n  var DEFAULT_SOURCE_TYPES = ['screen', 'window']\n\n  function isInstalled(sendResponse) {\n    sendResponse({\n      extensionId: window.chrome.runtime.id,\n      message: 'extensionIsInstalled',\n    })\n  }\n\n  function requestScreenSharing(request, sender, sendResponse) {\n    var sourceTypes = request.message.sourceTypes || DEFAULT_SOURCE_TYPES\n    window.chrome.desktopCapture.chooseDesktopMedia(sourceTypes, sender.tab, function (sourceId) {\n      sendResponse({\n        extensionId: window.chrome.runtime.id,\n        message: 'chromeMediaSourceId',\n        content: sourceId || null,\n      })\n    })\n  }\n\n  window.chrome.runtime.onMessageExternal.addListener(\n\t\tfunction (request, sender, sendResponse) {\n  log.debug(TAG, 'got external message:', request)\n  if (request.message === 'version') {\n    var version = window.chrome.runtime.getManifest().version\n    sendResponse({version: version})\n  } else if (request.message === 'uninstall') {\n    window.chrome.management.uninstallSelf()\n  }\telse if (request.message === 'getInstalledStatus') {\n    isInstalled(sendResponse)\n  } else if (request.message === 'requestChromeMediaSourceId') {\n    requestScreenSharing(request, sender, sendResponse)\n  }\n\t// IMPORTANT to return true, to indicate\n\t// async return from extention to application\n  return true\n}\n\t)\n}\n\nexport * from 'cct'\n\n\n\n// WEBPACK FOOTER //\n// ./lib/chrome-extension.js"],"sourceRoot":""}
\ No newline at end of file
diff --git a/screen-sharing/chrome-extension-ex/icon128.png b/screen-sharing/chrome-extension-ex/icon128.png
deleted file mode 100644
index b2d6bcd..0000000
Binary files a/screen-sharing/chrome-extension-ex/icon128.png and /dev/null differ
diff --git a/screen-sharing/chrome-extension-ex/icon128_off.png b/screen-sharing/chrome-extension-ex/icon128_off.png
deleted file mode 100644
index fc1f429..0000000
Binary files a/screen-sharing/chrome-extension-ex/icon128_off.png and /dev/null differ
diff --git a/screen-sharing/chrome-extension-ex/icon48.png b/screen-sharing/chrome-extension-ex/icon48.png
deleted file mode 100644
index b2d6bcd..0000000
Binary files a/screen-sharing/chrome-extension-ex/icon48.png and /dev/null differ
diff --git a/screen-sharing/chrome-extension-ex/icon48_off.png b/screen-sharing/chrome-extension-ex/icon48_off.png
deleted file mode 100644
index fd12a07..0000000
Binary files a/screen-sharing/chrome-extension-ex/icon48_off.png and /dev/null differ
diff --git a/screen-sharing/chrome-extension-ex/manifest.json b/screen-sharing/chrome-extension-ex/manifest.json
deleted file mode 100644
index 6c096e8..0000000
--- a/screen-sharing/chrome-extension-ex/manifest.json
+++ /dev/null
@@ -1,58 +0,0 @@
-﻿{
-  "name": "Ericsson C3 Extension",
-  "description": "Enables screen sharing for C3 applications. This extension has no user interface.",
-  "version": "2.0.4",
-  "manifest_version": 2,
-  "icons": {
-    "48" : "icon48.png",
-    "128" : "icon128.png",
-    "49": "icon48_off.png",
-    "129": "icon128_off.png"
-  },
-  "externally_connectable": {
-    // Extension and app IDs. If this field is not specified, no
-    // extensions or apps can connect.
-    "ids": [
-      // Alternatively, to match all extensions and apps, specify only
-      // "*".
-      "*"
-    ],
-    // Match patterns for web pages. Does not affect content scripts.
-    // If this field is not specified, no webpages can connect.
-    "matches": [
-      "*://*.ericsson.com/*",
-      "*://*.ericsson.net/*",
-      "*://c3.development.net/*",
-      "*://localhost:*/*",
-      "*://example.com/*"
-    ],
-    // Indicates that the extension would like to make use of the TLS
-    // channel ID of the web page connecting to it. The web page must
-    // also opt to send the TLS channel ID to the extension via setting
-    // includeTlsChannelId to true in runtime.connect's connectInfo
-    // or runtime.sendMessage's options.
-    "accepts_tls_channel_id": false
-  },
-  "background": {
-    "scripts": [
-      "chrome-extension.js",
-      "background.js"
-    ]
-  },
-  "permissions": [
-    "http://*/*",
-    "https://*/*",
-    "https://example.com/*",
-    "https://c3.development.net/*",
-    "tabs",
-    "activeTab",
-    "tabCapture",
-    "desktopCapture",
-    "declarativeContent"   
-  ],
-  "page_action": {
-    "default_title": "Start sharing this tab",
-    "start_title": "Start sharing this tab",
-    "stop_title": "Stop sharing this tab"
-  }
-}
\ No newline at end of file
diff --git a/screen-sharing/chrome-extension-ex/window-sizer.js b/screen-sharing/chrome-extension-ex/window-sizer.js
deleted file mode 100644
index 3e87cc1..0000000
--- a/screen-sharing/chrome-extension-ex/window-sizer.js
+++ /dev/null
@@ -1,35 +0,0 @@
-
-var loaded
-
-if (!loaded) {
-  function makeThrottler(ms, callback) {
-    var timeoutId
-    return (...args) => {
-      if (!timeoutId) {
-        timeoutId = setTimeout(() => {
-          timeoutId = 0
-          callback()
-        }, ms)
-      }
-    }
-  }
-
-  let onConnect = port => {
-    let onDisconnect = () => {
-      window.removeEventListener('resize', onWindowResize)
-    }
-
-    let onWindowResize = makeThrottler(40, () => {
-      port.postMessage({type: 'size', content: {
-        w: window.innerWidth,
-        h: window.innerHeight,
-      }})
-    })
-    window.addEventListener('resize', onWindowResize)
-    onWindowResize()
-  }
-
-  chrome.runtime.onConnect.addListener(onConnect)
-}
-
-loaded = true
diff --git a/screen-sharing/screenSharing.html b/screen-sharing/screenSharing.html
index ed34520..7632e5a 100644
--- a/screen-sharing/screenSharing.html
+++ b/screen-sharing/screenSharing.html
@@ -16,33 +16,25 @@
 
 <!DOCTYPE html>
 <html>
-
 <head>
   <title>Screen sharing</title>
   <link rel="stylesheet" type="text/css" href="../resources/main.css">
   <link rel="icon" href="../resources/favicon.ico">
-  <script type="text/javascript" src="https://c3.development.net:3000/cct.js"></script>
-  <script type="text/javascript" src="../exampleUtils.js"></script>
-  <script src="tSource.js"></script>
-  <script src="tSink.js"></script>
+  <script type="text/javascript" src="https://get.cct.ericsson.net/latest/cct.js"></script>
   <style>
     #error-display {
       color: #f00;
     }
-
     video {
       width: 100%;
     }
-
     select {
       margin: 20px 20px 0 0;
       font-size: 0.8em;
     }
-
     button {
       margin: 0 10px;
     }
-
     .modal {
       position: absolute;
       top: 0;
@@ -57,7 +49,6 @@
 
       background: rgba(0, 0, 0, 0.5);
     }
-
     .dialog {
       flex: 0 1 auto;
       padding: 15px 20px;
@@ -70,7 +61,6 @@
       border: 1px solid #466493;
       border-radius: 5px;
     }
-
     #source-selection {
       margin: 0;
       margin-bottom: 20px;
@@ -78,17 +68,13 @@
     }
   </style>
 </head>
-
 <body>
   <header></header>
   <main>
     <section>
       <div class="about">
         <h3>Screen sharing example</h3>
-        This example shows how to use a <a href="https://get.cct.ericsson.net/latest/docs/reference/ScreenSource.html" target="_blank">ScreenSource</a>.
-        The code for the Chrome extension can be found <a href="https://github.com/Ericsson/c3-web-examples/tree/gh-pages/screen-sharing/chrome-extension"
-          target="_blank">here</a>, and Firefox <a href="https://github.com/Ericsson/c3-web-examples/tree/gh-pages/screen-sharing/firefox-extension"
-          target="_blank">here</a>.
+        This example shows how to use a <a href="https://get.cct.ericsson.net/latest/docs/reference/ScreenSource.html" target="_blank">ScreenSource</a>. The code for the Chrome extension can be found <a href="https://github.com/Ericsson/c3-web-examples/tree/gh-pages/screen-sharing/chrome-extension" target="_blank">here</a>, and Firefox <a href="https://github.com/Ericsson/c3-web-examples/tree/gh-pages/screen-sharing/firefox-extension" target="_blank">here</a>.
       </div>
     </section>
     <div class="margins">
@@ -102,40 +88,11 @@
           Firefox extension
         </a>
       </div>
-
-      <div style="display:flex; flex-direction:column">
-        <section>
-          <div class="about">
-            <div style="display:flex; ">
-              <select id="source-type-selection"></select>
-              <button id="sharing-button" disabled>Start screen sharing</button>
-            </div>
-          </div>
-        </section>
-
-        <section>
-          <div class="about">
-            <button id="tab-sharing-button" disabled style="align-self:left; margin: 20px; padding: 1rem;">Start tab sharing</button>
-            
-            <button id="tab-sharing-Receive-button" disabled style="align-self:left; margin: 20px; padding: 1rem;">Receive tab sharing</button>
-            <div class="margins">
-              <div id="result" style="border:1px solid black"></div>
-              <h1 id="exampleStatus">Waiting for peer to join</h1>
-              <div class="peer-link">
-                <h3 class="peer-link-title"></h3>
-                <input class="peer-link-input" type="url" value="" size="55">
-                <div class="peer-link-connection-state"></div>
-              </div>
-            </div>
-          </div>
-        </section>
-
-
-      </div>
+      <select id="source-type-selection"></select>
+      <button id="sharing-button" disabled>Start screen sharing</button>
       <div id="error-display"></div>
       <br>
       <video autoplay muted></video>
-      <video id="tab-sharing-video" autoplay muted/>
     </div>
     <footer></footer>
   </main>
@@ -151,202 +108,161 @@
     </div>
   </div>
   <script type="application/javascript">
-    'use strict'
-
-    cct.log.setLogLevel(cct.log.ALL)
-    cct.log.color = true
-
-    var el = {
-      sourceTypeSelection: document.getElementById('source-type-selection'),
-      button: document.getElementById('sharing-button'),
-      tabButton: document.getElementById('tab-sharing-button'),
-      tabReceiveButton: document.getElementById('tab-sharing-Receive-button'),
-      error: document.getElementById('error-display'),
-      video: document.querySelector('video'),
-      tabSharingVideo: document.getElementById('tab-sharing-video'),
-      htmlSelectionPopup: document.getElementById('html-selection-popup'),
-      sourceSelection: document.getElementById('source-selection'),
-      acceptSourceButton: document.getElementById('accept-source-button'),
-      rejectSourceButton: document.getElementById('reject-source-button'),
-      exampleStatus: document.getElementById('exampleStatus'),	
+'use strict'
+
+cct.log.setLogLevel(cct.log.ALL)
+cct.log.color = true
+
+var el = {
+  sourceTypeSelection: document.getElementById('source-type-selection'),
+  button: document.getElementById('sharing-button'),
+  error: document.getElementById('error-display'),
+  video: document.querySelector('video'),
+  htmlSelectionPopup: document.getElementById('html-selection-popup'),
+  sourceSelection: document.getElementById('source-selection'),
+  acceptSourceButton: document.getElementById('accept-source-button'),
+  rejectSourceButton: document.getElementById('reject-source-button'),
+}
+
+var START_SHARING_TEXT = 'Start screen sharing'
+var STOP_SHARING_TEXT = 'Stop screen sharing'
+
+var screenSource
+
+cct.webRtcReady().then(function () {
+  setupTypeSelectionOptions()
+  el.button.disabled = false
+
+  el.button.addEventListener('click', function () {
+    if (screenSource) {
+      screenSource.stop()
+      return
     }
 
-var iceServers = EXAMPLE_UTILS_ICE_SERVERS
-var extensionId = 'abcpimlhcobaaehifeglfgkenpnnffkk'
+    el.button.disabled = true
 
-getExtensionVersion().then(() => {   
-    el.button.disabled = false
-    el.tabButton.disabled = false
-    el.tabReceiveButton.disabled = false         
-}).catch(error => {
-		if (error.name === 'ExtensionNotInstalledError') {
-      el.error.textContent = 'No Extenstion detected'
-      
-      el.button.disabled = true
-      el.tabButton.disabled = true
-      el.tabReceiveButton.disabled = true
-		} else {
-			el.error.textContent = 'chrome screen sharing failed:' + JSON.stringify(error)
-		}
-	})
-
-    var START_SHARING_TEXT = 'Start screen sharing'
-    var STOP_SHARING_TEXT = 'Stop screen sharing'
-    var START_TAB_SHARING = 'Start tab sharing'
-    var STOP_TAB_SHARING = 'Stop tab sharing'
-    var RECEIVE_TAB_SHARING = 'Receive tab sharing'
-    var STOP_RECEIVE_TAB_SHARING = 'Stop receive tab sharing'
-
-    var screenSource
+    var type = el.sourceTypeSelection.value || null
+    if (type === 'html') {
+      return showHtmlPicker()
+    }
 
-    cct.webRtcReady().then(function () {
-      setupTypeSelectionOptions()
-      el.button.disabled = false
-      el.tabButton.disabled = false
-      el.tabReceiveButton.disabled = false
+    startScreenSharing({
+      chromeExtensionId: 'epajpkbdigdpepgncdpmilaoamkjgoah',
+      type: type,
+      video: {
+        frameRate: 5,
+      },
+    })
+  })
+})
 
-      el.button.addEventListener('click', function () {
-        if (screenSource) {
-          screenSource.stop()
-          return
-        }
-        el.video.style.display = 'block'
+function startScreenSharing(constraints) {
+  screenSource = new cct.ScreenSource(constraints)
+  screenSource.connect(el.video)
 
-        el.button.disabled = true
+  screenSource.promise.then(function () {
+    cct.log.info('example', 'screen sharing started successfully')
+    el.button.textContent = STOP_SHARING_TEXT
+    el.button.disabled = false
+    el.error.textContent = ''
 
-        var type = el.sourceTypeSelection.value || null
-        if (type === 'html') {
-          return showHtmlPicker()
+    screenSource.connect(new cct.StreamSink({
+      onStream: function (stream) {
+        // Stream was removed
+        if (!stream) {
+          screenSource = null
+          el.button.textContent = START_SHARING_TEXT
+          el.button.disabled = false
         }
-
-        startScreenSharing({
-          //chromeExtensionId: 'enociikpbdiefjpghmhlmclglncfphep',
-          chromeExtensionId: extensionId,
-          type: type,
-          video: {
-            frameRate: 5,
-          },
-        })
-      })
-
-      el.tabButton.addEventListener('click', function () {
-        handleTabButtonClick();
-      })
-
-      el.tabReceiveButton.addEventListener('click', function () {
-        handleReceiveTabButtonClick();
-      })
-
-
+      },
+    }))
+  }, function (error) {
+    cct.log.info('example', 'screen sharing failed, ' + error)
+    el.button.textContent = START_SHARING_TEXT
+    el.button.disabled = false
+    el.error.textContent = error.toString()
+    screenSource = null
+  })
+
+  return screenSource
+}
+
+// This populates the dropdown menu where you can select the different screen sharing types
+function setupTypeSelectionOptions() {
+  var options = {}
+
+  if (cct.ScreenSource.implementation === 'chrome') {
+    options = {
+      '': 'Any', // Both screen and window are allowed, actual type constraint ends up being null
+      screen: 'Screen',
+      window: 'Window',
+    }
+  } else if (cct.ScreenSource.implementation === 'firefox') {
+    options = {
+      screen: 'Screen',
+      window: 'Window',
+      application: 'Application',
+    }
+  } else if (cct.ScreenSource.implementation === 'temasys') {
+    options = {
+      '': 'Native dialog', // Will pass null as type constraint
+      html: 'HTML dialog',
+    }
+  } else {
+    el.error.textContent = 'Screen sharing is not available in this browser'
+  }
+
+  // Add browser-specific options to dropdown menu
+  Object.keys(options).forEach(function (key) {
+    var option = el.sourceTypeSelection.appendChild(document.createElement('option'))
+    option.textContent = options[key]
+    option.value = key
+  })
+}
+
+// Show a source picker with JS, only used for temasys (Safari, Internet Explorer)
+function showHtmlPicker() {
+  el.button.disabled = true
+
+  cct.ScreenSource.enumerateSources().then(function (sourceInfos) {
+    el.htmlSelectionPopup.style.display = null
+
+    // Clear out old entries and populate dropdown with the new source type list
+    el.sourceSelection.innerHTML = ''
+    sourceInfos.forEach(function (sourceInfo, index) {
+      var option = el.sourceSelection.appendChild(document.createElement('option'))
+      option.textContent = sourceInfo.type + ': ' + sourceInfo.label
+      // the value is the index in the sourceInfos list, so it's simple to lookup the selected source
+      option.value = index
     })
 
-    function startScreenSharing(constraints) {
-      screenSource = new cct.ScreenSource(constraints)
-      screenSource.connect(el.video)
-
-      screenSource.promise.then(function () {
-        cct.log.info('example', 'screen sharing started successfully')
-        el.button.textContent = STOP_SHARING_TEXT
-        el.button.disabled = false
-        el.error.textContent = ''
+    el.acceptSourceButton.onclick = function () {
+      var sourceInfo = sourceInfos[el.sourceSelection.value]
 
-        screenSource.connect(new cct.StreamSink({
-          onStream: function (stream) {
-            // Stream was removed
-            if (!stream) {
-              screenSource = null
-              el.button.textContent = START_SHARING_TEXT
-              el.button.disabled = false
-            }
-          },
-        }))
-      }, function (error) {
-        cct.log.info('example', 'screen sharing failed, ' + error)
-        el.button.textContent = START_SHARING_TEXT
-        el.button.disabled = false
-        el.error.textContent = error.toString()
-        screenSource = null
+      screenSource = startScreenSharing({
+        video: {
+          frameRate: 5,
+          source: sourceInfo,
+        },
       })
 
-      return screenSource
+      el.htmlSelectionPopup.style.display = 'none'
     }
 
-    // This populates the dropdown menu where you can select the different screen sharing types
-    function setupTypeSelectionOptions() {
-      var options = {}
-
-      if (cct.ScreenSource.implementation === 'chrome') {
-        options = {
-          '': 'Any', // Both screen and window are allowed, actual type constraint ends up being null
-          screen: 'Screen',
-          window: 'Window',
-        }
-      } else if (cct.ScreenSource.implementation === 'firefox') {
-        options = {
-          screen: 'Screen',
-          window: 'Window',
-          application: 'Application',
-        }
-      } else if (cct.ScreenSource.implementation === 'temasys') {
-        options = {
-          '': 'Native dialog', // Will pass null as type constraint
-          html: 'HTML dialog',
-        }
-      } else {
-        el.error.textContent = 'Screen sharing is not available in this browser'
-      }
-
-      // Add browser-specific options to dropdown menu
-      Object.keys(options).forEach(function (key) {
-        var option = el.sourceTypeSelection.appendChild(document.createElement('option'))
-        option.textContent = options[key]
-        option.value = key
-      })
+    el.rejectSourceButton.onclick = function () {
+      el.htmlSelectionPopup.style.display = 'none'
+      el.button.textContent = START_SHARING_TEXT
+      el.button.disabled = false
     }
+  }).catch(function (error) {
+    cct.log.info('example', 'source enumeration failed, ' + error)
+    el.htmlSelectionPopup.style.display = 'none'
+    el.button.textContent = START_SHARING_TEXT
+    el.button.disabled = false
+    el.error.textContent = 'Source enumeration failed, ' + error
+  })
+}
 
-    // Show a source picker with JS, only used for temasys (Safari, Internet Explorer)
-    function showHtmlPicker() {
-      el.button.disabled = true
-
-      cct.ScreenSource.enumerateSources().then(function (sourceInfos) {
-        el.htmlSelectionPopup.style.display = null
-
-        // Clear out old entries and populate dropdown with the new source type list
-        el.sourceSelection.innerHTML = ''
-        sourceInfos.forEach(function (sourceInfo, index) {
-          var option = el.sourceSelection.appendChild(document.createElement('option'))
-          option.textContent = sourceInfo.type + ': ' + sourceInfo.label
-          // the value is the index in the sourceInfos list, so it's simple to lookup the selected source
-          option.value = index
-        })
-
-        el.acceptSourceButton.onclick = function () {
-          var sourceInfo = sourceInfos[el.sourceSelection.value]
-
-          screenSource = startScreenSharing({
-            video: {
-              frameRate: 5,
-              source: sourceInfo,
-            },
-          })
-
-          el.htmlSelectionPopup.style.display = 'none'
-        }
-
-        el.rejectSourceButton.onclick = function () {
-          el.htmlSelectionPopup.style.display = 'none'
-          el.button.textContent = START_SHARING_TEXT
-          el.button.disabled = false
-        }
-      }).catch(function (error) {
-        cct.log.info('example', 'source enumeration failed, ' + error)
-        el.htmlSelectionPopup.style.display = 'none'
-        el.button.textContent = START_SHARING_TEXT
-        el.button.disabled = false
-        el.error.textContent = 'Source enumeration failed, ' + error
-      })
-    }
   </script>
 </body>
-
-</html>
\ No newline at end of file
+</html>
diff --git a/screen-sharing/sp128.png b/screen-sharing/sp128.png
deleted file mode 100644
index 3ffdd50..0000000
Binary files a/screen-sharing/sp128.png and /dev/null differ
diff --git a/screen-sharing/sp128_off.png b/screen-sharing/sp128_off.png
deleted file mode 100644
index 5c85b77..0000000
Binary files a/screen-sharing/sp128_off.png and /dev/null differ
diff --git a/screen-sharing/sp48.png b/screen-sharing/sp48.png
deleted file mode 100644
index 2adeb2a..0000000
Binary files a/screen-sharing/sp48.png and /dev/null differ
diff --git a/screen-sharing/sp48_off.png b/screen-sharing/sp48_off.png
deleted file mode 100644
index 96dcb08..0000000
Binary files a/screen-sharing/sp48_off.png and /dev/null differ
diff --git a/screen-sharing/tSink.js b/screen-sharing/tSink.js
deleted file mode 100644
index 4c3385f..0000000
--- a/screen-sharing/tSink.js
+++ /dev/null
@@ -1,141 +0,0 @@
-var sinkSource = null
-var _tabSourceForwarder = null
-var _mediaSourceForwarder = null
-var haveStream = false
-var call = null
-
-function connectCall () {
-	return PeerConnecter.clientInCall(client).then(function (connecter) {
-		call = connecter.call
-
-		call.on('connectionState', function (connectionState) {
-			if (connectionState === 'connected') {
-				el.exampleStatus.textContent = 'Sharing enabled'
-
-			} else {
-				el.exampleStatus.textContent = ''
-			}
-		})
-
-		//call.attach('data', data)
-		//window.call = call;
-		console.log('### Call is : ', call)
-		return call
-
-	}).catch(function (error) {
-		cct.log.error('example', '' + error)
-		console.log('Error: ', error)
-	})
-}
-
-function handleReceiveTabButtonClick () {
-	console.log('tab sharing Received started')
-	if (sinkSource) {
-		el.tabReceiveButton.textContent = RECEIVE_TAB_SHARING
-		sinkWillUnmount()
-		sinkSource = null
-		call.getRemoteSource('media').disconnect()
-		call.hangup()
-		call = null
-		return
-	}
-	
-
-	el.tabReceiveButton.textContent = STOP_RECEIVE_TAB_SHARING
-	connectCall().then(call => {
-		sinkWillMount({
-			extensionId,
-			call
-		})
-	})
-}
-
-function sinkWillMount ({ extensionId, call }) {
-
-sinkSource = new cct.StreamSource()
-	let tabSink = new cct.HtmlSink()
-	tabSink.target = el.tabSharingVideo
-	el.video.style.display = 'none'
-	el.tabButton.disabled = true
-
-	const onStream = () => {
-		let stream1 = _tabSourceForwarder.stream
-		let stream2 = _mediaSourceForwarder.stream
-		let stream = stream1 || stream2 || null
-		el.button.textContent = START_SHARING_TEXT
-		el.button.disabled = false
-		sinkSource.setStream(stream)
-		sinkSource.connect(tabSink)
-		haveStream = !!stream
-	}
-
-	_tabSource = new cct.TabSharingSource({
-		connectionConfig: {
-			iceServers,
-			iceCandidateFilter (info) {
-				return info.type === 'relay'
-			},
-		},
-	})
-
-	_tabSourceForwarder = new cct.StreamSink({ onStream })
-	_tabSource.connect(_tabSourceForwarder)
-	call.attach('content-proxy', _tabSource)
-
-	_streamSource = new cct.PeerMediaPipe()
-	//if (isChrome) {
-	_dummySource = new cct.DummySource({ video: true }) // So that recvonly chrome -> firefox works
-	_dummySource.connect(_streamSource)
-	//}
-	_mediaSourceForwarder = new cct.StreamSink({ onStream })
-	_streamSource.connect(_mediaSourceForwarder)
-	call.attach('content-stream', _streamSource)
-
-	_remoteVideoSizer = new cct.DataShare()
-	_remoteVideoSizer.on('update:size', _onRemoteVideoSize)
-	call.attach('content-size', _remoteVideoSizer)
-
-	_scroller = new cct.DataShare()
-	call.attach('scroller', _scroller)
-	_scroller.set('scroll', { x: 0, y: 0 })
-
-	window.addEventListener('resize', _handleWindowResize)
-
-}
-
-function sinkWillUnmount () {
-	el.video.style.display = 'block'	
-	el.tabButton.disabled = false	
-
-	window.removeEventListener('resize', _handleWindowResize)
-	if (_dummySource) {
-		_dummySource.disconnect(_streamSource)
-		try {
-			_dummySource.stop()
-		} catch (error) { /* libcct 0.18.7 is a bit broken */ }
-		_dummySource = null
-	}
-	_tabSource.disconnect(_tabSourceForwarder)
-	_streamSource.disconnect(_mediaSourceForwarder)
-	if (!call.closed) {
-		call.detach('scroller', _scroller)
-		call.detach('content-proxy', _tabSource)
-		call.detach('content-stream', _streamSource)
-		call.detach('content-size', _remoteVideoSizer)
-	}
-	_remoteVideoSizer.off('update:size', _onRemoteVideoSize)
-	_remoteVideoSizer = null
-	_source = null
-	_scroller = null
-	_tabSource = null
-	_streamSource = null
-	_tabSourceForwarder = null
-	_mediaSourceForwarder = null
-}
-
-function _handleWindowResize () {
-}
-
-function _onRemoteVideoSize () {
-
-}
\ No newline at end of file
diff --git a/screen-sharing/tSink.notmovedToCct.js b/screen-sharing/tSink.notmovedToCct.js
deleted file mode 100644
index 145816d..0000000
--- a/screen-sharing/tSink.notmovedToCct.js
+++ /dev/null
@@ -1,181 +0,0 @@
-var sinkSource = null
-// var _proxySourceForwarder = null
-// var _mediaSourceForwarder = null
-var haveStream = false
-var tabSharingSink = null
-var call = null
-
-function connectCall () {
-	return PeerConnecter.clientInCall(client).then(function (connecter) {
-		call = connecter.call
-
-		call.on('connectionState', function (connectionState) {
-			if (connectionState === 'connected') {
-				el.exampleStatus.textContent = 'Sharing enabled'
-
-			} else {
-				el.exampleStatus.textContent = ''
-				el.tabReceiveButton.disabled = false
-			}
-		})
-
-		//call.attach('data', data)
-		//window.call = call;
-		console.log('### Call is : ', call)
-		return call
-
-	}).catch(function (error) {
-		cct.log.error('example', '' + error)
-		console.log('Error: ', error)
-	})
-}
-
-function handleReceiveTabButtonClick () {
-	console.log('tab sharing Received started')
-	if (sinkSource) {
-		el.tabReceiveButton.textContent = RECEIVE_TAB_SHARING
-		sinkWillUnmount()
-		sinkSource = null
-		call.getRemoteSource('media').disconnect()
-		call.hangup()
-		return
-	}
-	// if(tabSharingSink){
-	// 	el.tabReceiveButton.textContent = RECEIVE_TAB_SHARING
-	// 	sinkCleanup()		
-	// 	call.getRemoteSource('media').disconnect()
-	// 	call.hangup()
-	// 	call = null
-	// 	tabSharingSink = null
-	// 	return
-	// }
-
-	el.tabReceiveButton.textContent = STOP_RECEIVE_TAB_SHARING
-	el.tabReceiveButton.disabled = false
-	connectCall().then(call => {
-		sinkWillMount({
-			extensionId,
-			call
-		})
-	})
-}
-
-
-
-
-function sinkWillMount ({ extensionId, call }) {
-	let target = el.tabSharingVideo
-	let sinkSource = new cct.StreamSource()
-	let tabSink = new cct.HtmlSink()
-	tabSink.target = target
-	el.video.style.display = 'none'
-	tabSharingSink = new cct.TabSharingSink()
-
-	tabSharingSink.connectSink({ iceServers, call })
-	tabSharingSink.on('stream', function (stream) {	
-		if(!stream){			
-			sinkWillUnmount()			
-			return
-		}	
-		el.button.textContent = START_SHARING_TEXT
-		el.button.disabled = false
-		el.video.style.display = 'none'
-		sinkSource.setStream(stream)
-		sinkSource.connect(tabSink)
-		haveStream = !!stream
-	})
-	return;
-
-	// let target = el.tabSharingVideo
-	// sinkSource = new cct.StreamSource()
-	// let tabSink = new cct.HtmlSink()
-	// tabSink.target = target
-	// el.video.style.display = 'none'
-
-	// const onStream = () => {
-	// 	let stream1 = _proxySourceForwarder.stream
-	// 	let stream2 = _mediaSourceForwarder.stream
-	// 	let stream = stream1 || stream2 || null
-	// 	el.button.textContent = START_SHARING_TEXT
-	// 	el.button.disabled = false
-	// 	sinkSource.setStream(stream)
-	// 	sinkSource.connect(tabSink)
-	// 	haveStream = !!stream
-	// }
-
-	// _proxySource = new cct.ProxySource({
-	// 	connectionConfig: {
-	// 		iceServers,
-	// 		iceCandidateFilter (info) {
-	// 			return info.type === 'relay'
-	// 		},
-	// 	},
-	// })
-
-	// _proxySourceForwarder = new cct.StreamSink({ onStream })
-	// _proxySource.connect(_proxySourceForwarder)
-	// call.attach('content-proxy', _proxySource)
-
-	// _streamSource = new cct.PeerMediaPipe()
-	// //if (isChrome) {
-	// _dummySource = new cct.DummySource({ video: true }) // So that recvonly chrome -> firefox works
-	// _dummySource.connect(_streamSource)
-	// //}
-	// _mediaSourceForwarder = new cct.StreamSink({ onStream })
-	// _streamSource.connect(_mediaSourceForwarder)
-	// call.attach('content-stream', _streamSource)
-
-	// _remoteVideoSizer = new cct.DataShare()
-	// _remoteVideoSizer.on('update:size', _onRemoteVideoSize)
-	// call.attach('content-size', _remoteVideoSizer)
-
-	// _scroller = new cct.DataShare()
-	// call.attach('scroller', _scroller)
-	// _scroller.set('scroll', { x: 0, y: 0 })
-
-	// window.addEventListener('resize', _handleWindowResize)
-}
-
-function sinkCleanup(){
-	sinkWillUnmount()
-	tabSharingSink.cleanSink()
-}
-
-function sinkWillUnmount () {
-	// el.video.style.display = 'block'
-	// el.button.textContent = START_SHARING_TEXT
-	// el.button.disabled = false	
-	// return;
-
-	window.removeEventListener('resize', _handleWindowResize)
-	if (_dummySource) {
-		_dummySource.disconnect(_streamSource)
-		try {
-			_dummySource.stop()
-		} catch (error) { /* libcct 0.18.7 is a bit broken */ }
-		_dummySource = null
-	}
-	_proxySource.disconnect(_proxySourceForwarder)
-	_streamSource.disconnect(_mediaSourceForwarder)
-	if (!call.closed) {
-		call.detach('scroller', _scroller)
-		call.detach('content-proxy', _proxySource)
-		call.detach('content-stream', _streamSource)
-		call.detach('content-size', _remoteVideoSizer)
-	}
-	_remoteVideoSizer.off('update:size', _onRemoteVideoSize)
-	_remoteVideoSizer = null
-	_source = null
-	_scroller = null
-	_proxySource = null
-	_streamSource = null
-	_proxySourceForwarder = null
-	_mediaSourceForwarder = null
-}
-
-function _handleWindowResize () {
-}
-
-function _onRemoteVideoSize () {
-
-}
\ No newline at end of file
diff --git a/screen-sharing/tSource.js b/screen-sharing/tSource.js
deleted file mode 100644
index a6f6254..0000000
--- a/screen-sharing/tSource.js
+++ /dev/null
@@ -1,232 +0,0 @@
-var call = null
-var tabSource = null
-var _scroller = null
-var _contentSize = null
-var port = null
-var tabSharingExtensionLink = null
-var _stopWindowSizeObserver = null
-//var extensionId = 'cecejnhbkmfgeealnbgbmgfcpdllgaao' // Spaces Tab Sharing
-//var extensionId = extensionId // My test extension 
-let pageActionConditions = [{
-	pageUrl: { hostEquals: '*', schemes: ['https'] },
-}]
-
-var client = new cct.Client()
-let sender = false;
-let receiver = false;
-
-function connectCall () {
-	return PeerConnecter.clientInCall(client).then(function (connecter) {
-		call = connecter.call
-
-		call.on('connectionState', function (connectionState) {
-			if (connectionState === 'connected') {
-				el.exampleStatus.textContent = 'Sharing enabled'
-
-			} else {
-				el.exampleStatus.textContent = ''
-			}
-		})
-
-		//call.attach('data', data)
-		window.call = call;
-		console.log('### Call is : ', call)
-		return call
-
-	}).catch(function (error) {
-		cct.log.error('example', '' + error)
-		console.log('Error: ', error)
-	})
-}
-
-
-function getExtensionVersion () {
-	return new Promise((resolve, reject) => {
-		console.log('sending version query to extension')
-		sendChromeMessage({ type: 'version' }).then(message => {
-			let version = message && message.version
-			if (version) {
-				resolve(version)
-			} else {
-				let error = new Error(`Extension '${extensionId}' is not installed`)
-				error.name = 'ExtensionNotInstalledError'
-				reject(error)
-			}
-		}).catch(error => {
-			reject(error)
-		})
-	})
-}
-
-function uninstallExtension () {
-	return new Promise((resolve, reject) => {
-		console.log('sending version query to extension')
-		sendChromeMessage({ message: 'uninstall' }).then(message => {
-			if (message) {
-				resolve(messge)
-			} else {
-				let error = new Error(`Extension '${extensionId}' is not installed`)
-				error.name = 'ExtensionNotInstalledError'
-				reject(error)
-			}
-		})
-	})
-}
-
-function startWindowSizeObserver(contentSize) {
-  let onWindowResize = makeThrottler(40, () => {
-    contentSize.set('size', {
-      w: window.innerWidth,
-      h: window.innerHeight,
-    })
-  })
-  let stop = () => {
-    window.removeEventListener('resize', onWindowResize)
-  }
-  window.addEventListener('resize', onWindowResize)
-  onWindowResize()
-  return stop
-}
-
-function handleTabButtonClick () {
-	// getExtensionVersion().then(version => {
-	// 	console.log('### version is: ', version)
-	// })
-	// uninstallExtension().then(result => {
-	// 	console.log('#### result: ', result)
-	// }).catch(error => {
-	// 	console.log('### unsinstalled ')
-	// })
-	// return
-
-	console.log('tab sharing started')
-	if (call) {
-		stopTabSharing()
-		call.hangup()
-		call = null
-		el.tabButton.textContent = START_TAB_SHARING
-		return
-	}
-	el.tabButton.disabled = true
-	connectCall().then(call => {
-
-		if (!call.closed) {
-			_scroller = new cct.DataShare()
-			call.attach('scroller', _scroller)
-			_scroller.on('update:scroll', _onRemoteScroll)
-
-			_contentSize = new cct.DataShare()
-			call.attach('content-size', _contentSize)
-
-			// chrome extension passes window size from content script
-			  if (!window.chrome) {
-			    _stopWindowSizeObserver = startWindowSizeObserver(this._contentSize)
-			 }
-		}
-
-
-		startTabSharing({
-			extensionId,
-			call
-		})
-	})
-}
-
-function startTabSharing ({ extensionId, call }) {	
-	el.tabButton.textContent = STOP_TAB_SHARING
-	el.tabButton.disabled = false
-	el.tabReceiveButton.disabled = true
-
-	return getExtensionVersion().then(() => {
-		console.log('#### Extension OK')
-		let options = {
-			showOwnTabAction: true,//!!this.props.showOwnTabAction,
-			pageActionConditions: pageActionConditions,
-		}
-
-
-		tabSharingExtensionLink = new cct.TabSharingExtensionLink({extensionId, options, iceServers})
-		tabSharingExtensionLink.startShare()
-		tabSharingExtensionLink.on('contentSize', function(size){
-			if(_contentSize){
-				_contentSize.set('size',size)
-			}
-		})
-
-
-		call.attach('content-proxy', tabSharingExtensionLink)
-		console.log('################### CONNECT TO CALL')
-
-
-	}).catch(error => {
-		if (error.name === 'ExtensionNotInstalledError') {
-			el.error.textContent = 'No Extenstion detected'
-		} else {
-			el.error.textContent = 'chrome screen sharing failed:' + JSON.stringify(error)
-		}
-	})
-}
-
-function stopTabSharing () {
-	if (!call.closed) {
-		if (call.attachments['content-proxy']) {
-			call.detach('content-proxy')
-		}
-		if (call.attachments['content-stream']) {
-			call.detach('content-stream')
-		}
-		if (_contentSize) {
-			call.detach('content-size', _contentSize)
-		}
-		if (_scroller) {
-			call.detach('scroller', _scroller)
-		}
-	}
-	if (_scroller) {
-		_scroller.off('update:scroll', _onRemoteScroll)
-	}
-	if (_stopWindowSizeObserver) {
-		_stopWindowSizeObserver()
-		_stopWindowSizeObserver = null
-	}
-	try {
-		console.debug('Example', 'ending screen sharing')
-		if (window.chrome) {
-			tabSharingExtensionLink.endShare()
-		} 
-		el.tabReceiveButton.disabled = false
-	} catch (error) {
-		console.error('Example', 'failed to disconnect screen sharing extension port:', error)
-	}
-}
-
-function sendChromeMessage (message) {
-	//let extensionId = 'cecejnhbkmfgeealnbgbmgfcpdllgaao' // Spaces Tab Sharing
-	//let extensionId = extensionId // My test extension
-	return new Promise((resolve, reject) => {
-		chrome.runtime.sendMessage(extensionId, message, response => {
-			if (response) {
-				resolve(response)
-			} else {
-				let error = new Error('No response received')
-				error.name = 'ExtensionNotInstalledError'
-				reject(error)
-			}
-		})
-	})
-}
-
-function _onRemoteScroll(value) {
-	let {x, y} = value
-	// Some extra input validation since it's a sensitive area
-	x = Number(x)
-	y = Number(y)
-	let msg = {
-		type: 'scrollBy',
-		content: {x, y},
-	}
-
-	//Send to extension to handle
-	tabSharingExtensionLink.sendMessage(msg)
-	
-}
diff --git a/screen-sharing/tSource.notMovedToCCt.js b/screen-sharing/tSource.notMovedToCCt.js
deleted file mode 100644
index a0b3078..0000000
--- a/screen-sharing/tSource.notMovedToCCt.js
+++ /dev/null
@@ -1,315 +0,0 @@
-var call = null
-var tabSource = null
-var _scroller = null
-var _contentSize = null
-var port = null
-//var extensionId = 'cecejnhbkmfgeealnbgbmgfcpdllgaao' // Spaces Tab Sharing
-//var extensionId = extensionId // My test extension 
-let pageActionConditions = [{
-	pageUrl: { hostEquals: '*', schemes: ['https'] },
-}]
-
-var client = new cct.Client()
-let sender = false;
-let receiver = false;
-
-function connectCall () {
-	return PeerConnecter.clientInCall(client).then(function (connecter) {
-		call = connecter.call
-
-		call.on('connectionState', function (connectionState) {
-			if (connectionState === 'connected') {
-				el.exampleStatus.textContent = 'Sharing enabled'
-
-			} else {
-				el.exampleStatus.textContent = ''
-			}
-		})
-
-		//call.attach('data', data)
-		window.call = call;
-		console.log('### Call is : ', call)
-		return call
-
-	}).catch(function (error) {
-		cct.log.error('example', '' + error)
-		console.log('Error: ', error)
-	})
-}
-
-
-function getExtensionVersion () {
-	return new Promise((resolve, reject) => {
-		console.log('sending version query to extension')
-		sendChromeMessage({ type: 'version' }).then(message => {
-			let version = message && message.version
-			if (version) {
-				resolve(version)
-			} else {
-				let error = new Error(`Extension '${extensionId}' is not installed`)
-				error.name = 'ExtensionNotInstalledError'
-				reject(error)
-			}
-		})
-	})
-}
-
-function uninstallExtension () {
-	return new Promise((resolve, reject) => {
-		console.log('sending version query to extension')
-		sendChromeMessage({ message: 'uninstall' }).then(message => {
-			if (message) {
-				resolve(messge)
-			} else {
-				let error = new Error(`Extension '${extensionId}' is not installed`)
-				error.name = 'ExtensionNotInstalledError'
-				reject(error)
-			}
-		})
-	})
-}
-
-
-function handleTabButtonClick () {
-	// getExtensionVersion().then(version => {
-	// 	console.log('### version is: ', version)
-	// })
-	// uninstallExtension().then(result => {
-	// 	console.log('#### result: ', result)
-	// }).catch(error => {
-	// 	console.log('### unsinstalled ')
-	// })
-	// return
-
-	console.log('tab sharing started')
-	if (call) {
-		stopTabSharing()
-		call.hangup()
-		call = null
-		el.tabButton.textContent = START_TAB_SHARING
-		return
-	}
-	el.tabButton.disabled = true
-	connectCall().then(call => {
-
-		if (!call.closed) {
-			_scroller = new cct.DataShare()
-			call.attach('scroller', _scroller)
-			//_scroller.on('update:scroll', _onRemoteScroll)
-
-			_contentSize = new cct.DataShare()
-			call.attach('content-size', _contentSize)
-
-			// chrome extension passes window size from content script
-			// if (!window.chrome) {
-			//   this._stopWindowSizeObserver = startWindowSizeObserver(this._contentSize)
-			// }
-		}
-
-
-		startTabSharing({
-			extensionId,
-			call
-		})
-	})
-}
-
-function startTabSharing ({ extensionId, call }) {
-	el.video.style.display = 'none'
-	el.tabButton.textContent = STOP_TAB_SHARING
-	el.tabButton.disabled = false
-
-	return getExtensionVersion().then(() => {
-		console.log('#### Extension OK')
-		let options = {
-			showOwnTabAction: true,//!!this.props.showOwnTabAction,
-			pageActionConditions: pageActionConditions,
-		}
-
-		port = window.chrome.runtime.connect(extensionId, {
-			name: `options:${JSON.stringify(options)}`
-		})
-
-		let proxySink = new cct.ProxySink()
-
-		port.onMessage.addListener((msg) => {
-			console.debug('TabSharing', 'proxy message:', msg)
-			if (msg.type === 'haveStream') {
-				port.postMessage({
-					type: 'startCall',
-					content: iceServers,
-				})
-			} else if (msg.type === 'offer') {
-				proxySink.setOffer(msg.content)
-			} else if (msg.type === 'candidate') {
-				proxySink.addCandidate(msg.content)
-			} else if (msg.type === 'lostStream') {
-				proxySink.setOffer(null)
-				//setState({state: 'ready'})
-				console.info('TabSharing', ' lostStream')
-			} else if (msg.type === 'size') {
-				if (_contentSize) {
-					_contentSize.set('size', msg.content)
-				}
-			}
-		})
-
-		proxySink.on('candidate', (candidate) => {
-			console.debug('TabSharing', 'proxy candidate:', candidate)
-			port.postMessage({
-				type: 'candidate',
-				content: candidate,
-			})
-		})
-
-		proxySink.on('answer', (answer) => {
-			console.debug('TabSharing', 'proxy answer:', answer)
-			port.postMessage({
-				type: 'answer',
-				content: answer,
-			})
-			// props.onStartSharing && props.onStartSharing()
-			// setState({state: 'sharing'})			
-		})
-
-		proxySink.on('connected', () => {
-			port.postMessage({
-				type: 'startCall',
-				content: iceServers,
-			})
-			console.info('TabSharing', 'startCall')
-		})
-
-		port.onDisconnect.addListener(() => {
-			console.error('TabSharing', 'port disconnected')
-			port = null
-		})
-
-		call.attach('content-proxy', proxySink)
-		console.log('################### CONNECT TO CALL')
-
-
-	}).catch(error => {
-		if (error.name === 'ExtensionNotInstalledError') {
-			el.error.textContent = 'No Extenstion detected'
-		} else {
-			el.error.textContent = 'chrome screen sharing failed:' + JSON.stringify(error)
-		}
-	})
-}
-
-function stopTabSharing () {
-	if (!call.closed) {
-		if (call.attachments['content-proxy']) {
-			call.detach('content-proxy')
-		}
-		if (call.attachments['content-stream']) {
-			call.detach('content-stream')
-		}
-		if (_contentSize) {
-			call.detach('content-size', _contentSize)
-		}
-		if (_scroller) {
-			call.detach('scroller', _scroller)
-		}
-	}
-	// if (_scroller) {
-	// 	_scroller.off('update:scroll', _onRemoteScroll)
-	// }
-	// if (_stopWindowSizeObserver) {
-	// 	_stopWindowSizeObserver()
-	// 	_stopWindowSizeObserver = null
-	// }
-	try {
-		console.debug('Example', 'ending screen sharing')
-		if (window.chrome) {
-			if (port) {
-				port.postMessage({
-					type: 'endCall',
-				})
-				port.disconnect()
-			}
-			port = null
-		} else {
-			source.stop()
-			_source = null
-		}
-	} catch (error) {
-		console.error('Example', 'failed to disconnect screen sharing extension port:', error)
-	}
-}
-
-
-/** This part is for screen sharing */
-function startTabSharingXX (constraints) {
-	let tabSink = new cct.HtmlSink()
-	tabSink.target = el.tabSharingVideo
-
-	el.tabButton.textContent = STOP_TAB_SHARING
-	el.tabButton.disabled = false
-	el.error.textContent = ''
-	el.video.style.display = 'none'
-
-	fetchChromeScreenSource()
-		.then(source => {
-			tabSource = source
-			source.connect(new cct.StreamSink({
-				onStream: stream => {
-					if (!stream) { // Stream was removed
-						onStopSharing()
-						el.tabButton.textContent = 'Start Tab Sharing'
-					}
-					source.connect(tabSink)
-					console.info('example', 'screen sharing started successfully')
-				},
-			}))
-		}).catch(error => {
-			if (error.name === 'NotFoundError') {
-				console.error('Not found extension:', error)
-			} else {
-				console.error('Failed to do tab sharing: ', error)
-			}
-		})
-}
-function onStopSharing () {
-	//call.setLocalSource('content', null)
-	if (tabSource) {
-		tabSource.stop()
-		tabSource = null
-	}
-}
-
-function fetchChromeScreenSource () {
-	return sendChromeMessage({
-		type: 'requestMediaSourceId',
-		sourceTypes: ['window'],
-	}).then(({ sourceId }) => {
-		let source = new cct.DeviceSource({
-			video: {
-				chromeMediaSourceId: { exact: sourceId },
-				chromeMediaSource: { exact: 'desktop' },
-				width: { max: window.screen.width },
-				height: { max: window.screen.height },
-				frameRate: 5,
-			},
-		})
-		return source.promise.then(() => source)
-	})
-}
-
-
-function sendChromeMessage (message) {
-	//let extensionId = 'cecejnhbkmfgeealnbgbmgfcpdllgaao' // Spaces Tab Sharing
-	//let extensionId = extensionId // My test extension
-	return new Promise((resolve, reject) => {
-		chrome.runtime.sendMessage(extensionId, message, response => {
-			if (response) {
-				resolve(response)
-			} else {
-				let error = new Error('No response received')
-				error.name = 'NotFoundError'
-				reject(error)
-			}
-		})
-	})
-}
diff --git a/webrtc/index.html b/webrtc/index.html
deleted file mode 100644
index 4db5b0d..0000000
--- a/webrtc/index.html
+++ /dev/null
@@ -1,34 +0,0 @@
-<!DOCTYPE html>
-<html lang="en">
-
-<head>
-	<meta charset="UTF-8">
-	<meta name="viewport" content="width=device-width, initial-scale=1.0">
-	<meta http-equiv="X-UA-Compatible" content="ie=edge">
-	<title>WebRTC Examples</title>
-	<link rel="stylesheet" type="text/css" href="../resources/main.css">
-	<link rel="icon" href="../resources/favicon.ico">
-</head>
-
-<body>
-		<header>
-				<a class="header-title" href="index.html">
-						<img class="header-title-logo" src="resources/ECON_116px.png">
-						<span class="header-title-text">Ericsson C3 Web examples</span>
-				</a>
-		</header>
-	<main>
-		<section>
-			<div class="about">
-				<ul>
-					<li><a href="audioDetector.html" />Audio Detector</li><br/>					
-					<li><a href="audioMeter.html" />Audio Meter</li><br/>
-					<li><a href="localCall.html" />Local Call</li><br/>
-					<li><a href="multiClientCall.html" />Multi Client Call</li><br/>
-				</ul>
-			</div>
-		</section>
-	</main>
-</body>
-
-</html>
\ No newline at end of file
diff --git a/webrtc/multiClientCall.html b/webrtc/multiClientCall.html
index 3a4c70f..b74dcb2 100644
--- a/webrtc/multiClientCall.html
+++ b/webrtc/multiClientCall.html
@@ -148,9 +148,7 @@ var el = {
 var deviceSource = new cct.DeviceSource()
 deviceSource.connect(el.selfView)
 
-var client = new cct.Client({
-  iceServers: EXAMPLE_UTILS_ICE_SERVERS
-})
+var client = new cct.Client()
 
 PeerConnecter.clientInCall(client).then(function (connecter) {
   var room = connecter.room
