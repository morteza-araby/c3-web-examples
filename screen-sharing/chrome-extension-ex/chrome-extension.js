!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cct=t():e.cct=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=257)}([function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(47),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";function r(){this._defaultLogLevel=this.WARNING,this._categoryLevels={},this._logHandlers={}}function i(e,t){return function(n,r){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];v.a.string("log."+e,"category",n);if("string"!=typeof n)throw new TypeError("Log."+e+": category has to be a string");if(!((n in this._categoryLevels?this._categoryLevels[n]:this._defaultLogLevel)<t)){if("string"==typeof r)v.a.string("log."+e,"message",r);else{var s=r;v.a.object("log."+e,"object",s);var c=o,u=m()(c),d=u[0],l=u.slice(1);v.a.string("log."+e,"object message",d),r=s+" "+d,o=l}var f=this._logHandlers[e];f&&f.call.apply(f,[this,t,n,r].concat(p()(o)))}}}function o(e){log=e}function a(e,t,n){for(var r,i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(r=y[e]).call.apply(r,[console,"["+t+"] "+n].concat(o))}function s(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];if(this.color){var a;(a=y[e]).call.apply(a,[console,"%c["+t+"]%c "+n].concat(["color: "+w[e],"color:"],i))}else{var s;(s=y[e]).call.apply(s,[console,"["+t+"] "+n].concat(i))}}Object.defineProperty(t,"__esModule",{value:!0}),t.Log=r,t.setLog=o;var c,u,d=n(88),l=n.n(d),f=n(31),p=n.n(f),h=n(89),m=n.n(h),v=n(12),g=n(13);r.prototype.setLogHandler=function(e,t){if(arguments.length<=1&&(t=e,e=this.ALL),"number"!=typeof e)throw new TypeError("Log.setLogHandler: levels must be a number");if("function"!=typeof t&&t)throw new TypeError("Log.setLogHandler: handler must be a function");this.levels.forEach(function(n,r){1<<r&e&&(this._logHandlers[n]=t)}.bind(this))},r.prototype.setLogLevel=function(e,t){if(arguments.length<=1){if("number"!=typeof(t=e))throw new TypeError("Log.setLogLevel: level must be a number");this._defaultLogLevel=t}else{if("string"!=typeof e)throw new TypeError("Log.setLogLevel: category must be a string");if("number"!=typeof t)throw new TypeError("Log.setLogLevel: level must be a number");this._categoryLevels[e]=t}},r.prototype.levels=["error","warning","info","debug","verbose"],r.prototype.levels.forEach(function(e,t){var n=1<<t;r.prototype[e.toUpperCase()]=n,r.prototype[e]=i(e,n)}),r.prototype.NONE=0,r.prototype.ALL=r.prototype.levels.reduce(function(e,t,n){return e|1<<n},0);var log=new r;t.default=log;var y=(c={},l()(c,log.ERROR,(console.error||console.log).bind(console)),l()(c,log.WARNING,(console.warn||console.log).bind(console)),l()(c,log.INFO,(console.info||console.log).bind(console)),l()(c,log.DEBUG,(console.debug||console.log).bind(console)),l()(c,log.VERBOSE,console.log.bind(console)),c),w=(u={},l()(u,log.ERROR,"#F74333"),l()(u,log.WARNING,"#F79743"),l()(u,log.INFO,"#3343F7"),l()(u,log.DEBUG,"#43C733"),l()(u,log.VERBOSE,"#F743F7"),u);log.color=!1,log.colors=w;var b;b=g.isChrome||g.isFirefox?s:a,log.setLogHandler(log.ALL,b),log.defaultHandler=b},function(e,t,n){var r=n(54)("wks"),i=n(38),o=n(5).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports={default:n(101),__esModule:!0}},function(e,t,n){var r=n(5),i=n(0),o=n(18),a=n(16),s=function(e,t,n){var c,u,d,l=e&s.F,f=e&s.G,p=e&s.S,h=e&s.P,m=e&s.B,v=e&s.W,g=f?i:i[t]||(i[t]={}),y=g.prototype,w=f?r:p?r[t]:(r[t]||{}).prototype;f&&(n=t);for(c in n)(u=!l&&w&&void 0!==w[c])&&c in g||(d=u?w[c]:n[c],g[c]=f&&"function"!=typeof w[c]?n[c]:m&&u?o(d,r):v&&w[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):h&&"function"==typeof d?o(Function.call,d):d,h&&((g.virtual||(g.virtual={}))[c]=d,e&s.R&&y&&!y[c]&&a(y,c,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(96),o=r(i),a=n(62),s=r(a),c=n(33),u=r(c);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(33),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){var r=n(14),i=n(70),o=n(56),a=Object.defineProperty;t.f=n(11)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return function(t,n,r,i){if(void 0!==r&&null!==r)try{this[e](t,n,r,i)}catch(e){throw e.message+=" if present",e}return r}}function i(e,t,n,r){this.context=e,this.name=t,this.value=n,this.empty=r}function o(e){return function(t,n){if(!this.empty&&t in this.value&&void 0!==this.value[t]&&null!==this.value[t])try{this[e](t,n)}catch(e){throw e.message+=" if present",e}return this}}var a=n(33),s=n.n(a),c={count:function(e,t,n){if(t>n)throw new TypeError(e+" requires at least"+t+" arguments")},error:function(e,t,n){throw"object"===(void 0===e?"undefined":s()(e))&&(e=e.constructor&&e.constructor.name||"Unknown",e+=" constructor"),new TypeError(e+": argument '"+t+"' must "+n)},optObject:r("object"),object:function(e,t,n){return"object"!==(void 0===n?"undefined":s()(n))?this.error(e,t,"be an object"):null===n?this.error(e,t,"be an object, not null"):Array.isArray(n)?this.error(e,t,"be an object, not an array"):n instanceof RegExp&&this.error(e,t,"be an object, not a RegExp instance"),n},optInstance:r("instance"),instance:function(e,t,n,r){if(!r)throw new Error("Failed instance argument check for "+t+" in "+e+", constructor is "+r+".");if(Array.isArray(r)){if(!r.some(function(e){return n instanceof e})){var i=r.map(function(e){return e.name}).join(", ");this.error(e,t,"be an instance of any of "+i)}}else n instanceof r||this.error(e,t,"be an instance of "+r.name);return n},optFunc:r("func"),func:function(e,t,n){return"function"!=typeof n&&this.error(e,t,"be a function"),n},optArray:r("array"),array:function(e,t,n){return Array.isArray(n)||this.error(e,t,"be an array"),n},optString:r("string"),string:function(e,t,n){return"string"!=typeof n?this.error(e,t,"be a string"):""===n&&this.error(e,t,"not be an empty string"),n},optStringOrEmpty:r("string"),stringOrEmpty:function(e,t,n){return"string"!=typeof n&&this.error(e,t,"be a string"),n},optValues:r("values"),values:function(e,t,n,r){return-1===r.indexOf(n)&&this.error(e,t,"be one of "+r.join(", ")),n},optNumber:r("number"),number:function(e,t,n){return isNaN(n)?this.error(e,t,"not be NaN"):isFinite(n)?"number"!=typeof n&&this.error(e,t,"be a number"):this.error(e,t,"not be Infinite"),n},optBoolean:r("boolean"),boolean:function(e,t,n){return"boolean"!=typeof n&&this.error(e,t,"be a boolean"),n},options:function(e,t,n){return this.object(e,t,n),new i(e,t,n)},optOptions:function(e,t,n){if(void 0!==n)try{return this.options(e,t,n)}catch(e){throw e.message+=" if present",e}return new i(0,0,0,!0)}};t.a=c,i.prototype={optObject:o("object"),object:function(e){return this.empty||c.object(this.context,this.name+"."+e,this.value[e]),this},optInstance:o("instance"),instance:function(e,t){return this.empty||c.instance(this.context,this.name+"."+e,this.value[e],t),this},optFunc:o("func"),func:function(e){return this.empty||c.func(this.context,this.name+"."+e,this.value[e]),this},optArray:o("array"),array:function(e){return this.empty||c.array(this.context,this.name+"."+e,this.value[e]),this},optString:o("string"),string:function(e){return this.empty||c.string(this.context,this.name+"."+e,this.value[e]),this},optStringOrEmpty:o("stringOrEmpty"),stringOrEmpty:function(e){return this.empty||c.stringOrEmpty(this.context,this.name+"."+e,this.value[e]),this},optValues:o("values"),values:function(e,t){return this.empty||c.values(this.context,this.name+"."+e,this.value[e],t),this},optNumber:o("number"),number:function(e){return this.empty||c.number(this.context,this.name+"."+e,this.value[e]),this},optBoolean:o("boolean"),boolean:function(e){return this.empty||c.boolean(this.context,this.name+"."+e,this.value[e]),this}}},function(e,t,n){"use strict";function r(e,t,n){for(var r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e))return e[r];return null}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=0|e.length,r=0;r<n;r+=1)e[r]=t;return e}function o(e,t,n){var r=[];for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)&&r.push(e[i]);return r}function a(e,t,n){for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function s(e,t,n){var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r}function c(e,t,n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.call(n,e[i],i,e));return r}function u(e){if(!e)return[];if(Array.isArray(e))throw new TypeError("tried to call utils.values() on array");return Ce()(e).map(function(t){return e[t]})}function d(e,t){var n=new be.a(e),r=new be.a(t),i=[],o=[];return n.forEach(function(e){r.has(e)||o.push(e)}),r.forEach(function(e){n.has(e)||i.push(e)}),[i,o]}function l(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e[n];return t}function f(e,t,n){ye()(e,t,{enumerable:!1,configurable:!0,writable:!1,value:n})}function p(e,t,n){ye()(e,t,{enumerable:!0,configurable:!1,writable:!1,value:n})}function h(e,t,n){ye()(e,t,{enumerable:!0,configurable:!1,get:n})}function m(e,t,n){1===arguments.length?(t=e,e=0,n=1):2===arguments.length&&(n=1);for(var r=[],i=e;i<t;i+=n)r.push(i);return r}function v(){var e={};return e.promise=new ve.a(function(t,n){e.resolve=t,e.reject=n}),e}function g(e,t){if(!e)return null;var n,r={};if(t)for(var i in t)n=t[i],r[n]=e[n];else for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function y(e,t,n){if(!e)return null;if(!t)return e;var r;if(n)for(var i in n)r=n[i],e[r]=t[r];else for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function w(e){return function(){var t=arguments;return new ve.a(function(n){setTimeout(function(){n.apply(null,t)},e)})}}function b(e){var t,n,r=null,i=U(Y,"crypto");if(i&&window.Uint8Array)r=new window.Uint8Array(e),i.getRandomValues(r);else for(t=(new Date).getTime(),r=[],n=0;n<e;n+=1)r[n]=Math.random()*t&255;return S(String.fromCharCode.apply(null,r)).replace(/\-_/g,"").slice(0,e)}function _(e){var t=window.crypto&&window.crypto.subtle;return t&&t.digest?t.digest("SHA-1",e):ve.a.resolve(null)}function C(e){return atob(e)}function S(e){return btoa(e)}function T(e){return C(e.replace(/[-_]/g,R))}function E(e){return S(e).replace(/[+\/=]/g,P)}function P(e){switch(e){case"+":return"-";case"/":return"_"}return""}function R(e){switch(e){case"-":return"+";case"_":return"/"}return""}function x(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=e.length,i=0;i<r;i+=1)n[i]=e.charCodeAt(i);return t}function k(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=e.length,i=0;i<r;i+=1)n[i]=e.charCodeAt(i);return t}function I(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096,n=e.length,r="",i=0;i<n;i+=t)r+=String.fromCharCode.apply(null,e.subarray(i,i+t));return r}function O(e){return I(new Uint8Array(e.buffer||e,e.byteOffset,e.byteLength))}function M(e){return I(new Uint16Array(e.buffer||e,e.byteOffset,e.byteLength>>1))}function D(e){var t=e.split(/:|;|,/g);if("data"!==t[0])throw new Error("invalid data uri: "+e.slice(0,100));if("base64"!==t[2])throw new Error("invalid data uri: "+e.slice(0,100));return{mimeType:t[1],binaryString:C(t[3])}}function A(e){var t=new FileReader;return new ve.a(function(n,r){t.onload=function(){n(t.result)},t.onerror=r,t.readAsArrayBuffer(e)})}function j(e,t,n){var r=new Blob([e],{type:n});return r.name=t,r.lastModifiedDate=new Date,r}function L(e){var t=new Uint8Array(e);return Array.prototype.map.call(t,function(e){return("00"+e.toString(16)).slice(-2)}).join("")}function N(e){if(e.length%2!=0)throw new TypeError("hexToBuffer: hex length must be even");for(var t=new Uint8Array(e.length/2),n=0;e.substr(n,2);n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t}function W(e){var t=0;for(var n in e)t+=e[n].byteLength;var r=new Uint8Array(t),i=0;for(var o in e){var a=new Uint8Array(e[o]);r.set(a,i),i+=a.byteLength}return r}function U(e,t){var n=t[0].toUpperCase()+t.slice(1),r=e[t]||e["moz"+n]||e["webkit"+n]||e["ms"+n];return r?"function"==typeof r?r.bind(e):r:null}function F(e,t){if(Y){var n=Y.__C3_SDK_INSTANCES__[e];n?-1===n.indexOf(t)&&n.push(t):Y.__C3_SDK_INSTANCES__[e]=[t],Y.__C3_SDK_INSTANCES__.listeners.forEach(function(n){n("added",e,t)})}}function B(e,t){if(Y){var n=Y.__C3_SDK_INSTANCES__[e],r=n.indexOf(t);-1!==r&&n.splice(r,1),Y.__C3_SDK_INSTANCES__.listeners.forEach(function(n){n("removed",e,t)})}}function G(e){for(var t=[G],n=arguments.length,r=1;r<n;r+=1)t[r]=arguments[r];var i=he()(e.prototype);return e.apply(i,t),i}function V(e,t){if(G!==t)throw new TypeError(e+": cannot be used as a constructor")}function z(e){return!("object"!==(void 0===e?"undefined":fe()(e))||null===e||Array.isArray(e)||e instanceof RegExp)}function H(e){}function q(e){return isNaN(e)?e:Number(e)%1==0?parseInt(e):parseFloat(e)}function J(e){for(var t=e.length,n=e.length-1;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function $(e,t){var n=[],r=0;return function(i){function o(){r=0;try{t(n)}catch(e){console.error("error in timed buffer callback: "+e)}n=[]}n.push(i),r||(r=setTimeout(o,e))}}function K(e,t){return function(n){if(t){var r=new Error("Error in "+t+": "+n.message);r.reason=n,e(r)}else e(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.find=r,t.fill=i,t.filter=o,t.forEach=a,t.map=s,t.mapValues=c,t.values=u,t.diff=d,t.toArray=l,t.hiddenProp=f,t.prop=p,t.getter=h,t.range=m,t.defer=v,t.shallowCopy=g,t.assign=y,t.wait=w,t.randomString=b,t.arrayBufferSha1IfSupported=_,t.base64ToUtf8=C,t.utf8ToBase64=S,t.urlSafeBase64ToUtf8=T,t.utf8ToUrlSafeBase64=E,t.binaryStringToArrayBuffer=x,t.unicodeStringToArrayBuffer=k,t.arrayBufferToBinaryString=O,t.arrayBufferToUnicodeString=M,t.parseDataUri=D,t.blobToArrayBuffer=A,t.bufferToFile=j,t.bufferToHex=L,t.hexToBuffer=N,t.concatenateArrayBuffers=W,t.noVendor=U,t.registerInstance=F,t.unregisterInstance=B,t.priv=G,t.assertPriv=V,n.d(t,"isFirefox",function(){return Se}),n.d(t,"isChrome",function(){return Ee}),n.d(t,"browser",function(){return Pe}),n.d(t,"isIE",function(){return Re}),t.isObject=z,t.notInNode=H,t.maybeConvertStringToNumber=q,t.getStringByteLength=J,n.d(t,"ReadOnlyMap",function(){return xe}),n.d(t,"ReadOnlySet",function(){return ke}),t.createTimedBuffer=$,t.errorForwarder=K;var Y,Z=n(32),X=n.n(Z),Q=n(6),ee=n.n(Q),te=n(1),ne=n.n(te),re=n(2),ie=n.n(re),oe=n(9),ae=n.n(oe),se=n(69),ce=n.n(se),ue=n(8),de=n.n(ue),le=n(33),fe=n.n(le),pe=n(62),he=n.n(pe),me=n(23),ve=n.n(me),ge=n(47),ye=n.n(ge),we=n(45),be=n.n(we),_e=n(64),Ce=n.n(_e);(Y=window)&&(Y.__C3_SDK_INSTANCES__={listeners:new be.a,addListener:function(e){this.listeners.add(e)},removeListener:function(e){this.listeners.delete(e)}});var Se=/firefox/i.test("undefined"!=typeof navigator&&navigator.userAgent),Te=/google inc/i.test("undefined"!=typeof navigator&&navigator.vendor),Ee=Te&&/chrome/i.test("undefined"!=typeof navigator&&navigator.userAgent),Pe=Ee?"chrome":Se?"firefox":"other",Re=!!Y.document&&!!Y.document.documentMode,xe=function(e){function t(){ne()(this,t);var e=ae()(this,(t.__proto__||ee()(t)).call(this));if(arguments.length)throw new TypeError("ReadOnlyMap does not support constructor arguments");return e}return de()(t,e),ie()(t,[{key:"set",value:function(){throw new TypeError("Map is read-only")}},{key:"delete",value:function(){throw new TypeError("Map is read-only")}},{key:"clear",value:function(){throw new TypeError("Map is read-only")}},{key:"_set",value:function(e,n){return ce()(t.prototype.__proto__||ee()(t.prototype),"set",this).call(this,e,n)}},{key:"_delete",value:function(e){return ce()(t.prototype.__proto__||ee()(t.prototype),"delete",this).call(this,e)}},{key:"_clear",value:function(){return ce()(t.prototype.__proto__||ee()(t.prototype),"clear",this).call(this)}}]),t}(X.a),ke=function(e){function t(){ne()(this,t);var e=ae()(this,(t.__proto__||ee()(t)).call(this));if(arguments.length)throw new TypeError("ReadOnlySet does not support constructor arguments");return e}return de()(t,e),ie()(t,[{key:"add",value:function(){throw new TypeError("Set is read-only")}},{key:"delete",value:function(){throw new TypeError("Set is read-only")}},{key:"clear",value:function(){throw new TypeError("Set is read-only")}},{key:"_add",value:function(e){return ce()(t.prototype.__proto__||ee()(t.prototype),"add",this).call(this,e)}},{key:"_delete",value:function(e){return ce()(t.prototype.__proto__||ee()(t.prototype),"delete",this).call(this,e)}},{key:"_clear",value:function(){return ce()(t.prototype.__proto__||ee()(t.prototype),"clear",this).call(this)}}]),t}(be.a)},function(e,t,n){var r=n(17);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(67),i=n(35);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(10),i=n(27);e.exports=n(11)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(63);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},,function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(117)(!0);n(50)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){e.exports={default:n(136),__esModule:!0}},function(e,t){e.exports={}},function(e,t,n){var r=n(77),i=n(49);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(35);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(10).f,i=n(19),o=n(4)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(120);for(var r=n(5),i=n(16),o=n(24),a=n(4)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var u=s[c],d=r[u],l=d&&d.prototype;l&&!l[a]&&i(l,a,u),o[u]=o.Array}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(79),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){e.exports={default:n(134),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(94),o=r(i),a=n(87),s=r(a),c="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===c(o.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":c(e)}},function(e,t,n){"use strict";function r(e){return"Listener leak: added more than "+e+" listeners for a single event.  This limit can be changed by setting the LISTENER_LIMIT property on the emitter object."}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return 0===arguments.length?C()(this,I):function(e){function t(){return h()(this,t),y()(this,(t.__proto__||f()(t)).apply(this,arguments))}return b()(t,e),v()(t,[{key:"_listeners",value:function(){return this.__listeners||(this.__listeners=new d.a),this.__listeners}},{key:"on",value:function(e,t){x.a.count("EventEmitter.on",2,arguments.length),x.a.string("EventEmitter.on","eventType",e),x.a.func("EventEmitter.on","listener",t);var n=this._listeners().get(e),i=this.constructor._deprecatedEvents&&this.constructor._deprecatedEvents[e];i&&R.default.warning("deprecated",i("on")),n||(n=[],this._listeners().set(e,n));var o={remaining:-1,func:t};n.iterating?(n.pending||(n.pending=[]),n.pending.push(o)):n.push(o);var a=this.LISTENER_LIMIT;return a="number"==typeof a?a:k,n.length>a&&R.default.warning("emitter",r(a),this),this}},{key:"once",value:function(e,t){var n=this;x.a.count("EventEmitter.once",1,arguments.length),x.a.string("EventEmitter.once","eventType",e),x.a.optFunc("EventEmitter.once","listener",t);var i=this.constructor._deprecatedEvents&&this.constructor._deprecatedEvents[e];if(i&&R.default.warning("deprecated",i("once")),t){var o=(this._listeners().get(e)||[]).concat({remaining:1,func:t});this._listeners().set(e,o);var a=this._listeners().get(e).length,s=this.LISTENER_LIMIT;return s="number"==typeof s?s:k,a>s&&R.default.warning("emitter",r(s),this),this}return new c.a(function(t){var r=(n._listeners().get(e)||[]).concat({remaining:1,func:t});n._listeners().set(e,r)})}},{key:"off",value:function(e,t){x.a.count("EventEmitter.off",1,arguments.length),x.a.string("EventEmitter.off","eventType",e),x.a.func("EventEmitter.off","listener",t);var n=this.constructor._deprecatedEvents&&this.constructor._deprecatedEvents[e];n&&R.default.warning("deprecated",n("off"));var r,i;if(r=this._listeners().get(e))for(i=0;i<r.length;i+=1)if(r[i].func===t){if(r.iterating){if(0===r[i].remaining)continue;r[i].remaining=0}else r.splice(i,1);return this}return this}},{key:"_clearListeners",value:function(e){e?this._listeners().delete(e):this._listeners().clear()}},{key:"_getListeners",value:function(e){return x.a.count("EventEmitter.listeners",1,arguments.length),x.a.string("EventEmitter.listeners","eventType",e),(this._listeners().get(e)||[]).filter(function(e){return e.remaining}).map(function(e){return e.func})}},{key:"_emit",value:function(e){var t=e.eventType||e,n=e.defaultHandler,r=this._listeners().get(t);if(r||n){var i,o=[];for(i=1;i<arguments.length;i+=1)o[i-1]=arguments[i];if(!r)return void n.apply(this,o);var s=!1;for(r.iterating=!0,i=0;i<r.length;i+=1){var c=r[i];if(0!==c.remaining){c.remaining>0&&(c.remaining-=1);try{c.func.apply(this,o),s=!0}catch(e){R.default.error("emitter","Error in event listener, "+e+" "+(e.stack?e.stack+"\n":""))}}}for(r.iterating=!1,i=r.length-1;i>=0;i-=1)0===r[i].remaining&&r.splice(i,1);r.pending&&(r.push.apply(r,a()(r.pending)),delete r.pending),!s&&n&&n.apply(this,o)}}}]),t}(e)}var o=n(31),a=n.n(o),s=n(23),c=n.n(s),u=n(32),d=n.n(u),l=n(6),f=n.n(l),p=n(1),h=n.n(p),m=n(2),v=n.n(m),g=n(9),y=n.n(g),w=n(8),b=n.n(w),_=n(163),C=n.n(_),S=n(169),T=n.n(S),E=n(62),P=n.n(E),R=n(3),x=n(12),k=10,I=function(){var e=i(null),t=P()(null);return T()(e.prototype).forEach(function(n){"constructor"!==n&&(t[n]=e.prototype[n])}),t}();t.a=i},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(14),i=n(95),o=n(49),a=n(53)("IE_PROTO"),s=function(){},c=function(){var e,t=n(60)("iframe"),r=o.length;for(t.style.display="none",n(83).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(155),o=r(i),a=n(152),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=(0,s.default)(e);!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){var r=n(18),i=n(73),o=n(71),a=n(14),s=n(37),c=n(65),u={},d={},t=e.exports=function(e,t,n,l,f){var p,h,m,v,g=f?function(){return e}:c(e),y=r(n,l,t?2:1),w=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>w;w++)if((v=t?y(a(h=e[w])[0],h[1]):y(e[w]))===u||v===d)return v}else for(m=g.call(e);!(h=m.next()).done;)if((v=i(m,y,h.value,t))===u||v===d)return v};t.BREAK=u,t.RETURN=d},function(e,t){e.exports=!0},function(e,t){},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(30),i=n(4)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(103),__esModule:!0}},function(e,t,n){var r=n(7),i=n(0),o=n(21);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(99),__esModule:!0}},function(e,t,n){e.exports={default:n(148),__esModule:!0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r=n(41),i=n(7),o=n(78),a=n(16),s=n(19),c=n(24),u=n(114),d=n(28),l=n(76),f=n(4)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,m,v,g,y){u(n,t,m);var w,b,_,C=function(e){if(!p&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",T="values"==v,E=!1,P=e.prototype,R=P[f]||P["@@iterator"]||v&&P[v],x=R||C(v),k=v?T?C("entries"):x:void 0,I="Array"==t?P.entries||R:R;if(I&&(_=l(I.call(new e)))!==Object.prototype&&(d(_,S,!0),r||s(_,f)||a(_,f,h)),T&&R&&"values"!==R.name&&(E=!0,x=function(){return R.call(this)}),r&&!y||!p&&!E&&P[f]||a(P,f,x),c[t]=x,c[S]=h,v)if(w={values:T?x:C("values"),keys:g?x:C("keys"),entries:k},y)for(b in w)b in P||o(P,b,w[b]);else i(i.P+i.F*(p||E),t,w);return w}},function(e,t,n){var r=n(38)("meta"),i=n(17),o=n(19),a=n(10).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(21)(function(){return c(Object.preventExtensions({}))}),d=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},l=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[r].w},p=function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&d(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:l,getWeak:f,onFreeze:p}},function(e,t,n){var r=n(43),i=n(27),o=n(15),a=n(56),s=n(19),c=n(70),u=Object.getOwnPropertyDescriptor;t.f=n(11)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(54)("keys"),i=n(38);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(5),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(17);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(5),i=n(0),o=n(41),a=n(58),s=n(10).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){t.f=n(4)},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(17),i=n(5).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(16);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){e.exports={default:n(98),__esModule:!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports={default:n(135),__esModule:!0}},function(e,t,n){var r=n(44),i=n(4)("iterator"),o=n(24);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";function r(e){return!!e&&(x?e instanceof x:e.id&&e.addTrack&&e.getTracks)}function webRtcReady(e){return new C.a(function(t){T.a?T.a.webRTCReady(function(){t(e)}):t(e)})}function i(e,t){if(P.isFirefox){var n=e._streamsPendingRemoval;n&&n.has(t)&&n.delete(t)}e.addStream(t)}function o(e,t){function n(){var r=e.signalingState;-1!==I.indexOf(r)&&(e.removeEventListener("signalingstate",n),t())}e.addEventListener("signalingstate",n)}function a(e,t){t.forEach(function(t){var r=n.i(P.find)(e.getSenders(),function(e){return e.track===t});r?e.removeTrack(r):E.default.debug("webrtc-utils","Failed to remove track '"+t+"' form peer connection, no sender found.")})}function s(e,t){var n=e.signalingState;if(P.isFirefox&&-1===I.indexOf(n)){E.default.info("webrtc-utils","delaying removeTrack since we're not in a stable state");var r=e._streamsPendingRemoval;return r||(r=new b.a,e._streamsPendingRemoval=r,o(e,function(){var t=e._streamsPendingRemoval;E.default.info("webrtc-utils","stable state reached, removing streams: "+t),t.forEach(function(t){return s(e,t)})})),void r.add(t)}if(e.removeStream)try{e.removeStream(t)}catch(n){if("NotSupportedError"!==n.name)throw n;a(e,t.getTracks())}else a(e,t.getTracks())}function c(e){this.nodes=e||[]}function u(){this._references=0,this._context=null}function d(e){if(e._blobId&&0===e._blobId.indexOf("MediaStream_")){var t=e.id,n=t.split("-");return 2===n.length?n[0]:6===n.length?n[0]:10===n.length?n.slice(0,5).join("-"):(E.default.warning("media-streamâ€“id","unexpected cordova media stream id: "+e.id),e.id)}return e.id}function l(e,t){return e[d(t)]=t,e}function f(e,t){var r=[].concat(y()(e)).reduce(l,{}),i=[].concat(y()(t)).reduce(l,{}),o=v()(r),a=v()(i),s=n.i(P.diff)(o,a),c=h()(s,2),u=c[0],d=c[1];return[u.map(function(e){return i[e]}),d.map(function(e){return r[e]})]}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"isWebRtcPlugin",function(){return R}),n.d(t,"MediaStream",function(){return x}),n.d(t,"AudioContext",function(){return k}),t.isMediaStream=r,t.webRtcReady=webRtcReady,t.addPeerConnectionStream=i,t.removePeerConnectionStream=s,t.BinaryTree=c,n.d(t,"audioContextUtil",function(){return O}),t.getMediaStreamId=d,t.streamDiff=f;var p=n(39),h=n.n(p),m=n(64),v=n.n(m),g=n(31),y=n.n(g),w=n(45),b=n.n(w),_=n(23),C=n.n(_),S=n(205),T=n.n(S);n.d(t,"AdapterJS",function(){return T.a});var E=n(3),P=n(13),R="plugin"===window.webrtcDetectedType,x=n.i(P.noVendor)(window,"MediaStream"),k=n.i(P.noVendor)(window,"AudioContext"),I=["stable","closed"];c.prototype={constructor:c,tag:"binary-tree",toString:function(){return"binaryTree{nodes="+this.nodes+"}"},root:function(){return this.nodes[0]},parent:function(e){var t=this.nodes.indexOf(e),n=Math.floor((t-1)/2);return this.nodes[n]},left:function(e){var t=this.nodes.indexOf(e),n=2*t+1;return this.nodes[n]},right:function(e){var t=this.nodes.indexOf(e),n=2*t+2;return this.nodes[n]}},u.MAX_REFERENCES=32,u.prototype={constructor:u,tag:"audio-context-util",toString:function(){return"audio-context-util{references="+this._references+", context="+this._context+"}"},get:function(){return this._references+=1,this._references>u.MAX_REFERENCES&&E.default.warning(this.tag,"Too many audioContext references, possible leak."),this._context||(this._context=new k),this._context},release:function(){if(0===this._references)return void E.default.error(this.tag,"audioContext was dereferenced too many times.");1===this._references&&(this._context.close(),this._context=null),this._references-=1}};var O=new u},function(e,t,n){var r=n(30);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(6),o=r(i),a=n(93),s=r(a);t.default=function e(t,n,r){null===t&&(t=Function.prototype);var i=(0,s.default)(t,n);if(void 0===i){var a=(0,o.default)(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var c=i.get;if(void 0!==c)return c.call(r)}},function(e,t,n){e.exports=!n(11)&&!n(21)(function(){return 7!=Object.defineProperty(n(60)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(24),i=n(4)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(30);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(14);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(77),i=n(49).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(19),i=n(26),o=n(53)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(19),i=n(15),o=n(108)(!1),a=n(53)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){e.exports=n(16)},function(e,t,n){e.exports={default:n(97),__esModule:!0}},function(e,t,n){"use strict";var r=n(10).f,i=n(36),o=n(61),a=n(18),s=n(59),c=n(35),u=n(40),d=n(50),l=n(74),f=n(85),p=n(11),h=n(51).fastKey,m=p?"_s":"size",v=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,d){var l=e(function(e,r){s(e,l,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&u(r,n,e[d],e)});return o(l.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var t=this,n=v(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[m]--}return!!n},forEach:function(e){s(this,l,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!v(this,e)}}),p&&r(l.prototype,"size",{get:function(){return c(this[m])}}),l},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){d(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){var r=n(44),i=n(107);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";var r=n(5),i=n(7),o=n(51),a=n(21),s=n(16),c=n(61),u=n(40),d=n(59),l=n(17),f=n(28),p=n(10).f,h=n(109)(0),m=n(11);e.exports=function(e,t,n,v,g,y){var w=r[e],b=w,_=g?"set":"add",C=b&&b.prototype,S={};return m&&"function"==typeof b&&(y||C.forEach&&!a(function(){(new b).entries().next()}))?(b=t(function(t,n){d(t,b,e,"_c"),t._c=new w,void 0!=n&&u(n,g,t[_],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in C&&(!y||"clear"!=e)&&s(b.prototype,e,function(n,r){if(d(this,b,e),!t&&y&&!l(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),"size"in C&&p(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(t,e,g,_),c(b.prototype,n),o.NEED=!0),f(b,e),S[e]=b,i(i.G+i.W+i.F,S),y||v.setStrong(b,e,g),b}},function(e,t,n){e.exports=n(5).document&&document.documentElement},function(e,t,n){var r=n(4)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(0),o=n(10),a=n(11),s=n(4)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";n.d(t,"b",function(){return E}),n.d(t,"c",function(){return P});var r=n(69),i=n.n(r),o=n(6),a=n.n(o),s=n(9),c=n.n(s),u=n(8),d=n.n(u),l=n(45),f=n.n(l),p=n(1),h=n.n(p),m=n(2),v=n.n(m),g=n(3),y=n(12),w=n(13),b=n(131),_=n(149),C=n(92),S="media-node",MediaNode=function(){function MediaNode(){h()(this,MediaNode),this[C.a]=new f.a,this[C.b]=new f.a}return v()(MediaNode,[{key:"toString",value:function(){var e=this.constructor.name;return(e?e[0].toLowerCase()+e.slice(1):"_mediaNode")+"{io="+this[C.a].size+"/"+this[C.b].size+"}"}},{key:C.c,get:function(){return!0}}],[{key:"connect",value:function(e,t){y.a.object(e.constructor.name+".connect","output",e),t instanceof HTMLElement||y.a.object(e.constructor.name+".connect","input",t),e=_.a.resolve(e),e.connect(t)}},{key:"disconnect",value:function(e,t){y.a.object(e.constructor.name+".connect","output",e),t instanceof HTMLElement||y.a.optObject(e.constructor.name+".connect","input",t),e=_.a.resolve(e),e.disconnect(t)}},{key:"connectMixin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return function(e){function t(){return h()(this,t),c()(this,(t.__proto__||a()(t)).apply(this,arguments))}return d()(t,e),v()(t,[{key:"connect",value:function(e){MediaNode.connect(this,e)}},{key:"disconnect",value:function(e){MediaNode.disconnect(this,e)}}]),t}(e)}}]),MediaNode}();t.a=MediaNode;var T=function(e){function t(e){var n=e.parent,r=e.portConstructor,i=e.onStream,o=e.onCreate,s=e.onDetach;h()(this,t);var u=c()(this,(t.__proto__||a()(t)).call(this));return y.a.object(u.constructor.name+" constructor","parent",n),y.a.func(u.constructor.name+" constructor","portConstructor",r),u._parent=n,u._portConstructor=r,u._onStream=i,u._onCreate=o,u._onDetach=s,u}return d()(t,e),v()(t,[{key:"get",value:function(e){var n=this;y.a.string(this.constructor.name+".get","key",e);var r=i()(t.prototype.__proto__||a()(t.prototype),"get",this).call(this,e);if(!r){try{var o={name:e,parent:this._parent};this._onStream&&(o.onStream=function(t,r){return n._onStream(e,t,r)}),r=new this._portConstructor(o)}catch(e){var s=new Error("Error thrown in "+this._portConstructor.name+" constructor, "+e);throw s.reason=e,s}if(i()(t.prototype.__proto__||a()(t.prototype),"_set",this).call(this,e,r),this._onCreate)try{this._onCreate(r)}catch(s){g.default.error(S,"Error thrown in "+this.constructor.name+".onCreate: "+s)}}return r}},{key:"delete",value:function(e){y.a.string(this.constructor.name+".delete","key",e);var n=i()(t.prototype.__proto__||a()(t.prototype),"get",this).call(this,e);if(n){if(i()(t.prototype.__proto__||a()(t.prototype),"_delete",this).call(this,e),n.detach(),this._onDetach)try{this._onDetach(n)}catch(e){g.default.error(S,"Error thrown in "+this.constructor.name+".onDetach: "+e)}return!0}return!1}},{key:"clear",value:function(){var e=this;i()(t.prototype.__proto__||a()(t.prototype),"forEach",this).call(this,function(t,n){e.delete(n)})}}]),t}(w.ReadOnlyMap),E=function(e){function t(e){var n=e.inputConstructor,r=void 0===n?b.a:n,i=e.parent,o=e.onStream,s=e.onCreate,u=e.onDetach;return h()(this,t),y.a.optFunc("InputMap constructor","onStream",o),o||(o=function(){return i.onStream.apply(i,arguments)}),c()(this,(t.__proto__||a()(t)).call(this,{portConstructor:r,parent:i,onStream:o,onCreate:s,onDetach:u}))}return d()(t,e),t}(T),P=function(e){function t(e){var n=e.outputConstructor,r=void 0===n?_.a:n,i=e.parent,o=e.onCreate,s=e.onDetach;return h()(this,t),c()(this,(t.__proto__||a()(t)).call(this,{portConstructor:r,parent:i,onCreate:o,onDetach:s}))}return d()(t,e),t}(T)},function(e,t,n){e.exports={default:n(104),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(47),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(79),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return Array.isArray(e)?e:(0,i.default)(e)}},function(e,t,n){var r,i,o,a=n(18),s=n(137),c=n(83),u=n(60),d=n(5),l=d.process,f=d.setImmediate,p=d.clearImmediate,h=d.MessageChannel,m=0,v={},g=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},y=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete v[e]},"process"==n(30)(l)?r=function(e){l.nextTick(a(g,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=y,r=a(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",y,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:f,clear:p}},function(e,t,n){var r=n(15),i=n(75).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){"use strict";function isMediaNode(e){return!(!e||!e[b])}function r(e){if(w.isWebRtcPlugin)throw new Error(e.constructor.name+" is not supported when using a WebRTC plugin")}function i(e){return navigator.getUserMedia?T.push(function(){return new a.a(function(t,n){return navigator.getUserMedia(e,function(e){e?t(e):n(new y.b("Received a null media stream"))},function(e){var t;if(-1!==E.indexOf(e.name))t=new y.c(e.message);else if(-1!==R.indexOf(e.name)){var r=e.message;r||(r=e.constraint?"media constraint '"+e.constraint+"' could not be satisfied":"media constraints could not be satisfied"),t=new S(r)}else t=-1!==P.indexOf(e.name)?new y.b(e.message):new y.d(e.message);t.reason=e,n(t)})})}):a.a.reject(new Error("no getUserMedia found"))}n.d(t,"c",function(){return b}),n.d(t,"a",function(){return _}),n.d(t,"b",function(){return C}),t.d=isMediaNode,t.e=r,t.f=i;var o=n(23),a=n.n(o),s=n(6),c=n.n(s),u=n(1),d=n.n(u),l=n(9),f=n.n(l),p=n(8),h=n.n(p),m=n(87),v=n.n(m),g=n(160),y=n(145),w=n(66),b=v()("media-node"),_=v()("inputs"),C=v()("outputs"),S=function(e){function t(){return d()(this,t),f()(this,(t.__proto__||c()(t)).apply(this,arguments))}return h()(t,e),t}(y.a);S.errorName="OverconstrainedError";var T=new g.a,E=["SecurityError","NotAllowedError","PermissionDeniedError","PermissionDismissedError"],P=["NotFoundError","DevicesNotFoundError"],R=["OverconstrainedError","ConstraintNotSatisfiedError"]},function(e,t,n){e.exports={default:n(100),__esModule:!0}},function(e,t,n){e.exports={default:n(105),__esModule:!0}},function(e,t,n){var r=n(10),i=n(14),o=n(25);e.exports=n(11)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){e.exports={default:n(102),__esModule:!0}},function(e,t,n){n(22),n(119),e.exports=n(0).Array.from},function(e,t,n){n(121);var r=n(0).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){n(122);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){n(123);var r=n(0).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){n(124),e.exports=n(0).Object.getPrototypeOf},function(e,t,n){n(125),e.exports=n(0).Object.setPrototypeOf},function(e,t,n){n(42),n(22),n(29),n(126),n(128),e.exports=n(0).Set},function(e,t,n){n(127),n(42),n(129),n(130),e.exports=n(0).Symbol},function(e,t,n){n(22),n(29),e.exports=n(58).f("iterator")},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(40);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(15),i=n(37),o=n(118);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),d=o(a,u);if(e&&n!=n){for(;u>d;)if((s=c[d++])!=s)return!0}else for(;u>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var r=n(18),i=n(67),o=n(26),a=n(37),s=n(111);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,d=4==e,l=6==e,f=5==e||l,p=t||s;return function(t,s,h){for(var m,v,g=o(t),y=i(g),w=r(s,h,3),b=a(y.length),_=0,C=n?p(t,b):c?p(t,0):void 0;b>_;_++)if((f||_ in y)&&(m=y[_],v=w(m,_,g),e))if(n)C[_]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:C.push(m)}else if(d)return!1;return l?-1:u||d?d:C}}},function(e,t,n){var r=n(17),i=n(72),o=n(4)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(110);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(10),i=n(27);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(25),i=n(68),o=n(43);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){"use strict";var r=n(36),i=n(27),o=n(28),a={};n(16)(a,n(4)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(25),i=n(15);e.exports=function(e,t){for(var n,o=i(e),a=r(o),s=a.length,c=0;s>c;)if(o[n=a[c++]]===t)return n}},function(e,t,n){var r=n(17),i=n(14),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(18)(Function.call,n(52).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){var r=n(55),i=n(35);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){var r=n(55),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(18),i=n(7),o=n(26),a=n(73),s=n(71),c=n(37),u=n(112),d=n(65);i(i.S+i.F*!n(84)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,l,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,y=d(f);if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==y||p==Array&&s(y))for(t=c(f.length),n=new p(t);t>g;g++)u(n,g,v?m(f[g],g):f[g]);else for(l=y.call(f),n=new p;!(i=l.next()).done;g++)u(n,g,v?a(l,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(106),i=n(74),o=n(24),a=n(15);e.exports=n(50)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(7);r(r.S,"Object",{create:n(36)})},function(e,t,n){var r=n(7);r(r.S+r.F*!n(11),"Object",{defineProperty:n(10).f})},function(e,t,n){var r=n(15),i=n(52).f;n(46)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){var r=n(26),i=n(76);n(46)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(7);r(r.S,"Object",{setPrototypeOf:n(116).set})},function(e,t,n){"use strict";var r=n(80);e.exports=n(82)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(5),i=n(19),o=n(11),a=n(7),s=n(78),c=n(51).KEY,u=n(21),d=n(54),l=n(28),f=n(38),p=n(4),h=n(58),m=n(57),v=n(115),g=n(113),y=n(72),w=n(14),b=n(15),_=n(56),C=n(27),S=n(36),T=n(91),E=n(52),P=n(10),R=n(25),x=E.f,k=P.f,I=T.f,O=r.Symbol,M=r.JSON,D=M&&M.stringify,A=p("_hidden"),j=p("toPrimitive"),L={}.propertyIsEnumerable,N=d("symbol-registry"),W=d("symbols"),U=d("op-symbols"),F=Object.prototype,B="function"==typeof O,G=r.QObject,V=!G||!G.prototype||!G.prototype.findChild,z=o&&u(function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=x(F,t);r&&delete F[t],k(e,t,n),r&&e!==F&&k(F,t,r)}:k,H=function(e){var t=W[e]=S(O.prototype);return t._k=e,t},q=B&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},J=function(e,t,n){return e===F&&J(U,t,n),w(e),t=_(t,!0),w(n),i(W,t)?(n.enumerable?(i(e,A)&&e[A][t]&&(e[A][t]=!1),n=S(n,{enumerable:C(0,!1)})):(i(e,A)||k(e,A,C(1,{})),e[A][t]=!0),z(e,t,n)):k(e,t,n)},$=function(e,t){w(e);for(var n,r=g(t=b(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?S(e):$(S(e),t)},Y=function(e){var t=L.call(this,e=_(e,!0));return!(this===F&&i(W,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(W,e)||i(this,A)&&this[A][e])||t)},Z=function(e,t){if(e=b(e),t=_(t,!0),e!==F||!i(W,t)||i(U,t)){var n=x(e,t);return!n||!i(W,t)||i(e,A)&&e[A][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=I(b(e)),r=[],o=0;n.length>o;)i(W,t=n[o++])||t==A||t==c||r.push(t);return r},Q=function(e){for(var t,n=e===F,r=I(n?U:b(e)),o=[],a=0;r.length>a;)!i(W,t=r[a++])||n&&!i(F,t)||o.push(W[t]);return o};B||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(U,n),i(this,A)&&i(this[A],e)&&(this[A][e]=!1),z(this,e,C(1,n))};return o&&V&&z(F,e,{configurable:!0,set:t}),H(e)},s(O.prototype,"toString",function(){return this._k}),E.f=Z,P.f=J,n(75).f=T.f=X,n(43).f=Y,n(68).f=Q,o&&!n(41)&&s(F,"propertyIsEnumerable",Y,!0),h.f=function(e){return H(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ee=R(p.store),te=0;ee.length>te;)m(ee[te++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=O(e)},keyFor:function(e){if(q(e))return v(N,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!B,"Object",{create:K,defineProperty:J,defineProperties:$,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),M&&a(a.S+a.F*(!B||u(function(){var e=O();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!q(t))return t}),r[1]=t,D.apply(M,r)}}}),O.prototype[j]||n(16)(O.prototype,j,O.prototype.valueOf),l(O,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(e,t,n){var r=n(7);r(r.P+r.R,"Set",{toJSON:n(81)("Set")})},function(e,t,n){n(57)("asyncIterator")},function(e,t,n){n(57)("observable")},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(3),c=n(12),u=n(13),d=n(92),l="media-node-input",MediaNodeInput=function(){function MediaNodeInput(e){var t=e.name,r=e.parent,o=e.onStream;i()(this,MediaNodeInput),c.a.string("MediaNodeInput constructor","name",t),n.i(d.d)(r)||c.a.error("MediaNodeInput constructor","parent","be a MediaNode"),c.a.func("MediaNodeInput constructor","onStream",o),this._name=t,this._parent=r,this._onStream=o,this._output=null,this._stream=null,this._parent[d.a].add(this)}return a()(MediaNodeInput,[{key:"toString",value:function(){return"mediaNodeInput{name="+this.name+",parent="+this._parent+"}"}},{key:"detach",value:function(){this._target&&this._target.disconnect(this),this._parent[d.a].delete(this),this._parent=null}},{key:"_disconnect",value:function(e){this.target!==e&&s.default.error(l,"invalid input disconnect state, expected target "+e+" but was "+this.target),this._target=null,this._setStream(null)}},{key:"_setStream",value:function(e){if(this._stream!==e){var t=this._stream;this._stream=e;try{this._onStream(e,t)}catch(e){s.default.error(l,"Error thrown in onStream: "+e)}}}},{key:"name",get:function(){return this._name}},{key:"target",get:function(){return this._target}},{key:"stream",get:function(){return this._stream}}],[{key:"resolve",value:function(e){for(var t=[e];;){if(e instanceof MediaNodeInput)return e;if(!n.i(u.isObject)(e))throw new TypeError("failed to resolve input of "+(t[0]&&t[0].constructor.name)+", input must be a MediaNodeInput or have an input property");if(!("input"in e))throw new TypeError("failed to resolve input of "+t[0].constructor.name+", "+e.constructor.name+" does not have an input property");try{e=e.input}catch(n){throw new TypeError("failed to resolve input of "+t[0].constructor.name+", getting input property of "+e+" threw error: "+n.message)}if(-1!==t.indexOf(e))throw new TypeError("failed to resolve input of "+t[0].constructor.name+", encountered loop in input property chain");t.push(e)}}}]),MediaNodeInput}();t.a=MediaNodeInput},,,function(e,t,n){n(42),n(22),n(29),n(140),n(143),e.exports=n(0).Map},function(e,t,n){n(141),e.exports=n(0).Object.keys},function(e,t,n){n(42),n(22),n(29),n(142),e.exports=n(0).Promise},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(5),i=n(90).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(30)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(o){var d=!0,l=document.createTextNode("");new o(u).observe(l,{characterData:!0}),n=function(){l.data=d=!d}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(u)}}else n=function(){i.call(r,u)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(14),i=n(63),o=n(4)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){"use strict";var r=n(80);e.exports=n(82)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(26),i=n(25);n(46)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";var r,i,o,a=n(41),s=n(5),c=n(18),u=n(44),d=n(7),l=n(17),f=n(63),p=n(59),h=n(40),m=n(139),v=n(90).set,g=n(138)(),y=s.TypeError,w=s.process,b=s.Promise,w=s.process,_="process"==u(w),C=function(){},S=!!function(){try{var e=b.resolve(1),t=(e.constructor={})[n(4)("species")]=function(e){e(C,C)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(C)instanceof t}catch(e){}}(),T=function(e,t){return e===t||e===b&&t===o},E=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return T(b,e)?new R(e):new i(e)},R=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw y("Bad Promise constructor");t=e,n=r}),this.resolve=f(t),this.reject=f(n)},x=function(e){try{e()}catch(e){return{error:e}}},k=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(u&&u.enter(),n=a(r),u&&u.exit()),n===t.promise?c(y("Promise-chain cycle")):(o=E(n))?o.call(n,s,c):s(n)):c(r)}catch(e){c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){v.call(s,function(){var t,n,r,i=e._v;if(O(e)&&(t=x(function(){_?w.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=_||O(e)?2:1),e._a=void 0,t)throw t.error})},O=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!O(t.promise))return!1;return!0},M=function(e){v.call(s,function(){var t;_?w.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},A=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw y("Promise can't be resolved itself");(t=E(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,c(A,r,1),c(D,r,1))}catch(e){D.call(r,e)}}):(n._v=e,n._s=1,k(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};S||(b=function(e){p(this,b,"Promise","_h"),f(e),r.call(this);try{e(c(A,this,1),c(D,this,1))}catch(e){D.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(61)(b.prototype,{then:function(e,t){var n=P(m(this,b));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=_?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),R=function(){var e=new r;this.promise=e,this.resolve=c(A,e,1),this.reject=c(D,e,1)}),d(d.G+d.W+d.F*!S,{Promise:b}),n(28)(b,"Promise"),n(85)("Promise"),o=n(0).Promise,d(d.S+d.F*!S,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!S),"Promise",{resolve:function(e){if(e instanceof b&&T(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),d(d.S+d.F*!(S&&n(84)(function(e){b.all(e).catch(C)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=x(function(){var n=[],o=0,a=1;h(e,!1,function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=x(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t,n){var r=n(7);r(r.P+r.R,"Map",{toJSON:n(81)("Map")})},function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(1),a=n.n(o),s=n(2),c=n.n(s),u=n(9),d=n.n(u),l=n(8),f=n.n(l),p=n(86),h=n(149),MediaSource=function(e){function MediaSource(){a()(this,MediaSource);var e=d()(this,(MediaSource.__proto__||i()(MediaSource)).call(this));return e._output=new h.a({name:"default",parent:e}),e}return f()(MediaSource,e),c()(MediaSource,[{key:"setStream",value:function(e){this._output.setStream(e)}},{key:"stream",get:function(){return this._output.stream}},{key:"output",get:function(){return this._output}}]),MediaSource}(p.a.connectMixin(p.a));t.a=MediaSource},function(e,t,n){"use strict";function CctError(e){if(m.a.stringOrEmpty("CctError constructor","message",e),h()(this,{message:{configurable:!0,enumerable:!0,value:e}}),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else{var t=new Error(e).stack;if(!t)try{throw new Error}catch(e){t=e.stack}Object.defineProperty(this,"stack",{configurable:!0,enumerable:!1,value:t})}}t.a=CctError,n.d(t,"c",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return y});var r=n(6),i=n.n(r),o=n(1),a=n.n(o),s=n(9),c=n.n(s),u=n(8),d=n.n(u),l=n(62),f=n.n(l),p=n(184),h=n.n(p),m=n(12);CctError.errorName="CctError",CctError.prototype=f()(Error.prototype,{constructor:{value:CctError},name:{get:function(){return this.constructor.errorName}},toJSON:{value:function(){return{name:this.name,message:this.message}}},toString:{value:function(){return this.name+": "+this.message}}});var v=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||i()(t)).apply(this,arguments))}return d()(t,e),t}(CctError);v.errorName="NotAllowedError";var g=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||i()(t)).apply(this,arguments))}return d()(t,e),t}(CctError);g.errorName="NotFoundError";var y=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||i()(t)).apply(this,arguments))}return d()(t,e),t}(CctError);y.errorName="UnknownError"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=n.n(r),o=n(6),a=n.n(o),s=n(1),c=n.n(s),u=n(2),d=n.n(u),l=n(9),f=n.n(l),p=n(8),h=n.n(p),m=n(87),v=n.n(m),g=n(3),y=n(154),w="html-sink",b=v()("sink-replacement"),HtmlSink=function(e){function HtmlSink(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?null:t;c()(this,HtmlSink);for(var r=f()(this,(HtmlSink.__proto__||a()(HtmlSink)).call(this)),i=0;n&&n[b]&&i<5;)n=n[b],i+=1;return i>=5&&g.default.error(w,"HtmlSink got stuck in element replacement loop"),r._target=n,r._refreshSink=r._refreshSink.bind(r),r._refreshTick=null,r}return h()(HtmlSink,e),d()(HtmlSink,[{key:"_hasTarget",value:function(e){return this._target===e||this._target===e[b]}},{key:"onStream",value:function(e,t){var n=this;t&&(t.removeEventListener?(t.removeEventListener("addtrack",this._refreshSink),t.removeEventListener("removetrack",this._refreshSink)):(t.detachEvent("addtrack",this._refreshSink),t.detachEvent("removetrack",this._refreshSink))),e&&(e.addEventListener?(e.addEventListener("addtrack",this._refreshSink),e.addEventListener("removetrack",this._refreshSink)):(e.attachEvent("addtrack",this._refreshSink),e.attachEvent("removetrack",this._refreshSink))),this._refreshTick||(this._refreshTick=i.a.reject().catch(function(){n._refreshTick=null,n.stream!==t&&n._refreshSink()}))}},{key:"_cleanup",value:function(){this._target&&this._target instanceof HTMLMediaElement?this._target.srcObject?this._target.srcObject=null:this._target.src&&(this._target.src=""):this._target=window.attachMediaStream(this._target,null)}},{key:"_assign",value:function(){if(this.stream){try{var e=this._target;this._target=window.attachMediaStream(this._target,this.stream),e instanceof HTMLMediaElement&&(e[b]=this._target)}catch(e){g.default.info(w,"Error when assigning html sink stream: "+e)}try{var t=this._target.play();t&&t.catch&&t.catch(function(e){g.default.debug(w,"Failed to play stream, "+e)})}catch(e){g.default.info(w,"Error when playing html sink stream: "+e)}}}},{key:"_refreshSink",value:function(){this._target&&(this._cleanup(),this._assign())}},{key:"target",get:function(){return this._target},set:function(e){this._target&&this._cleanup(),this._target=e||null,e&&this._assign()}}]),HtmlSink}(y.a);t.default=HtmlSink},,function(e,t,n){var r=n(0),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(3),c=n(12),u=n(13),d=n(66),l=n(92),f=n(131),p="media-node-output",MediaNodeOutput=function(){function MediaNodeOutput(e){var t=e.name,r=e.parent;i()(this,MediaNodeOutput),c.a.string("MediaNodeInput constructor","name",t),n.i(l.d)(r)||c.a.error("MediaNodeInput constructor","parent","be a MediaNode"),this._name=t,this._parent=r,this._targets=new u.ReadOnlySet,this._stream=null,this._parent[l.b].add(this)}return a()(MediaNodeOutput,[{key:"toString",value:function(){return"mediaNodeOutput{name="+this.name+",parent="+this._parent+",targets="+this._targets.size+"}}"}},{key:"connect",value:function(e){if(!this._parent)return s.default.error(p,"tried to connect a detached ouput");if(e instanceof HTMLElement){var HtmlSink=n(146).default,t=new HtmlSink({target:e});return void this.connect(t)}return e=f.a.resolve(e),s.default.info(p,"connecting "+this+" to "+e),this._targets.has(e)?void s.default.verbose(p,"ignored connect with same target"):e._parent?(e._target&&(s.default.debug(p,"disconnecting target's existing target: "+e._target),e._target.disconnect(e)),s.default.debug(p,"connecting to new target: "+e),this._targets._add(e),e._target=this,void e._setStream(this._stream)):s.default.error(p,"tried to connect to a detached input")}},{key:"disconnect",value:function(e){var t=this;if(!this._parent)return void s.default.error(p,"tried to disconnect a detached ouput");if(0===this._targets.size)return void s.default.warning(p,"tried to disconnect "+this+", but it is not connected to anything");if(e instanceof HTMLElement)this._targets.forEach(function(r){var HtmlSink=n(146).default,i=r._parent instanceof HtmlSink,o=r._parent._hasTarget(e);i&&o&&t.disconnect(r)});else if(e){if(e=f.a.resolve(e),s.default.info(p,"disconnecting "+this+" from "+e),!this._targets._delete(e))throw new Error("failed to disconnect "+this+" from "+e+", not connected");e._target=null,e._setStream(null)}else s.default.info(p,"disconnecting "+this+" from all "+this._targets.size+" targets"),this._targets.forEach(function(e){s.default.info(p,"disconnecting "+t+" from "+e),e._target=null,e._setStream(null)}),this._targets._clear()}},{key:"setStream",value:function(e){if(!this._parent)return s.default.error(p,"tried to setStream of a detached ouput");null===e||n.i(d.isMediaStream)(e)?(this._stream=e,this._targets.forEach(function(t){return t._setStream(e)})):c.a.error("MediaNodeOutput.setStream","stream","be a MediaStream or null")}},{key:"detach",value:function(){this.disconnect(),this._parent[l.b].delete(this),this._parent=null}},{key:"name",get:function(){return this._name}},{key:"targets",get:function(){return this._targets}},{key:"stream",get:function(){return this._stream}}],[{key:"resolve",value:function(e){for(var t=[e];;){if(e instanceof MediaNodeOutput)return e;if(!n.i(u.isObject)(e))throw new TypeError("failed to resolve output of "+(t[0]&&t[0].constructor.name)+", output must be a MediaNodeOutput or have an output property");if(!("output"in e))throw new TypeError("failed to resolve output of "+t[0].constructor.name+", "+e.constructor.name+" does not have an output property");try{e=e.output}catch(n){throw new TypeError("failed to resolve output of "+t[0].constructor.name+", getting output property of "+e+" threw error: "+n.message)}if(-1!==t.indexOf(e))throw new TypeError("failed to resolve output of "+t[0].constructor.name+", encountered loop in output property chain");t.push(e)}}}]),MediaNodeOutput}();t.a=MediaNodeOutput},,,function(e,t,n){e.exports={default:n(156),__esModule:!0}},,function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(1),a=n.n(o),s=n(2),c=n.n(s),u=n(9),d=n.n(u),l=n(8),f=n.n(l),p=n(3),h=n(86),m=n(131),MediaSink=function(e){function MediaSink(){a()(this,MediaSink);var e=d()(this,(MediaSink.__proto__||i()(MediaSink)).call(this));return e._input=new m.a({name:"default",parent:e,onStream:function(t,n){return e.onStream(t,n)}}),e}return f()(MediaSink,e),c()(MediaSink,[{key:"onStream",value:function(e,t){p.default.warning("media-input",this.constructor.name+".onStream should be overridden")}},{key:"stream",get:function(){return this._input.stream}},{key:"input",get:function(){return this._input}}]),MediaSink}(h.a);t.a=MediaSink},function(e,t,n){e.exports={default:n(157),__esModule:!0}},function(e,t,n){n(29),n(22),e.exports=n(158)},function(e,t,n){n(29),n(22),e.exports=n(159)},function(e,t,n){var r=n(14),i=n(65);e.exports=n(0).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var r=n(44),i=n(4)("iterator"),o=n(24);e.exports=n(0).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){"use strict";n.d(t,"b",function(){return l});var r=n(23),i=n.n(r),o=n(1),a=n.n(o),s=n(2),c=n.n(s),u=n(3),d=n(13),AsyncQueue=function(){function AsyncQueue(){a()(this,AsyncQueue),this._queue=[],this._currentTask=null}return c()(AsyncQueue,[{key:"toString",value:function(){return"AsyncQueue{executing="+!!this._currentTask+"queued="+this._queue.length+"}"}},{key:"push",value:function(e){var t=n.i(d.defer)();return t.factory=e,this._queue.push(t),this._currentTask||this._poll(),t.promise}},{key:"clear",value:function(){this._currentTask&&(this._currentTask.cancelled=!0,this._currentTask=null),this._queue.length=0}},{key:"_poll",value:function(){if(!this._currentTask&&this._queue.length){var e=this,t=this._currentTask=this._queue.shift();if(t){var n=null;try{n=t.factory()}catch(e){u.default.error(this.tag,"AsyncQueue.process: factory threw error",e,e.stack)}n?n.then(function(e){if(t.cancelled)throw new Error("task was cancelled");t.resolve(e)}).catch(t.reject).then(function(){e._currentTask=null,e._poll()}).catch(function(t){u.default.error(e.tag,"error calling poll after task completion: ",t)}):(this._currentTask=null,this._poll())}}}}]),AsyncQueue}();t.a=AsyncQueue,AsyncQueue.tag="async-queue";var l=function(){function e(){a()(this,e),this._queue=[],this._deferredRead=null}return c()(e,[{key:"read",value:function(){if(this._queue){if(this._deferredRead)return this._deferredRead.promise;if(this._queue.length){var e=this._queue.pop();return i.a.resolve(e)}return this._deferredRead=n.i(d.defer)(),this._deferredRead.promise}return i.a.reject()}},{key:"write",value:function(e){if(!this._queue)throw new Error("AsyncPipe is closed");this._deferredRead?(this._deferredRead.resolve(e),this._deferredRead=null):this._queue.unshift(e)}},{key:"close",value:function(){if(!this._queue)throw new Error("AsyncPipe has already been closed");this._deferredRead&&(this._deferredRead.reject(),this._deferredRead=null),this._queue.length=0,this._queue=null}}]),e}()},,function(e,t,n){"use strict";function r(e,t,n){var r="Error in "+e+", "+t;try{var i=new Error(r+": "+n);return i.reason=n,i.stack=n.stack,i}catch(i){return new Error(r+" and failed to serialize root cause: "+i)}}var i=n(23),o=n.n(i),a=n(39),s=n.n(a),c=n(48),u=n.n(c),d=n(1),l=n.n(d),f=n(2),p=n.n(f),h=n(207),m=(n.n(h),n(3)),v=n(34),g=n(13),y=n(199),w=n(178),b=n(66),_=n(200),C="peer-connection",S="onFUNC is not available, use addEventListener instead",T=function(){function e(t){var n=this;l()(this,e),this._haveTurn=!1,this._haveStun=!1,t&&t.forEach(function(e){var t=e.urls||e.url;t||m.default.error("peer-connection","ice server has no url: "+u()(e)),0===t.indexOf("stun:")&&(n._haveStun=!0),0===t.indexOf("turn:")&&(n._haveStun=!0,n._haveTurn=!0)})}return p()(e,[{key:"observedCandidate",value:function(e){"host"!==e.type&&(this._gotStun=!0),"relay"===e.type&&(this._gotTurn=!0)}},{key:"end",value:function(e){if("new"!==e)return null;if(this._haveTurn&&!this._gotTurn){return m.default.warning("peer-connection","'iceServers' contained a turn server, but no relay candidates were received. Check the turn server configuration and availability."),"turn"}if(this._haveStun&&!this._gotStun){return m.default.warning("peer-connection","'iceServers' contained a stun server, but no stun candidates were received. Check the stun server configuration and availability."),"stun"}return null}}]),e}(),PeerConnectionProxy=function(){function PeerConnectionProxy(e,t,r){var i=this;l()(this,PeerConnectionProxy),m.default.debug(C,"creating peer connection with config:",e),this._pc=new RTCPeerConnection(e),this._iceCandidateFilter=r,this._eventTarget=new v.a,this._id=n.i(g.randomString)(30),this._interop=new h.Interop,this._iceErrorDetector=new T(e.iceServers),this._firstMid=null,this.addEventListener=this.addEventListener.bind(this),this.addStream=this.addStream.bind(this),this.close=this.close.bind(this),this.getLocalStreams=this.getLocalStreams.bind(this),this.getRemoteStreams=this.getRemoteStreams.bind(this),this.addIceCandidate=this.addIceCandidate.bind(this),this._createAnswer=this._createAnswer.bind(this),this._createOffer=this._createOffer.bind(this),this.getStats=this.getStats.bind(this),this._setLocalDescription=this._setLocalDescription.bind(this),this._setRemoteDescription=this._setRemoteDescription.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this.removeStream=this.removeStream.bind(this),this.waitForInitialIce=this.waitForInitialIce.bind(this),this._pc.oniceconnectionstatechange=function(e){i._eventTarget._emit("iceconnectionstatechange",{target:i})},this._pc.onnegotiationneeded=function(e){i._eventTarget._emit("negotiationneeded",{target:i})},this._pc.onsignalingstatechange=function(e){i._eventTarget._emit("signalingstatechange",{target:i})},this._pc.onaddstream=function(e){i._eventTarget._emit("addstream",{target:i,stream:e.stream})},this._pc.onremovestream=function(e){i._eventTarget._emit("removestream",{target:i,stream:e.stream})},this._pc.ondatachannel=function(e){var t=e.channel;m.default.warning("data-channel","received data channel, which shouldn't happen"),i._eventTarget._emit("datachannel",{target:i,channel:t})};var o=n.i(g.defer)();this._initialIceComplete=o.promise,this._pc.onicecandidate=function(e){var t=e.candidate;if(!t)return i._eventTarget._emit("icecandidate",{target:i,candidate:t}),i._iceErrorDetector&&("turn"===i._iceErrorDetector.end(i._pc.iceConnectionState)&&o.reject(new Error("No relay candidates received while turn server was configured")),i._iceErrorDetector=null),void o.resolve();var r=n.i(_.a)(t.candidate,"local");if(i._iceErrorDetector&&i._iceErrorDetector.observedCandidate(r),i._iceCandidateFilter)try{if(!i._iceCandidateFilter(r))return void m.default.debug(C,"ignored candidate due to being filtered out: "+t);setTimeout(function(){o.resolve()},200)}catch(e){return void m.default.error(C,"ignoring candidate, error was thrown in candidate filter: "+e)}if(g.isFirefox){var a=t.sdpMid.match(/^(audio|video)-[0-9]+$/)||[],c=s()(a,2),u=c[1];u&&(t.sdpMid=u)}i._eventTarget._emit("icecandidate",{target:i,candidate:t})},t&&n.i(y.a)(this,t)}return p()(PeerConnectionProxy,null,[{key:"create",value:function(e){e=e||{};var t=e.statsFormatter,n=e.rtcpMuxPolicy||"require",r=e.bundlePolicy||"max-bundle",i=e.iceServers,o=e.iceCandidateFilter;return"string"==typeof i?i=[i]:Array.isArray(i)||(i=[]),i=i.map(function(e){return"string"==typeof e?{urls:e}:e}),new PeerConnectionProxy({iceServers:i,rtcpMuxPolicy:n,bundlePolicy:r},t,o)}}]),p()(PeerConnectionProxy,[{key:"toString",value:function(){return"peerConnection{id="+this._id+"}"}},{key:"addEventListener",value:function(e,t){return this._eventTarget.on(e,t)}},{key:"removeEventListener",value:function(e,t){return this._eventTarget.off(e,t)}},{key:"addStream",value:function(e){return n.i(b.addPeerConnectionStream)(this._pc,e)}},{key:"removeStream",value:function(e){return n.i(b.removePeerConnectionStream)(this._pc,e)}},{key:"getLocalStreams",value:function(){var e=this;return this._pc.getLocalStreams().filter(function(t){return t!==e._dummyStream})}},{key:"getRemoteStreams",value:function(){return this._pc.getRemoteStreams()}},{key:"close",value:function(){return this._pc.close()}},{key:"waitForInitialIce",value:function(){return this._initialIceComplete}},{key:"performOffer",value:function(e){var t=this,n=e.constraints,r=void 0===n?null:n,i=e.bandwidth,o=void 0===i?null:i,a=e.waitForIce,s=void 0!==a&&a;if(g.isChrome&&0===this._pc.getLocalStreams().length){var c=new w.a({video:!0,audio:!0});this.addStream(c.stream),this._dummyStream=c.stream}return this._createOffer(r).then(function(e){return t._rewriteLocalInputDescription(e,{bandwidth:o})}).then(function(e){return t._setLocalDescription(e)}).then(function(e){return s?t._initialIceComplete.then(function(){return t._pc._localDescription}):e}).then(function(e){return t._rewriteLocalOutputDescription(e)})}},{key:"performAnswer",value:function(e){var t=this,n=e.offer,r=e.constraints,i=void 0===r?null:r,a=e.bandwidth,s=void 0===a?null:a;return o.a.resolve(n).then(function(e){return t._rewriteRemoteInputDescription(e)}).then(function(e){return t._setRemoteDescription(e)}).then(function(){return t._createAnswer(i)}).then(function(e){return t._rewriteLocalInputDescription(e,{bandwidth:s})}).then(function(e){return t._setLocalDescription(e)}).then(function(e){return t._rewriteLocalOutputDescription(e)})}},{key:"handleAnswer",value:function(e){var t=this,n=e.answer;return o.a.resolve(n).then(function(e){return t._rewriteRemoteInputDescription(e)}).then(function(e){return t._setRemoteDescription(e)})}},{key:"_rewriteLocalInputDescription",value:function(e,t){var r=t.bandwidth,i=e.sdp,o=e.type;return r&&(i=i.replace(/^b=AS:[0-9]+$/gm,"b=AS:"+r)),g.isChrome&&(i=n.i(_.b)(i)),this._iceCandidateFilter&&(i=n.i(_.c)(i,this._iceCandidateFilter,"local")),i=n.i(_.d)(i),new RTCSessionDescription({sdp:i,type:o})}},{key:"_rewriteLocalOutputDescription",value:function(e){var t,r=e.sdp,i=e.type;if(g.isFirefox&&!this._firstMid){var o=e.sdp.match(/^a=mid:(.+)$/m)||[],a=s()(o,2),c=a[1];c&&(this._firstMid=c)}if(this._iceCandidateFilter&&(r=n.i(_.c)(r,this._iceCandidateFilter,"local")),g.isFirefox){t=e.sdp;var u=n.i(_.e)(e.sdp),d=s()(u,2),l=d[0],f=d[1];if(r=l,f&&f.needsInteropTranslation){var p=n.i(_.f)(e.sdp);r=this._interop.toPlanB({type:e.type,sdp:r}).sdp,r=n.i(_.g)(r,p),r=n.i(_.h)(r)}r=n.i(_.i)(r,f),m.default.verbose(C,"converted local "+e.type+" SDP from unified plan "+t+"\n\nto\n\n"+r)}return{sdp:r,type:i,unifiedPlanSdp:t}}},{key:"_rewriteRemoteInputDescription",value:function(e){var t=e.sdp,r=e.type,i=e.unifiedPlanSdp;if(this._iceCandidateFilter&&(t=n.i(_.c)(t,this._iceCandidateFilter,"remote")),g.isFirefox)if(i)t=i;else{var o=e.sdp,a=n.i(_.e)(e.sdp),c=s()(a,2),u=c[0],d=c[1];t=u,t=n.i(_.j)(t),d&&d.needsInteropTranslation&&(t=this._interop.toUnifiedPlan({type:e.type,sdp:t}).sdp),t=n.i(_.i)(t,d),m.default.verbose(C,"converted remote "+e.type+" SDP from plan b "+o+"\n\nto\n\n"+t)}return new RTCSessionDescription({sdp:t,type:r})}},{key:"_setLocalDescription",value:function(e){var t=this;return m.default.verbose(C,this+".setLocalDescription",e.sdp),new o.a(function(n,i){t._pc.setLocalDescription(e,function(){n(e)},function(e){i(r("setLocalDescription","failed to set local description",e))})})}},{key:"_setRemoteDescription",value:function(e){var t=this;return m.default.verbose(C,this+".setRemoteDescription",e.sdp),new o.a(function(n,i){t._pc.setRemoteDescription(e,function(){n()},function(e){i(r("setRemoteDescription","failed to set remote description",e))})})}},{key:"_createOffer",value:function(e){var t=this;return m.default.verbose(C,this+".createOffer"),new o.a(function(n,i){t._pc.createOffer(function(e){e?n(e):i(new Error("failed to create offer, no offer generated"))},function(e){i(r("createOffer","failed to create offer",e))},e)})}},{key:"_createAnswer",value:function(e){var t=this;return m.default.verbose(C,this+".createAnswer"),new o.a(function(n,i){t._pc.createAnswer(function(e){if(!e)return i(new Error("failed to create answer, no answer generated"));n(e)},function(e){i(r("createAnswer","failed to create answer",e))},e)})}},{key:"addIceCandidate",value:function(e){var t=this;if(0!==e.sdpMLineIndex)return m.default.debug(C,"ignored candidate with sdpMLineIndex != 0, "+e.sdpMLineIndex),o.a.resolve();if(e instanceof RTCIceCandidate||(e=new RTCIceCandidate(e)),this._iceCandidateFilter)try{var i=n.i(_.a)(e.candidate,"remote");if(!this._iceCandidateFilter(i))return m.default.debug(C,"ignored candidate due to being filtered out: "+e),o.a.resolve()}catch(e){return m.default.error(C,"ignoring candidate, error was thrown in candidate filter: "+e),o.a.resolve()}if(g.isFirefox){if(!this._firstMid)return o.a.reject(new Error("Tried to add ice candidate before local description was set"));e.sdpMid=this._firstMid}return new o.a(function(n,i){t._pc.addIceCandidate(e,n,function(e){i(r("addIceCandidate","failed add ice candidate",e))})})}},{key:"createDataChannel",value:function(e,t){return this._pc.createDataChannel(e,t)}},{key:"getStats",value:function(e){var t=this;return g.isFirefox?this._pc.getStats(e):new o.a(function(n,r){t._pc.getStats(function(e){var t={};e.result().forEach(function(e){var n={id:e.id,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),n(t)},e,r)})}},{key:"id",get:function(){return this._id}},{key:"signalingState",get:function(){return this._pc.signalingState}},{key:"iceConnectionState",get:function(){return this._pc.iceConnectionState}},{key:"iceGatheringState",get:function(){return this._pc.iceGatheringState}},{key:"hasRemoteDescription",get:function(){var e=this._pc.remoteDescription;return!!e&&!!e.type}},{key:"onaddstream",set:function(e){throw new Error(S.replace("FUNC","addstream"))}},{key:"ondatachannel",set:function(e){throw new Error(S.replace("FUNC","datachannel"))}},{key:"onicecandidate",set:function(e){throw new Error(S.replace("FUNC","icecandidate"))}},{key:"oniceconnectionstatechange",set:function(e){throw new Error(S.replace("FUNC","iceconnectionstatechange"))}},{key:"onnegotiationneeded",set:function(e){throw new Error(S.replace("FUNC","negotiationneeded"))}},{key:"onremovestream",set:function(e){throw new Error(S.replace("FUNC","removestream"))}},{key:"onsignalingstatechange",set:function(e){throw new Error(S.replace("FUNC","signalingstatechange"))}},{key:"localDescription",get:function(){return this._pc.localDescription}}]),PeerConnectionProxy}();t.a=PeerConnectionProxy},function(e,t,n){e.exports={default:n(170),__esModule:!0}},,,,,,function(e,t,n){e.exports={default:n(171),__esModule:!0}},function(e,t,n){n(173),e.exports=n(0).Object.assign},function(e,t,n){n(174);var r=n(0).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},function(e,t,n){"use strict";var r=n(25),i=n(68),o=n(43),a=n(26),s=n(67),c=Object.assign;e.exports=!c||n(21)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,d=i.f,l=o.f;c>u;)for(var f,p=s(arguments[u++]),h=d?r(p).concat(d(p)):r(p),m=h.length,v=0;m>v;)l.call(p,f=h[v++])&&(n[f]=p[f]);return n}:c},function(e,t,n){var r=n(7);r(r.S+r.F,"Object",{assign:n(172)})},function(e,t,n){n(46)("getOwnPropertyNames",function(){return n(91).f})},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},,,function(e,t,n){"use strict";var r=n(39),i=n.n(r),o=n(6),a=n.n(o),s=n(1),c=n.n(s),u=n(2),d=n.n(u),l=n(9),f=n.n(l),p=n(8),h=n.n(p),m=n(144),v=n(66),DummySource=function(e){function DummySource(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0},t=e.audio,n=e.video;c()(this,DummySource);var r=f()(this,(DummySource.__proto__||a()(DummySource)).call(this)),o=[];if(t){r._audioContext=v.audioContextUtil.get(),r._destination=r._audioContext.createMediaStreamDestination();var s=r._destination.stream.getTracks(),u=i()(s,1),d=u[0];o.push(d),r._silence=r._audioContext.createBufferSource(),r._silence.connect(r._destination,0,0)}if(n){r._canvas=document.createElement("canvas"),r._canvas.style.width="1px",r._canvas.style.height="1px",r._canvas.width=1,r._canvas.height=1,r._canvas.getContext("2d");var l=r._canvas.captureStream(1),p=l.getTracks(),h=i()(p,1),m=h[0];o.push(m)}return r._stream=new MediaStream(o),r.setStream(r._stream),r}return h()(DummySource,e),d()(DummySource,[{key:"stop",value:function(){this._stream&&(this.setStream(null),this._stream.getTracks().forEach(function(e){return e.stop()}),this._stream=null,this._canvas=null,this._audioContext&&(v.audioContextUtil.release(),this._audioContext=null,this._destination=null,this._silence.stop(),this._silence=null))}},{key:"output",get:function(){return this._output}}]),DummySource}(m.a);t.a=DummySource},,,,,,function(e,t,n){e.exports={default:n(203),__esModule:!0}},,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){var n={};n.ssrcs=[];var r=e.split(/(?=^m=)/gim);for(var i in r){for(var o=r[i].split(/\r?\n/),a={},s=0;s<o.length;s+=1){var c=o[s].match(p);c&&(c[1]in n.ssrcs||n.ssrcs.push(c[1]),n.msid=c[2],n.mstid=c[3]);var d=o[s].match(h);d&&(n.ssrc?(n.msid=d[1],n.mstid=d[2]):(a.msid=d[1],a.mstid=d[2]));var l=o[s].match(m);l&&(l[1]in n.ssrcs||n.ssrcs.push(l[1]),n.msid=l[2]);var f=o[s].match(v);f&&(f[1]in n.ssrcs||n.ssrcs.push(f[1]),n.mstid=f[2]);var y=o[s].match(g);y&&(y[1]in n.ssrcs||n.ssrcs.push(y[1]),n.cname=y[2],u()(a).length&&(n.msid=a.msid,n.mstid=a.mstid,a={}))}if(u()(n.ssrcs).length)for(var w in n.ssrcs){t[n.ssrcs[w]]={};for(var b in n)"ssrcs"!==b&&(t[n.ssrcs[w]][b]=n[b])}n={},n.ssrcs=[]}return t}function i(e,t,r){var i={timestamp:Date.now(),pcId:t.pcId};i=n.i(l.assign)(i,r),e.handleStats([i])}function o(e){var t=null,n=e.match(y);if(n)if(t={foundation:n[1],componentId:parseInt(n[2]),transport:n[3].toUpperCase(),priority:parseInt(n[4]),address:n[5],port:parseInt(n[6]),type:n[7]},n[9]&&(t.relatedAddress=n[9]),isNaN(n[10])||(t.relatedPort=parseInt(n[10])),n[12])t.tcpType=n[12];else if("TCP"===t.transport){if(0!==t.port&&9!==t.port)return;t.tcpType="active",t.port=9}return t}function a(e,t,r,a){var s=o(r.candidate);if(s){var c={sourceId:"candidates",localOrRemote:a};c=n.i(l.assign)(c,s),i(e,t,c)}}function s(e,t,o){function s(n){return a(t,p,n,"remote"),v.call(e,n)}var c="stats-monitor",u=null,l=0;o=o||w;var p={isRelay:!1,pcId:e.id};e.addEventListener("signalingstatechange",function(){if("closed"===e.signalingState)return d.default.debug(c,"stopped gather stats for "+e.id),clearInterval(l);e._pc.localDescription&&(p=r(e._pc.localDescription.sdp,p)),e._pc.remoteDescription&&(p=r(e._pc.remoteDescription.sdp,p))});var h,m=n.i(f.a)();e.addEventListener("iceconnectionstatechange",function(){var n=e.iceConnectionState;i(t,p,{sourceId:"iceConnectionState",iceConnectionState:n}),h&&(clearTimeout(h),h=null),null===u&&("connected"!==n&&"completed"!==n||(u=!0,i(t,p,{sourceId:"events",eventType:"callSetupResult",callSucceeded:!0}),e.getStats(null).then(function(e){var n=m(e,p);for(var r in n){var o=n[r];"localIpAddress"in o&&(i(t,p,o),"localCandidateType"in o&&(p.isRelay="relayed"===o.localCandidateType))}}).catch(function(e){d.default.warning(c,"getStats error:",e)})),"failed"===n&&(u=!1,i(t,p,{sourceId:"events",eventType:"callSetupResult",callSucceeded:!1})),"checking"!==n||h||(h=setTimeout(function(){u=!1,i(t,p,{sourceId:"events",eventType:"callSetupResult",callSucceeded:!1})},b)))}),e.addEventListener("icecandidate",function(e){e.candidate&&a(t,p,e.candidate,"local")});var v=e.addIceCandidate;e.addIceCandidate=s,l=setInterval(function(){e.getStats(null).then(function(e){var n=m(e,p);t.handleStats(n)}).catch(function(e){d.default.warning(c,"getStats error:",e)})},o)}t.a=s;var c=n(64),u=n.n(c),d=n(3),l=n(13),f=n(202),p=/^a=ssrc:(\d+) msid:([-a-zA-Z0-9]+) ([-a-zA-Z0-9]+)$/,h=/^a=msid:{([-a-zA-Z0-9]+)} {([-a-zA-Z0-9]+)}$/,m=/^a=ssrc:(\d+) mslabel:([-a-zA-Z0-9]+)$/,v=/^a=ssrc:(\d+) label:(?:{)([-a-zA-Z0-9]+)(?:})$/,g=/^a=ssrc:(\d+) cname:(?:{)([-a-zA-Z0-9]+)(?:})$/,y=new RegExp("^candidate:(\\d+) (\\d) (UDP|TCP) ([\\d\\.]*) ([\\d\\.a-f\\:]*) (\\d*) typ ([a-z]*)( raddr ([\\d\\.a-f\\:]*) rport (\\d*))?( tcptype (active|passive|so))?.*$","mi"),w=1e3,b=15e3},function(e,t,n){"use strict";function r(e,t){var n=e.match(_);if(!n)throw new Error("Could not parse "+t+" ice candidate: "+e);var r={foundation:n[1],componentId:parseInt(n[2]),transport:n[3].toUpperCase(),priority:parseInt(n[4]),address:n[5],port:parseInt(n[6]),type:n[7],candidate:e,origin:t};if(n[9]&&(r.relatedAddress=n[9]),isNaN(n[10])||(r.relatedPort=parseInt(n[10])),n[12])r.tcpType=n[12];else if("TCP"===r.transport){if(0!==r.port&&9!==r.port)return;r.tcpType="active",r.port=9}return r}function i(e,t,n){return e?e.split(/\r\n/).filter(function(e){if(0===e.indexOf("a=candidate:"))try{var i=e.slice(2),o=r(i,n);if(!t(o))return w.default.verbose(b,"ignored candidate due to being filtered out: "+i),!1}catch(e){return w.default.error(b,"ignoring candidate, error was thrown in candidate filter: "+e),!1}return!0}).join("\r\n"):e}function o(e){return e.match(C)?e:d(e)}function a(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=-1;for(var a in i)if(0===i[a].indexOf("m=application")){o=+a;break}if(-1===o)return[e,null];var s=i[o].match(/a=mid:(.*)/im)||[],c=v()(s,2),u=c[1];if(!u)throw new Error("sdp application block does not have an mId");var d=r.replace(C,function(e,t){var n=t.split(" "),r=n.indexOf(u);if(-1===r)throw new Error("sdp group:BUNDLE attribute did not contain application block mId");return n.splice(r,1),"a=group:BUNDLE "+n.join(" ")}),l=i.splice(o,1)[0];return[d+i.join(""),{block:l,index:o,applicationMId:u,needsInteropTranslation:!!i.length}]}function s(e,t){if(!t)return e;var n=e.split(T),r=y()(n),i=r[0],o=r.slice(1),a=i.replace(C,function(e,n){var r=n?n.split(" "):[];return r.splice(t.index,0,t.applicationMId),"a=group:BUNDLE "+r.join(" ")});return o.splice(t.index,0,t.block),a+o.join("")}function c(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=r.match(S)||[],a=v()(o,2),s=a[1],c=void 0===s?"sendrecv":s,u=P.inactive,d=P.inactive,l=P.inactive;return i.forEach(function(e){var t=e.match(E),n=v()(t,2),r=n[1],i=e.match(S)||[],o=v()(i,2),a=o[1],s=void 0===a?c:a,f=P[s];"audio"===r?u|=f:"video"===r?d|=f:"application"===r&&(l|=f)}),{audio:R[u],video:R[d],application:R[l]}}function u(e,t){var n=e.split(T),r=y()(n),i=r[0],o=r.slice(1);return o=o.map(function(e){var n=e.match(E),r=v()(n,2),i=r[1],o=t[i]||R[3];return e.replace(S,"a="+o)}),[i].concat(h()(o)).join("")}function d(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=i.map(function(e){var t=e.match(/^a=mid:(.+)$/im)||[],n=v()(t,2),r=n[1];if(!r){var i=e.match(E),o=v()(i,2),a=o[1];throw new Error("media block of type "+a+" did not contain mid attribute")}return r});o.unshift("");var a="a=group:BUNDLE"+o.join(" ");return r.match(C)?r=r.replace(C,a):r+=a+"\r\n",[r].concat(h()(i)).join("")}function l(e){return e.replace(x,"")}function f(e){var t=e.split(T),n=y()(t),r=n[0],i=n.slice(1),o=i.map(function(e){var t=e.match(E);if("video"!==v()(t,2)[1])return e;var n=[],r=e.replace(k,function(e,t){return n.push(t),""}),i=new RegExp("a=ssrc:(?:"+n.join("|")+")\\s.*\r\n","gi");return r.replace(i,"").replace(I,"")});return[r].concat(h()(o)).join("")}t.a=r,t.c=i,t.d=o,t.e=a,t.i=s,t.f=c,t.g=u,t.h=d,t.b=l,t.j=f;var p=n(31),h=n.n(p),m=n(39),v=n.n(m),g=n(89),y=n.n(g),w=n(3),b="peer-connection",_=new RegExp("^candidate:(\\d+) (\\d) (UDP|TCP) ([\\d\\.]*) ([\\d\\.a-f\\:]*) (\\d*) typ ([a-z]*)( raddr ([\\d\\.a-f\\:]*) rport (\\d*))?( tcptype (active|passive|so))?(.*)$","i"),C=new RegExp("^a=group:BUNDLE (.*)$","mi"),S=new RegExp("^a=(inactive|recvonly|sendonly|sendrecv)$","mi"),T=new RegExp("(?=m=(?:audio|video|application))","i"),E=new RegExp("^m=(audio|video|application)","i"),P={inactive:0,sendonly:1,recvonly:2,sendrecv:3},R={0:"inactive",1:"sendonly",2:"recvonly",3:"sendrecv"},x=new RegExp("a=extmap:5 http://www\\.ietf\\.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","gi"),k=new RegExp("a=ssrc-group:.+\\s\\d+\\s(\\d+)\r\n","gi"),I=new RegExp("a=(?:fmtp:\\d+\\sapt=\\d+|rtpmap:\\d+\\srtx/\\d+)\r\n","gi")},function(e,t,n){"use strict";function StatsFormatter(e,t){this.context=n.i(r.assign)({},e),this.context.contextId=n.i(r.randomString)(16),this.context.userAgent=navigator.userAgent,this.reporter=t,this.tag="stats-formatter"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=StatsFormatter;var r=n(13);StatsFormatter.prototype.setPeerId=function(e){this.context.peerId=e},StatsFormatter.prototype.handleStats=function(e){for(var t in e)e[t]=n.i(r.assign)(e[t],this.context);this.reporter.handleStats(e)}},function(e,t,n){"use strict";function r(e,t){var r={},i=e.match(d);if(i){switch(i[1]){case"in":r.role="receiver";break;case"out":r.role="sender";break;default:return c.default.warning("stats-normalizer","No role match!"),null}switch(i[2]){case"rtp":r.reportType="receiver"===r.role?"receiver":"sender";break;case"rtcp":r.reportType="receiver"===r.role?"sender":"receiver";break;default:return c.default.warning("stats-normalizer","No reportType match!"),null}for(var o in t)l.indexOf(o)>=0||(r[o]=n.i(u.maybeConvertStringToNumber)(t[o].toString()));return r}}function i(e,t){var r={},i=e.match(f);if(i){switch(i[3]){case"recv":r.role="receiver",r.reportType="receiver";break;case"send":r.role="sender",r.reportType="sender";break;default:return c.default.warning("stats-normalizer","No role match!"),null}for(var o in t)if(!(p.indexOf(o)>=0))if(r[o]=n.i(u.maybeConvertStringToNumber)(t[o].toString()),"audioInputLevel"===o||"audioOutputLevel"===o)r.mediaType="audio";else{if("googFrameHeightReceived"!==o&&"googFrameHeightSent"!==o)continue;r.mediaType="video"}return r}}function o(e,t,r){for(var i in h){var o=h[i];if(o in e){r[t+o.charAt(0).toUpperCase()+o.slice(1)]=n.i(u.maybeConvertStringToNumber)(e[o])}}return r}function a(e,t,n){var r=t.localCandidateId,i=t.remoteCandidateId,a=e[r],s=e[i],c={};return c.sourceId="selectedPair",c=o(a,"local",c),c=o(s,"remote",c),"chrome"===n&&(c.localPriority=+a.priority,c.remotePriority=+s.priority),"firefox"===n&&(c.localPriority=+t.priority,c.remotePriority=+t.priority),c}function s(){function e(e,t){var o=[],a=Date.now();for(var s in e){var d=e[s],l=null,f=d.ssrc;if(f){var p=t[f];p?(u.isFirefox&&(l=r(s,d)),u.isChrome&&(l=i(s,d)),l&&(l.timestamp&&(l.getStatsTs=l.timestamp,delete l.timestamp),l.timestamp=a,l.pcId=t.pcId,l.isRelay=t.isRelay,l=n.i(u.assign)(l,p),l.sourceId="ssrc-"+f,o.push(l))):c.default.warning("stat-normalizer","got stat without identity:",d)}}return o}function t(e,t){var n=[],r=Date.now(),i={};for(var s in e){var c=e[s],u=null;if("candidatepair"===c.type&&!0===c.selected&&"succeeded"===c.state&&(u=a(e,c,"firefox")),"googCandidatePair"===c.type&&"true"===c.googActiveConnection&&(u=a(e,c,"chrome")),u){u.timestamp=r,u.pcId=t.pcId,u.isRelay=t.isRelay;var d=c.localCandidateId+c.remoteCandidateId;d in i||(i[d]=[]),i[d].push(u)}}for(var l in o)l in i||delete o[l];for(var f in i)f in o||(o[f]=!0,[].push.apply(n,i[f]));return n}var o={};return function(n,r){var i=[];return i=e(n,r),[].push.apply(i,t(n,r)),i}}t.a=s;var c=n(3),u=n(13),d=/(in|out)bound_(rtp|rtcp)_(audio|video)_(\d+)/,l=["id","type","isRemote","remoteId"],f=/(ssrc)_(\d+)_(recv|send)/,p=["id","type","googTrackId","transportId"],h=["portNumber","ipAddress","transport","candidateType"]},function(e,t,n){n(204);var r=n(0).Object;e.exports=function(e,t){return r.defineProperties(e,t)}},function(e,t,n){var r=n(7);r(r.S+r.F*!n(11),"Object",{defineProperties:n(95)})},function(e,t,n){var r,r,o=o||{};o.options=o.options||{},o.VERSION="0.14.3-6d236da",o.onwebrtcready=o.onwebrtcready||function(e){},o._onwebrtcreadies=[],o.webRTCReady=function(e){if("function"!=typeof e)throw new Error("Callback provided is not a function");var t=function(){"function"==typeof window.require&&"function"==typeof o._defineMediaSourcePolyfill&&o._defineMediaSourcePolyfill(),e(null!==o.WebRTCPlugin.plugin)};!0===o.onwebrtcreadyDone?t():o._onwebrtcreadies.push(t)},o.WebRTCPlugin=o.WebRTCPlugin||{},o.WebRTCPlugin.pluginInfo=o.WebRTCPlugin.pluginInfo||{prefix:"Tem",plugName:"TemWebRTCPlugin",pluginId:"plugin0",type:"application/x-temwebrtcplugin",onload:"__TemWebRTCReady0",portalLink:"https://skylink.io/plugin/",downloadLink:null,companyName:"Temasys",downloadLinks:{mac:"https://bit.ly/webrtcpluginpkg",win:"https://bit.ly/webrtcpluginmsi"}},void 0!==o.WebRTCPlugin.pluginInfo.downloadLinks&&null!==o.WebRTCPlugin.pluginInfo.downloadLinks&&(navigator.platform.match(/^Mac/i)?o.WebRTCPlugin.pluginInfo.downloadLink=o.WebRTCPlugin.pluginInfo.downloadLinks.mac:navigator.platform.match(/^Win/i)&&(o.WebRTCPlugin.pluginInfo.downloadLink=o.WebRTCPlugin.pluginInfo.downloadLinks.win)),o.WebRTCPlugin.TAGS={NONE:"none",AUDIO:"audio",VIDEO:"video"},o.WebRTCPlugin.pageId=Math.random().toString(36).slice(2),o.WebRTCPlugin.plugin=null,o.WebRTCPlugin.setLogLevel=null,o.WebRTCPlugin.defineWebRTCInterface=null,o.WebRTCPlugin.isPluginInstalled=null,o.WebRTCPlugin.pluginInjectionInterval=null,o.WebRTCPlugin.injectPlugin=null,o.WebRTCPlugin.PLUGIN_STATES={NONE:0,INITIALIZING:1,INJECTING:2,INJECTED:3,READY:4},o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.NONE,o.onwebrtcreadyDone=!1,o.WebRTCPlugin.PLUGIN_LOG_LEVELS={NONE:"NONE",ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO",VERBOSE:"VERBOSE",SENSITIVE:"SENSITIVE"},o.WebRTCPlugin.WaitForPluginReady=null,o.WebRTCPlugin.callWhenPluginReady=null,__TemWebRTCReady0=function(){if("complete"===document.readyState)o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.READY,o.maybeThroughWebRTCReady();else var e=setInterval(function(){"complete"===document.readyState&&(clearInterval(e),o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.READY,o.maybeThroughWebRTCReady())},100)},o.maybeThroughWebRTCReady=function(){o.onwebrtcreadyDone||(o.onwebrtcreadyDone=!0,o._onwebrtcreadies.length?o._onwebrtcreadies.forEach(function(e){"function"==typeof e&&e(null!==o.WebRTCPlugin.plugin)}):"function"==typeof o.onwebrtcready&&o.onwebrtcready(null!==o.WebRTCPlugin.plugin))},o.TEXT={PLUGIN:{REQUIRE_INSTALLATION:"This website requires you to install a WebRTC-enabling plugin to work on this browser.",NOT_SUPPORTED:"Your browser does not support WebRTC.",BUTTON:"Install Now"},REFRESH:{REQUIRE_REFRESH:"Please refresh page",BUTTON:"Refresh Page"}},o._iceConnectionStates={starting:"starting",checking:"checking",connected:"connected",completed:"connected",done:"completed",disconnected:"disconnected",failed:"failed",closed:"closed"},o._iceConnectionFiredStates=[],o.isDefined=null,o.parseWebrtcDetectedBrowser=function(){var e=null;if(window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0)e=navigator.userAgent.match(/OPR\/(\d+)/i)||[],webrtcDetectedBrowser="opera",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=26,webrtcDetectedType="webkit",webrtcDetectedDCSupport="SCTP";else if(navigator.userAgent.match(/Bowser\/[0-9.]*/g)){e=navigator.userAgent.match(/Bowser\/[0-9.]*/g)||[];var t=parseInt((navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[])[2]||"0",10);webrtcDetectedBrowser="bowser",webrtcDetectedVersion=parseFloat((e[0]||"0/0").split("/")[1],10),webrtcMinimumVersion=0,webrtcDetectedType="webkit",webrtcDetectedDCSupport=t>30?"SCTP":"RTP"}else if(navigator.userAgent.indexOf("OPiOS")>0)e=navigator.userAgent.match(/OPiOS\/([0-9]+)\./),webrtcDetectedBrowser="opera",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf("CriOS")>0)e=navigator.userAgent.match(/CriOS\/([0-9]+)\./)||[],webrtcDetectedBrowser="chrome",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(navigator.userAgent.indexOf("FxiOS")>0)e=navigator.userAgent.match(/FxiOS\/([0-9]+)\./)||[],webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=0,webrtcDetectedType=null,webrtcDetectedDCSupport=null;else if(document.documentMode)e=/\brv[ :]+(\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedBrowser="IE",webrtcDetectedVersion=parseInt(e[1],10),webrtcMinimumVersion=9,webrtcDetectedType="plugin",webrtcDetectedDCSupport="SCTP",webrtcDetectedVersion||(e=/\bMSIE[ :]+(\d+)/g.exec(navigator.userAgent)||[],webrtcDetectedVersion=parseInt(e[1]||"0",10));else if(window.StyleMedia||navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))e=navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)||[],webrtcDetectedBrowser="edge",webrtcDetectedVersion=parseFloat((e[0]||"0/0").split("/")[1],10),webrtcMinimumVersion=13.10547,webrtcDetectedType="ms",webrtcDetectedDCSupport=null;else if("undefined"!=typeof InstallTrigger||navigator.userAgent.indexOf("irefox")>0)e=navigator.userAgent.match(/Firefox\/([0-9]+)\./)||[],webrtcDetectedBrowser="firefox",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=33,webrtcDetectedType="moz",webrtcDetectedDCSupport="SCTP";else if(window.chrome&&window.chrome.webstore||navigator.userAgent.indexOf("Chrom")>0)e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./i)||[],webrtcDetectedBrowser="chrome",webrtcDetectedVersion=parseInt(e[2]||"0",10),webrtcMinimumVersion=38,webrtcDetectedType="webkit",webrtcDetectedDCSupport=webrtcDetectedVersion>30?"SCTP":"RTP";else if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){e=navigator.userAgent.match(/version\/(\d+)/i)||[];var n=navigator.userAgent.match(/(iPhone|iPad)/gi)||[];webrtcDetectedBrowser="safari",webrtcDetectedVersion=parseInt(e[1]||"0",10),webrtcMinimumVersion=7,webrtcDetectedType=0===n.length?"plugin":null,webrtcDetectedDCSupport=0===n.length?"SCTP":null}window.webrtcDetectedBrowser=webrtcDetectedBrowser,window.webrtcDetectedVersion=webrtcDetectedVersion,window.webrtcMinimumVersion=webrtcMinimumVersion,window.webrtcDetectedType=webrtcDetectedType,window.webrtcDetectedDCSupport=webrtcDetectedDCSupport},o.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},o.renderNotificationBar=function(e,t,n){if("complete"===document.readyState){var r=window,i=document.createElement("iframe");i.name="adapterjs-alert",i.style.position="fixed",i.style.top="-41px",i.style.left=0,i.style.right=0,i.style.width="100%",i.style.height="40px",i.style.backgroundColor="#ffffe1",i.style.border="none",i.style.borderBottom="1px solid #888888",i.style.zIndex="9999999","string"==typeof i.style.webkitTransition?i.style.webkitTransition="all .5s ease-out":"string"==typeof i.style.transition&&(i.style.transition="all .5s ease-out"),document.body.appendChild(i);var a=i.contentWindow?i.contentWindow:i.contentDocument.document?i.contentDocument.document:i.contentDocument;a.document.open(),a.document.write('<span style="display: inline-block; font-family: Helvetica, Arial,sans-serif; font-size: .9rem; padding: 4px; vertical-align: middle; cursor: default;">'+e+"</span>"),t&&"function"==typeof n?(a.document.write('<button id="okay">'+t+'</button><button id="cancel">Cancel</button>'),a.document.close(),o.addEvent(a.document.getElementById("okay"),"click",function(e){e.preventDefault();try{e.cancelBubble=!0}catch(e){}n(e)}),o.addEvent(a.document.getElementById("cancel"),"click",function(e){r.document.body.removeChild(i)})):a.document.close(),setTimeout(function(){"string"==typeof i.style.webkitTransform?i.style.webkitTransform="translateY(40px)":"string"==typeof i.style.transform?i.style.transform="translateY(40px)":i.style.top="0px"},300)}},webrtcDetectedType=null,checkMediaDataChannelSettings=function(e,t,n,r){if("function"==typeof n){var i=!0,o="firefox"===webrtcDetectedBrowser,a="moz"===webrtcDetectedType&&webrtcDetectedVersion>30,s="firefox"===e;if(o&&s||a)try{delete r.mandatory.MozDontOfferDataChannel}catch(e){}else o&&!s&&(r.mandatory.MozDontOfferDataChannel=!0);if(!o)for(var c in r.mandatory)r.mandatory.hasOwnProperty(c)&&-1!==c.indexOf("Moz")&&delete r.mandatory[c];!o||s||a||(i=!1),n(i,r)}},checkIceConnectionState=function(e,t,n){"function"==typeof n&&(e=e||"peer",o._iceConnectionFiredStates[e]&&t!==o._iceConnectionStates.disconnected&&t!==o._iceConnectionStates.failed&&t!==o._iceConnectionStates.closed||(o._iceConnectionFiredStates[e]=[]),t=o._iceConnectionStates[t],o._iceConnectionFiredStates[e].indexOf(t)<0&&(o._iceConnectionFiredStates[e].push(t),t===o._iceConnectionStates.connected&&setTimeout(function(){o._iceConnectionFiredStates[e].push(o._iceConnectionStates.done),n(o._iceConnectionStates.done)},1e3),n(t)))},createIceServer=null,createIceServers=null,MediaStream="function"==typeof MediaStream?MediaStream:null,RTCPeerConnection="function"==typeof RTCPeerConnection?RTCPeerConnection:null,RTCSessionDescription="function"==typeof RTCSessionDescription?RTCSessionDescription:null,RTCIceCandidate="function"==typeof RTCIceCandidate?RTCIceCandidate:null,getUserMedia=null,attachMediaStream=null,reattachMediaStream=null,webrtcDetectedBrowser=null,webrtcDetectedVersion=null,webrtcMinimumVersion=null,!(navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))||0===(navigator.userAgent.match(/android/gi)||[]).length&&0===(navigator.userAgent.match(/chrome/gi)||[]).length&&navigator.userAgent.indexOf("Safari/")>0?("object"==typeof console&&"function"==typeof console.log||(console={}||console,console.log=function(e){},console.info=function(e){},console.error=function(e){},console.dir=function(e){},console.exception=function(e){},console.trace=function(e){},console.warn=function(e){},console.count=function(e){},console.debug=function(e){},console.count=function(e){},console.time=function(e){},console.timeEnd=function(e){},console.group=function(e){},console.groupCollapsed=function(e){},console.groupEnd=function(e){}),o.parseWebrtcDetectedBrowser(),isIE="IE"===webrtcDetectedBrowser,o.WebRTCPlugin.WaitForPluginReady=function(){for(;o.WebRTCPlugin.pluginState!==o.WebRTCPlugin.PLUGIN_STATES.READY;);},o.WebRTCPlugin.callWhenPluginReady=function(e){if(o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.READY)e();else var t=setInterval(function(){o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.READY&&(clearInterval(t),e())},100)},o.WebRTCPlugin.setLogLevel=function(e){o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.setLogLevel(e)})},o.WebRTCPlugin.injectPlugin=function(){if("complete"===document.readyState&&o.WebRTCPlugin.pluginState===o.WebRTCPlugin.PLUGIN_STATES.INITIALIZING){if(o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INJECTING,"IE"===webrtcDetectedBrowser&&webrtcDetectedVersion<=10){var e=document.createDocumentFragment();for(o.WebRTCPlugin.plugin=document.createElement("div"),o.WebRTCPlugin.plugin.innerHTML='<object id="'+o.WebRTCPlugin.pluginInfo.pluginId+'" type="'+o.WebRTCPlugin.pluginInfo.type+'" width="1" height="1"><param name="pluginId" value="'+o.WebRTCPlugin.pluginInfo.pluginId+'" /> <param name="windowless" value="false" /> <param name="pageId" value="'+o.WebRTCPlugin.pageId+'" /> <param name="onload" value="'+o.WebRTCPlugin.pluginInfo.onload+'" /><param name="tag" value="'+o.WebRTCPlugin.TAGS.NONE+'" />'+(o.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+"</object>";o.WebRTCPlugin.plugin.firstChild;)e.appendChild(o.WebRTCPlugin.plugin.firstChild);document.body.appendChild(e),o.WebRTCPlugin.plugin=document.getElementById(o.WebRTCPlugin.pluginInfo.pluginId)}else o.WebRTCPlugin.plugin=document.createElement("object"),o.WebRTCPlugin.plugin.id=o.WebRTCPlugin.pluginInfo.pluginId,isIE?(o.WebRTCPlugin.plugin.width="1px",o.WebRTCPlugin.plugin.height="1px"):(o.WebRTCPlugin.plugin.width="0px",o.WebRTCPlugin.plugin.height="0px"),o.WebRTCPlugin.plugin.type=o.WebRTCPlugin.pluginInfo.type,o.WebRTCPlugin.plugin.innerHTML='<param name="onload" value="'+o.WebRTCPlugin.pluginInfo.onload+'"><param name="pluginId" value="'+o.WebRTCPlugin.pluginInfo.pluginId+'"><param name="windowless" value="false" /> '+(o.options.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+'<param name="pageId" value="'+o.WebRTCPlugin.pageId+'"><param name="tag" value="'+o.WebRTCPlugin.TAGS.NONE+'" />',document.body.appendChild(o.WebRTCPlugin.plugin);o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INJECTED}},o.WebRTCPlugin.isPluginInstalled=function(e,t,n,r,i){if(isIE){try{new ActiveXObject(e+"."+t)}catch(e){return void i()}r()}else{for(var o=navigator.mimeTypes,a=0;a<o.length;a++)if(o[a].type.indexOf(n)>=0)return void r();i()}},o.WebRTCPlugin.defineWebRTCInterface=function(){if(o.WebRTCPlugin.pluginState!==o.WebRTCPlugin.PLUGIN_STATES.READY){o.WebRTCPlugin.pluginState=o.WebRTCPlugin.PLUGIN_STATES.INITIALIZING,o.isDefined=function(e){return null!==e&&void 0!==e},createIceServer=function(e,t,n){var r=null,i=e.split(":");return 0===i[0].indexOf("stun")?r={url:e,hasCredentials:!1}:0===i[0].indexOf("turn")&&(r={url:e,hasCredentials:!0,credential:n,username:t}),r},createIceServers=function(e,t,n){for(var r=[],i=0;i<e.length;++i)r.push(createIceServer(e[i],t,n));return r},RTCSessionDescription=function(e){return o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.ConstructSessionDescription(e.type,e.sdp)},MediaStream=function(e){return o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.MediaStream(e)},RTCPeerConnection=function(e,t){if(void 0!==e&&null!==e&&!Array.isArray(e.iceServers))throw new Error("Failed to construct 'RTCPeerConnection': Malformed RTCConfiguration");if(void 0!==t&&null!==t){var n=!1;if(n|="object"!=typeof t,n|=t.hasOwnProperty("mandatory")&&void 0!==t.mandatory&&null!==t.mandatory&&t.mandatory.constructor!==Object,n|=t.hasOwnProperty("optional")&&void 0!==t.optional&&null!==t.optional&&!Array.isArray(t.optional))throw new Error("Failed to construct 'RTCPeerConnection': Malformed constraints object")}o.WebRTCPlugin.WaitForPluginReady();var r=null;if(e&&Array.isArray(e.iceServers)){r=e.iceServers;for(var i=0;i<r.length;i++)r[i].urls&&!r[i].url&&(r[i].url=r[i].urls),r[i].hasCredentials=o.isDefined(r[i].username)&&o.isDefined(r[i].credential)}if(o.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION&&o.WebRTCPlugin.plugin.PEER_CONNECTION_VERSION>1)return r&&(e.iceServers=r),o.WebRTCPlugin.plugin.PeerConnection(e);var a=t&&t.mandatory?t.mandatory:null,s=t&&t.optional?t.optional:null;return o.WebRTCPlugin.plugin.PeerConnection(o.WebRTCPlugin.pageId,r,a,s)},MediaStreamTrack=function(){},MediaStreamTrack.getSources=function(e){o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.GetSources(e)})};var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n){if("string"==typeof e[n])return void(t[n]=e[n]);var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if("sourceId"===i("",n)&&void 0!==r.exact&&(r.ideal=r.exact,r.exact=void 0),void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};getUserMedia=function(t,n,r){var i={};i.audio=!!t.audio&&e(t.audio),i.video=!!t.video&&e(t.video),o.WebRTCPlugin.callWhenPluginReady(function(){o.WebRTCPlugin.plugin.getUserMedia(i,n,r)})},window.navigator.getUserMedia=getUserMedia,navigator.mediaDevices||"undefined"==typeof Promise||(requestUserMedia=function(e){return new Promise(function(t,n){try{getUserMedia(e,t,n)}catch(e){n(e)}})},navigator.mediaDevices={getUserMedia:requestUserMedia,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],id:e.id,deviceId:e.id,groupId:""}}))})})}}),attachMediaStream=function(e,t){if(e&&e.parentNode){var n;null===t?n="":(void 0!==t.enableSoundTracks&&t.enableSoundTracks(!0),n=t.id);var r=0===e.id.length?Math.random().toString(36).slice(2):e.id,i=e.nodeName.toLowerCase();if("object"!==i){var a;switch(i){case"audio":a=o.WebRTCPlugin.TAGS.AUDIO;break;case"video":a=o.WebRTCPlugin.TAGS.VIDEO;break;default:a=o.WebRTCPlugin.TAGS.NONE}var s=document.createDocumentFragment(),c=document.createElement("div"),u="";for(e.className?u='class="'+e.className+'" ':e.attributes&&e.attributes.class&&(u='class="'+e.attributes.class.value+'" '),c.innerHTML='<object id="'+r+'" '+u+'type="'+o.WebRTCPlugin.pluginInfo.type+'"><param name="pluginId" value="'+r+'" /> <param name="pageId" value="'+o.WebRTCPlugin.pageId+'" /> <param name="windowless" value="true" /> <param name="streamId" value="'+n+'" /> <param name="tag" value="'+a+'" /> </object>';c.firstChild;)s.appendChild(c.firstChild);var d="",l="";e.clientWidth||e.clientHeight?(l=e.clientWidth,d=e.clientHeight):(e.width||e.height)&&(l=e.width,d=e.height),e.parentNode.insertBefore(s,e),s=document.getElementById(r),s.width=l,s.height=d,e.parentNode.removeChild(e)}else{for(var f=e.children,p=0;p!==f.length;++p)if("streamId"===f[p].name){f[p].value=n;break}e.setStreamId(n)}var h=document.getElementById(r);return o.forwardEventHandlers(h,e,Object.getPrototypeOf(e)),h}},reattachMediaStream=function(e,t){for(var n=null,r=t.children,i=0;i!==r.length;++i)if("streamId"===r[i].name){o.WebRTCPlugin.WaitForPluginReady(),n=o.WebRTCPlugin.plugin.getStreamWithId(o.WebRTCPlugin.pageId,r[i].value);break}if(null!==n)return attachMediaStream(e,n)},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=getUserMedia,o.attachMediaStream=attachMediaStream,o.reattachMediaStream=reattachMediaStream,o.getUserMedia=getUserMedia,o.forwardEventHandlers=function(e,t,n){var r=Object.getOwnPropertyNames(n);for(var i in r)if(i){var a=r[i];"function"==typeof a.slice&&"on"===a.slice(0,2)&&"function"==typeof t[a]&&o.addEvent(e,a.slice(2),t[a])}var s=Object.getPrototypeOf(n);s&&o.forwardEventHandlers(e,t,s)},RTCIceCandidate=function(e){return e.sdpMid||(e.sdpMid=""),o.WebRTCPlugin.WaitForPluginReady(),o.WebRTCPlugin.plugin.ConstructIceCandidate(e.sdpMid,e.sdpMLineIndex,e.candidate)},o.addEvent(document,"readystatechange",o.WebRTCPlugin.injectPlugin),o.WebRTCPlugin.injectPlugin()}},o.WebRTCPlugin.pluginNeededButNotInstalledCb=o.WebRTCPlugin.pluginNeededButNotInstalledCb||function(){o.addEvent(document,"readystatechange",o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv),o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv()},o.WebRTCPlugin.pluginNeededButNotInstalledCbPriv=function(){if(!o.options.hidePluginInstallPrompt){var e=o.WebRTCPlugin.pluginInfo.downloadLink;if(e){var t;t=o.WebRTCPlugin.pluginInfo.portalLink?'This website requires you to install the  <a href="'+o.WebRTCPlugin.pluginInfo.portalLink+'" target="_blank">'+o.WebRTCPlugin.pluginInfo.companyName+" WebRTC Plugin</a> to work on this browser.":o.TEXT.PLUGIN.REQUIRE_INSTALLATION,o.renderNotificationBar(t,o.TEXT.PLUGIN.BUTTON,function(){window.open(e,"_top");var t=setInterval(function(){isIE||navigator.plugins.refresh(!1),o.WebRTCPlugin.isPluginInstalled(o.WebRTCPlugin.pluginInfo.prefix,o.WebRTCPlugin.pluginInfo.plugName,o.WebRTCPlugin.pluginInfo.type,function(){clearInterval(t),o.WebRTCPlugin.defineWebRTCInterface()},function(){})},500)})}else o.renderNotificationBar(o.TEXT.PLUGIN.NOT_SUPPORTED)}},o.WebRTCPlugin.isPluginInstalled(o.WebRTCPlugin.pluginInfo.prefix,o.WebRTCPlugin.pluginInfo.plugName,o.WebRTCPlugin.pluginInfo.type,o.WebRTCPlugin.defineWebRTCInterface,o.WebRTCPlugin.pluginNeededButNotInstalledCb)):(navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)&&window.RTCPeerConnection&&(window.msRTCPeerConnection=window.RTCPeerConnection),function(t){e.exports=t()}(function(){return function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},r.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.getDtlsParameters=function(e,t){var n=r.splitLines(e);n=n.concat(r.splitLines(t));var i=n.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14);return{role:"auto",fingerprints:[{algorithm:i.split(" ")[0].toLowerCase(),value:i.split(" ")[1]}]}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return n=n.concat(r.splitLines(t)),{usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=r.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=r.parseRtpMap(s),u=r.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(0===d[0].indexOf("b=TIAS:")?d=parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")&&(d=parseInt(d[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=d})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.exports=r},{}],2:[function(e,t,n){"use strict";!function(){var n=e("./utils").log,r=e("./utils").browserDetails;t.exports.browserDetails=r,t.exports.extractVersion=e("./utils").extractVersion,t.exports.disableLog=e("./utils").disableLog;var i=e("./chrome/chrome_shim")||null,o=e("./edge/edge_shim")||null,a=e("./firefox/firefox_shim")||null,s=e("./safari/safari_shim")||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.exports.browserShim=s,s.shimGetUserMedia();break;default:n("Unsupported browser!")}}()},{"./chrome/chrome_shim":3,"./edge/edge_shim":5,"./firefox/firefox_shim":7,"./safari/safari_shim":9,"./utils":10}],3:[function(e,t,n){"use strict";var r=e("../utils.js").log,i=e("../utils.js").browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return i(e,t);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var c=function(e){o[1](s(a(e)))};return i.apply(this,[c,arguments[0]])}return new Promise(function(t,n){1===o.length&&"object"==typeof e?i.apply(r,[function(e){t(s(a(e)))},n]):i.apply(r,[function(e){t(s(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)}}};t.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils.js":10,"./getusermedia":4}],4:[function(e,t,n){"use strict";var r=e("../utils.js").log;t.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),o={},o[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var i=t.video.facingMode;if((i=i&&("object"==typeof i?i:{ideal:i}))&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){o=o.filter(function(e){return"videoinput"===e.kind});var a=o.find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||o.length&&o[o.length-1];return a&&(t.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),r("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return r("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},i=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=i;var o=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).catch(function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":10}],5:[function(e,t,n){"use strict";var r=e("sdp"),i=e("../utils").browserDetails,o={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")||0===e.indexOf("stun:")&&i.version>=14393})[0])}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");else for(var r=1;r<t.length;r++)-1===t[r].indexOf("\r\na=end-of-candidates\r\n")&&(t[r]+="a=end-of-candidates\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var d=r.splitSections(n.localDescription.sdp);-1===s.candidate.candidate.indexOf("typ endOfCandidates")?d[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":d[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=d.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&l&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),l&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&(i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,d=a.localCapabilities,l=a.remoteCapabilities;if("0"!==e.split("\n",1)[0].split(" ",2)[1]&&!a.isDatachannel){var f=r.getIceParameters(e,n);if(o){var p=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});p.length&&c.setRemoteCandidates(p)}var h=r.getDtlsParameters(e,n);o&&(h.role="server"),i.usingBundle&&0!==t||(c.start(s,f,o?"controlling":"controlled"),u.start(h));var m=i._getCommonCapabilities(d,l);i._transceive(a,m.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u=r.splitLines(o),d=u[0].substr(2).split(" "),l=d[0],f="0"===d[1],p=r.getDirection(o,a),h=r.matchPrefix(o,"a=mid:");if(h=h.length?h[0].substr(6):r.generateIdentifier(),"application"===l&&"DTLS/SCTP"===d[2])return void(t.transceivers[c]={mid:h,isDatachannel:!0});var m,v,g,y,w,b,_,C,S,T,E,P,R=r.parseRtpParameters(o);f||(E=r.getIceParameters(o,a),P=r.getDtlsParameters(o,a),P.role="client"),C=r.parseRtpEncodingParameters(o);var x,k=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];k&&(x=k.value);var I=r.matchPrefix(o,"a=end-of-candidates",a).length>0,O=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||f)"answer"!==e.type||f||(m=t.transceivers[c],v=m.iceGatherer,g=m.iceTransport,y=m.dtlsTransport,w=m.rtpSender,b=m.rtpReceiver,_=m.sendEncodingParameters,S=m.localCapabilities,t.transceivers[c].recvEncodingParameters=C,t.transceivers[c].remoteCapabilities=R,t.transceivers[c].cname=x,(s||I)&&O.length&&g.setRemoteCandidates(O),t.usingBundle&&0!==c||(g.start(v,E,"controlling"),y.start(P)),t._transceive(m,"sendrecv"===p||"recvonly"===p,"sendrecv"===p||"sendonly"===p),!b||"sendrecv"!==p&&"sendonly"!==p?delete m.rtpReceiver:(T=b.track,i.push([T,b]),n.addTrack(T)));else{var M=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(h,c);if(I&&M.iceTransport.setRemoteCandidates(O),S=RTCRtpReceiver.getCapabilities(l),_=[{ssrc:1001*(2*c+2)}],b=new RTCRtpReceiver(M.dtlsTransport,l),T=b.track,i.push([T,b]),n.addTrack(T),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var D;"audio"===l?D=t.localStreams[0].getAudioTracks()[0]:"video"===l&&(D=t.localStreams[0].getVideoTracks()[0]),D&&(w=new RTCRtpSender(D,M.dtlsTransport))}t.transceivers[c]={iceGatherer:M.iceGatherer,iceTransport:M.iceTransport,dtlsTransport:M.dtlsTransport,localCapabilities:S,remoteCapabilities:R,rtpSender:w,rtpReceiver:b,kind:l,mid:h,cname:x,sendEncodingParameters:_,recvEncodingParameters:C},t._transceive(t.transceivers[c],!1,"sendrecv"===p||"sendonly"===p)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var i,o,a=t.track,c=t.kind,u=r.generateIdentifier(),d=e.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:e._createIceAndDtlsTransports(u,n),l=RTCRtpSender.getCapabilities(c),f=[{ssrc:1001*(2*n+1)}];a&&(i=new RTCRtpSender(a,d.dtlsTransport)),t.wantReceive&&(o=new RTCRtpReceiver(d.dtlsTransport,c)),s[n]={iceGatherer:d.iceGatherer,iceTransport:d.iceTransport,dtlsTransport:d.dtlsTransport,localCapabilities:l,remoteCapabilities:null,rtpSender:i,rtpReceiver:o,kind:c,mid:u,sendEncodingParameters:f,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n");var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};t.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":6,sdp:1}],6:[function(e,t,n){"use strict";t.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return t(n).catch(function(t){return Promise.reject(e(t))})}}},{}],7:[function(e,t,n){"use strict";var r=e("../utils").browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(r.version<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(e.iceServers[i])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}}};t.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":8}],8:[function(e,t,n){"use strict";var r=e("../utils").log,i=e("../utils").browserDetails;t.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),i.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),r("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){o(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},i.version<41){var o=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){return i.version<44?t(e,n,r):void navigator.mediaDevices.getUserMedia(e).then(n,r)}}},{"../utils":10}],9:[function(e,t,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};t.exports={shimGetUserMedia:r.shimGetUserMedia}},{}],10:[function(e,t,n){"use strict";var r=!0,i={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&console.log}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};t.exports={log:i.log,disableLog:i.disableLog,browserDetails:i.detectBrowser(),extractVersion:i.extractVersion}},{}]},{},[2])(2)}),o.parseWebrtcDetectedBrowser(),navigator.mozGetUserMedia?(MediaStreamTrack.getSources=function(e){setTimeout(function(){e([{kind:"audio",id:"default",label:"",facing:""},{kind:"video",id:"default",label:"",facing:""}])},0)},attachMediaStream=function(e,t){return e.srcObject=t,e},reattachMediaStream=function(e,t){return e.srcObject=t.srcObject,e},createIceServer=function(e,t,n){var r=null,i=e.split(":");if(0===i[0].indexOf("stun"))r={urls:[e]};else if(0===i[0].indexOf("turn"))if(webrtcDetectedVersion<27){var o=e.split("?");1!==o.length&&0!==o[1].indexOf("transport=udp")||(r={urls:[o[0]],credential:n,username:t})}else r={urls:[e],credential:n,username:t};return r},createIceServers=function(e,t,n){var r=[];for(i=0;i<e.length;i++){var o=createIceServer(e[i],t,n);null!==o&&r.push(o)}return r}):navigator.webkitGetUserMedia?(attachMediaStream=function(e,t){return webrtcDetectedVersion>=43?e.srcObject=t:void 0!==e.src&&(e.src=URL.createObjectURL(t)),e},reattachMediaStream=function(e,t){return webrtcDetectedVersion>=43?e.srcObject=t.srcObject:e.src=t.src,e},createIceServer=function(e,t,n){var r=null,i=e.split(":");return 0===i[0].indexOf("stun")?r={url:e}:0===i[0].indexOf("turn")&&(r={url:e,credential:n,username:t}),r},createIceServers=function(e,t,n){var r=[];if(webrtcDetectedVersion>=34)r={urls:e,credential:n,username:t};else for(i=0;i<e.length;i++){var o=createIceServer(e[i],t,n);null!==o&&r.push(o)}return r}):navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)&&(attachMediaStream=function(e,t){return e.srcObject=t,e},reattachMediaStream=function(e,t){return e.srcObject=t.srcObject,e}),attachMediaStream_base=attachMediaStream,"opera"===webrtcDetectedBrowser&&(attachMediaStream_base=function(e,t){webrtcDetectedVersion>38?e.srcObject=t:void 0!==e.src&&(e.src=URL.createObjectURL(t))}),attachMediaStream=function(e,t){return"chrome"!==webrtcDetectedBrowser&&"opera"!==webrtcDetectedBrowser||t?attachMediaStream_base(e,t):e.src="",e},reattachMediaStream_base=reattachMediaStream,reattachMediaStream=function(e,t){return reattachMediaStream_base(e,t),e},window.attachMediaStream=attachMediaStream,window.reattachMediaStream=reattachMediaStream,window.getUserMedia=function(e,t,n){navigator.getUserMedia(e,t,n)},o.attachMediaStream=attachMediaStream,o.reattachMediaStream=reattachMediaStream,o.getUserMedia=getUserMedia,"undefined"==typeof Promise&&(requestUserMedia=null),o.maybeThroughWebRTCReady()),void 0!==t&&(e.exports=o),e.exports=o},function(e,t){e.exports=function e(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,r=this.length;n<r;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!e.apply(this[n],[t[n]]))return!1}else if(this[n]!=t[n])return!1;return!0}},function(e,t,n){t.Interop=n(208)},function(e,t,n){"use strict";function r(){this.cache={}}var i=n(209),o=n(206);e.exports=r,r.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var t=i.parse(this.cache.answer);if(t&&t.media&&Array.isArray(t.media))for(var n=0;n<t.media.length;n++)if(t.media[n].type==e&&(!t.media[n].direction||"sendrecv"===t.media[n].direction||"sendonly"===t.media[n].direction))return n;return null},r.prototype.toPlanB=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length<=3&&n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Unified Plan."),e;for(var r=e.sdp,o=!1,a=0;a<n.media.length;a++){n.media[a].rtp.forEach(function(e){if("NULL"===e.codec){o=!0;var n=i.parse(t.cache.offer);e.codec=n.media[a].rtp[0].codec}})}o&&(r=i.write(n)),this.cache[e.type]=r;var s=n.media;n.media=[];var c={},u=[];s.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");if("application"===e.type)return n.media.push(e),void u.push(e.mid);void 0===c[e.type]&&(c[e.type]=e),"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){"object"!=typeof c[e.type].sources&&(c[e.type].sources={}),c[e.type].sources[t]=e.sources[t],void 0!==e.msid&&(c[e.type].sources[t].msid=e.msid)}),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(void 0!==c[e.type].ssrcGroups&&Array.isArray(c[e.type].ssrcGroups)||(c[e.type].ssrcGroups=[]),c[e.type].ssrcGroups=c[e.type].ssrcGroups.concat(e.ssrcGroups)),c[e.type]===e&&(e.candidates=s[0].candidates,e.iceUfrag=s[0].iceUfrag,e.icePwd=s[0].icePwd,e.fingerprint=s[0].fingerprint,e.mid=e.type,delete e.bundleOnly,delete e.msid,u.push(e.type),n.media.push(e))}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=u.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var d=i.write(n);return new RTCSessionDescription({type:e.type,sdp:d})},r.prototype.toUnifiedPlan=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||!n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Plan B."),e;var r=[];n.media.forEach(function(e){r.push(e.mid)});var a=!1;if(void 0!==n.groups&&Array.isArray(n.groups)&&(a=n.groups.every(function(e){return"BUNDLE"!==e.type||o.apply(e.mids.sort(),[r.sort()])})),!a)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");var s;void 0!==this.cache[e.type]&&(s=i.parse(this.cache[e.type]));var c={audio:{},video:{}},u={};if(n.media.forEach(function(t){if(("string"!=typeof t.rtcpMux||"rtcp-mux"!==t.rtcpMux)&&"inactive"!==t.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"===t.type)return void(u[t.mid]=t);var n=t.sources,r=t.ssrcGroups,i=t.candidates,o=t.iceUfrag,a=t.icePwd,d=t.fingerprint,l=t.port;delete t.sources,delete t.ssrcGroups,delete t.candidates,delete t.iceUfrag,delete t.icePwd,delete t.fingerprint,delete t.port,delete t.mid;var f={};void 0!==r&&Array.isArray(r)&&r.forEach(function(e){"SIM"!==e.semantics&&void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(t){void 0===f[t]&&(f[t]=[]),f[t].push(e)})});var p={};"object"==typeof n&&Object.keys(n).forEach(function(r){var h;if("offer"===e.type&&!n[r].msid)return void(c[t.type][r]=n[r]);if(void 0!==f[r]&&Array.isArray(f[r])&&f[r].some(function(e){return e.ssrcs.some(function(e){if("object"==typeof p[e])return h=p[e],!0})}),"object"==typeof h)h.sources[r]=n[r],delete n[r].msid;else{if(h=Object.create(t),p[r]=h,void 0!==n[r].msid&&(h.msid=n[r].msid,h.direction="sendrecv",delete n[r].msid),h.sources={},h.sources[r]=n[r],h.ssrcGroups=f[r],void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach(function(e){"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){t===r&&(h.mid=e.mid)})}),void 0===h.mid){if("answer"===e.type)throw new Error("An unmapped SSRC was found.");h.mid=[t.type,"-",r].join("")}h.candidates=i,h.iceUfrag=o,h.icePwd=a,h.fingerprint=d,h.port=l,u[h.mid]=h}})}),n.media=[],r=[],"answer"===e.type)for(var d=0;d<s.media.length;d++){var l=s.media[d];void 0===u[l.mid]&&(delete l.msid,delete l.sources,delete l.ssrcGroups,l.direction&&"sendrecv"!==l.direction?"sendonly"===l.direction&&(l.direction="inactive"):l.direction="recvonly"),n.media.push(l),"string"==typeof l.mid&&r.push(l.mid)}else void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach(function(e){r.push(e.mid),void 0!==u[e.mid]?n.media.push(u[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="recvonly"),e.direction&&"sendonly"!==e.direction||(e.direction="inactive"),n.media.push(e))}),Object.keys(u).forEach(function(e){-1===r.indexOf(e)&&(r.push(e),"recvonly"===u[e].direction?n.media.some(function(t){if(("sendrecv"===t.direction||"sendonly"===t.direction)&&t.type===u[e].type)return Object.keys(u[e].sources).forEach(function(n){t.sources[n]=u[e].sources[n]}),!0}):n.media.push(u[e]))});["audio","video"].forEach(function(e){if(n&&n.media&&Array.isArray(n.media)){var r=null;if(Object.keys(c[e]).length>0&&null===(r=t.getFirstSendingIndexFromAnswer(e)))for(var i=0;i<n.media.length;i++)if(n.media[i].type===e){r=i;break}if(r&&n.media.length>r){var o=n.media[r];Object.keys(c[e]).forEach(function(t){o.sources&&o.sources[t]&&console.warn("Replacing an existing SSRC."),o.sources||(o.sources={}),o.sources[t]=c[e][t]})}}}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=r.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var f=i.write(n);return this.cache[e.type]=f,new RTCSessionDescription({type:e.type,sdp:f})}},function(e,t,n){var r=n(210);t.write=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){void 0!==e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach(function(t){var n=e.sources[t];Object.keys(n).forEach(function(r){e.ssrcs.push({id:t,attribute:r,value:n[r]})})}),delete e.sources),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),void 0!==e&&void 0!==e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){void 0!==e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),r.write(e,t)},t.parse=function(e){var t=r.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach(function(t){e.sources[t.id]||(e.sources[t.id]={}),e.sources[t.id][t.attribute]=t.value}),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),void 0!==t&&void 0!==t.groups&&Array.isArray(t.groups)&&t.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),t}},function(e,t,n){var r=n(211),i=n(212);t.write=i,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))},o=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:r?t[e.name]:t;i(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},a=n(175),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(i))return o(c,r,i)}}),t.media=n,t};var c=function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=r(n[1])),e};t.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(c,{})},t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t}},function(e,t,n){var r=n(175),i=function(e){var t=1,n=arguments,r=n.length;return e.replace(/%[sdv%]/g,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},o=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,o=[e+"="+r];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];t.name?o.push(n[t.name][s]):o.push(n[t.names[a]])}else o.push(n[t.name]);return i.apply(null,o)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||a,i=t.innerOrder||s,c=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(o(t,n,e))})})}),e.media.forEach(function(e){c.push(o("m",r.m[0],e)),i.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(o(t,n,e))})})})}),c.join("\r\n")+"\r\n"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){function e(e){window.chrome.pageAction.setTitle({tabId:e.id,title:"Start sharing this tab"}),window.chrome.pageAction.setIcon({tabId:e.id,path:"icon128.png"})}function t(e){window.chrome.pageAction.setTitle({tabId:e.id,title:"Stop sharing this tab"}),window.chrome.pageAction.setIcon({tabId:e.id,path:"icon128_off.png"})}function r(e){var n=e.url?e.url.match(l)[1]:null;u={id:e.id,domain:n},t(e),s.default.debug(p,"activated tab",e),window.chrome.tabCapture.capture({video:!0,videoConstraints:{mandatory:{maxWidth:e.width,maxHeight:e.height,maxFrameRate:5}}},function(e){if(!e)return i();u?(u.stream=e,s.default.debug(p,"got stream",e),b("haveStream")):e.getVideoTracks()[0].stop()}),window.chrome.tabs.executeScript(e.id,{file:"window-sizer.js"},function(){window.chrome.tabs.connect(e.id).onMessage.addListener(function(e){b(e.type,e.content)})})}function i(){u&&(s.default.debug(p,"inactivating",u),e(u),u.stream&&(b("lostStream"),d&&(s.default.debug(p,"had ongoing call, ending"),y()),u.stream.getVideoTracks()[0].stop(),u.stream.active&&s.default.error("failed to stop media stream:",u.stream),u.stream=null),u=null)}function h(e){if(s.default.debug(p,"iceServers: ",o()(e,0,4)),!u)return s.default.warning(p,"tried to start call without active tab");if(!u.stream)return s.default.warning(p,"tried to start call without active stream");d&&y(),d=_({iceServers:e,iceCandidateFilter:function(e){return"relay"===e.type}}),s.default.debug(p,"adding stream",u.stream);var t=d;d.addStream(u.stream),d._createOffer().then(function(e){if(t===d)return d._setLocalDescription(e)}).catch(function(e){throw new Error(e)}),d.waitForInitialIce().then(function(){t===d&&b("offer",d.localDescription)}).catch(function(e){throw new Error(e)});var n=0;d.addEventListener("iceconnectionstatechange",function(){if(d){var e=d.iceConnectionState;s.default.debug(p,"connectionState: ",e),"failed"===e&&w(),"disconnected"===e?n=setTimeout(function(){w(),n=0},5e3):(clearTimeout(n),n=0)}}),d.addEventListener("signalingstatechange",function(){d&&(s.default.debug(p,"changed signaling state:",d.signalingState),"closed"===d.signalingState&&w())})}function m(e){d&&e&&(e=new RTCIceCandidate(e),d.addIceCandidate(e))}function v(e){d&&!d.hasAnswer&&(e=new RTCSessionDescription(e),d._setRemoteDescription(e).then(function(){d.hasAnswer=!0,s.default.debug(p,"answer",e)}).catch(function(e){throw new Error(e)}))}function g(e,t){u&&"number"==typeof e&&"number"==typeof t&&window.chrome.tabs.executeScript(u.id,{code:"window.scrollBy("+e+", "+t+")",allFrames:!0})}function y(){try{d&&d.close()}catch(e){s.default.error("failed to close peer connection:",e)}d=null}function w(){y(),i()}function b(e,t){if(!c)return s.default.warning(p,"could not send "+e+", no active port");c.postMessage({type:e,content:t})}function _(e){e=e||{};var StatsFormatter=n(201).default,t=e.rtcpMuxPolicy||"require",r=e.bundlePolicy||"max-bundle",i=e.iceServers,o=e.iceCandidateFilter,s=e.iceTransportPolicy;"string"==typeof i?i=[i]:Array.isArray(i)||(i=[]),i=i.map(function(e){return"string"==typeof e?{urls:e}:e}),StatsFormatter.handleStats=function(){return null};var c={iceServers:i,rtcpMuxPolicy:t,bundlePolicy:r,iceTransportPolicy:s};return new a.a(c,StatsFormatter,o)}window.chrome.runtime.onInstalled.addListener(function(e){window.chrome.declarativeContent.onPageChanged.removeRules()}),window.chrome.runtime.onMessageExternal.addListener(function(e,t,n){var r=e&&e.type;if(s.default.debug(p,"got external message:",e),"version"===r){var i=window.chrome.runtime.getManifest().version;n({version:i})}else if("uninstall"===r)window.chrome.management.uninstallSelf();else if("requestMediaSourceId"===r){var o=e.sourceTypes||f;window.chrome.desktopCapture.chooseDesktopMedia(o,t.tab,function(e){n({sourceId:e||null})})}return!0}),window.chrome.runtime.onConnectExternal.addListener(function(e){var t=null;e.name&&e.name.startsWith("options:")&&(t=JSON.parse(e.name.slice("options:".length))),s.default.debug(p,"external connection:",e.sender.url.slice(0,50));var n=c;if(c=e,n&&(s.default.debug(p,"disconnecting old port to:",n.sender.url.slice(0,50)),w(),n.disconnect()),s.default.debug(p,"portOptions: ",o()(t,0,4)),!t||t.showOwnTabAction){var r=e.sender.tab.id;window.chrome.pageAction.show(r)}if(t&&t.pageActionConditions){var a=t.pageActionConditions.map(function(e){return new window.chrome.declarativeContent.PageStateMatcher(e)}),d=[new window.chrome.declarativeContent.ShowPageAction];s.default.debug(p,"removing old page actions rules and installing new"),window.chrome.declarativeContent.onPageChanged.removeRules(void 0,function(){window.chrome.declarativeContent.onPageChanged.addRules([{conditions:a,actions:d}])})}u&&u.stream&&b("haveStream"),e.onMessage.addListener(function(e){"startCall"===e.type?h(e.content):"candidate"===e.type?m(e.content):"answer"===e.type?v(e.content):"endCall"===e.type?w():"scrollBy"===e.type&&g(e.content.x,e.content.y)}),e.onDisconnect.addListener(function(){s.default.debug(p,"port disconnected: ",e.sender.url.slice(0,50)),t&&!t.showOwnTabAction||window.chrome.pageAction.hide(r),c===e&&(c=null),w(),i(),c||(s.default.debug(p,"removing old page actions rules after disconnect"),window.chrome.declarativeContent.onPageChanged.removeRules())})}),window.chrome.pageAction.onClicked.addListener(function(e){u&&e.id===u.id?i():(i(),r(e))}),window.chrome.tabs.onRemoved.addListener(function(e){u&&e===u.id&&i()}),window.chrome.tabs.onUpdated.addListener(function(e,n,r){if(u&&e===u.id&&"loading"===n.status)if(u&&e===u.id&&t(r),r.url){s.default.debug(p,"active tab navigating to "+r.url+" from domain "+u.domain);var o=r.url.match(l)[1];o!==u.domain&&(s.default.debug(p,"active tab left domain, inactivating"),i())}else s.default.debug(p,"active tab left navigated to unknown domain, inactivating"),i()})}t.a=r;var i=n(48),o=n.n(i),a=n(162),s=n(3),c=null,u=null,d=null,l=/^[a-z]+:\/\/(?:[^@]+@)?([^:\/]+)/i,f=["screen","window"],p="tab-sharing"},,,,function(e,t,n){"use strict";function r(){function e(e){e({extensionId:window.chrome.runtime.id,message:"extensionIsInstalled"})}function t(e,t,r){var i=e.message.sourceTypes||n;window.chrome.desktopCapture.chooseDesktopMedia(i,t.tab,function(e){r({extensionId:window.chrome.runtime.id,message:"chromeMediaSourceId",content:e||null})})}var n=["screen","window"];window.chrome.runtime.onMessageExternal.addListener(function(n,r,i){if(o.default.debug(a,"got external message:",n),"version"===n.message){i({version:window.chrome.runtime.getManifest().version})}else"uninstall"===n.message?window.chrome.management.uninstallSelf():"getInstalledStatus"===n.message?e(i):"requestChromeMediaSourceId"===n.message&&t(n,r,i);return!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.startScreenSharing=r;var i=n(253);n.d(t,"startTabSharing",function(){return i.a});var o=n(3),a="chrome-extension"}])});